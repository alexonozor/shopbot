"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[3617],{3617:(z,_,n)=>{n.d(_,{P:()=>Y});var t=n(4020),r=n(9417),x=n(5085),p=n(177),F=n(9297),u=n(8498),v=n(6924),j=n(9735),a=n(5351),I=n(2390),G=n(980),h=n(3902),E=n(6998),O=n(7575),g=n(9631),S=n(7506);function R(i,c){if(1&i&&(t.j41(0,"mat-list-option",9),t.EFF(1),t.k0s()),2&i){const o=c.$implicit,e=t.XpG(3);t.Y8G("value",o)("selected",e.isSelected(o)),t.R7$(),t.JRh(o.name)}}function M(i,c){if(1&i){const o=t.RV6();t.j41(0,"mat-selection-list",8,0),t.bIt("selectionChange",function(s){t.eBV(o);const l=t.XpG(2);return t.Njj(l.onSelection(s))}),t.Z7z(2,R,2,3,"mat-list-option",9,t.fX1),t.k0s()}if(2&i){const o=t.XpG();t.R7$(2),t.Dyx(o)}}function T(i,c){if(1&i){const o=t.RV6();t.j41(0,"section",7)(1,"div",10),t.nrm(2,"img",11),t.j41(3,"div",12)(4,"h2",13),t.EFF(5,"It\u2019s a bit empty here"),t.k0s(),t.j41(6,"p",14),t.EFF(7,"Group options are ways to customize your product in variants"),t.k0s(),t.j41(8,"a",15),t.bIt("click",function(){t.eBV(o);const s=t.XpG(2);return t.Njj(s.addGroupOption())}),t.EFF(9,"Add First Group Option"),t.k0s()()()()}}function X(i,c){1&i&&t.DNE(0,M,4,0,"mat-selection-list")(1,T,10,0,"section",7),2&i&&t.vxM(c.length>0?0:1)}function N(i,c){1&i&&t.nrm(0,"mat-progress-bar",3)}let $=(()=>{class i{constructor(o,e,s,l,d,m,b){this.productService=o,this._matDialog=e,this.router=s,this.route=l,this._location=d,this.dialogRef=m,this.data=b,this.menus=[],this.options=[],this.isLoading=!1,this.isSubmitting=!1}ngOnInit(){this.loadProducts()}loadProducts(){this.isLoading=!0,this.groupOptions$=this.productService.getStoreGroupOptionItems(this.data.storeId).pipe((0,G.j)(()=>this.isLoading=!1))}updateEnabled(o,e){this.productService.updateStoreGroupOption({enabled:o.checked},e).subscribe()}saveGroupOptions(){this.dialogRef.close(this.options)}onSelection(o){this.options=o.source._value}isSelected(o){return this.data.selectedOptions.some(e=>e._id===o._id)}addGroupOption(){this._matDialog.open(E.E,{disableClose:!1,data:{storeId:this.data.storeId,pageType:"new"}}).afterClosed().subscribe(e=>{e&&this.loadProducts()})}goBack(){this._location.back()}static{this.\u0275fac=function(e){return new(e||i)(t.rXU(S.g),t.rXU(a.bZ),t.rXU(u.Ix),t.rXU(u.nX),t.rXU(p.aZ),t.rXU(a.CP),t.rXU(a.Vh))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-store-options-select"]],features:[t.Jv_([x.b])],decls:11,vars:3,consts:[["option",""],["mat-dialog-title",""],[1,"w-full"],["mode","indeterminate"],["align","center"],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"click"],[1,"py-4","bg-neutral-50","overflow-hidden"],[3,"selectionChange"],[3,"value","selected"],[1,"container","px-4","mx-auto"],["src","dashy-assets/images/empty.png","alt","",1,"mx-auto"],[1,"max-w-md","mx-auto","text-center"],[1,"font-heading","mb-3","text-2xl","font-semibold"],[1,"mb-7","text-neutral-500"],[1,"inline-flex","px-6","py-2.5","cursor-pointer","text-sm","bg-primary-700","text-neutral-50","font-medium","rounded-lg","transition","duration-300",3,"click"]],template:function(e,s){if(1&e&&(t.j41(0,"h2",1),t.EFF(1,"Add option items"),t.k0s(),t.j41(2,"mat-dialog-content",2),t.DNE(3,X,2,1),t.nI1(4,"async"),t.DNE(5,N,1,0,"mat-progress-bar",3),t.k0s(),t.j41(6,"mat-dialog-actions",4)(7,"button",5),t.EFF(8,"Cancel"),t.k0s(),t.j41(9,"button",6),t.bIt("click",function(){return s.saveGroupOptions()}),t.EFF(10,"Confirm"),t.k0s()()),2&e){let l;t.R7$(3),t.vxM((l=t.bMT(4,1,s.groupOptions$))?3:5,l)}},dependencies:[p.MD,p.Jj,v.YF,r.YN,a.hM,a.tx,a.BI,a.E7,a.Yi,h.Fg,h.p6,h.oh,O.PO,O.HM,g.fS],styles:[".example-list[_ngcontent-%COMP%]{width:100%;border:solid 1px #ccc;min-height:60px;display:block;background:#fff;border-radius:4px;overflow:hidden}.example-box[_ngcontent-%COMP%]{padding:20px 10px;border-bottom:solid 1px #ccc;color:#000000de;display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:move;background:#fff;font-size:14px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.example-custom-placeholder[_ngcontent-%COMP%]{background:#ccc;border:dotted 3px #999;min-height:60px;transition:transform .25s cubic-bezier(0,0,.2,1)}"]})}}return i})();var k=n(2798),f=n(8834),w=n(5416),C=n(2920),y=n(636),A=n(3);const P=()=>({name:"Active",value:!0}),U=()=>({name:"Draft",value:!1}),V=(i,c)=>[i,c];function D(i,c){if(1&i&&(t.j41(0,"mat-option",18),t.EFF(1),t.k0s()),2&i){const o=c.$implicit;t.Y8G("value",o.value),t.R7$(),t.SpI(" ",o.name," ")}}function L(i,c){if(1&i){const o=t.RV6();t.j41(0,"tr",13)(1,"td",19),t.EFF(2),t.k0s(),t.j41(3,"td",20),t.EFF(4),t.nI1(5,"currency"),t.k0s(),t.j41(6,"td",20),t.EFF(7),t.k0s(),t.j41(8,"td",20)(9,"a",21),t.bIt("click",function(){const s=t.eBV(o),l=s.$implicit,d=s.$index,m=t.XpG();return t.Njj(m.removeOption(d,l._id))}),t.EFF(10,"Remove"),t.k0s()()()}if(2&i){const o=c.$implicit;t.R7$(2),t.SpI(" ",o.name," "),t.R7$(2),t.SpI(" ",t.i5U(5,3,o.price,o.store.currency)," "),t.R7$(3),t.SpI(" ",o.inStock?"Yes":"No"," ")}}let Y=(()=>{class i{constructor(o,e,s,l,d,m,b,B){this.productsService=o,this._formBuilder=e,this._matSnackBar=s,this.menusService=l,this.route=d,this._matDialog=m,this.dialogRef=b,this.data=B,this.isLoading=!1,this.categories=[],this.options=[],this.settingService=(0,t.WQX)(j.h),this.pageType=this.data.pageType,this.storeId=this.data.storeId}ngOnInit(){"new"==this.pageType?this.groupOptionsForm=this.newOptionsGroup():(this.option=this.data.option,this.options=this.data.option.options,console.log(this.options),this.groupOptionsForm=this.newOptionsGroup(this.option))}newOptionsGroup(o){return this._formBuilder.group({_id:[o?o._id:""],name:[o?o.name:"",[r.k0.required,r.k0.minLength(2)]],enabled:[!(!o||!o.enabled),r.k0.required],atLeast:[o?o.atLeast:0,r.k0.required],atMost:[o?o.atMost:0,r.k0.required],store:[this.storeId]})}addOptionItems(){this._matDialog.open($,{disableClose:!1,data:{storeId:this.data.storeId,selectedOptions:this.options}}).afterClosed().subscribe(e=>{e&&(this.options=e)})}saveGroupOptions(){const o=this.groupOptionsForm.getRawValue();o.options=this.options,this.isLoading=!0,this.groupOptionsForm.invalid?alert("Some fields are required."):"new"!==this.pageType?this.productsService.updateStoreGroupOption(o,this.groupOptionsForm.getRawValue()._id).subscribe(e=>{this.dialogRef.close(this.groupOptionsForm.getRawValue()),this.isLoading=!1}):(delete this.groupOptionsForm.getRawValue()._id,this.productsService.saveStoreGroupOption(o).subscribe(e=>{this.dialogRef.close(this.groupOptionsForm.getRawValue()),this.isLoading=!1}))}onSelection(o){this.options=o.source._value}isSelected(o){return this.options.some(e=>e._id===o._id)}removeOption(o,e){this.options.splice(o,1)}static{this.\u0275fac=function(e){return new(e||i)(t.rXU(S.g),t.rXU(r.ok),t.rXU(w.UG),t.rXU(F.$),t.rXU(u.nX),t.rXU(a.bZ),t.rXU(a.CP),t.rXU(a.Vh))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["store-group-options-new"]],features:[t.Jv_([x.b,F.$,I.g])],decls:43,vars:9,consts:[["mat-dialog-title",""],[1,"w-full"],["fxLayout","column",1,"product",3,"formGroup"],["fxLayout","column","fxLayoutAlign","space-around stretch",1,"tab-content"],["appearance","fill","floatLabel","always",1,"w-100"],["matInput","","placeholder","Name","formControlName","name","required",""],["matInput","","placeholder","At least","type","number","formControlName","atLeast","required",""],["matInput","","placeholder","At least","type","number","formControlName","atMost","required",""],["formControlName","enabled","required",""],[3,"value",4,"ngFor","ngForOf"],[1,"w-full","text-sm","text-left","rtl:text-right","text-gray-500"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50"],["scope","col",1,"px-6","py-3"],[1,"bg-white","border-b"],["mat-stroked-button","","color","primary",3,"click"],["align","center"],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"click","disabled"],[3,"value"],[1,"px-6","py-4","text-base","font-semibold"],[1,"px-6","py-4"],[1,"font-medium","cursor-pointer","text-red-600","hover:underline",3,"click"]],template:function(e,s){1&e&&(t.j41(0,"h2",0),t.EFF(1,"Add Option Group"),t.k0s(),t.j41(2,"mat-dialog-content",1)(3,"form",2)(4,"div",3)(5,"mat-form-field",4)(6,"mat-label"),t.EFF(7,"Name"),t.k0s(),t.nrm(8,"input",5),t.k0s(),t.j41(9,"mat-form-field",4)(10,"mat-label"),t.EFF(11,"At least"),t.k0s(),t.nrm(12,"input",6),t.k0s(),t.j41(13,"mat-form-field",4)(14,"mat-label"),t.EFF(15,"At Most"),t.k0s(),t.nrm(16,"input",7),t.k0s(),t.j41(17,"mat-form-field",4)(18,"mat-label"),t.EFF(19,"Status"),t.k0s(),t.j41(20,"mat-select",8),t.DNE(21,D,2,2,"mat-option",9),t.k0s()(),t.j41(22,"table",10)(23,"thead",11)(24,"tr")(25,"th",12),t.EFF(26," Name "),t.k0s(),t.j41(27,"th",12),t.EFF(28," Price "),t.k0s(),t.j41(29,"th",12),t.EFF(30," In stock "),t.k0s(),t.j41(31,"th",12),t.EFF(32," Action "),t.k0s()()(),t.j41(33,"tbody"),t.Z7z(34,L,11,6,"tr",13,t.Vm6),t.k0s()(),t.j41(36,"a",14),t.bIt("click",function(){return s.addOptionItems()}),t.EFF(37,"Add Option Items"),t.k0s()()()(),t.j41(38,"mat-dialog-actions",15)(39,"button",16),t.EFF(40,"Cancel"),t.k0s(),t.j41(41,"button",17),t.bIt("click",function(){return s.saveGroupOptions()}),t.EFF(42),t.k0s()()),2&e&&(t.R7$(3),t.Y8G("formGroup",s.groupOptionsForm),t.R7$(18),t.Y8G("ngForOf",t.l_i(6,V,t.lJ4(4,P),t.lJ4(5,U))),t.R7$(13),t.Dyx(s.options),t.R7$(7),t.Y8G("disabled",s.groupOptionsForm.invalid),t.R7$(),t.JRh(s.isLoading?"Checking..":"Save"))},dependencies:[p.MD,p.Sq,p.oe,v.YF,C.DJ,C.sA,u.iI,r.X1,r.qT,r.me,r.Q0,r.BC,r.cb,r.YS,r.j4,r.JD,r.YN,k.Ve,y.rl,y.nJ,k.VO,A.wT,a.hM,a.tx,a.BI,a.E7,a.Yi,g.fS,g.fg,f.Hl,f.It,f.$z],styles:["MDTextField[_ngcontent-%COMP%]{error-color:red;ripple-color:#13A549;stroke-color:#13A549;stroke-inactive-color:#13A549;floating-color:#13A549;floating-inactive-color:#13A549}MDTextView[_ngcontent-%COMP%]{error-color:red;ripple-color:#13A549;stroke-color:#13A549;stroke-inactive-color:#13A549;floating-color:#13A549;floating-inactive-color:#13A549}Switch[_ngcontent-%COMP%]:checked{color:#13a549;margin:0;padding:0;background:#ccc}Switch[_ngcontent-%COMP%]{color:#000;margin:0;padding:0;background:#ccc}"]})}}return i})()}}]);