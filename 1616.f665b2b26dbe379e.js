"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[1616],{1616:(S,C,n)=>{n.r(C),n.d(C,{CategoriesModule:()=>ce});var u=n(177),g=n(8498),e=n(3953);let v=(()=>{class a{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||a)};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-categories"]],decls:1,vars:0,template:function(i,o){1&i&&e.nrm(0,"router-outlet")},dependencies:[g.n3]})}return a})();var m=n(5024),R=n(6440),s=n(9159),h=n(1269),y=n(1846),D=n(5351),f=n(8834),G=n(9213),T=n(2765),k=n(9115),p=n(2920);const V=()=>[15,30,60],w=()=>["../","new"],A=a=>["../",a,"details"];function N(a,c){if(1&a){const t=e.RV6();e.j41(0,"span",2)(1,"button",19),e.EFF(2),e.k0s(),e.j41(3,"button",20),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.deleteSelected())}),e.j41(4,"mat-icon",18),e.EFF(5,"delete"),e.k0s(),e.EFF(6," Delete Selected Categories "),e.k0s()()}if(2&a){const t=e.XpG();e.R7$(2),e.SpI("",t.selection.selected.length," Selected")}}function O(a,c){if(1&a){const t=e.RV6();e.j41(0,"th",21)(1,"mat-checkbox",22),e.bIt("change",function(o){e.eBV(t);const l=e.XpG();return e.Njj(o?l.toggleAllRows():null)}),e.k0s()()}if(2&a){const t=e.XpG();e.R7$(),e.Y8G("checked",t.selection.hasValue()&&t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected())("aria-label",t.checkboxLabel())}}function B(a,c){if(1&a){const t=e.RV6();e.j41(0,"td",23)(1,"mat-checkbox",24),e.bIt("click",function(o){return e.eBV(t),e.Njj(o.stopPropagation())})("change",function(o){const l=e.eBV(t).$implicit,d=e.XpG();return e.Njj(o?d.selection.toggle(l):null)}),e.k0s()()}if(2&a){const t=c.$implicit,i=e.XpG();e.R7$(),e.Y8G("checked",i.selection.isSelected(t))("aria-label",i.checkboxLabel(t))}}function M(a,c){1&a&&(e.j41(0,"th",21),e.EFF(1,"Name"),e.k0s())}function Y(a,c){if(1&a&&(e.j41(0,"td",23),e.EFF(1),e.k0s()),2&a){const t=c.$implicit;e.R7$(),e.JRh(t.name)}}function X(a,c){1&a&&(e.j41(0,"th",21),e.EFF(1,"Status"),e.k0s())}function U(a,c){if(1&a&&(e.j41(0,"td",23),e.EFF(1),e.k0s()),2&a){const t=c.$implicit;e.R7$(),e.JRh(t.status)}}function Z(a,c){1&a&&(e.j41(0,"th",21),e.EFF(1,"Created At"),e.k0s())}function J(a,c){if(1&a&&(e.j41(0,"td",23),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&a){const t=c.$implicit;e.R7$(),e.JRh(e.i5U(2,1,t.createdAt,"short"))}}function z(a,c){1&a&&(e.j41(0,"th",21),e.EFF(1,"Actions"),e.k0s())}function K(a,c){if(1&a){const t=e.RV6();e.j41(0,"td",23)(1,"button",25)(2,"mat-icon"),e.EFF(3,"more_vert"),e.k0s()(),e.j41(4,"mat-menu",null,0)(6,"button",26),e.bIt("click",function(){const o=e.eBV(t),l=o.$implicit,d=o.index,me=e.XpG();return e.Njj(me.deleteCategories(l._id,d))}),e.j41(7,"mat-icon",27),e.EFF(8,"delete"),e.k0s(),e.j41(9,"span"),e.EFF(10,"Delete"),e.k0s()(),e.j41(11,"button",28)(12,"mat-icon",27),e.EFF(13,"edit"),e.k0s(),e.j41(14,"span"),e.EFF(15,"Edit"),e.k0s()()()()}if(2&a){const t=c.$implicit,i=e.sdS(5);e.R7$(),e.Y8G("matMenuTriggerFor",i),e.R7$(10),e.Y8G("routerLink",e.eq3(2,A,t._id))}}function P(a,c){1&a&&e.nrm(0,"tr",29)}function H(a,c){1&a&&e.nrm(0,"tr",30)}let W=(()=>{class a{constructor(t,i,o){this.route=t,this.categoriesService=i,this._matDialog=o,this.displayedColumns=["select","name","status","createdAt","actions"],this.dataSource=new s.I6([]),this.selection=new m.CB(!0,[])}ngAfterViewInit(){this.dataSource.paginator=this.paginator}ngOnInit(){this.dataSource=new s.I6(this.route.snapshot.data.categories)}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}deleteSelected(){this.confirmDialogRef=this._matDialog.open(h.Y,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete categories?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete these categories?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(t=>{t&&this.selection.selected.forEach((i,o)=>{this.dataSource.data.splice(o,1),this.dataSource=new s.I6(this.dataSource.data),this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.categoriesService.deleteCategory(i._id).subscribe()})})}checkboxLabel(t){return t?`${this.selection.isSelected(t)?"deselect":"select"} row ${t.position+1}`:(this.isAllSelected()?"deselect":"select")+" all"}deleteCategories(t,i){this.confirmDialogRef=this._matDialog.open(h.Y,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Categories?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete this categories?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(o=>{o&&(this.dataSource.data.splice(i,1),this.dataSource=new s.I6(this.dataSource.data),this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.categoriesService.deleteCategory(t).subscribe())})}static#e=this.\u0275fac=function(i){return new(i||a)(e.rXU(g.nX),e.rXU(y.w),e.rXU(D.bZ))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-list-categories"]],viewQuery:function(i,o){if(1&i&&e.GBs(R.iy,5),2&i){let l;e.mGM(l=e.lsd())&&(o.paginator=l.first)}},decls:30,vars:8,consts:[["menu","matMenu"],["fxLayout","row","fxLayoutGap","10px","fxLayoutAlign","start center",1,"card","bg-white","w-full","mat-elevation-z2","px-2","py-2"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"text-lg","font-thin"],["class","text-lg font-thin","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",4,"ngIf"],[1,"mat-elevation-z8"],["mat-table","",1,"w-full",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","status"],["matColumnDef","createdAt"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["fxLayout","row","fxLayoutAlign","end center",1,"m-5"],["mat-fab","","color","primary",1,"m-10",3,"routerLink"],[1,"mat-18"],["mat-button",""],["mat-stroked-button","","color","warn",3,"click"],["mat-header-cell",""],[3,"change","checked","indeterminate","aria-label"],["mat-cell",""],[3,"click","change","checked","aria-label"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],[1,"material-icons-outlined"],["mat-menu-item","",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(i,o){1&i&&(e.j41(0,"div")(1,"div",1)(2,"span",2)(3,"span"),e.EFF(4,"Category"),e.k0s()(),e.DNE(5,N,7,1,"span",3),e.k0s(),e.j41(6,"div",4)(7,"table",5),e.qex(8,6),e.DNE(9,O,2,3,"th",7)(10,B,2,2,"td",8),e.bVm(),e.qex(11,9),e.DNE(12,M,2,0,"th",7)(13,Y,2,1,"td",8),e.bVm(),e.qex(14,10),e.DNE(15,X,2,0,"th",7)(16,U,2,1,"td",8),e.bVm(),e.qex(17,11),e.DNE(18,Z,2,0,"th",7)(19,J,3,4,"td",8),e.bVm(),e.qex(20,12),e.DNE(21,z,2,0,"th",7)(22,K,16,4,"td",8),e.bVm(),e.DNE(23,P,1,0,"tr",13)(24,H,1,0,"tr",14),e.k0s(),e.nrm(25,"mat-paginator",15),e.k0s(),e.j41(26,"div",16)(27,"button",17)(28,"mat-icon",18),e.EFF(29,"add"),e.k0s()()()()),2&i&&(e.R7$(5),e.Y8G("ngIf",o.selection.selected.length),e.R7$(2),e.Y8G("dataSource",o.dataSource),e.R7$(16),e.Y8G("matHeaderRowDef",o.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",o.displayedColumns),e.R7$(),e.Y8G("pageSizeOptions",e.lJ4(6,V)),e.R7$(2),e.Y8G("routerLink",e.lJ4(7,w)))},dependencies:[u.bT,g.Wk,f.$z,f.iY,f.Sr,G.An,R.iy,s.Zl,s.tL,s.ji,s.cC,s.YV,s.iL,s.KS,s.$R,s.YZ,s.NB,T.So,k.kk,k.fb,k.Cp,p.DJ,p.BO,p.sA,u.vh]})}return a})();var r=n(9417),E=n(2264),L=n(6600),F=n(3719),j=n(9631),_=n(2798),$=n(450),x=n(801);function Q(a,c){if(1&a&&(e.j41(0,"span",14),e.EFF(1),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.Lme(" (+",((null==t.categoryForm.value.countries?null:t.categoryForm.value.countries.length)||0)-1," ",2===(null==t.categoryForm.value.countries?null:t.categoryForm.value.countries.length)?"other":"others",") ")}}function q(a,c){if(1&a&&(e.j41(0,"mat-option",15),e.EFF(1),e.k0s()),2&a){const t=c.$implicit;e.Y8G("value",t.country),e.R7$(),e.JRh(t.country)}}let ee=(()=>{class a{constructor(t,i,o,l,d){this.fb=t,this.categoryService=i,this.location=o,this.dialog=l,this.route=d,this.categoryForm=this.fb.group({name:["",r.k0.required],status:["",r.k0.required],image:["",r.k0.required],country:["",r.k0.required],states:["",r.k0.required],countries:["",r.k0.required]}),this.deliveryZones=this.route.snapshot.data.deliveryZones,this.mediaData={image:null,icon:null}}selectedCountry(t){this.selectedZone=this.deliveryZones.find(i=>i.country==t.value)}ngOnInit(){}submit(){this.categoryForm.valid&&this.categoryService.createCategory(this.categoryForm.getRawValue()).subscribe(t=>{this.location.back()})}back(){this.location.back()}addMedia(t){this.dialog.open(E.w).afterClosed().subscribe(o=>{o&&(this.categoryForm.patchValue({[t]:o.url}),this.mediaData[t]={[t]:o}[t])})}removeValue(t){this.categoryForm.patchValue({[t]:null}),this.mediaData[t]=null}static#e=this.\u0275fac=function(i){return new(i||a)(e.rXU(r.ok),e.rXU(y.w),e.rXU(u.aZ),e.rXU(D.bZ),e.rXU(g.nX))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-create-category"]],decls:23,vars:7,consts:[[1,"mat-elevation-z8","container","mx-auto","my-10","p-5",2,"width","50rem"],[3,"ngSubmit","formGroup"],["fxLayout","column","fxLayoutAlign","space-evenly stretch"],["valueName","Image",3,"removeValue","openMediaBrowser","isNew","mediaData"],["appearance","outline",1,"full-width"],["matInput","","cancellation","Name Of Category","formControlName","name"],["formControlName","status"],["appearance","fill"],["multiple","","formControlName","countries"],["class","example-additional-selection",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","space-around center","fxLayoutGap","10px"],["mat-raised-button","","fxFlex","50%",3,"click"],["mat-raised-button","","fxFlex","50%","color","primary",3,"disabled"],[1,"example-additional-selection"],[3,"value"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"form",1),e.bIt("ngSubmit",function(){return o.submit()}),e.j41(2,"div",2)(3,"app-select-media",3),e.bIt("removeValue",function(d){return o.removeValue(d)})("openMediaBrowser",function(d){return o.addMedia(d)}),e.k0s(),e.j41(4,"mat-form-field",4)(5,"mat-label"),e.EFF(6,"Name Of Category"),e.k0s(),e.nrm(7,"input",5),e.k0s(),e.j41(8,"mat-slide-toggle",6),e.EFF(9,"Enable"),e.k0s(),e.j41(10,"mat-form-field",7)(11,"mat-label"),e.EFF(12,"Country"),e.k0s(),e.j41(13,"mat-select",8)(14,"mat-select-trigger"),e.EFF(15),e.DNE(16,Q,2,2,"span",9),e.k0s(),e.DNE(17,q,2,2,"mat-option",10),e.k0s()(),e.j41(18,"div",11)(19,"a",12),e.bIt("click",function(){return o.back()}),e.EFF(20,"CANCEL"),e.k0s(),e.j41(21,"button",13),e.EFF(22,"SAVE"),e.k0s()()()()()),2&i&&(e.R7$(),e.Y8G("formGroup",o.categoryForm),e.R7$(2),e.Y8G("isNew",!1)("mediaData",null==o.mediaData?null:o.mediaData.image),e.R7$(12),e.SpI(" ",(null==o.categoryForm.value.countries?null:o.categoryForm.value.countries[0])||""," "),e.R7$(),e.Y8G("ngIf",((null==o.categoryForm.value||null==o.categoryForm.value.countries?null:o.categoryForm.value.countries.length)||0)>1),e.R7$(),e.Y8G("ngForOf",o.deliveryZones),e.R7$(4),e.Y8G("disabled",o.categoryForm.invalid))},dependencies:[u.Sq,u.bT,L.wT,f.It,f.$z,F.rl,F.nJ,j.fg,_.VO,_.$2,$.sG,p.DJ,p.BO,p.sA,p.UI,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,x.C]})}return a})();var b=n(3802);function te(a,c){if(1&a&&(e.j41(0,"span",14),e.EFF(1),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.Lme(" (+",((null==t.categoryForm.value.countries?null:t.categoryForm.value.countries.length)||0)-1," ",2===(null==t.categoryForm.value.countries?null:t.categoryForm.value.countries.length)?"other":"others",") ")}}function ae(a,c){if(1&a&&(e.j41(0,"mat-option",15),e.EFF(1),e.k0s()),2&a){const t=c.$implicit;e.Y8G("value",t.country),e.R7$(),e.JRh(t.country)}}let oe=(()=>{class a{constructor(t,i,o,l,d){this.fb=t,this.categoryService=i,this.location=o,this.dialog=l,this.route=d,this.category=this.route.snapshot.data.category,this.deliveryZones=this.route.snapshot.data.deliveryZones,this.mediaData={image:null,icon:null},this.categoryForm=this.fb.group({name:[this.category.name,r.k0.required],status:[this.category.status,r.k0.required],image:[this.category.image,r.k0.required],countries:[this.category.countries,r.k0.required]}),this.mediaData={image:null,icon:null},this.mediaData.image=this.category.image}selectedCountry(t){this.selectedZone=this.deliveryZones.find(i=>i.country==t.value)}ngOnInit(){}submit(){this.categoryForm.valid&&this.categoryService.updateCategory(this.category._id,this.categoryForm.getRawValue()).subscribe(t=>{this.location.back()})}back(){this.location.back()}addMedia(t){this.dialog.open(E.w).afterClosed().subscribe(o=>{o&&(this.categoryForm.patchValue({[t]:o.url}),this.mediaData[t]={[t]:o}[t])})}removeValue(t){this.categoryForm.patchValue({[t]:null}),this.mediaData[t]=null}static#e=this.\u0275fac=function(i){return new(i||a)(e.rXU(r.ok),e.rXU(y.w),e.rXU(u.aZ),e.rXU(D.bZ),e.rXU(g.nX))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-categories-details"]],decls:23,vars:7,consts:[[1,"mat-elevation-z8","container","mx-auto","my-10","p-5",2,"width","50rem"],[3,"ngSubmit","formGroup"],["fxLayout","column","fxLayoutAlign","space-evenly stretch"],["valueName","Image",3,"removeValue","openMediaBrowser","isNew","mediaData"],["appearance","fill",1,"full-width"],["matInput","","cancellation","Name Of Cuisine","formControlName","name"],["formControlName","status"],["appearance","fill"],["multiple","","formControlName","countries"],["class","example-additional-selection",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","space-around center","fxLayoutGap","10px"],["mat-raised-button","","fxFlex","50%",3,"click"],["mat-raised-button","","fxFlex","50%","color","primary",3,"disabled"],[1,"example-additional-selection"],[3,"value"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"form",1),e.bIt("ngSubmit",function(){return o.submit()}),e.j41(2,"div",2)(3,"app-select-media",3),e.bIt("removeValue",function(d){return o.removeValue(d)})("openMediaBrowser",function(d){return o.addMedia(d)}),e.k0s(),e.j41(4,"mat-form-field",4)(5,"mat-label"),e.EFF(6,"Name Of Cuisine"),e.k0s(),e.nrm(7,"input",5),e.k0s(),e.j41(8,"mat-slide-toggle",6),e.EFF(9,"Enable"),e.k0s(),e.j41(10,"mat-form-field",7)(11,"mat-label"),e.EFF(12,"Country"),e.k0s(),e.j41(13,"mat-select",8)(14,"mat-select-trigger"),e.EFF(15),e.DNE(16,te,2,2,"span",9),e.k0s(),e.DNE(17,ae,2,2,"mat-option",10),e.k0s()(),e.j41(18,"div",11)(19,"a",12),e.bIt("click",function(){return o.back()}),e.EFF(20,"CANCEL"),e.k0s(),e.j41(21,"button",13),e.EFF(22,"SAVE"),e.k0s()()()()()),2&i&&(e.R7$(),e.Y8G("formGroup",o.categoryForm),e.R7$(2),e.Y8G("isNew",!1)("mediaData",null==o.mediaData?null:o.mediaData.image),e.R7$(12),e.SpI(" ",(null==o.categoryForm.value.countries?null:o.categoryForm.value.countries[0])||""," "),e.R7$(),e.Y8G("ngIf",((null==o.categoryForm.value||null==o.categoryForm.value.countries?null:o.categoryForm.value.countries.length)||0)>1),e.R7$(),e.Y8G("ngForOf",o.deliveryZones),e.R7$(4),e.Y8G("disabled",o.categoryForm.invalid))},dependencies:[u.Sq,u.bT,L.wT,f.It,f.$z,F.rl,F.nJ,j.fg,_.VO,_.$2,$.sG,p.DJ,p.BO,p.sA,p.UI,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,x.C]})}return a})();var I=n(4e3);const ie=[{path:"",component:v,children:[{path:"list",component:W,resolve:{categories:b.n}},{path:"new",component:ee,resolve:{deliveryZones:I.K}},{path:":id/details",component:oe,resolve:{category:b.G,deliveryZones:I.K}}]}];let ne=(()=>{class a{static#e=this.\u0275fac=function(i){return new(i||a)};static#t=this.\u0275mod=e.$C({type:a});static#a=this.\u0275inj=e.G2t({imports:[g.iI.forChild(ie),g.iI]})}return a})();var se=n(6924),re=n(3457),le=n(3887);let ce=(()=>{class a{static#e=this.\u0275fac=function(i){return new(i||a)};static#t=this.\u0275mod=e.$C({type:a});static#a=this.\u0275inj=e.G2t({providers:[b.n,b.G,y.w],imports:[u.MD,ne,re.G,se.YF,r.X1,le.G]})}return a})()},3802:(S,C,n)=>{n.d(C,{G:()=>v,n:()=>e});var u=n(3953),g=n(1846);let e=(()=>{class m{constructor(s){this.categoryService=s}resolve(){return this.categoryService.getCategories()}static#e=this.\u0275fac=function(h){return new(h||m)(u.KVO(g.w))};static#t=this.\u0275prov=u.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})(),v=(()=>{class m{constructor(s){this.categoryService=s}resolve(s){const h=s.paramMap.get("id");return this.categoryService.getCategory(h)}static#e=this.\u0275fac=function(h){return new(h||m)(u.KVO(g.w))};static#t=this.\u0275prov=u.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})()},1846:(S,C,n)=>{n.d(C,{w:()=>v});var u=n(5312),g=n(3953),e=n(1626);let v=(()=>{class m{constructor(s){this._httpClient=s,this.hostServer=u.c.hostServer}getCategories(){return this._httpClient.get(`${this.hostServer}/categories`)}getCategory(s){return this._httpClient.get(`${this.hostServer}/categories/${s}`)}deleteCategory(s){return this._httpClient.delete(`${this.hostServer}/categories/${s}`)}updateCategory(s,h){return this._httpClient.put(`${this.hostServer}/categories/${s}`,h)}createCategory(s){return this._httpClient.post(`${this.hostServer}/categories`,s)}static#e=this.\u0275fac=function(h){return new(h||m)(g.KVO(e.Qq))};static#t=this.\u0275prov=g.jDH({token:m,factory:m.\u0275fac})}return m})()}}]);