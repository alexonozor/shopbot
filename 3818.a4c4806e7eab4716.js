"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[3818],{2264:(L,k,l)=>{l.d(k,{w:()=>U});var t=l(980),M=l(1626),y=l(1413),v=l(5351),e=l(3953),u=l(177),x=l(8498),F=l(5312);let j=(()=>{class a{constructor(i){this.http=i,this.endpoint=F.c.hostServer}getMedias(){return this.http.get(`${this.endpoint}/media`)}getMedia(i){return this.http.get(`${this.endpoint}/media/${i}`)}updateMedia(i,o){return this.http.put(`${this.endpoint}/media/${i}`,o)}saveMedia(i){return this.http.post(`${this.endpoint}/media`,i)}deleteMedia(i){return this.http.delete(`${this.endpoint}/media/${i}`)}uploadCsv(i){return this.http.post(`${this.endpoint}/medias/upload/csv`,i,{reportProgress:!0,observe:"events"})}static#e=this.\u0275fac=function(o){return new(o||a)(e.KVO(M.Qq))};static#t=this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var C=l(8834),E=l(9213),b=l(6850),T=l(7575),f=l(2920);const I=()=>["jpg","png","jpeg"],D=()=>["pdf","xls"];function c(a,r){1&a&&e.nrm(0,"div",6)}function g(a,r){if(1&a){const i=e.RV6();e.j41(0,"div",2),e.bIt("click",function(){e.eBV(i);const s=e.XpG();return e.Njj(s.select(s.media))}),e.j41(1,"button",3),e.bIt("click",function(){e.eBV(i);const s=e.XpG();return e.Njj(s.delete())}),e.j41(2,"mat-icon",4),e.EFF(3,"delete"),e.k0s()(),e.DNE(4,c,1,0,"div",5),e.k0s()}if(2&a){const i=e.XpG();e.xc7("background-image","url("+i.media.url+")"),e.R7$(4),e.Y8G("ngIf",i.media.isSelected)}}function n(a,r){1&a&&e.nrm(0,"div",6)}function p(a,r){if(1&a){const i=e.RV6();e.j41(0,"div",7),e.bIt("click",function(){e.eBV(i);const s=e.XpG();return e.Njj(s.select(s.media))}),e.j41(1,"p",8)(2,"mat-icon",9),e.EFF(3,"description"),e.k0s()(),e.j41(4,"span",10),e.EFF(5),e.k0s(),e.j41(6,"span",11),e.EFF(7),e.k0s(),e.j41(8,"button",3),e.bIt("click",function(){e.eBV(i);const s=e.XpG();return e.Njj(s.delete())}),e.j41(9,"mat-icon",4),e.EFF(10,"delete"),e.k0s()(),e.DNE(11,n,1,0,"div",5),e.k0s()}if(2&a){const i=e.XpG();e.R7$(5),e.JRh(i.media.fileName),e.R7$(2),e.JRh(i.media.format),e.R7$(4),e.Y8G("ngIf",i.media.isSelected)}}let d=(()=>{class a{constructor(){this.deleteMedia=new e.bkB,this.selectedMedia=new e.bkB}delete(){this.deleteMedia.emit()}select(i){this.selectedMedia.emit(i)}static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-file-media-card"]],inputs:{media:"media"},outputs:{deleteMedia:"deleteMedia",selectedMedia:"selectedMedia"},decls:2,vars:4,consts:[["class","mat-elevation-z8 relative rounded-lg bg-center bg-no-repeat bg-cover h-52 m-5","fxLayout","column","fxLayoutAlign","center center",3,"background-image","click",4,"ngIf"],["class","mat-elevation-z8 relative rounded-lg h-52 bg-gray-200 m-5","fxLayout","column","fxLayoutAlign","center center",3,"click",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"mat-elevation-z8","relative","rounded-lg","bg-center","bg-no-repeat","bg-cover","h-52","m-5",3,"click"],["mat-icon-button","","color","warn",3,"click"],[1,"mat-18"],["class","p-3 bg-blue-500 rounded-full absolute right-2 bottom-2",4,"ngIf"],[1,"p-3","bg-blue-500","rounded-full","absolute","right-2","bottom-2"],["fxLayout","column","fxLayoutAlign","center center",1,"mat-elevation-z8","relative","rounded-lg","h-52","bg-gray-200","m-5",3,"click"],[1,"text-5xl"],[1,"mat-18","material-icons-outlined"],[1,"text-center"],[1,"text-center","uppercase","my-5"]],template:function(o,s){1&o&&e.DNE(0,g,5,3,"div",0)(1,p,12,3,"div",1),2&o&&(e.Y8G("ngIf",e.lJ4(2,I).includes(s.media.format)),e.R7$(),e.Y8G("ngIf",e.lJ4(3,D).includes(s.media.format)))},dependencies:[u.bT,C.iY,E.An]})}return a})();function N(a,r){if(1&a){const i=e.RV6();e.j41(0,"app-file-media-card",3),e.bIt("selectedMedia",function(s){e.eBV(i);const m=e.XpG().ngIf,_=e.XpG();return e.Njj(_.selectedMedia(s,m))})("deleteMedia",function(){const s=e.eBV(i).$implicit,m=e.XpG(2);return e.Njj(m.delete(s._id))}),e.k0s()}2&a&&e.Y8G("media",r.$implicit)}function G(a,r){if(1&a&&(e.j41(0,"div")(1,"div",1),e.DNE(2,N,1,1,"app-file-media-card",2),e.k0s()()),2&a){const i=r.ngIf;e.R7$(2),e.Y8G("ngForOf",i)}}let R=(()=>{class a{constructor(i){this.mediaService=i,this.browseMediaEvent=new e.bkB,this.chosenMediaEvent=new e.bkB}ngOnInit(){this.events.subscribe(()=>{this.loadMedias()}),this.loadMedias()}loadMedias(){this.media$=this.mediaService.getMedias()}delete(i){this.mediaService.deleteMedia(i).subscribe(()=>{this.loadMedias()})}openMedia(){this.browseMediaEvent.emit()}selectedMedia(i,o){o.forEach(s=>{s.isSelected=!1}),i.isSelected=!0,this.chosenMediaEvent.emit(i)}static#e=this.\u0275fac=function(o){return new(o||a)(e.rXU(j))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["portal-lists-all-media"]],inputs:{events:"events"},outputs:{browseMediaEvent:"browseMediaEvent",chosenMediaEvent:"chosenMediaEvent"},decls:2,vars:3,consts:[[4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","start start","fxLayoutGap","10px",1,"w-full","p-5"],["fxFlex","300px",3,"media","selectedMedia","deleteMedia",4,"ngFor","ngForOf"],["fxFlex","300px",3,"selectedMedia","deleteMedia","media"]],template:function(o,s){1&o&&(e.DNE(0,G,3,1,"div",0),e.nI1(1,"async")),2&o&&e.Y8G("ngIf",e.bMT(1,1,s.media$))},dependencies:[u.Sq,u.bT,f.DJ,f.BO,f.sA,f.UI,d,u.Jj]})}return a})();function S(a,r){1&a&&e.nrm(0,"mat-progress-bar",15)}function w(a,r){if(1&a){const i=e.RV6();e.j41(0,"portal-lists-all-media",16),e.bIt("chosenMediaEvent",function(s){e.eBV(i);const m=e.XpG();return e.Njj(m.selectedMedia(s))})("browseMediaEvent",function(){e.eBV(i),e.XpG();const s=e.sdS(2);return e.Njj(s.click())}),e.k0s()}if(2&a){const i=e.XpG();e.Y8G("events",i.eventsSubject.asObservable())}}function V(a,r){}function B(a,r){}function A(a,r){}function $(a,r){}function X(a,r){if(1&a){const i=e.RV6();e.j41(0,"mat-dialog-actions",17)(1,"button",18),e.EFF(2,"CANCEL"),e.k0s(),e.j41(3,"button",19),e.bIt("click",function(){e.eBV(i);const s=e.XpG();return e.Njj(s.selectMedia())}),e.EFF(4,"SELECT"),e.k0s()()}}let U=(()=>{class a{constructor(i,o,s,m,_,h){this.location=i,this.route=o,this.router=s,this.mediaService=m,this.dialogRef=_,this.data=h,this.selectedTab=0,this.eventsSubject=new y.B}ngOnInit(){this.route.queryParams.subscribe(i=>{this.selectedTab=i.tab||0})}tabChanged(i){const o=Object.assign({},this.route.snapshot.queryParams);o.tab=i.index,this.router.navigate(["."],{queryParams:o,relativeTo:this.route})}back(){this.location.back()}emitEventToChild(){this.eventsSubject.next()}onFileLogoSelected(i){this.uploadProgress=0;const o=i.target.files[0];if(o){this.fileName=o.name;const s=new FormData;s.append("file",o);const m=this.mediaService.saveMedia(s).pipe((0,t.j)(()=>this.reset()));this.uploadSub=m.subscribe(_=>{_.type==M.hv.UploadProgress?this.uploadProgress=Math.round(_.loaded/_.total*100):_.hasOwnProperty("body")})}}selectedMedia(i){this.selectedMediaData=i}selectMedia(){this.dialogRef.close(this.selectedMediaData)}reset(){this.emitEventToChild(),this.uploadProgress=null,this.uploadSub=null}static#e=this.\u0275fac=function(o){return new(o||a)(e.rXU(u.aZ),e.rXU(x.nX),e.rXU(x.Ix),e.rXU(j),e.rXU(v.CP,8),e.rXU(v.Vh,8))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-media"]],decls:26,vars:3,consts:[["logoUpload",""],["type","file",1,"file-input",3,"change"],["fxLayout","row","fxLayoutAlign","space-between center",1,"card","bg-white","mat-elevation-z2","px-2","py-2"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"text-lg","font-thin"],[1,"material-icons-outlined"],["mat-raised-button","","color","primary","type","submit",1,"material-icons-outlined",3,"click"],["mode","indeterminate",4,"ngIf"],[3,"selectedTabChange","selectedIndex"],["label","ALL"],["matTabContent",""],["label","IMAGES"],["label","DOCUMENTS"],["label","VIDEOS"],["label","AUDIO"],["align","start",4,"ngIf"],["mode","indeterminate"],[3,"chosenMediaEvent","browseMediaEvent","events"],["align","start"],["mat-button","","matDialogClose",""],["mat-raised-button","","color","primary",3,"click"]],template:function(o,s){if(1&o){const m=e.RV6();e.j41(0,"mat-dialog-content")(1,"input",1,0),e.bIt("change",function(h){return e.eBV(m),e.Njj(s.onFileLogoSelected(h))}),e.k0s(),e.j41(3,"div",2)(4,"span",3)(5,"mat-icon",4),e.EFF(6,"perm_media"),e.k0s(),e.j41(7,"span"),e.EFF(8," Media"),e.k0s()(),e.j41(9,"button",5),e.bIt("click",function(){e.eBV(m);const h=e.sdS(2);return e.Njj(h.click())}),e.j41(10,"mat-icon"),e.EFF(11,"add_photo_alternate"),e.k0s(),e.EFF(12," Add Media "),e.k0s()(),e.DNE(13,S,1,0,"mat-progress-bar",6),e.j41(14,"mat-tab-group",7),e.bIt("selectedTabChange",function(h){return e.eBV(m),e.Njj(s.tabChanged(h))}),e.j41(15,"mat-tab",8),e.DNE(16,w,1,1,"ng-template",9),e.k0s(),e.j41(17,"mat-tab",10),e.DNE(18,V,0,0,"ng-template",9),e.k0s(),e.j41(19,"mat-tab",11),e.DNE(20,B,0,0,"ng-template",9),e.k0s(),e.j41(21,"mat-tab",12),e.DNE(22,A,0,0,"ng-template",9),e.k0s(),e.j41(23,"mat-tab",13),e.DNE(24,$,0,0,"ng-template",9),e.k0s()()(),e.DNE(25,X,5,0,"mat-dialog-actions",14)}2&o&&(e.R7$(13),e.Y8G("ngIf",s.uploadProgress),e.R7$(),e.Y8G("selectedIndex",s.selectedTab),e.R7$(11),e.Y8G("ngIf",s.dialogRef))},dependencies:[u.bT,C.$z,E.An,b.$L,b.mq,b.T8,T.HM,v.tx,v.E7,v.Yi,f.DJ,f.BO,f.sA,R],styles:[".file-input[_ngcontent-%COMP%]{display:none}"]})}return a})()},801:(L,k,l)=>{l.d(k,{C:()=>D});var t=l(3953),M=l(177),y=l(8834),v=l(9213);const e=()=>["jpg","png","jpeg"],u=()=>["pdf","xls"],x=()=>["jpg","png","jpeg","svg"];function F(c,g){if(1&c){const n=t.RV6();t.j41(0,"div",4),t.bIt("click",function(){t.eBV(n);const d=t.XpG(2);return t.Njj(d.select())}),t.j41(1,"span")(2,"mat-icon",5),t.EFF(3,"add_photo_alternate"),t.k0s()(),t.j41(4,"span",6),t.EFF(5),t.k0s()()}if(2&c){const n=t.XpG(2);t.R7$(5),t.SpI("Add ",n.valueName,"")}}function j(c,g){if(1&c){const n=t.RV6();t.j41(0,"div",7)(1,"a",8),t.bIt("click",function(){t.eBV(n);const d=t.XpG(2);return t.Njj(d.remove())}),t.j41(2,"mat-icon",5),t.EFF(3,"delete"),t.k0s()()()}if(2&c){const n=t.XpG(2);t.xc7("background-image","url("+n.mediaData.url+")")}}function C(c,g){if(1&c){const n=t.RV6();t.j41(0,"div",9)(1,"p",10)(2,"mat-icon",11),t.EFF(3,"description"),t.k0s()(),t.j41(4,"span",6),t.EFF(5),t.k0s(),t.j41(6,"span",12),t.EFF(7),t.k0s(),t.j41(8,"a",8),t.bIt("click",function(){t.eBV(n);const d=t.XpG(2);return t.Njj(d.remove())}),t.j41(9,"mat-icon",5),t.EFF(10,"delete"),t.k0s()()()}if(2&c){const n=t.XpG(2);t.R7$(5),t.JRh(n.mediaData.fileName),t.R7$(2),t.JRh(n.mediaData.format)}}function E(c,g){if(1&c&&(t.j41(0,"div"),t.DNE(1,F,6,1,"div",1)(2,j,4,2,"div",2)(3,C,11,2,"div",3),t.k0s()),2&c){const n=t.XpG();t.R7$(),t.Y8G("ngIf",!n.mediaData),t.R7$(),t.Y8G("ngIf",n.mediaData&&t.lJ4(3,e).includes(n.mediaData.format)),t.R7$(),t.Y8G("ngIf",n.mediaData&&t.lJ4(4,u).includes(n.mediaData.format))}}function b(c,g){if(1&c){const n=t.RV6();t.j41(0,"div",4),t.bIt("click",function(){t.eBV(n);const d=t.XpG(2);return t.Njj(d.select())}),t.j41(1,"span")(2,"mat-icon",5),t.EFF(3,"add_photo_alternate"),t.k0s()(),t.j41(4,"span",6),t.EFF(5),t.k0s()()}if(2&c){const n=t.XpG(2);t.R7$(5),t.SpI("Add ",n.valueName,"")}}function T(c,g){if(1&c){const n=t.RV6();t.j41(0,"div",7)(1,"a",8),t.bIt("click",function(){t.eBV(n);const d=t.XpG(2);return t.Njj(d.remove())}),t.j41(2,"mat-icon",5),t.EFF(3,"delete"),t.k0s()()()}if(2&c){const n=t.XpG(2);t.xc7("background-image","url("+n.mediaData+")")}}function f(c,g){if(1&c){const n=t.RV6();t.j41(0,"div",14)(1,"p",10)(2,"mat-icon",11),t.EFF(3,"description"),t.k0s()(),t.j41(4,"span",12),t.EFF(5),t.k0s(),t.j41(6,"a",8),t.bIt("click",function(){t.eBV(n);const d=t.XpG(2);return t.Njj(d.remove())}),t.j41(7,"mat-icon",5),t.EFF(8,"delete"),t.k0s()()()}if(2&c){const n=t.XpG(2);t.R7$(5),t.JRh(n.getUrlExtension(n.mediaData))}}function I(c,g){if(1&c&&(t.j41(0,"div"),t.DNE(1,b,6,1,"div",1)(2,T,4,2,"div",2)(3,f,9,1,"div",13),t.k0s()),2&c){const n=t.XpG();t.R7$(),t.Y8G("ngIf",!n.mediaData),t.R7$(),t.Y8G("ngIf",n.mediaData&&t.lJ4(3,x).includes(n.getUrlExtension(n.mediaData))),t.R7$(),t.Y8G("ngIf",n.mediaData&&t.lJ4(4,u).includes(n.getUrlExtension(n.mediaData)))}}let D=(()=>{class c{constructor(){this.valueName="no value name",this.removeValue=new t.bkB,this.openMediaBrowser=new t.bkB}remove(){this.removeValue.emit(this.valueName.toLowerCase())}select(){this.openMediaBrowser.emit(this.valueName.toLowerCase())}getUrlExtension(n){return"string"==typeof n?n?.split(/[#?]/)[0]?.split(".")?.pop()?.trim():(this.isNew=!0,n.url?.split(/[#?]/)[0]?.split(".")?.pop()?.trim())}static#e=this.\u0275fac=function(p){return new(p||c)};static#t=this.\u0275cmp=t.VBU({type:c,selectors:[["app-select-media"]],inputs:{mediaData:"mediaData",valueName:"valueName",isNew:"isNew"},outputs:{removeValue:"removeValue",openMediaBrowser:"openMediaBrowser"},decls:2,vars:2,consts:[[4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","w-200 h-300 p-5 border-2 cursor-pointer border-gray-300 rounded-lg",3,"click",4,"ngIf"],["class","w-56 h-56 p-5 border-2 cursor-pointer bg-no-repeat bg-contain border-gray-300 rounded-lg","fxLayout","column","fxLayoutAlign","center center",3,"background-image",4,"ngIf"],["class","w-200 h-300 p-5 border-2 cursor-pointer border-gray-300 rounded-lg","fxLayout","column","fxLayoutAlign","center center",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"w-200","h-300","p-5","border-2","cursor-pointer","border-gray-300","rounded-lg",3,"click"],[1,"mat-18"],[1,"text-center"],["fxLayout","column","fxLayoutAlign","center center",1,"w-56","h-56","p-5","border-2","cursor-pointer","bg-no-repeat","bg-contain","border-gray-300","rounded-lg"],["mat-icon-button","","color","warn",3,"click"],["fxLayout","column","fxLayoutAlign","center center",1,"w-200","h-300","p-5","border-2","cursor-pointer","border-gray-300","rounded-lg"],[1,"text-5xl"],[1,"mat-18","material-icons-outlined"],[1,"text-center","uppercase","my-5"],["class","w-200 h-300 min-w-min p-5 border-2 cursor-pointer border-gray-300 rounded-lg","fxLayout","column","fxLayoutAlign","center center","style","width: 250px;",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"w-200","h-300","min-w-min","p-5","border-2","cursor-pointer","border-gray-300","rounded-lg",2,"width","250px"]],template:function(p,d){1&p&&t.DNE(0,E,4,5,"div",0)(1,I,4,5,"div",0),2&p&&(t.Y8G("ngIf",d.isNew),t.R7$(),t.Y8G("ngIf",!d.isNew))},dependencies:[M.bT,y.pQ,v.An]})}return c})()}}]);