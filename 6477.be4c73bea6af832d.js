"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[6477],{5749:(S,f,r)=>{r.d(f,{n:()=>i});var m=r(4412),u=r(5312),l=r(3953),d=r(1626);let i=(()=>{class t{constructor(s){this._httpClient=s,this.hostServer=u.c.hostServer,this.onStoreChanged=new m.t({})}resolve(s,p){return this.routeParams=s.params,new Promise((C,_)=>{Promise.all([this.getStore()]).then(()=>{C(null)},_)})}getStore(s){return new Promise((p,C)=>{this._httpClient.get(`${this.hostServer}/stores/${s||this.routeParams.id}`).subscribe(_=>{this.store=_,this.onStoreChanged.next(this.store),p(_)},C)})}uploadLogo(s,p){return this._httpClient.post(`${this.hostServer}/stores/upload/${p}/logo`,s,{reportProgress:!0,observe:"events"})}uploadBanner(s,p){return this._httpClient.post(`${this.hostServer}/stores/upload/${p}/banner`,s,{reportProgress:!0,observe:"events"})}saveStore(s,p){return this._httpClient.put(`${this.hostServer}/stores/${p}`,s)}addStore(s){return this._httpClient.post(`${this.hostServer}/stores`,s)}addItemToPopular(s){return this._httpClient.post(`${this.hostServer}/stores/add-item-to-popular`,s)}removeItemFromPopular(s){return this._httpClient.post(`${this.hostServer}/stores/remove-item-from-popular`,s)}getStoreOrders(s){return this._httpClient.get(`${this.hostServer}/orders/store/${s}/orders`)}deleteStoreOrders(s){return this._httpClient.delete(`${this.hostServer}/orders/${s}`)}updateOrderStatus(s,p,C){return this._httpClient.put(`${this.hostServer}/orders/${s}/status/${p}`,C)}static#t=this.\u0275fac=function(p){return new(p||t)(l.KVO(d.Qq))};static#e=this.\u0275prov=l.jDH({token:t,factory:t.\u0275fac})}return t})()},6477:(S,f,r)=>{r.d(f,{B:()=>tt});var m=r(8498),u=r(1269),l=r(9417),d=r(980),i=r(5351),t=r(3953),a=r(3664),s=r(5117),p=r(177),C=r(6600),_=r(8834),E=r(3719),D=r(9631),b=r(2798),F=r(2920);function O(n,g){if(1&n&&(t.j41(0,"mat-option",11),t.EFF(1),t.k0s()),2&n){const e=g.$implicit;t.Y8G("value",e._id),t.R7$(),t.JRh(e.name)}}let R=(()=>{class n{constructor(e,c,o,h,v){this._formBuilder=e,this.auth=c,this.storeService=o,this.dialogRef=h,this.data=v,this.isLoading=!1}ngOnInit(){this.storeForm=this.createProductForm()}createProductForm(){return this._formBuilder.group({name:["",l.k0.required],owner:[this.auth.getUser._id,l.k0.required],merchant:["",l.k0.required],description:["",l.k0.required]})}save(){this.isLoading=!0,this.storeService.createStore(this.storeForm.getRawValue()).pipe((0,d.j)(()=>this.isLoading=!1)).subscribe(e=>{this.isLoading=!0,this.dialogRef.close(!0)})}static#t=this.\u0275fac=function(c){return new(c||n)(t.rXU(l.ok),t.rXU(a.u),t.rXU(s.a),t.rXU(i.CP),t.rXU(i.Vh))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-add-stores"]],decls:22,vars:4,consts:[["matDialogTitle",""],["mat-dialog-content",""],["name","storeForm","fxLayout","column","fxFlex","",1,"product","w-100-p",3,"formGroup"],["appearance","fill","floatLabel","always",1,"w-100-p"],["matInput","","cancellation","Product Name","name","name","formControlName","name","required",""],["matInput","","cancellation","Product Description","name","description","formControlName","description","rows","5"],["formControlName","merchant"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions","",1,"pt-24"],["mat-button","","mat-dialog-close",""],["mat-raised-button","",1,"mat-accent","mr-16",3,"click","disabled"],[3,"value"]],template:function(c,o){1&c&&(t.j41(0,"h1",0),t.EFF(1,"Add Store"),t.k0s(),t.j41(2,"div",1)(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),t.EFF(6,"Name"),t.k0s(),t.nrm(7,"input",4),t.k0s(),t.j41(8,"mat-form-field",3)(9,"mat-label"),t.EFF(10,"Description"),t.k0s(),t.nrm(11,"textarea",5),t.k0s(),t.j41(12,"mat-form-field",3)(13,"mat-label"),t.EFF(14,"Select Merchant"),t.k0s(),t.j41(15,"mat-select",6),t.DNE(16,O,2,2,"mat-option",7),t.k0s()()()(),t.j41(17,"div",8)(18,"button",9),t.EFF(19,"Cancel"),t.k0s(),t.j41(20,"button",10),t.bIt("click",function(){return o.save()}),t.EFF(21),t.k0s()()),2&c&&(t.R7$(3),t.Y8G("formGroup",o.storeForm),t.R7$(13),t.Y8G("ngForOf",o.data),t.R7$(4),t.Y8G("disabled",!o.storeForm.valid),t.R7$(),t.JRh(o.isLoading?"Please wait..":"Create Store"))},dependencies:[p.Sq,C.wT,_.$z,E.rl,E.nJ,D.fg,b.VO,i.tx,i.BI,i.E7,i.Yi,l.qT,l.me,l.BC,l.cb,l.YS,l.j4,l.JD,F.DJ,F.UI]})}return n})();var x=r(5473),I=r(5749),L=r(9213),y=r(9115),P=r(450),k=r(6038);const T=()=>({standalone:!0}),B=()=>({name:"Enabled",value:!0}),U=()=>({name:"Disable",value:!1}),G=(n,g)=>[n,g],A=()=>["Nigeria","Mauritius"],N=n=>["../",n,"explore"],V=n=>[n];function w(n,g){if(1&n&&(t.j41(0,"mat-option",23),t.EFF(1),t.k0s()),2&n){const e=g.$implicit;t.Y8G("value",e.value),t.R7$(),t.JRh(e.name)}}function K(n,g){if(1&n&&(t.j41(0,"mat-option",23),t.EFF(1),t.k0s()),2&n){const e=g.$implicit;t.Y8G("value",e),t.R7$(),t.JRh(e)}}function X(n,g){if(1&n&&(t.j41(0,"mat-option",23),t.EFF(1),t.k0s()),2&n){const e=g.$implicit;t.Y8G("value",e._id),t.R7$(),t.JRh(e.name)}}function Y(n,g){if(1&n){const e=t.RV6();t.j41(0,"form",11)(1,"div",12)(2,"div",13)(3,"mat-form-field",14)(4,"mat-label"),t.EFF(5,"Filter Store name"),t.k0s(),t.j41(6,"input",15),t.mxI("ngModelChange",function(o){t.eBV(e);const h=t.XpG();return t.DH7(h.name,o)||(h.name=o),t.Njj(o)}),t.k0s()()(),t.j41(7,"div",16)(8,"div",13)(9,"mat-form-field",14)(10,"mat-label"),t.EFF(11,"Filter by Active "),t.k0s(),t.j41(12,"mat-select",17),t.DNE(13,w,2,2,"mat-option",18),t.k0s()()(),t.j41(14,"div",13)(15,"mat-form-field",19)(16,"mat-label"),t.EFF(17,"Filter by Country "),t.k0s(),t.j41(18,"mat-select",20),t.DNE(19,K,2,2,"mat-option",18),t.k0s()()(),t.j41(20,"div",13)(21,"mat-form-field",19)(22,"mat-label"),t.EFF(23,"Filter by Category"),t.k0s(),t.j41(24,"mat-select",21),t.DNE(25,X,2,2,"mat-option",18),t.k0s()()(),t.j41(26,"button",22),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.clearFilerSet())}),t.EFF(27," Clear Filters "),t.k0s()()()()}if(2&n){const e=t.XpG();t.Y8G("formGroup",e.filterForm),t.R7$(6),t.R50("ngModel",e.name),t.Y8G("ngModelOptions",t.lJ4(6,T)),t.R7$(7),t.Y8G("ngForOf",t.l_i(9,G,t.lJ4(7,B),t.lJ4(8,U))),t.R7$(6),t.Y8G("ngForOf",t.lJ4(12,A)),t.R7$(6),t.Y8G("ngForOf",e.categories)}}function J(n,g){if(1&n){const e=t.RV6();t.j41(0,"button",34),t.bIt("click",function(){t.eBV(e);const o=t.XpG(),h=o.$implicit,v=o.index,j=t.XpG();return t.Njj(j.delete(v,h._id))}),t.j41(1,"mat-icon"),t.EFF(2,"delete"),t.k0s(),t.EFF(3," Delete"),t.k0s()}}function W(n,g){if(1&n){const e=t.RV6();t.j41(0,"tr",24)(1,"th",25),t.nrm(2,"img",26),t.j41(3,"div",27)(4,"div",28),t.EFF(5),t.k0s(),t.j41(6,"div",29),t.EFF(7),t.k0s()()(),t.j41(8,"td",30)(9,"div",28),t.EFF(10),t.nI1(11,"currency"),t.k0s()(),t.j41(12,"td",30)(13,"mat-slide-toggle",31),t.mxI("ngModelChange",function(o){const h=t.eBV(e).$implicit;return t.DH7(h.featured,o)||(h.featured=o),t.Njj(o)}),t.bIt("click",function(o){return t.eBV(e),t.Njj(o.stopPropagation())})("change",function(o){const h=t.eBV(e).$implicit,v=t.XpG();return t.Njj(v.onChangeFeatured(h,o))}),t.k0s()(),t.j41(14,"td",30)(15,"mat-slide-toggle",31),t.mxI("ngModelChange",function(o){const h=t.eBV(e).$implicit;return t.DH7(h.active,o)||(h.active=o),t.Njj(o)}),t.bIt("click",function(o){return t.eBV(e),t.Njj(o.stopPropagation())})("change",function(o){const h=t.eBV(e).$implicit,v=t.XpG();return t.Njj(v.onChange(h,o))}),t.k0s()(),t.j41(16,"td",30)(17,"button",32),t.bIt("click",function(o){return t.eBV(e),t.Njj(o.stopPropagation())}),t.j41(18,"mat-icon"),t.EFF(19,"more_vert"),t.k0s()(),t.j41(20,"mat-menu",null,0),t.DNE(22,J,4,0,"button",33),t.j41(23,"button",34),t.bIt("click",function(){const o=t.eBV(e).$implicit,h=t.XpG();return t.Njj(h.viewDetails(o))}),t.j41(24,"mat-icon"),t.EFF(25,"edit"),t.k0s(),t.EFF(26," Edit "),t.k0s()()()()}if(2&n){const e=g.$implicit,c=t.sdS(21),o=t.XpG();t.Y8G("routerLink",t.eq3(13,N,e._id)),t.R7$(2),t.Y8G("src",e.logo,t.B4B),t.R7$(3),t.JRh(e.name),t.R7$(2),t.Lme("",e.contactInfo.state," ",e.contactInfo.country,""),t.R7$(3),t.JRh(t.i5U(11,10,e.walletBalance,e.currency)),t.R7$(3),t.R50("ngModel",e.featured),t.R7$(2),t.R50("ngModel",e.active),t.R7$(2),t.Y8G("matMenuTriggerFor",c),t.R7$(5),t.Y8G("ngIf",o.auth.isShow(t.eq3(15,V,o.Role.SuperAdmin)))}}let H=(()=>{class n{constructor(e,c,o,h,v,j,et){this.storesService=e,this.storeService=c,this._matDialog=o,this.router=h,this.route=v,this.fb=j,this.auth=et,this.displayedColumns=["name","description","active","action"],this.stores=[],this.Role=x.X,this.merchants=this.route.snapshot.data.merchants,this.categories=this.route.snapshot.data.categories}ngOnInit(){this.stores=this.storesService.stores,this.filterForm=this.fb.group({active:new l.MJ(!0),category:new l.MJ(""),"contactInfo.country":new l.MJ("")}),this.filterSet()}delete(e,c){this.confirmDialogRef=this._matDialog.open(u.Y,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Store?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete this store?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(o=>{o&&this.storesService.deleteStore(e,c).subscribe(),this.confirmDialogRef=null})}addNewStore(){this._matDialog.open(R,{width:"500px",disableClose:!1,data:this.merchants}).afterClosed().subscribe(c=>{c&&this.storesService.getUserStores({data:{$match:{}},control:[{$sort:{createdAt:-1}}]}).then(()=>{this.stores=this.storesService.stores})})}filterSet(){this.filterForm.valueChanges.subscribe(e=>{this.filterObject(e),this.storesService.getUserStores({data:{$match:{...this.filterObject(e)}},control:[{$sort:{createdAt:-1}}]}).then(()=>{this.stores=this.storesService.stores})})}clearFilerSet(){this.filterForm.patchValue({name:"",active:"",category:"","contactInfo.country":""})}filterObject(e){return Object.fromEntries(Object.entries(e).filter(([c,o])=>null!=o&&""!==o))}onChange(e,c){this.storeService.saveStore({approve:c.checked,active:c.checked},e._id).subscribe(()=>{})}onChangeFeatured(e,c){this.storeService.saveStore({featured:c.checked},e._id).subscribe(()=>{})}viewDetails(e){this.router.navigate(["dashboard","stores",e._id,"explore"])}static#t=this.\u0275fac=function(c){return new(c||n)(t.rXU(s.a),t.rXU(I.n),t.rXU(i.bZ),t.rXU(m.Ix),t.rXU(m.nX),t.rXU(l.ok),t.rXU(a.u))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-list-stores"]],decls:23,vars:5,consts:[["menu","matMenu"],[1,"row"],[3,"formGroup",4,"ngIf"],[1,"w-full","h-screen","relative"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","text-gray-500"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50"],["scope","col",1,"px-6","py-3"],["class","bg-white border-b  hover:bg-gray-50 ",3,"routerLink",4,"ngFor","ngForOf"],["mat-fab","","color","primary",2,"position","fixed","bottom","80px","right","15px",3,"click"],[1,"mat-18"],[3,"formGroup"],["fxLayout.lt-lg","column","fxLayout","row","fxLayoutAlign","space-between start"],["ngClass.lt-lg","w-full",1,"col-xl-3"],["appearance","fill","ngClass.lt-lg","w-full"],["matInput","","type","text","required","","cancellation","Search",3,"ngModelChange","ngModel","ngModelOptions"],["fxLayout.lt-lg","column","fxLayoutAlign.lt-lg","space-between stretch","fxLayout","row","fxLayoutGap","10px","fxLayoutAlign.gt-md","space-between start","ngClass.lt-lg","w-full"],["formControlName","active"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill",1,"w-full"],["formControlName","contactInfo.country"],["formControlName","category","multiple","true"],["mat-button","","fxFlexAlign","center","ngClass.lt-lg","w-full",3,"click"],[3,"value"],[1,"bg-white","border-b","hover:bg-gray-50",3,"routerLink"],["scope","row",1,"flex","items-center","px-6","py-4","text-gray-900","whitespace-nowrap"],[1,"w-10","h-10","rounded-full",3,"src"],[1,"pl-3"],[1,"text-base","font-semibold"],[1,"font-normal","truncate","text-gray-500"],[1,"px-6","py-4"],["color","primary",1,"mx-8",3,"ngModelChange","click","change","ngModel"],["mat-icon-button","",3,"click","matMenuTriggerFor"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"]],template:function(c,o){1&c&&(t.j41(0,"div",1),t.DNE(1,Y,28,13,"form",2),t.k0s(),t.j41(2,"div",3)(3,"div",4)(4,"table",5)(5,"thead",6)(6,"tr")(7,"th",7),t.EFF(8," Vendor Profile "),t.k0s(),t.j41(9,"th",7),t.EFF(10," Wallet Balance "),t.k0s(),t.j41(11,"th",7),t.EFF(12," Featured "),t.k0s(),t.j41(13,"th",7),t.EFF(14," Enabled "),t.k0s(),t.j41(15,"th",7),t.EFF(16," Action "),t.k0s()()(),t.j41(17,"tbody"),t.DNE(18,W,27,17,"tr",8),t.nI1(19,"filterByName"),t.k0s()()(),t.j41(20,"button",9),t.bIt("click",function(){return o.addNewStore()}),t.j41(21,"mat-icon",10),t.EFF(22,"add"),t.k0s()()()),2&c&&(t.R7$(),t.Y8G("ngIf",o.filterForm),t.R7$(17),t.Y8G("ngForOf",t.i5U(19,2,o.stores,o.name)))},dependencies:()=>[p.Sq,p.bT,C.wT,_.$z,_.iY,_.Sr,E.rl,E.nJ,L.An,D.fg,b.VO,y.kk,y.fb,y.Cp,P.sG,m.Wk,l.qT,l.me,l.BC,l.cb,l.YS,l.j4,l.JD,l.vS,F.DJ,F.BO,F.sA,F.R$,k.PW,p.oe,z],styles:[".title[_ngcontent-%COMP%]{font-weight:400;font-size:18px;margin:10px 0!important}.status[_ngcontent-%COMP%]{color:#3f51b5;font-size:14px!important}"]})}return n})(),z=(()=>{class n{transform(e,c=""){return e.filter(o=>o.name.toLowerCase().indexOf(c.toLowerCase())>=0)}static#t=this.\u0275fac=function(c){return new(c||n)};static#e=this.\u0275pipe=t.EJ8({name:"filterByName",type:n,pure:!0})}return n})();var M=r(3802),$=r(1379),Q=r(4e3),Z=r(8815);const q=[{path:"list",component:H,resolve:{data:s.a,merchants:$.Q,categories:M.n}},{path:":id",loadChildren:()=>r.e(3339).then(r.bind(r,3339)).then(n=>n.STORE_ROUTE),resolve:{store:Z.s,categories:M.n,merchants:$.Q,deliveryZones:Q.K}},{path:"**",redirectTo:"list"}];let tt=(()=>{class n{static#t=this.\u0275fac=function(c){return new(c||n)};static#e=this.\u0275mod=t.$C({type:n});static#r=this.\u0275inj=t.G2t({imports:[m.iI.forChild(q),m.iI]})}return n})()},3802:(S,f,r)=>{r.d(f,{G:()=>d,n:()=>l});var m=r(3953),u=r(1846);let l=(()=>{class i{constructor(a){this.categoryService=a}resolve(){return this.categoryService.getCategories()}static#t=this.\u0275fac=function(s){return new(s||i)(m.KVO(u.w))};static#e=this.\u0275prov=m.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),d=(()=>{class i{constructor(a){this.categoryService=a}resolve(a){const s=a.paramMap.get("id");return this.categoryService.getCategory(s)}static#t=this.\u0275fac=function(s){return new(s||i)(m.KVO(u.w))};static#e=this.\u0275prov=m.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()},1379:(S,f,r)=>{r.d(f,{Q:()=>l,p:()=>d});var m=r(3953),u=r(6074);let l=(()=>{class i{constructor(a){this.merchantService=a}resolve(){return this.merchantService.getMerchants()}static#t=this.\u0275fac=function(s){return new(s||i)(m.KVO(u.b))};static#e=this.\u0275prov=m.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),d=(()=>{class i{constructor(a){this.merchantService=a}resolve(a){const s=a.paramMap.get("id");return this.merchantService.getMerchant(s)}static#t=this.\u0275fac=function(s){return new(s||i)(m.KVO(u.b))};static#e=this.\u0275prov=m.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()},8815:(S,f,r)=>{r.d(f,{s:()=>l});var m=r(3953),u=r(5749);let l=(()=>{class d{constructor(t){this.storeService=t}resolve(t){const a=t.paramMap.get("id");return this.storeService.getStore(a)}static#t=this.\u0275fac=function(a){return new(a||d)(m.KVO(u.n))};static#e=this.\u0275prov=m.jDH({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})()},1846:(S,f,r)=>{r.d(f,{w:()=>d});var m=r(5312),u=r(3953),l=r(1626);let d=(()=>{class i{constructor(a){this._httpClient=a,this.hostServer=m.c.hostServer}getCategories(){return this._httpClient.get(`${this.hostServer}/categories`)}getCategory(a){return this._httpClient.get(`${this.hostServer}/categories/${a}`)}deleteCategory(a){return this._httpClient.delete(`${this.hostServer}/categories/${a}`)}updateCategory(a,s){return this._httpClient.put(`${this.hostServer}/categories/${a}`,s)}createCategory(a){return this._httpClient.post(`${this.hostServer}/categories`,a)}static#t=this.\u0275fac=function(s){return new(s||i)(u.KVO(l.Qq))};static#e=this.\u0275prov=u.jDH({token:i,factory:i.\u0275fac})}return i})()},6074:(S,f,r)=>{r.d(f,{b:()=>d});var m=r(5312),u=r(3953),l=r(1626);let d=(()=>{class i{constructor(a){this._httpClient=a,this.hostServer=m.c.hostServer}getMerchants(){return this._httpClient.get(`${this.hostServer}/merchants`)}getMerchant(a){return this._httpClient.get(`${this.hostServer}/merchants/${a}`)}deleteMerchant(a){return this._httpClient.delete(`${this.hostServer}/merchants/${a}`)}updateMerchant(a,s){return this._httpClient.put(`${this.hostServer}/merchants/${a}`,s)}createMerchant(a){return this._httpClient.post(`${this.hostServer}/merchants`,a)}static#t=this.\u0275fac=function(s){return new(s||i)(u.KVO(l.Qq))};static#e=this.\u0275prov=u.jDH({token:i,factory:i.\u0275fac})}return i})()}}]);