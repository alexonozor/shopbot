"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[775],{6775:(De,y,s)=>{s.r(y),s.d(y,{BannersModule:()=>Qe});var c=s(6814),u=s(1896),e=s(5879);let V=(()=>{class n{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-banners"]],decls:1,vars:0,template:function(o,a){1&o&&e._UZ(0,"router-outlet")},dependencies:[u.lC],encapsulation:2})}return n})();var k=s(6567),z=s(553),R=s(9862);let f=(()=>{class n{constructor(t){this._httpClient=t,this.hostServer=z.N.hostServer}createBanner(t){return this._httpClient.post(`${this.hostServer}/banners`,t)}getBanners(){return this._httpClient.get(`${this.hostServer}/banners/admin`)}getBanner(t){return this._httpClient.get(`${this.hostServer}/banners/${t}`)}updateBanner(t,o){return this._httpClient.put(`${this.hostServer}/banners/${t}`,o)}deleteBanner(t){return this._httpClient.delete(`${this.hostServer}/banners/${t}`)}static#e=this.\u0275fac=function(o){return new(o||n)(e.LFG(R.eN))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac})}return n})();var b=s(7700),_=s(2296),G=s(617),x=s(7988),F=s(2599),r=s(6223);function H(n,i){1&n&&(e.TgZ(0,"div",21),e._UZ(1,"div",22),e._uU(2," Active "),e.qZA())}function P(n,i){1&n&&(e.TgZ(0,"div",21),e._UZ(1,"div",23),e._uU(2," Inactive "),e.qZA())}function K(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"tr",8)(1,"th",9),e._UZ(2,"img",10),e.TgZ(3,"div",11)(4,"div",12),e._uU(5),e.qZA(),e.TgZ(6,"div",13),e._uU(7),e.qZA()()(),e.TgZ(8,"td",14),e.YNc(9,H,3,0,"div",15),e.YNc(10,P,3,0,"div",15),e.qZA(),e.TgZ(11,"td",14)(12,"mat-slide-toggle",16),e.NdJ("ngModelChange",function(a){const m=e.CHM(t).$implicit;return e.KtG(m.active=a)})("change",function(a){const m=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.onChange(m,a))}),e.qZA()(),e.TgZ(13,"td",14)(14,"button",17)(15,"mat-icon"),e._uU(16,"more_vert"),e.qZA()(),e.TgZ(17,"mat-menu",18,19),e.NdJ("click",function(a){return a.stopPropagation()}),e.TgZ(19,"button",20),e.NdJ("click",function(a){const l=e.CHM(t),m=l.index,p=l.$implicit;return e.oxw().delete(m,p._id),e.KtG(a.stopPropagation())}),e.TgZ(20,"mat-icon"),e._uU(21,"delete"),e.qZA(),e._uU(22," Delete"),e.qZA(),e.TgZ(23,"button",20),e.NdJ("click",function(){const l=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.viewDetails(l))}),e.TgZ(24,"mat-icon"),e._uU(25,"edit"),e.qZA(),e._uU(26," Edit / View "),e.qZA()()()()}if(2&n){const t=i.$implicit,o=e.MAs(18);e.xp6(2),e.Q6J("src",t.image,e.LSH),e.xp6(3),e.Oqu(t.title),e.xp6(2),e.AsE("",t.category," - ",t.country," "),e.xp6(2),e.Q6J("ngIf",t.active),e.xp6(1),e.Q6J("ngIf",!t.active),e.xp6(2),e.Q6J("ngModel",t.active),e.xp6(2),e.Q6J("matMenuTriggerFor",o)}}let X=(()=>{class n{constructor(t,o,a,l){this.bannersService=t,this._matDialog=o,this.router=a,this.route=l,this.displayedColumns=["name","description","active","action"],this.banners=[],this.banners=this.route.snapshot.data.banners}ngOnInit(){}delete(t,o){this.confirmDialogRef=this._matDialog.open(k.X,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Banner?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete this banner?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(a=>{a&&(this.banners.splice(t,1),this.bannersService.deleteBanner(o).subscribe()),this.confirmDialogRef=null})}onChange(t,o){this.bannersService.updateBanner(t._id,{active:o.checked}).subscribe(()=>{})}viewDetails(t){this.router.navigate(["dashboard","banners",t._id,"edit"])}addBanner(){this.router.navigate(["dashboard","banners","new"])}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(f),e.Y36(b.uw),e.Y36(u.F0),e.Y36(u.gz))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-list-banners"]],decls:18,vars:1,consts:[[1,"w-full","h-screen","relative"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","text-gray-500"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50"],["scope","col",1,"px-6","py-3"],["class","bg-white border-b ",4,"ngFor","ngForOf"],["mat-fab","","color","primary",2,"position","fixed","bottom","80px","right","15px",3,"click"],[1,"mat-18"],[1,"bg-white","border-b"],["scope","row",1,"flex","items-center","px-6","py-4","text-gray-900","whitespace-nowrap"],["alt","Jese image",1,"w-10","h-10","rounded-full",3,"src"],[1,"pl-3"],[1,"text-base","font-semibold"],[1,"font-normal","text-gray-500"],[1,"px-6","py-4"],["class","flex items-center",4,"ngIf"],["color","primary",1,"mx-8",3,"ngModel","ngModelChange","change"],["mat-icon-button","",3,"matMenuTriggerFor"],[3,"click"],["menu","matMenu"],["mat-menu-item","",3,"click"],[1,"flex","items-center"],[1,"h-2.5","w-2.5","rounded-full","bg-green-500","mr-2"],[1,"h-2.5","w-2.5","rounded-full","bg-red-500","mr-2"]],template:function(o,a){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"table",2)(3,"thead",3)(4,"tr")(5,"th",4),e._uU(6," Name "),e.qZA(),e.TgZ(7,"th",4),e._uU(8," Status "),e.qZA(),e.TgZ(9,"th",4),e._uU(10," Change Status "),e.qZA(),e.TgZ(11,"th",4),e._uU(12," Action "),e.qZA()()(),e.TgZ(13,"tbody"),e.YNc(14,K,27,8,"tr",5),e.qZA()()(),e.TgZ(15,"button",6),e.NdJ("click",function(){return a.addBanner()}),e.TgZ(16,"mat-icon",7),e._uU(17,"add"),e.qZA()()()),2&o&&(e.xp6(14),e.Q6J("ngForOf",a.banners))},dependencies:[c.sg,c.O5,_.RK,_.cs,G.Hw,x.VK,x.OP,x.p6,F.Rr,r.JJ,r.On]})}return n})();var S=s(6116),B=s(7921),N=s(3620),q=s(4664),I=s(7398),J=s(6284),T=s(4151),U=s(940),g=s(4630),M=s(3680),h=s(9157),O=s(2032),v=s(8525),d=s(3814),w=s(7509),Y=s(3064);function W(n,i){if(1&n&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function j(n,i){if(1&n&&(e.TgZ(0,"mat-option",25)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.Q6J("value",t.name)("id",t._id),e.xp6(2),e.Oqu(t.name)}}function ee(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",20)(1,"mat-label"),e._uU(2,"Store"),e.qZA(),e._UZ(3,"input",21),e.TgZ(4,"mat-autocomplete",22,23),e.NdJ("optionSelected",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onShopSelectionChanged(a))}),e.YNc(6,j,3,3,"mat-option",24),e.ALo(7,"async"),e.qZA()()}if(2&n){const t=e.MAs(5),o=e.oxw();e.xp6(3),e.Q6J("matAutocomplete",t)("formControl",o.storesCtrl),e.xp6(3),e.Q6J("ngForOf",e.lcZ(7,3,o.filteredStores))}}function te(n,i){if(1&n&&(e.TgZ(0,"mat-option",19)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.Q6J("value",t._id),e.xp6(2),e.Oqu(t.name)}}function ne(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",20)(1,"mat-label"),e._uU(2,"Select product menu"),e.qZA(),e.TgZ(3,"mat-select",26),e.NdJ("selectionChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.changeMenu(a))}),e.YNc(4,te,3,2,"mat-option",9),e.ALo(5,"async"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",e.lcZ(5,1,t.menus$))}}function oe(n,i){if(1&n&&(e.TgZ(0,"mat-option",19)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.Q6J("value",t._id),e.xp6(2),e.Oqu(t.name)}}function ae(n,i){if(1&n&&(e.TgZ(0,"mat-form-field",20)(1,"mat-label"),e._uU(2,"Select product"),e.qZA(),e.TgZ(3,"mat-select",27),e.YNc(4,oe,3,2,"mat-option",9),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.selectedMenu.foods)}}function ie(n,i){if(1&n&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.name)}}function re(n,i){if(1&n&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.country),e.xp6(1),e.Oqu(t.country)}}function se(n,i){if(1&n&&(e.TgZ(0,"span",31),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.AsE(" (+",((null==t.bannerForm.value||null==t.bannerForm.value.states?null:t.bannerForm.value.states.length)||0)-1," ",2===(null==t.bannerForm.value||null==t.bannerForm.value.states?null:t.bannerForm.value.states.length)?"other":"others",") ")}}function le(n,i){if(1&n&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.name),e.xp6(1),e.Oqu(t.name)}}function me(n,i){if(1&n&&(e.TgZ(0,"mat-form-field",28)(1,"mat-label"),e._uU(2,"States"),e.qZA(),e.TgZ(3,"mat-select",29)(4,"mat-select-trigger"),e._uU(5),e.YNc(6,se,2,2,"span",30),e.qZA(),e.YNc(7,le,2,2,"mat-option",9),e.qZA()()),2&n){const t=e.oxw();e.xp6(5),e.hij(" ",(null==t.bannerForm.value||null==t.bannerForm.value.states?null:t.bannerForm.value.states[0])||""," "),e.xp6(1),e.Q6J("ngIf",((null==t.bannerForm.value||null==t.bannerForm.value.states?null:t.bannerForm.value.states.length)||0)>1),e.xp6(1),e.Q6J("ngForOf",t.selectedZone.states)}}function ce(n,i){if(1&n&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.name)}}const ue=function(){return["Product","Category","Blog"]},Q=function(){return{value:!0,name:"Yes"}},D=function(){return{value:!1,name:"No"}},L=function(n,i){return[n,i]};let de=(()=>{class n{constructor(t,o,a,l,m,p,C,A){this.fb=t,this.bannerService=o,this.location=a,this.dialog=l,this.route=m,this.storesService=p,this.storeService=C,this.menusService=A,this.storesCtrl=new r.NI(""),this.stores=[],this.menus=[],this.banner=this.route.snapshot.data.banner,this.deliveryZones=this.route.snapshot.data.deliveryZones,this.selectedCountry(this.banner.country),this.mediaData={image:null,icon:null},this.bannerForm=this.fb.group({image:[this.banner.image,r.kI.required],title:[this.banner.title,r.kI.required],active:[this.banner.active,r.kI.required],category:[this.banner.category,r.kI.required],link:[this.banner.link],showOnSlider:[this.banner.showOnSlider,r.kI.required],shortDescription:[this.banner.shortDescription,r.kI.required],storeId:[this.banner.storeId],menuId:[this.banner.menuId],productId:[this.banner.productId],country:[this.banner.country,r.kI.required],states:[this.banner.states,r.kI.required]}),this.mediaData={image:null,icon:null},this.mediaData.image=this.banner.image}ngOnInit(){"Product"==this.bannerForm.value.category&&(this.storeId=this.bannerForm.value.storeId,this.storeService.getStore(this.bannerForm.value.storeId).then(t=>{this.filteredStores=this.storesCtrl.valueChanges.pipe((0,B.O)(t.name),(0,N.b)(500),(0,q.w)(o=>this.storesService.search(o))),this.bannerForm.patchValue({storeId:t.name}),this.getStoreMenu(t._id)}))}selectedCountry(t){t&&(this.selectedZone=this.deliveryZones.find(o=>o.country==t))}onShopSelectionChanged(t){this.bannerForm.patchValue({storeId:t.option.value}),this.getStoreMenu(t.option.id),this.storeId=t.option.id}getStoreMenu(t){this.menus$=this.menusService.getStoreMenus(t).pipe((0,I.U)(o=>(this.menus=o,this.selectedMenu=this.menus.find(a=>a._id==this.banner.menuId),o)))}changeMenu(t){this.selectedMenu=this.menus.find(o=>o._id==t.source.value)}submit(){this.bannerForm.valid&&(this.bannerForm.patchValue({storeId:this.storeId}),this.bannerService.updateBanner(this.banner._id,this.bannerForm.getRawValue()).subscribe(t=>{this.location.back()}))}back(){this.location.back()}addMedia(t){this.dialog.open(S.R).afterClosed().subscribe(a=>{a&&(this.bannerForm.patchValue({[t]:a.url}),this.mediaData[t]={[t]:a}[t])})}removeValue(t){this.bannerForm.patchValue({[t]:null}),this.mediaData[t]=null}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(r.qu),e.Y36(f),e.Y36(c.Ye),e.Y36(b.uw),e.Y36(u.gz),e.Y36(J._),e.Y36(T.d),e.Y36(U.O))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-edit-banners"]],decls:46,vars:23,consts:[["ngStyle.gt-sm","width: 50rem;","ngStyle.lt-lg","width: 100%",1,"mat-elevation-z8","container","mx-auto","my-10","p-5"],[3,"formGroup","ngSubmit"],["fxLayout","column","fxLayoutAlign","space-evenly stretch"],[1,"mb-4"],["valueName","Image",3,"isNew","mediaData","removeValue","openMediaBrowser"],[1,"full-width"],["matInput","","cancellation","Name Of Banner","formControlName","title"],["matInput","","cancellation","Short Description","formControlName","shortDescription"],["formControlName","category"],[3,"value",4,"ngFor","ngForOf"],["class","example-full-width",4,"ngIf"],["matInput","","cancellation","Enter Link","formControlName","link"],["formControlName","showOnSlider"],["formControlName","country",3,"selectionChange"],["appearance","outline",4,"ngIf"],["formControlName","active"],["fxLayout","row","fxLayoutAlign","space-around center","fxLayoutGap","10px"],["mat-raised-button","","fxFlex","50%",3,"click"],["mat-raised-button","","fxFlex","50%","color","primary",3,"disabled"],[3,"value"],[1,"example-full-width"],["matInput","","aria-label","Store","formControlName","storeId",3,"matAutocomplete","formControl"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value","id",4,"ngFor","ngForOf"],[3,"value","id"],["formControlName","menuId",3,"selectionChange"],["formControlName","productId"],["appearance","outline"],["multiple","","formControlName","states"],["class","example-additional-selection",4,"ngIf"],[1,"example-additional-selection"]],template:function(o,a){1&o&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return a.submit()}),e.TgZ(2,"div",2)(3,"div",3)(4,"app-select-media",4),e.NdJ("removeValue",function(m){return a.removeValue(m)})("openMediaBrowser",function(m){return a.addMedia(m)}),e.qZA()(),e.TgZ(5,"mat-form-field",5)(6,"mat-label"),e._uU(7,"Name Of Banner"),e.qZA(),e._UZ(8,"input",6),e.qZA(),e.TgZ(9,"mat-form-field",5)(10,"mat-label"),e._uU(11,"Short Description"),e.qZA(),e._UZ(12,"textarea",7),e.qZA(),e.TgZ(13,"mat-form-field",5)(14,"mat-label"),e._uU(15,"Category"),e.qZA(),e.TgZ(16,"mat-select",8),e.YNc(17,W,2,2,"mat-option",9),e.qZA()(),e.YNc(18,ee,8,5,"mat-form-field",10),e.YNc(19,ne,6,3,"mat-form-field",10),e.YNc(20,ae,5,1,"mat-form-field",10),e.TgZ(21,"mat-form-field",5)(22,"mat-label"),e._uU(23,"Link"),e.qZA(),e._UZ(24,"input",11),e.qZA(),e.TgZ(25,"mat-form-field",5)(26,"mat-label"),e._uU(27,"Show on Slider"),e.qZA(),e.TgZ(28,"mat-select",12),e.YNc(29,ie,2,2,"mat-option",9),e.qZA()(),e.TgZ(30,"mat-form-field")(31,"mat-label"),e._uU(32,"Country"),e.qZA(),e.TgZ(33,"mat-select",13),e.NdJ("selectionChange",function(m){return a.selectedCountry(m.value)}),e.YNc(34,re,2,2,"mat-option",9),e.qZA()(),e.YNc(35,me,8,3,"mat-form-field",14),e.TgZ(36,"mat-form-field",5)(37,"mat-label"),e._uU(38,"Publish"),e.qZA(),e.TgZ(39,"mat-select",15),e.YNc(40,ce,2,2,"mat-option",9),e.qZA()(),e.TgZ(41,"div",16)(42,"a",17),e.NdJ("click",function(){return a.back()}),e._uU(43,"CANCEL"),e.qZA(),e.TgZ(44,"button",18),e._uU(45,"SAVE"),e.qZA()()()()()),2&o&&(e.xp6(1),e.Q6J("formGroup",a.bannerForm),e.xp6(3),e.Q6J("isNew",!1)("mediaData",null==a.mediaData?null:a.mediaData.image),e.xp6(13),e.Q6J("ngForOf",e.DdM(12,ue)),e.xp6(1),e.Q6J("ngIf","Product"===a.bannerForm.value.category),e.xp6(1),e.Q6J("ngIf",a.bannerForm.value.storeId),e.xp6(1),e.Q6J("ngIf",a.selectedMenu),e.xp6(9),e.Q6J("ngForOf",e.WLB(15,L,e.DdM(13,Q),e.DdM(14,D))),e.xp6(5),e.Q6J("ngForOf",a.deliveryZones),e.xp6(1),e.Q6J("ngIf",a.bannerForm.value.country),e.xp6(5),e.Q6J("ngForOf",e.WLB(20,L,e.DdM(18,Q),e.DdM(19,D))),e.xp6(4),e.Q6J("disabled",a.bannerForm.invalid))},dependencies:[c.sg,c.O5,g.XC,M.ey,g.ZL,_.zs,_.lW,h.KE,h.hX,O.Nt,v.gD,v.$L,r._Y,r.Fj,r.JJ,r.JL,r.oH,r.sg,r.u,d.xw,d.SQ,d.Wh,d.yH,w.Zl,Y.t,c.Ov]})}return n})();function pe(n,i){if(1&n&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function fe(n,i){if(1&n&&(e.TgZ(0,"mat-option",25)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.Q6J("value",t.name)("id",t._id),e.xp6(2),e.Oqu(t.name)}}function _e(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",20)(1,"mat-label"),e._uU(2,"Store"),e.qZA(),e._UZ(3,"input",21),e.TgZ(4,"mat-autocomplete",22,23),e.NdJ("optionSelected",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onShopSelectionChanged(a))}),e.YNc(6,fe,3,3,"mat-option",24),e.ALo(7,"async"),e.qZA()()}if(2&n){const t=e.MAs(5),o=e.oxw();e.xp6(3),e.Q6J("matAutocomplete",t)("formControl",o.storesCtrl),e.xp6(3),e.Q6J("ngForOf",e.lcZ(7,3,o.filteredStores))}}function ge(n,i){if(1&n&&(e.TgZ(0,"mat-option",19)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.Q6J("value",t._id),e.xp6(2),e.Oqu(t.name)}}function he(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",20)(1,"mat-label"),e._uU(2,"Select product menu"),e.qZA(),e.TgZ(3,"mat-select",26),e.NdJ("selectionChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.changeMenu(a))}),e.YNc(4,ge,3,2,"mat-option",8),e.ALo(5,"async"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",e.lcZ(5,1,t.menus$))}}function ve(n,i){if(1&n&&(e.TgZ(0,"mat-option",19)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.Q6J("value",t._id),e.xp6(2),e.Oqu(t.name)}}function Ze(n,i){if(1&n&&(e.TgZ(0,"mat-form-field",20)(1,"mat-label"),e._uU(2,"Select product"),e.qZA(),e.TgZ(3,"mat-select",27),e.YNc(4,ve,3,2,"mat-option",8),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.selectedMenu.foods)}}function Ce(n,i){if(1&n&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.name)}}function be(n,i){if(1&n&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.country),e.xp6(1),e.Oqu(t.country)}}function xe(n,i){if(1&n&&(e.TgZ(0,"span",30),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.AsE(" (+",((null==t.bannerForm.value||null==t.bannerForm.value.states?null:t.bannerForm.value.states.length)||0)-1," ",2===(null==t.bannerForm.value||null==t.bannerForm.value.states?null:t.bannerForm.value.states.length)?"other":"others",") ")}}function Te(n,i){if(1&n&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.name),e.xp6(1),e.Oqu(t.name)}}function Ae(n,i){if(1&n&&(e.TgZ(0,"mat-form-field",12)(1,"mat-label"),e._uU(2,"States"),e.qZA(),e.TgZ(3,"mat-select",28)(4,"mat-select-trigger"),e._uU(5),e.YNc(6,xe,2,2,"span",29),e.qZA(),e.YNc(7,Te,2,2,"mat-option",8),e.qZA()()),2&n){const t=e.oxw();e.xp6(5),e.hij(" ",(null==t.bannerForm.value||null==t.bannerForm.value.states?null:t.bannerForm.value.states[0])||""," "),e.xp6(1),e.Q6J("ngIf",((null==t.bannerForm.value||null==t.bannerForm.value.states?null:t.bannerForm.value.states.length)||0)>1),e.xp6(1),e.Q6J("ngForOf",t.selectedZone.states)}}const ye=function(){return["Product","Category","Blog","Ads"]},Fe=function(){return{value:!0,name:"Yes"}},Se=function(){return{value:!1,name:"No"}},Be=function(n,i){return[n,i]};let Ne=(()=>{class n{constructor(t,o,a,l,m,p,C,A){this.fb=t,this.bannerService=o,this.location=a,this.dialog=l,this.storesService=m,this.menusService=p,this.storeService=C,this.route=A,this.storesCtrl=new r.NI(""),this.stores=[],this.menus=[],this.deliveryZones=this.route.snapshot.data.deliveryZones,this.mediaData={image:null,icon:null},this.bannerForm=this.fb.group({image:["",r.kI.required],title:["",r.kI.required],active:[!1,r.kI.required],category:["",r.kI.required],link:[""],shortDescription:["",r.kI.required],showOnSlider:[!1,r.kI.required],storeId:[""],menuId:[""],productId:[""],country:["",r.kI.required],states:["",r.kI.required]})}selectedCountry(t){this.selectedZone=this.deliveryZones.find(o=>o.country==t.value)}ngOnInit(){this.filteredStores=this.storesCtrl.valueChanges.pipe((0,B.O)(""),(0,N.b)(500),(0,q.w)(t=>this.storesService.search(t)))}submit(){this.bannerForm.valid&&this.bannerService.createBanner(this.bannerForm.getRawValue()).subscribe(t=>{this.location.back()})}onShopSelectionChanged(t){this.bannerForm.patchValue({storeId:t.option.id}),this.getStoreMenu(t.option.id)}getStoreMenu(t){this.menus$=this.menusService.getStoreMenus(t).pipe((0,I.U)(o=>this.menus=o))}changeMenu(t){this.selectedMenu=this.menus.find(o=>o._id==t.source.value)}back(){this.location.back()}displayFn(t){return t.name}selectedStore(t){console.log(t.option.value)}addMedia(t){this.dialog.open(S.R).afterClosed().subscribe(a=>{a&&(this.bannerForm.patchValue({[t]:a.url}),this.mediaData[t]={[t]:a}[t])})}removeValue(t){this.bannerForm.patchValue({[t]:null}),this.mediaData[t]=null}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(r.qu),e.Y36(f),e.Y36(c.Ye),e.Y36(b.uw),e.Y36(J._),e.Y36(U.O),e.Y36(T.d),e.Y36(u.gz))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-banners"]],decls:42,vars:17,consts:[["ngStyle.gt-sm","width: 50rem;","ngStyle.lt-lg","width: 100%",1,"mat-elevation-z8","container","mx-auto","my-10","p-5"],[3,"formGroup","ngSubmit"],["fxLayout","column","fxLayoutAlign","space-evenly stretch"],["valueName","Image",3,"isNew","mediaData","removeValue","openMediaBrowser"],["appearance","outline",1,"full-width"],["matInput","","cancellation","Name Of Banner","formControlName","title"],["matInput","","cancellation","Short Description","formControlName","shortDescription"],["formControlName","category"],[3,"value",4,"ngFor","ngForOf"],["class","example-full-width",4,"ngIf"],["formControlName","showOnSlider"],["matInput","","cancellation","Enter Link","formControlName","link"],["appearance","outline"],["formControlName","country",3,"selectionChange"],["appearance","outline",4,"ngIf"],["formControlName","active"],["fxLayout","row","fxLayoutAlign","space-around center","fxLayoutGap","10px"],["mat-raised-button","","fxFlex","50%",3,"click"],["mat-raised-button","","fxFlex","50%","color","primary",3,"disabled"],[3,"value"],[1,"example-full-width"],["matInput","","aria-label","Store","formControlName","storeId",3,"matAutocomplete","formControl"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value","id",4,"ngFor","ngForOf"],[3,"value","id"],["formControlName","menuId",3,"selectionChange"],["formControlName","productId"],["multiple","","formControlName","states"],["class","example-additional-selection",4,"ngIf"],[1,"example-additional-selection"]],template:function(o,a){1&o&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return a.submit()}),e.TgZ(2,"div",2)(3,"app-select-media",3),e.NdJ("removeValue",function(m){return a.removeValue(m)})("openMediaBrowser",function(m){return a.addMedia(m)}),e.qZA(),e.TgZ(4,"mat-form-field",4)(5,"mat-label"),e._uU(6,"Name Of Banner"),e.qZA(),e._UZ(7,"input",5),e.qZA(),e.TgZ(8,"mat-form-field",4)(9,"mat-label"),e._uU(10,"Short Description"),e.qZA(),e._UZ(11,"input",6),e.qZA(),e.TgZ(12,"mat-form-field",4)(13,"mat-label"),e._uU(14,"Category"),e.qZA(),e.TgZ(15,"mat-select",7),e.YNc(16,pe,2,2,"mat-option",8),e.qZA()(),e.YNc(17,_e,8,5,"mat-form-field",9),e.YNc(18,he,6,3,"mat-form-field",9),e.YNc(19,Ze,5,1,"mat-form-field",9),e.TgZ(20,"mat-form-field",4)(21,"mat-label"),e._uU(22,"Show on Slider"),e.qZA(),e.TgZ(23,"mat-select",10),e.YNc(24,Ce,2,2,"mat-option",8),e.qZA()(),e.TgZ(25,"mat-form-field",4)(26,"mat-label"),e._uU(27,"Link"),e.qZA(),e._UZ(28,"input",11),e.qZA(),e.TgZ(29,"mat-form-field",12)(30,"mat-label"),e._uU(31,"Country"),e.qZA(),e.TgZ(32,"mat-select",13),e.NdJ("selectionChange",function(m){return a.selectedCountry(m)}),e.YNc(33,be,2,2,"mat-option",8),e.qZA()(),e.YNc(34,Ae,8,3,"mat-form-field",14),e.TgZ(35,"mat-slide-toggle",15),e._uU(36,"Enable"),e.qZA(),e.TgZ(37,"div",16)(38,"a",17),e.NdJ("click",function(){return a.back()}),e._uU(39,"CANCEL"),e.qZA(),e.TgZ(40,"button",18),e._uU(41,"SAVE"),e.qZA()()()()()),2&o&&(e.xp6(1),e.Q6J("formGroup",a.bannerForm),e.xp6(2),e.Q6J("isNew",!1)("mediaData",null==a.mediaData?null:a.mediaData.image),e.xp6(13),e.Q6J("ngForOf",e.DdM(11,ye)),e.xp6(1),e.Q6J("ngIf","Product"===a.bannerForm.value.category),e.xp6(1),e.Q6J("ngIf",a.bannerForm.value.storeId),e.xp6(1),e.Q6J("ngIf",a.selectedMenu),e.xp6(5),e.Q6J("ngForOf",e.WLB(14,Be,e.DdM(12,Fe),e.DdM(13,Se))),e.xp6(9),e.Q6J("ngForOf",a.deliveryZones),e.xp6(1),e.Q6J("ngIf",a.selectedZone),e.xp6(6),e.Q6J("disabled",a.bannerForm.invalid))},dependencies:[c.sg,c.O5,g.XC,M.ey,g.ZL,_.zs,_.lW,h.KE,h.hX,O.Nt,v.gD,v.$L,F.Rr,r._Y,r.Fj,r.JJ,r.JL,r.oH,r.sg,r.u,d.xw,d.SQ,d.Wh,d.yH,w.Zl,Y.t,c.Ov],styles:[".example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}.example-option-img[_ngcontent-%COMP%]{vertical-align:middle;margin-right:8px}[dir=rtl][_ngcontent-%COMP%]   .example-option-img[_ngcontent-%COMP%]{margin-right:0;margin-left:8px}"]})}return n})(),E=(()=>{class n{constructor(t){this.bannersService=t}resolve(){return this.bannersService.getBanners()}static#e=this.\u0275fac=function(o){return new(o||n)(e.LFG(f))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$=(()=>{class n{constructor(t){this.bannerService=t}resolve(t){const o=t.paramMap.get("id");return this.bannerService.getBanner(o)}static#e=this.\u0275fac=function(o){return new(o||n)(e.LFG(f))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Z=s(3212);const qe=[{path:"",component:V,children:[{path:"list",component:X,resolve:{banners:E}},{path:"new",component:Ne,resolve:{deliveryZones:Z.h}},{path:":id/edit",component:de,resolve:{banner:$,deliveryZones:Z.h}}]}];let Ie=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[u.Bz.forChild(qe),u.Bz]})}return n})();var Je=s(1447),Ue=s(6005),Me=s(4970),Oe=s(784),we=s(6208),Ye=s(547);let Qe=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({providers:[E,$,f,T.d,Z.h,Z.g,Ye._],imports:[Ie,c.ez,Ue.q,Oe.c,r.UX,r.u5,Je.o9,Me.a,u.Bz,we.m]})}return n})()}}]);