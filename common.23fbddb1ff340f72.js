"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[592],{9129:(Z,M,o)=>{o.d(M,{R:()=>J});var _=o(8746),p=o(520),g=o(7579),t=o(2349),e=o(5e3),u=o(9808),a=o(6696),T=o(2340);let A=(()=>{class n{constructor(i){this.http=i,this.endpoint=T.N.hostServer}getMedias(){return this.http.get(`${this.endpoint}/media`)}getMedia(i){return this.http.get(`${this.endpoint}/media/${i}`)}updateMedia(i,r){return this.http.put(`${this.endpoint}/media/${i}`,r)}saveMedia(i){return this.http.post(`${this.endpoint}/media`,i)}deleteMedia(i){return this.http.delete(`${this.endpoint}/media/${i}`)}uploadCsv(i){return this.http.post(`${this.endpoint}/medias/upload/csv`,i,{reportProgress:!0,observe:"events"})}}return n.\u0275fac=function(i){return new(i||n)(e.LFG(p.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var b=o(7423),P=o(5245),O=o(3251),y=o(5899),E=o(7093);function D(n,d){1&n&&e._UZ(0,"div",6)}function I(n,d){if(1&n){const i=e.EpF();e.TgZ(0,"div",2),e.NdJ("click",function(){e.CHM(i);const l=e.oxw();return e.KtG(l.select(l.media))}),e.TgZ(1,"button",3),e.NdJ("click",function(){e.CHM(i);const l=e.oxw();return e.KtG(l.delete())}),e.TgZ(2,"mat-icon",4),e._uU(3,"delete"),e.qZA()(),e.YNc(4,D,1,0,"div",5),e.qZA()}if(2&n){const i=e.oxw();e.Udp("background-image","url("+i.media.url+")"),e.xp6(4),e.Q6J("ngIf",i.media.isSelected)}}function S(n,d){1&n&&e._UZ(0,"div",6)}function L(n,d){if(1&n){const i=e.EpF();e.TgZ(0,"div",7),e.NdJ("click",function(){e.CHM(i);const l=e.oxw();return e.KtG(l.select(l.media))}),e.TgZ(1,"p",8)(2,"mat-icon",9),e._uU(3,"description"),e.qZA()(),e.TgZ(4,"span",10),e._uU(5),e.qZA(),e.TgZ(6,"span",11),e._uU(7),e.qZA(),e.TgZ(8,"button",3),e.NdJ("click",function(){e.CHM(i);const l=e.oxw();return e.KtG(l.delete())}),e.TgZ(9,"mat-icon",4),e._uU(10,"delete"),e.qZA()(),e.YNc(11,S,1,0,"div",5),e.qZA()}if(2&n){const i=e.oxw();e.xp6(5),e.Oqu(i.media.fileName),e.xp6(2),e.Oqu(i.media.format),e.xp6(4),e.Q6J("ngIf",i.media.isSelected)}}const F=function(){return["jpg","png","jpeg"]},N=function(){return["pdf","xls"]};let U=(()=>{class n{constructor(){this.deleteMedia=new e.vpe,this.selectedMedia=new e.vpe}delete(){this.deleteMedia.emit()}select(i){this.selectedMedia.emit(i)}}return n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-file-media-card"]],inputs:{media:"media"},outputs:{deleteMedia:"deleteMedia",selectedMedia:"selectedMedia"},decls:2,vars:4,consts:[["class","mat-elevation-z8 relative rounded-lg bg-center bg-no-repeat bg-cover h-52 m-5","fxLayout","column","fxLayoutAlign","center center",3,"background-image","click",4,"ngIf"],["class","mat-elevation-z8 relative rounded-lg h-52 bg-gray-200 m-5","fxLayout","column","fxLayoutAlign","center center",3,"click",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"mat-elevation-z8","relative","rounded-lg","bg-center","bg-no-repeat","bg-cover","h-52","m-5",3,"click"],["mat-icon-button","","color","warn",3,"click"],[1,"mat-18"],["class","p-3 bg-blue-500 rounded-full absolute right-2 bottom-2",4,"ngIf"],[1,"p-3","bg-blue-500","rounded-full","absolute","right-2","bottom-2"],["fxLayout","column","fxLayoutAlign","center center",1,"mat-elevation-z8","relative","rounded-lg","h-52","bg-gray-200","m-5",3,"click"],[1,"text-5xl"],[1,"mat-18","material-icons-outlined"],[1,"text-center"],[1,"text-center","uppercase","my-5"]],template:function(i,r){1&i&&(e.YNc(0,I,5,3,"div",0),e.YNc(1,L,12,3,"div",1)),2&i&&(e.Q6J("ngIf",e.DdM(2,F).includes(r.media.format)),e.xp6(1),e.Q6J("ngIf",e.DdM(3,N).includes(r.media.format)))},dependencies:[u.O5,b.lW,P.Hw]}),n})();function R(n,d){if(1&n){const i=e.EpF();e.TgZ(0,"app-file-media-card",3),e.NdJ("selectedMedia",function(l){e.CHM(i);const C=e.oxw().ngIf,h=e.oxw();return e.KtG(h.selectedMedia(l,C))})("deleteMedia",function(){const C=e.CHM(i).$implicit,h=e.oxw(2);return e.KtG(h.delete(C._id))}),e.qZA()}2&n&&e.Q6J("media",d.$implicit)}function m(n,d){if(1&n&&(e.TgZ(0,"div")(1,"div",1),e.YNc(2,R,1,1,"app-file-media-card",2),e.qZA()()),2&n){const i=d.ngIf;e.xp6(2),e.Q6J("ngForOf",i)}}let f=(()=>{class n{constructor(i){this.mediaService=i,this.browseMediaEvent=new e.vpe,this.chosenMediaEvent=new e.vpe}ngOnInit(){this.events.subscribe(()=>{this.loadMedias()}),this.loadMedias()}loadMedias(){this.media$=this.mediaService.getMedias()}delete(i){this.mediaService.deleteMedia(i).subscribe(()=>{this.loadMedias()})}openMedia(){this.browseMediaEvent.emit()}selectedMedia(i,r){r.forEach(l=>{l.isSelected=!1}),i.isSelected=!0,this.chosenMediaEvent.emit(i)}}return n.\u0275fac=function(i){return new(i||n)(e.Y36(A))},n.\u0275cmp=e.Xpm({type:n,selectors:[["portal-lists-all-media"]],inputs:{events:"events"},outputs:{browseMediaEvent:"browseMediaEvent",chosenMediaEvent:"chosenMediaEvent"},decls:2,vars:3,consts:[[4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","start start","fxLayoutGap","10px",1,"w-full","p-5"],["fxFlex","300px",3,"media","selectedMedia","deleteMedia",4,"ngFor","ngForOf"],["fxFlex","300px",3,"media","selectedMedia","deleteMedia"]],template:function(i,r){1&i&&(e.YNc(0,m,3,1,"div",0),e.ALo(1,"async")),2&i&&e.Q6J("ngIf",e.lcZ(1,1,r.media$))},dependencies:[u.sg,u.O5,E.xw,E.SQ,E.Wh,E.yH,U,u.Ov]}),n})();function s(n,d){1&n&&e._UZ(0,"mat-progress-bar",15)}function c(n,d){if(1&n){const i=e.EpF();e.TgZ(0,"portal-lists-all-media",16),e.NdJ("chosenMediaEvent",function(l){e.CHM(i);const C=e.oxw();return e.KtG(C.selectedMedia(l))})("browseMediaEvent",function(){e.CHM(i),e.oxw();const l=e.MAs(2);return e.KtG(l.click())}),e.qZA()}if(2&n){const i=e.oxw();e.Q6J("events",i.eventsSubject.asObservable())}}function v(n,d){}function x(n,d){}function $(n,d){}function K(n,d){}function Y(n,d){if(1&n){const i=e.EpF();e.TgZ(0,"mat-dialog-actions",17)(1,"button",18),e._uU(2,"CANCEL"),e.qZA(),e.TgZ(3,"button",19),e.NdJ("click",function(){e.CHM(i);const l=e.oxw();return e.KtG(l.selectMedia())}),e._uU(4,"SELECT"),e.qZA()()}}let J=(()=>{class n{constructor(i,r,l,C,h,W){this.location=i,this.route=r,this.router=l,this.mediaService=C,this.dialogRef=h,this.data=W,this.selectedTab=0,this.eventsSubject=new g.x}ngOnInit(){this.route.queryParams.subscribe(i=>{this.selectedTab=i.tab||0})}tabChanged(i){const r=Object.assign({},this.route.snapshot.queryParams);r.tab=i.index,this.router.navigate(["."],{queryParams:r,relativeTo:this.route})}back(){this.location.back()}emitEventToChild(){this.eventsSubject.next()}onFileLogoSelected(i){this.uploadProgress=0;const r=i.target.files[0];if(r){this.fileName=r.name;const l=new FormData;l.append("file",r);const C=this.mediaService.saveMedia(l).pipe((0,_.x)(()=>this.reset()));this.uploadSub=C.subscribe(h=>{h.type==p.dt.UploadProgress?this.uploadProgress=Math.round(h.loaded/h.total*100):h.hasOwnProperty("body")})}}selectedMedia(i){this.selectedMediaData=i}selectMedia(){this.dialogRef.close(this.selectedMediaData)}reset(){this.emitEventToChild(),this.uploadProgress=null,this.uploadSub=null}}return n.\u0275fac=function(i){return new(i||n)(e.Y36(u.Ye),e.Y36(a.gz),e.Y36(a.F0),e.Y36(A),e.Y36(t.so,8),e.Y36(t.WI,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-media"]],decls:26,vars:3,consts:[["type","file",1,"file-input",3,"change"],["logoUpload",""],["fxLayout","row","fxLayoutAlign","space-between center",1,"card","bg-white","mat-elevation-z2","px-2","py-2"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"text-lg","font-thin"],[1,"material-icons-outlined"],["mat-raised-button","","color","primary","type","submit",1,"material-icons-outlined",3,"click"],["mode","indeterminate",4,"ngIf"],[3,"selectedIndex","selectedTabChange"],["label","ALL"],["matTabContent",""],["label","IMAGES"],["label","DOCUMENTS"],["label","VIDEOS"],["label","AUDIO"],["align","start",4,"ngIf"],["mode","indeterminate"],[3,"events","chosenMediaEvent","browseMediaEvent"],["align","start"],["mat-button","","matDialogClose",""],["mat-raised-button","","color","primary",3,"click"]],template:function(i,r){if(1&i){const l=e.EpF();e.TgZ(0,"mat-dialog-content")(1,"input",0,1),e.NdJ("change",function(h){return r.onFileLogoSelected(h)}),e.qZA(),e.TgZ(3,"div",2)(4,"span",3)(5,"mat-icon",4),e._uU(6,"perm_media"),e.qZA(),e.TgZ(7,"span"),e._uU(8," Media"),e.qZA()(),e.TgZ(9,"button",5),e.NdJ("click",function(){e.CHM(l);const h=e.MAs(2);return e.KtG(h.click())}),e.TgZ(10,"mat-icon"),e._uU(11,"add_photo_alternate"),e.qZA(),e._uU(12," Add Media "),e.qZA()(),e.YNc(13,s,1,0,"mat-progress-bar",6),e.TgZ(14,"mat-tab-group",7),e.NdJ("selectedTabChange",function(h){return r.tabChanged(h)}),e.TgZ(15,"mat-tab",8),e.YNc(16,c,1,1,"ng-template",9),e.qZA(),e.TgZ(17,"mat-tab",10),e.YNc(18,v,0,0,"ng-template",9),e.qZA(),e.TgZ(19,"mat-tab",11),e.YNc(20,x,0,0,"ng-template",9),e.qZA(),e.TgZ(21,"mat-tab",12),e.YNc(22,$,0,0,"ng-template",9),e.qZA(),e.TgZ(23,"mat-tab",13),e.YNc(24,K,0,0,"ng-template",9),e.qZA()()(),e.YNc(25,Y,5,0,"mat-dialog-actions",14)}2&i&&(e.xp6(13),e.Q6J("ngIf",r.uploadProgress),e.xp6(1),e.Q6J("selectedIndex",r.selectedTab),e.xp6(11),e.Q6J("ngIf",r.dialogRef))},dependencies:[u.O5,b.lW,P.Hw,O.SP,O.uX,O.Vc,y.pW,t.ZT,t.xY,t.H8,E.xw,E.SQ,E.Wh,f],styles:[".file-input[_ngcontent-%COMP%]{display:none}"]}),n})()},4382:(Z,M,o)=>{o.d(M,{D:()=>R});var _=o(3075),p=o(2349),g=o(1159),t=o(5e3),e=o(4779),u=o(9808),a=o(508),T=o(7423),A=o(6688),b=o(7322),P=o(5245),O=o(7531),y=o(4107),E=o(7093);function D(m,f){if(1&m){const s=t.EpF();t.TgZ(0,"mat-chip",18),t.NdJ("removed",function(){const x=t.CHM(s).$implicit,$=t.oxw(2);return t.KtG($.remove(x))}),t._uU(1),t.TgZ(2,"button",19)(3,"mat-icon"),t._uU(4,"cancel"),t.qZA()()()}if(2&m){const s=f.$implicit;t.xp6(1),t.hij(" ",s.value.name," ")}}function I(m,f){if(1&m){const s=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",13)(2,"mat-label"),t._uU(3,"Recipients"),t.qZA(),t.TgZ(4,"mat-chip-list",14,15),t.YNc(6,D,5,1,"mat-chip",16),t.TgZ(7,"input",17),t.NdJ("matChipInputTokenEnd",function(v){t.CHM(s);const x=t.oxw();return t.KtG(x.add(v))}),t.qZA()()(),t.BQk()}if(2&m){const s=t.MAs(5),c=t.oxw();t.xp6(6),t.Q6J("ngForOf",c.recipients.controls),t.xp6(1),t.Q6J("matChipInputFor",s)("matChipInputSeparatorKeyCodes",c.separatorKeysCodes)("matChipInputAddOnBlur",c.addOnBlur)}}function S(m,f){if(1&m&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&m){const s=f.$implicit;t.Q6J("value",s),t.xp6(1),t.hij(" ",s," ")}}const L=function(){return["Registered Customers","Unregistered Customers","Both"]};function F(m,f){1&m&&(t.TgZ(0,"mat-form-field")(1,"mat-label"),t._uU(2,"Select Recipients"),t.qZA(),t.TgZ(3,"mat-select",20),t.YNc(4,S,2,2,"mat-option",8),t.qZA()()),2&m&&(t.xp6(4),t.Q6J("ngForOf",t.DdM(1,L)))}function N(m,f){if(1&m&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&m){const s=f.$implicit;t.Q6J("value",s),t.xp6(1),t.Oqu(s)}}const U=function(){return["Notification","Email","Both"]};let R=(()=>{class m{constructor(s,c,v,x){this.fb=s,this.notificationsService=c,this.dialogRef=v,this.data=x,this.messagesForm=this.fb.group({title:["",_.kI.required],body:["",_.kI.required],recipients:this.fb.array([]),type:["",_.kI.required],recipientsType:[null]}),this.addOnBlur=!0,this.separatorKeysCodes=[g.K5,g.OC],this.recipientsData=[]}ngOnInit(){this.data.allCustomers||(this.data.isBulkMsg?(this.recipientsData=this.data.customers,this.recipientsData.forEach(s=>{s.phoneCredentials.length>0&&this.addRecipients(s)})):(this.recipientsData.push(this.data.customers),this.recipientsData.map(s=>this.addRecipients(s))))}get recipients(){return this.messagesForm.controls.recipients}addRecipients(s){const c=this.fb.group({name:[s.name],id:[s._id],phoneToken:[s.phoneCredentials]});this.recipients.push(c)}deleteRecipient(s){this.recipients.removeAt(s)}submit(){this.notificationsService.createNotification(this.messagesForm.getRawValue()).subscribe(s=>{this.dialogRef.close(s)})}add(s){const c=(s.value||"").trim();c&&this.recipientsData.push({name:c}),s.chipInput.clear()}remove(s){const c=this.recipientsData.indexOf(s);c>=0&&this.recipientsData.splice(c,1)}edit(s,c){const v=c.value.trim();if(!v)return void this.remove(s);const x=this.recipientsData.indexOf(s);x>0&&(this.recipientsData[x].name=v)}}return m.\u0275fac=function(s){return new(s||m)(t.Y36(_.qu),t.Y36(e.T),t.Y36(p.so),t.Y36(p.WI))},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-create-messages"]],decls:28,vars:10,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["fxLayout","column","fxLayoutAlign","space-around stretch",3,"formGroup"],[4,"ngIf","ngIfElse"],["selectRecipient",""],["appearance","fill"],["matInput","","placeholder","Enter Message Title","formControlName","title"],["formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Enter Message Body","rows","20","formControlName","body"],["mat-dialog-actions",""],["mat-button","",3,"mat-dialog-close"],["mat-button","","cdkFocusInitial","",3,"disabled","click"],["appearance","fill",1,"example-chip-list"],["aria-label","Fruit selection","formArrayName","recipients"],["chipList",""],[3,"removed",4,"ngFor","ngForOf"],[3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],[3,"removed"],["matChipRemove",""],["formControlName","recipientsType"],[3,"value"]],template:function(s,c){if(1&s&&(t.TgZ(0,"h1",0),t._uU(1,"Send Notification"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2),t.YNc(4,I,8,4,"ng-container",3),t.YNc(5,F,5,2,"ng-template",null,4,t.W1O),t.TgZ(7,"mat-form-field",5)(8,"mat-label"),t._uU(9,"Title"),t.qZA(),t._UZ(10,"input",6),t.qZA(),t.TgZ(11,"mat-form-field",5)(12,"mat-label"),t._uU(13,"Select Message Type"),t.qZA(),t.TgZ(14,"mat-select",7),t.YNc(15,N,2,2,"mat-option",8),t.qZA()(),t.TgZ(16,"mat-form-field",5)(17,"mat-label"),t._uU(18,"body"),t.qZA(),t._UZ(19,"textarea",9),t.qZA()()(),t.TgZ(20,"div",10)(21,"button",11),t._uU(22,"Cancel"),t.qZA(),t.TgZ(23,"button",12),t.NdJ("click",function(){return c.submit()}),t._uU(24,"Send"),t.qZA()(),t.TgZ(25,"pre"),t._uU(26),t.ALo(27,"json"),t.qZA()),2&s){const v=t.MAs(6);t.xp6(3),t.Q6J("formGroup",c.messagesForm),t.xp6(1),t.Q6J("ngIf",!c.data.allCustomers)("ngIfElse",v),t.xp6(11),t.Q6J("ngForOf",t.DdM(9,U)),t.xp6(6),t.Q6J("mat-dialog-close",null),t.xp6(2),t.Q6J("disabled",c.messagesForm.invalid),t.xp6(3),t.hij("  ",t.lcZ(27,7,c.messagesForm.value),"\n")}},dependencies:[u.sg,u.O5,a.ey,T.lW,A.qn,A.HS,A.oH,A.qH,b.KE,b.hX,P.Hw,O.Nt,y.gD,p.ZT,p.uh,p.xY,p.H8,E.xw,E.Wh,_._Y,_.Fj,_.JJ,_.JL,_.sg,_.u,_.CE,u.Ts]}),m})()},3475:(Z,M,o)=>{o.d(M,{T:()=>g,f:()=>t});var _=o(5e3),p=o(6614);let g=(()=>{class e{constructor(a){this.permissionService=a}resolve(){return this.permissionService.getPermissions()}}return e.\u0275fac=function(a){return new(a||e)(_.LFG(p.$))},e.\u0275prov=_.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),t=(()=>{class e{constructor(a){this.permissionService=a}resolve(a){const T=a.paramMap.get("id");return this.permissionService.getPermission(T)}}return e.\u0275fac=function(a){return new(a||e)(_.LFG(p.$))},e.\u0275prov=_.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},3880:(Z,M,o)=>{o.d(M,{x:()=>t});var _=o(2340),p=o(5e3),g=o(520);let t=(()=>{class e{constructor(a){this._httpClient=a,this.hostServer=_.N.hostServer}createCuisine(a){return this._httpClient.post(`${this.hostServer}/cuisines`,a)}getCuisines(){return this._httpClient.get(`${this.hostServer}/cuisines`)}getCuisine(a){return this._httpClient.get(`${this.hostServer}/cuisines/${a}`)}updateCuisine(a,T){return this._httpClient.put(`${this.hostServer}/cuisines/${a}`,T)}deleteCuisine(a){return this._httpClient.delete(`${this.hostServer}/cuisines/${a}`)}}return e.\u0275fac=function(a){return new(a||e)(p.LFG(g.eN))},e.\u0275prov=p.Yz7({token:e,factory:e.\u0275fac}),e})()},4779:(Z,M,o)=>{o.d(M,{T:()=>t});var _=o(2340),p=o(5e3),g=o(520);let t=(()=>{class e{constructor(a){this._httpClient=a,this.hostServer=_.N.hostServer}createNotification(a){return this._httpClient.post(`${this.hostServer}/notifications`,a)}getNotifications(){return this._httpClient.get(`${this.hostServer}/notifications`)}getNotification(a){return this._httpClient.get(`${this.hostServer}/notifications/${a}`)}updateNotification(a,T){return this._httpClient.put(`${this.hostServer}/notifications/${a}`,T)}deleteNotification(a){return this._httpClient.delete(`${this.hostServer}/notifications/${a}`)}}return e.\u0275fac=function(a){return new(a||e)(p.LFG(g.eN))},e.\u0275prov=p.Yz7({token:e,factory:e.\u0275fac}),e})()},6614:(Z,M,o)=>{o.d(M,{$:()=>t});var _=o(2340),p=o(5e3),g=o(520);let t=(()=>{class e{constructor(a){this._httpClient=a,this.hostServer=_.N.hostServer}createPermission(a){return this._httpClient.post(`${this.hostServer}/roles`,a)}getPermissions(){return this._httpClient.get(`${this.hostServer}/roles`)}getPermission(a){return this._httpClient.get(`${this.hostServer}/roles/${a}`)}updatePermission(a,T){return this._httpClient.put(`${this.hostServer}/roles/${a}`,T)}deletePermission(a){return this._httpClient.delete(`${this.hostServer}/roles/${a}`)}}return e.\u0275fac=function(a){return new(a||e)(p.LFG(g.eN))},e.\u0275prov=p.Yz7({token:e,factory:e.\u0275fac}),e})()}}]);