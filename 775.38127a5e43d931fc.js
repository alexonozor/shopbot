"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[775],{6775:(De,B,l)=>{l.r(B),l.d(B,{BannersModule:()=>Qe});var m=l(6814),u=l(1896),e=l(5879);let R=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-banners"]],decls:1,vars:0,template:function(t,o){1&t&&e._UZ(0,"router-outlet")},dependencies:[u.lC],encapsulation:2}),n})();var V=l(6567),k=l(553),z=l(9862);let f=(()=>{class n{constructor(t){this._httpClient=t,this.hostServer=k.N.hostServer}createBanner(t){return this._httpClient.post(`${this.hostServer}/banners`,t)}getBanners(){return this._httpClient.get(`${this.hostServer}/banners/admin`)}getBanner(t){return this._httpClient.get(`${this.hostServer}/banners/${t}`)}updateBanner(t,o){return this._httpClient.put(`${this.hostServer}/banners/${t}`,o)}deleteBanner(t){return this._httpClient.delete(`${this.hostServer}/banners/${t}`)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(z.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var b=l(7700),_=l(2296),G=l(617),x=l(7988),y=l(2599),i=l(6223);function H(n,a){1&n&&(e.TgZ(0,"div",21),e._UZ(1,"div",22),e._uU(2," Active "),e.qZA())}function P(n,a){1&n&&(e.TgZ(0,"div",21),e._UZ(1,"div",23),e._uU(2," Inactive "),e.qZA())}function K(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"tr",8)(1,"th",9),e._UZ(2,"img",10),e.TgZ(3,"div",11)(4,"div",12),e._uU(5),e.qZA(),e.TgZ(6,"div",13),e._uU(7),e.qZA()()(),e.TgZ(8,"td",14),e.YNc(9,H,3,0,"div",15),e.YNc(10,P,3,0,"div",15),e.qZA(),e.TgZ(11,"td",14)(12,"mat-slide-toggle",16),e.NdJ("ngModelChange",function(r){const c=e.CHM(t).$implicit;return e.KtG(c.active=r)})("change",function(r){const c=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.onChange(c,r))}),e.qZA()(),e.TgZ(13,"td",14)(14,"button",17)(15,"mat-icon"),e._uU(16,"more_vert"),e.qZA()(),e.TgZ(17,"mat-menu",18,19),e.NdJ("click",function(r){return r.stopPropagation()}),e.TgZ(19,"button",20),e.NdJ("click",function(r){const s=e.CHM(t),c=s.index,p=s.$implicit;return e.oxw().delete(c,p._id),e.KtG(r.stopPropagation())}),e.TgZ(20,"mat-icon"),e._uU(21,"delete"),e.qZA(),e._uU(22," Delete"),e.qZA(),e.TgZ(23,"button",20),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.viewDetails(s))}),e.TgZ(24,"mat-icon"),e._uU(25,"edit"),e.qZA(),e._uU(26," Edit / View "),e.qZA()()()()}if(2&n){const t=a.$implicit,o=e.MAs(18);e.xp6(2),e.Q6J("src",t.image,e.LSH),e.xp6(3),e.Oqu(t.title),e.xp6(2),e.AsE("",t.category," - ",t.country," "),e.xp6(2),e.Q6J("ngIf",t.active),e.xp6(1),e.Q6J("ngIf",!t.active),e.xp6(2),e.Q6J("ngModel",t.active),e.xp6(2),e.Q6J("matMenuTriggerFor",o)}}let X=(()=>{class n{constructor(t,o,r,s){this.bannersService=t,this._matDialog=o,this.router=r,this.route=s,this.displayedColumns=["name","description","active","action"],this.banners=[],this.banners=this.route.snapshot.data.banners}ngOnInit(){}delete(t,o){this.confirmDialogRef=this._matDialog.open(V.X,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Banner?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete this banner?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(r=>{r&&(this.banners.splice(t,1),this.bannersService.deleteBanner(o).subscribe()),this.confirmDialogRef=null})}onChange(t,o){this.bannersService.updateBanner(t._id,{active:o.checked}).subscribe(()=>{})}viewDetails(t){this.router.navigate(["dashboard","banners",t._id,"edit"])}addBanner(){this.router.navigate(["dashboard","banners","new"])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(f),e.Y36(b.uw),e.Y36(u.F0),e.Y36(u.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-list-banners"]],decls:18,vars:1,consts:[[1,"w-full","h-screen","relative"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","text-gray-500"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50"],["scope","col",1,"px-6","py-3"],["class","bg-white border-b ",4,"ngFor","ngForOf"],["mat-fab","","color","primary",2,"position","fixed","bottom","80px","right","15px",3,"click"],[1,"mat-18"],[1,"bg-white","border-b"],["scope","row",1,"flex","items-center","px-6","py-4","text-gray-900","whitespace-nowrap"],["alt","Jese image",1,"w-10","h-10","rounded-full",3,"src"],[1,"pl-3"],[1,"text-base","font-semibold"],[1,"font-normal","text-gray-500"],[1,"px-6","py-4"],["class","flex items-center",4,"ngIf"],["color","primary",1,"mx-8",3,"ngModel","ngModelChange","change"],["mat-icon-button","",3,"matMenuTriggerFor"],[3,"click"],["menu","matMenu"],["mat-menu-item","",3,"click"],[1,"flex","items-center"],[1,"h-2.5","w-2.5","rounded-full","bg-green-500","mr-2"],[1,"h-2.5","w-2.5","rounded-full","bg-red-500","mr-2"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"table",2)(3,"thead",3)(4,"tr")(5,"th",4),e._uU(6," Name "),e.qZA(),e.TgZ(7,"th",4),e._uU(8," Status "),e.qZA(),e.TgZ(9,"th",4),e._uU(10," Change Status "),e.qZA(),e.TgZ(11,"th",4),e._uU(12," Action "),e.qZA()()(),e.TgZ(13,"tbody"),e.YNc(14,K,27,8,"tr",5),e.qZA()()(),e.TgZ(15,"button",6),e.NdJ("click",function(){return o.addBanner()}),e.TgZ(16,"mat-icon",7),e._uU(17,"add"),e.qZA()()()),2&t&&(e.xp6(14),e.Q6J("ngForOf",o.banners))},dependencies:[m.sg,m.O5,_.RK,_.cs,G.Hw,x.VK,x.OP,x.p6,y.Rr,i.JJ,i.On]}),n})();var F=l(6116),S=l(7921),N=l(3620),q=l(4664),I=l(7398),J=l(6284),T=l(4151),U=l(940),g=l(4630),M=l(3680),h=l(9157),O=l(2032),v=l(8525),d=l(3814),w=l(7509),Y=l(3064);function W(n,a){if(1&n&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function j(n,a){if(1&n&&(e.TgZ(0,"mat-option",25)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.Q6J("value",t.name)("id",t._id),e.xp6(2),e.Oqu(t.name)}}function ee(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",20)(1,"mat-label"),e._uU(2,"Store"),e.qZA(),e._UZ(3,"input",21),e.TgZ(4,"mat-autocomplete",22,23),e.NdJ("optionSelected",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.onShopSelectionChanged(r))}),e.YNc(6,j,3,3,"mat-option",24),e.ALo(7,"async"),e.qZA()()}if(2&n){const t=e.MAs(5),o=e.oxw();e.xp6(3),e.Q6J("matAutocomplete",t)("formControl",o.storesCtrl),e.xp6(3),e.Q6J("ngForOf",e.lcZ(7,3,o.filteredStores))}}function te(n,a){if(1&n&&(e.TgZ(0,"mat-option",19)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.Q6J("value",t._id),e.xp6(2),e.Oqu(t.name)}}function ne(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",20)(1,"mat-label"),e._uU(2,"Select product menu"),e.qZA(),e.TgZ(3,"mat-select",26),e.NdJ("selectionChange",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.changeMenu(r))}),e.YNc(4,te,3,2,"mat-option",9),e.ALo(5,"async"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",e.lcZ(5,1,t.menus$))}}function oe(n,a){if(1&n&&(e.TgZ(0,"mat-option",19)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.Q6J("value",t._id),e.xp6(2),e.Oqu(t.name)}}function ae(n,a){if(1&n&&(e.TgZ(0,"mat-form-field",20)(1,"mat-label"),e._uU(2,"Select product"),e.qZA(),e.TgZ(3,"mat-select",27),e.YNc(4,oe,3,2,"mat-option",9),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.selectedMenu.foods)}}function re(n,a){if(1&n&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.name)}}function ie(n,a){if(1&n&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.country),e.xp6(1),e.Oqu(t.country)}}function le(n,a){if(1&n&&(e.TgZ(0,"span",31),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.AsE(" (+",((null==t.bannerForm.value||null==t.bannerForm.value.localities?null:t.bannerForm.value.localities.length)||0)-1," ",2===(null==t.bannerForm.value||null==t.bannerForm.value.localities?null:t.bannerForm.value.localities.length)?"other":"others",") ")}}function se(n,a){if(1&n&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.name),e.xp6(1),e.Oqu(t.name)}}function me(n,a){if(1&n&&(e.TgZ(0,"mat-form-field",28)(1,"mat-label"),e._uU(2,"Localities"),e.qZA(),e.TgZ(3,"mat-select",29)(4,"mat-select-trigger"),e._uU(5),e.YNc(6,le,2,2,"span",30),e.qZA(),e.YNc(7,se,2,2,"mat-option",9),e.qZA()()),2&n){const t=e.oxw();e.xp6(5),e.hij(" ",(null==t.bannerForm.value||null==t.bannerForm.value.localities?null:t.bannerForm.value.localities[0])||""," "),e.xp6(1),e.Q6J("ngIf",((null==t.bannerForm.value||null==t.bannerForm.value.localities?null:t.bannerForm.value.localities.length)||0)>1),e.xp6(1),e.Q6J("ngForOf",t.selectedZone.localAreas)}}function ce(n,a){if(1&n&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.name)}}const ue=function(){return["Product","Category","Blog"]},Q=function(){return{value:!0,name:"Yes"}},D=function(){return{value:!1,name:"No"}},L=function(n,a){return[n,a]};let de=(()=>{class n{constructor(t,o,r,s,c,p,C,A){this.fb=t,this.bannerService=o,this.location=r,this.dialog=s,this.route=c,this.storesService=p,this.storeService=C,this.menusService=A,this.storesCtrl=new i.NI(""),this.stores=[],this.menus=[],this.banner=this.route.snapshot.data.banner,this.deliveryZones=this.route.snapshot.data.deliveryZones,console.log(this.banner.country),this.selectedCountry(this.banner.country),this.mediaData={image:null,icon:null},this.bannerForm=this.fb.group({image:[this.banner.image,i.kI.required],title:[this.banner.title,i.kI.required],active:[this.banner.active,i.kI.required],category:[this.banner.category,i.kI.required],link:[this.banner.link],showOnSlider:[this.banner.showOnSlider,i.kI.required],shortDescription:[this.banner.shortDescription,i.kI.required],storeId:[this.banner.storeId],menuId:[this.banner.menuId],productId:[this.banner.productId],country:[this.banner.country,i.kI.required],localities:[this.banner.localities,i.kI.required]}),this.mediaData={image:null,icon:null},this.mediaData.image=this.banner.image}ngOnInit(){"Product"==this.bannerForm.value.category&&(this.storeId=this.bannerForm.value.storeId,this.storeService.getStore(this.bannerForm.value.storeId).then(t=>{this.filteredStores=this.storesCtrl.valueChanges.pipe((0,S.O)(t.name),(0,N.b)(500),(0,q.w)(o=>this.storesService.search(o))),this.bannerForm.patchValue({storeId:t.name}),this.getStoreMenu(t._id)}))}selectedCountry(t){t&&(this.selectedZone=this.deliveryZones.find(o=>o.country==t))}onShopSelectionChanged(t){this.bannerForm.patchValue({storeId:t.option.value}),this.getStoreMenu(t.option.id),this.storeId=t.option.id}getStoreMenu(t){this.menus$=this.menusService.getStoreMenus(t).pipe((0,I.U)(o=>(this.menus=o,this.selectedMenu=this.menus.find(r=>r._id==this.banner.menuId),o)))}changeMenu(t){this.selectedMenu=this.menus.find(o=>o._id==t.source.value)}submit(){this.bannerForm.valid&&(this.bannerForm.patchValue({storeId:this.storeId}),this.bannerService.updateBanner(this.banner._id,this.bannerForm.getRawValue()).subscribe(t=>{this.location.back()}))}back(){this.location.back()}addMedia(t){this.dialog.open(F.R).afterClosed().subscribe(r=>{r&&(this.bannerForm.patchValue({[t]:r.url}),this.mediaData[t]={[t]:r}[t])})}removeValue(t){this.bannerForm.patchValue({[t]:null}),this.mediaData[t]=null}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(i.qu),e.Y36(f),e.Y36(m.Ye),e.Y36(b.uw),e.Y36(u.gz),e.Y36(J._),e.Y36(T.d),e.Y36(U.O))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-edit-banners"]],decls:46,vars:23,consts:[["ngStyle.gt-sm","width: 50rem;","ngStyle.lt-lg","width: 100%",1,"mat-elevation-z8","container","mx-auto","my-10","p-5"],[3,"formGroup","ngSubmit"],["fxLayout","column","fxLayoutAlign","space-evenly stretch"],[1,"mb-4"],["valueName","Image",3,"isNew","mediaData","removeValue","openMediaBrowser"],[1,"full-width"],["matInput","","placeholder","Name Of Banner","formControlName","title"],["matInput","","placeholder","Short Description","formControlName","shortDescription"],["formControlName","category"],[3,"value",4,"ngFor","ngForOf"],["class","example-full-width",4,"ngIf"],["matInput","","placeholder","Enter Link","formControlName","link"],["formControlName","showOnSlider"],["formControlName","country",3,"selectionChange"],["appearance","outline",4,"ngIf"],["formControlName","active"],["fxLayout","row","fxLayoutAlign","space-around center","fxLayoutGap","10px"],["mat-raised-button","","fxFlex","50%",3,"click"],["mat-raised-button","","fxFlex","50%","color","primary",3,"disabled"],[3,"value"],[1,"example-full-width"],["matInput","","aria-label","Store","formControlName","storeId",3,"matAutocomplete","formControl"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value","id",4,"ngFor","ngForOf"],[3,"value","id"],["formControlName","menuId",3,"selectionChange"],["formControlName","productId"],["appearance","outline"],["multiple","","formControlName","localities"],["class","example-additional-selection",4,"ngIf"],[1,"example-additional-selection"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return o.submit()}),e.TgZ(2,"div",2)(3,"div",3)(4,"app-select-media",4),e.NdJ("removeValue",function(s){return o.removeValue(s)})("openMediaBrowser",function(s){return o.addMedia(s)}),e.qZA()(),e.TgZ(5,"mat-form-field",5)(6,"mat-label"),e._uU(7,"Name Of Banner"),e.qZA(),e._UZ(8,"input",6),e.qZA(),e.TgZ(9,"mat-form-field",5)(10,"mat-label"),e._uU(11,"Short Description"),e.qZA(),e._UZ(12,"textarea",7),e.qZA(),e.TgZ(13,"mat-form-field",5)(14,"mat-label"),e._uU(15,"Category"),e.qZA(),e.TgZ(16,"mat-select",8),e.YNc(17,W,2,2,"mat-option",9),e.qZA()(),e.YNc(18,ee,8,5,"mat-form-field",10),e.YNc(19,ne,6,3,"mat-form-field",10),e.YNc(20,ae,5,1,"mat-form-field",10),e.TgZ(21,"mat-form-field",5)(22,"mat-label"),e._uU(23,"Link"),e.qZA(),e._UZ(24,"input",11),e.qZA(),e.TgZ(25,"mat-form-field",5)(26,"mat-label"),e._uU(27,"Show on Slider"),e.qZA(),e.TgZ(28,"mat-select",12),e.YNc(29,re,2,2,"mat-option",9),e.qZA()(),e.TgZ(30,"mat-form-field")(31,"mat-label"),e._uU(32,"Country"),e.qZA(),e.TgZ(33,"mat-select",13),e.NdJ("selectionChange",function(s){return o.selectedCountry(s.value)}),e.YNc(34,ie,2,2,"mat-option",9),e.qZA()(),e.YNc(35,me,8,3,"mat-form-field",14),e.TgZ(36,"mat-form-field",5)(37,"mat-label"),e._uU(38,"Publish"),e.qZA(),e.TgZ(39,"mat-select",15),e.YNc(40,ce,2,2,"mat-option",9),e.qZA()(),e.TgZ(41,"div",16)(42,"a",17),e.NdJ("click",function(){return o.back()}),e._uU(43,"CANCEL"),e.qZA(),e.TgZ(44,"button",18),e._uU(45,"SAVE"),e.qZA()()()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",o.bannerForm),e.xp6(3),e.Q6J("isNew",!1)("mediaData",null==o.mediaData?null:o.mediaData.image),e.xp6(13),e.Q6J("ngForOf",e.DdM(12,ue)),e.xp6(1),e.Q6J("ngIf","Product"===o.bannerForm.value.category),e.xp6(1),e.Q6J("ngIf",o.bannerForm.value.storeId),e.xp6(1),e.Q6J("ngIf",o.selectedMenu),e.xp6(9),e.Q6J("ngForOf",e.WLB(15,L,e.DdM(13,Q),e.DdM(14,D))),e.xp6(5),e.Q6J("ngForOf",o.deliveryZones),e.xp6(1),e.Q6J("ngIf",o.bannerForm.value.country),e.xp6(5),e.Q6J("ngForOf",e.WLB(20,L,e.DdM(18,Q),e.DdM(19,D))),e.xp6(4),e.Q6J("disabled",o.bannerForm.invalid))},dependencies:[m.sg,m.O5,g.XC,M.ey,g.ZL,_.zs,_.lW,h.KE,h.hX,O.Nt,v.gD,v.$L,i._Y,i.Fj,i.JJ,i.JL,i.oH,i.sg,i.u,d.xw,d.SQ,d.Wh,d.yH,w.Zl,Y.t,m.Ov]}),n})();function pe(n,a){if(1&n&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function fe(n,a){if(1&n&&(e.TgZ(0,"mat-option",25)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.Q6J("value",t.name)("id",t._id),e.xp6(2),e.Oqu(t.name)}}function _e(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",20)(1,"mat-label"),e._uU(2,"Store"),e.qZA(),e._UZ(3,"input",21),e.TgZ(4,"mat-autocomplete",22,23),e.NdJ("optionSelected",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.onShopSelectionChanged(r))}),e.YNc(6,fe,3,3,"mat-option",24),e.ALo(7,"async"),e.qZA()()}if(2&n){const t=e.MAs(5),o=e.oxw();e.xp6(3),e.Q6J("matAutocomplete",t)("formControl",o.storesCtrl),e.xp6(3),e.Q6J("ngForOf",e.lcZ(7,3,o.filteredStores))}}function ge(n,a){if(1&n&&(e.TgZ(0,"mat-option",19)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.Q6J("value",t._id),e.xp6(2),e.Oqu(t.name)}}function he(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",20)(1,"mat-label"),e._uU(2,"Select product menu"),e.qZA(),e.TgZ(3,"mat-select",26),e.NdJ("selectionChange",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.changeMenu(r))}),e.YNc(4,ge,3,2,"mat-option",8),e.ALo(5,"async"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",e.lcZ(5,1,t.menus$))}}function ve(n,a){if(1&n&&(e.TgZ(0,"mat-option",19)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.Q6J("value",t._id),e.xp6(2),e.Oqu(t.name)}}function Ze(n,a){if(1&n&&(e.TgZ(0,"mat-form-field",20)(1,"mat-label"),e._uU(2,"Select product"),e.qZA(),e.TgZ(3,"mat-select",27),e.YNc(4,ve,3,2,"mat-option",8),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.selectedMenu.foods)}}function Ce(n,a){if(1&n&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.name)}}function be(n,a){if(1&n&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.country),e.xp6(1),e.Oqu(t.country)}}function xe(n,a){if(1&n&&(e.TgZ(0,"span",30),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.AsE(" (+",((null==t.bannerForm.value||null==t.bannerForm.value.localities?null:t.bannerForm.value.localities.length)||0)-1," ",2===(null==t.bannerForm.value||null==t.bannerForm.value.localities?null:t.bannerForm.value.localities.length)?"other":"others",") ")}}function Te(n,a){if(1&n&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.name),e.xp6(1),e.Oqu(t.name)}}function Ae(n,a){if(1&n&&(e.TgZ(0,"mat-form-field",12)(1,"mat-label"),e._uU(2,"Localities"),e.qZA(),e.TgZ(3,"mat-select",28)(4,"mat-select-trigger"),e._uU(5),e.YNc(6,xe,2,2,"span",29),e.qZA(),e.YNc(7,Te,2,2,"mat-option",8),e.qZA()()),2&n){const t=e.oxw();e.xp6(5),e.hij(" ",(null==t.bannerForm.value||null==t.bannerForm.value.localities?null:t.bannerForm.value.localities[0])||""," "),e.xp6(1),e.Q6J("ngIf",((null==t.bannerForm.value||null==t.bannerForm.value.localities?null:t.bannerForm.value.localities.length)||0)>1),e.xp6(1),e.Q6J("ngForOf",t.selectedZone.localAreas)}}const Be=function(){return["Product","Category","Blog","Ads"]},ye=function(){return{value:!0,name:"Yes"}},Fe=function(){return{value:!1,name:"No"}},Se=function(n,a){return[n,a]};let Ne=(()=>{class n{constructor(t,o,r,s,c,p,C,A){this.fb=t,this.bannerService=o,this.location=r,this.dialog=s,this.storesService=c,this.menusService=p,this.storeService=C,this.route=A,this.storesCtrl=new i.NI(""),this.stores=[],this.menus=[],this.deliveryZones=this.route.snapshot.data.deliveryZones,this.mediaData={image:null,icon:null},this.bannerForm=this.fb.group({image:["",i.kI.required],title:["",i.kI.required],active:[!1,i.kI.required],category:["",i.kI.required],link:[""],shortDescription:["",i.kI.required],showOnSlider:[!1,i.kI.required],storeId:[""],menuId:[""],productId:[""],country:["",i.kI.required],localities:["",i.kI.required]})}selectedCountry(t){this.selectedZone=this.deliveryZones.find(o=>o.country==t.value)}ngOnInit(){this.filteredStores=this.storesCtrl.valueChanges.pipe((0,S.O)(""),(0,N.b)(500),(0,q.w)(t=>this.storesService.search(t)))}submit(){this.bannerForm.valid&&this.bannerService.createBanner(this.bannerForm.getRawValue()).subscribe(t=>{this.location.back()})}onShopSelectionChanged(t){this.bannerForm.patchValue({storeId:t.option.id}),this.getStoreMenu(t.option.id)}getStoreMenu(t){this.menus$=this.menusService.getStoreMenus(t).pipe((0,I.U)(o=>this.menus=o))}changeMenu(t){this.selectedMenu=this.menus.find(o=>o._id==t.source.value)}back(){this.location.back()}displayFn(t){return t.name}selectedStore(t){console.log(t.option.value)}addMedia(t){this.dialog.open(F.R).afterClosed().subscribe(r=>{r&&(this.bannerForm.patchValue({[t]:r.url}),this.mediaData[t]={[t]:r}[t])})}removeValue(t){this.bannerForm.patchValue({[t]:null}),this.mediaData[t]=null}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(i.qu),e.Y36(f),e.Y36(m.Ye),e.Y36(b.uw),e.Y36(J._),e.Y36(U.O),e.Y36(T.d),e.Y36(u.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-banners"]],decls:42,vars:17,consts:[["ngStyle.gt-sm","width: 50rem;","ngStyle.lt-lg","width: 100%",1,"mat-elevation-z8","container","mx-auto","my-10","p-5"],[3,"formGroup","ngSubmit"],["fxLayout","column","fxLayoutAlign","space-evenly stretch"],["valueName","Image",3,"isNew","mediaData","removeValue","openMediaBrowser"],["appearance","outline",1,"full-width"],["matInput","","placeholder","Name Of Banner","formControlName","title"],["matInput","","placeholder","Short Description","formControlName","shortDescription"],["formControlName","category"],[3,"value",4,"ngFor","ngForOf"],["class","example-full-width",4,"ngIf"],["formControlName","showOnSlider"],["matInput","","placeholder","Enter Link","formControlName","link"],["appearance","outline"],["formControlName","country",3,"selectionChange"],["appearance","outline",4,"ngIf"],["formControlName","active"],["fxLayout","row","fxLayoutAlign","space-around center","fxLayoutGap","10px"],["mat-raised-button","","fxFlex","50%",3,"click"],["mat-raised-button","","fxFlex","50%","color","primary",3,"disabled"],[3,"value"],[1,"example-full-width"],["matInput","","aria-label","Store","formControlName","storeId",3,"matAutocomplete","formControl"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value","id",4,"ngFor","ngForOf"],[3,"value","id"],["formControlName","menuId",3,"selectionChange"],["formControlName","productId"],["multiple","","formControlName","localities"],["class","example-additional-selection",4,"ngIf"],[1,"example-additional-selection"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return o.submit()}),e.TgZ(2,"div",2)(3,"app-select-media",3),e.NdJ("removeValue",function(s){return o.removeValue(s)})("openMediaBrowser",function(s){return o.addMedia(s)}),e.qZA(),e.TgZ(4,"mat-form-field",4)(5,"mat-label"),e._uU(6,"Name Of Banner"),e.qZA(),e._UZ(7,"input",5),e.qZA(),e.TgZ(8,"mat-form-field",4)(9,"mat-label"),e._uU(10,"Short Description"),e.qZA(),e._UZ(11,"input",6),e.qZA(),e.TgZ(12,"mat-form-field",4)(13,"mat-label"),e._uU(14,"Category"),e.qZA(),e.TgZ(15,"mat-select",7),e.YNc(16,pe,2,2,"mat-option",8),e.qZA()(),e.YNc(17,_e,8,5,"mat-form-field",9),e.YNc(18,he,6,3,"mat-form-field",9),e.YNc(19,Ze,5,1,"mat-form-field",9),e.TgZ(20,"mat-form-field",4)(21,"mat-label"),e._uU(22,"Show on Slider"),e.qZA(),e.TgZ(23,"mat-select",10),e.YNc(24,Ce,2,2,"mat-option",8),e.qZA()(),e.TgZ(25,"mat-form-field",4)(26,"mat-label"),e._uU(27,"Link"),e.qZA(),e._UZ(28,"input",11),e.qZA(),e.TgZ(29,"mat-form-field",12)(30,"mat-label"),e._uU(31,"Country"),e.qZA(),e.TgZ(32,"mat-select",13),e.NdJ("selectionChange",function(s){return o.selectedCountry(s)}),e.YNc(33,be,2,2,"mat-option",8),e.qZA()(),e.YNc(34,Ae,8,3,"mat-form-field",14),e.TgZ(35,"mat-slide-toggle",15),e._uU(36,"Enable"),e.qZA(),e.TgZ(37,"div",16)(38,"a",17),e.NdJ("click",function(){return o.back()}),e._uU(39,"CANCEL"),e.qZA(),e.TgZ(40,"button",18),e._uU(41,"SAVE"),e.qZA()()()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",o.bannerForm),e.xp6(2),e.Q6J("isNew",!1)("mediaData",null==o.mediaData?null:o.mediaData.image),e.xp6(13),e.Q6J("ngForOf",e.DdM(11,Be)),e.xp6(1),e.Q6J("ngIf","Product"===o.bannerForm.value.category),e.xp6(1),e.Q6J("ngIf",o.bannerForm.value.storeId),e.xp6(1),e.Q6J("ngIf",o.selectedMenu),e.xp6(5),e.Q6J("ngForOf",e.WLB(14,Se,e.DdM(12,ye),e.DdM(13,Fe))),e.xp6(9),e.Q6J("ngForOf",o.deliveryZones),e.xp6(1),e.Q6J("ngIf",o.selectedZone),e.xp6(6),e.Q6J("disabled",o.bannerForm.invalid))},dependencies:[m.sg,m.O5,g.XC,M.ey,g.ZL,_.zs,_.lW,h.KE,h.hX,O.Nt,v.gD,v.$L,y.Rr,i._Y,i.Fj,i.JJ,i.JL,i.oH,i.sg,i.u,d.xw,d.SQ,d.Wh,d.yH,w.Zl,Y.t,m.Ov],styles:[".example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}.example-option-img[_ngcontent-%COMP%]{vertical-align:middle;margin-right:8px}[dir=rtl][_ngcontent-%COMP%]   .example-option-img[_ngcontent-%COMP%]{margin-right:0;margin-left:8px}"]}),n})(),E=(()=>{class n{constructor(t){this.bannersService=t}resolve(){return this.bannersService.getBanners()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(f))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$=(()=>{class n{constructor(t){this.bannerService=t}resolve(t){const o=t.paramMap.get("id");return this.bannerService.getBanner(o)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(f))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Z=l(3212);const qe=[{path:"",component:R,children:[{path:"list",component:X,resolve:{banners:E}},{path:"new",component:Ne,resolve:{deliveryZones:Z.h}},{path:":id/edit",component:de,resolve:{banner:$,deliveryZones:Z.h}}]}];let Ie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.Bz.forChild(qe),u.Bz]}),n})();var Je=l(1447),Ue=l(6005),Me=l(7026),Oe=l(784),we=l(6208),Ye=l(547);let Qe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[E,$,f,T.d,Z.h,Z.g,Ye._],imports:[Ie,m.ez,Ue.q,Oe.c,i.UX,i.u5,Je.o9,Me.a,u.Bz,we.m]}),n})()}}]);