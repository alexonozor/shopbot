"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[1616],{1616:(le,S,s)=>{s.r(S),s.d(S,{CategoriesModule:()=>ne});var u=s(177),d=s(8498),e=s(4020);let j=(()=>{class a{constructor(){}ngOnInit(){}static{this.\u0275fac=function(i){return new(i||a)}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-categories"]],decls:1,vars:0,template:function(i,o){1&i&&e.nrm(0,"router-outlet")},dependencies:[d.iI,d.n3],encapsulation:2})}}return a})();var T=s(5024),y=s(6440),c=s(9159),L=s(1269),F=s(9213),v=s(2765),f=s(9115),p=s(8834),b=s(6924),k=s(1846),R=s(5351),g=s(2920);const N=()=>[15,30,60],Y=()=>["../","new"],A=a=>["../",a,"details"];function X(a,r){if(1&a){const t=e.RV6();e.j41(0,"span",2)(1,"button",19),e.EFF(2),e.k0s(),e.j41(3,"button",20),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.deleteSelected())}),e.j41(4,"mat-icon",18),e.EFF(5,"delete"),e.k0s(),e.EFF(6," Delete Selected Categories "),e.k0s()()}if(2&a){const t=e.XpG();e.R7$(2),e.SpI("",t.selection.selected.length," Selected")}}function B(a,r){if(1&a){const t=e.RV6();e.j41(0,"th",21)(1,"mat-checkbox",22),e.bIt("change",function(o){e.eBV(t);const l=e.XpG();return e.Njj(o?l.toggleAllRows():null)}),e.k0s()()}if(2&a){const t=e.XpG();e.R7$(),e.Y8G("checked",t.selection.hasValue()&&t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected())("aria-label",t.checkboxLabel())}}function M(a,r){if(1&a){const t=e.RV6();e.j41(0,"td",23)(1,"mat-checkbox",24),e.bIt("click",function(o){return e.eBV(t),e.Njj(o.stopPropagation())})("change",function(o){const l=e.eBV(t).$implicit,m=e.XpG();return e.Njj(o?m.selection.toggle(l):null)}),e.k0s()()}if(2&a){const t=r.$implicit,i=e.XpG();e.R7$(),e.Y8G("checked",i.selection.isSelected(t))("aria-label",i.checkboxLabel(t))}}function O(a,r){1&a&&(e.j41(0,"th",21),e.EFF(1,"Name"),e.k0s())}function U(a,r){if(1&a&&(e.j41(0,"td",23),e.EFF(1),e.k0s()),2&a){const t=r.$implicit;e.R7$(),e.JRh(t.name)}}function Z(a,r){1&a&&(e.j41(0,"th",21),e.EFF(1,"Status"),e.k0s())}function J(a,r){if(1&a&&(e.j41(0,"td",23),e.EFF(1),e.k0s()),2&a){const t=r.$implicit;e.R7$(),e.JRh(t.status)}}function z(a,r){1&a&&(e.j41(0,"th",21),e.EFF(1,"Created At"),e.k0s())}function H(a,r){if(1&a&&(e.j41(0,"td",23),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&a){const t=r.$implicit;e.R7$(),e.JRh(e.i5U(2,1,t.createdAt,"short"))}}function P(a,r){1&a&&(e.j41(0,"th",21),e.EFF(1,"Actions"),e.k0s())}function K(a,r){if(1&a){const t=e.RV6();e.j41(0,"td",23)(1,"button",25)(2,"mat-icon"),e.EFF(3,"more_vert"),e.k0s()(),e.j41(4,"mat-menu",null,0)(6,"button",26),e.bIt("click",function(){const o=e.eBV(t),l=o.$implicit,m=o.index,se=e.XpG();return e.Njj(se.deleteCategories(l._id,m))}),e.j41(7,"mat-icon",27),e.EFF(8,"delete"),e.k0s(),e.j41(9,"span"),e.EFF(10,"Delete"),e.k0s()(),e.j41(11,"button",28)(12,"mat-icon",27),e.EFF(13,"edit"),e.k0s(),e.j41(14,"span"),e.EFF(15,"Edit"),e.k0s()()()()}if(2&a){const t=r.$implicit,i=e.sdS(5);e.R7$(),e.Y8G("matMenuTriggerFor",i),e.R7$(10),e.Y8G("routerLink",e.eq3(2,A,t._id))}}function Q(a,r){1&a&&e.nrm(0,"tr",29)}function W(a,r){1&a&&e.nrm(0,"tr",30)}let x=(()=>{class a{constructor(t,i,o){this.route=t,this.categoriesService=i,this._matDialog=o,this.displayedColumns=["select","name","status","createdAt","actions"],this.dataSource=new c.I6([]),this.selection=new T.CB(!0,[])}ngAfterViewInit(){this.dataSource.paginator=this.paginator}ngOnInit(){this.dataSource=new c.I6(this.route.snapshot.data.categories)}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}deleteSelected(){this.confirmDialogRef=this._matDialog.open(L.Y,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete categories?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete these categories?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(t=>{t&&this.selection.selected.forEach((i,o)=>{this.dataSource.data.splice(o,1),this.dataSource=new c.I6(this.dataSource.data),this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.categoriesService.deleteCategory(i._id).subscribe()})})}checkboxLabel(t){return t?`${this.selection.isSelected(t)?"deselect":"select"} row ${t.position+1}`:(this.isAllSelected()?"deselect":"select")+" all"}deleteCategories(t,i){this.confirmDialogRef=this._matDialog.open(L.Y,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Categories?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete this categories?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(o=>{o&&(this.dataSource.data.splice(i,1),this.dataSource=new c.I6(this.dataSource.data),this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.categoriesService.deleteCategory(t).subscribe())})}static{this.\u0275fac=function(i){return new(i||a)(e.rXU(d.nX),e.rXU(k.w),e.rXU(R.bZ))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-list-categories"]],viewQuery:function(i,o){if(1&i&&e.GBs(y.iy,5),2&i){let l;e.mGM(l=e.lsd())&&(o.paginator=l.first)}},decls:30,vars:8,consts:[["menu","matMenu"],["fxLayout","row","fxLayoutGap","10px","fxLayoutAlign","start center",1,"card","bg-white","w-full","mat-elevation-z2","px-2","py-2"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"text-lg","font-thin"],["class","text-lg font-thin","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",4,"ngIf"],[1,"mat-elevation-z8"],["mat-table","",1,"w-full",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","status"],["matColumnDef","createdAt"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["fxLayout","row","fxLayoutAlign","end center",1,"m-5"],["mat-fab","","color","primary",1,"m-10",3,"routerLink"],[1,"mat-18"],["mat-button",""],["mat-stroked-button","","color","warn",3,"click"],["mat-header-cell",""],[3,"change","checked","indeterminate","aria-label"],["mat-cell",""],[3,"click","change","checked","aria-label"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],[1,"material-icons-outlined"],["mat-menu-item","",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(i,o){1&i&&(e.j41(0,"div")(1,"div",1)(2,"span",2)(3,"span"),e.EFF(4,"Category"),e.k0s()(),e.DNE(5,X,7,1,"span",3),e.k0s(),e.j41(6,"div",4)(7,"table",5),e.qex(8,6),e.DNE(9,B,2,3,"th",7)(10,M,2,2,"td",8),e.bVm(),e.qex(11,9),e.DNE(12,O,2,0,"th",7)(13,U,2,1,"td",8),e.bVm(),e.qex(14,10),e.DNE(15,Z,2,0,"th",7)(16,J,2,1,"td",8),e.bVm(),e.qex(17,11),e.DNE(18,z,2,0,"th",7)(19,H,3,4,"td",8),e.bVm(),e.qex(20,12),e.DNE(21,P,2,0,"th",7)(22,K,16,4,"td",8),e.bVm(),e.DNE(23,Q,1,0,"tr",13)(24,W,1,0,"tr",14),e.k0s(),e.nrm(25,"mat-paginator",15),e.k0s(),e.j41(26,"div",16)(27,"button",17)(28,"mat-icon",18),e.EFF(29,"add"),e.k0s()()()()),2&i&&(e.R7$(5),e.Y8G("ngIf",o.selection.selected.length),e.R7$(2),e.Y8G("dataSource",o.dataSource),e.R7$(16),e.Y8G("matHeaderRowDef",o.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",o.displayedColumns),e.R7$(),e.Y8G("pageSizeOptions",e.lJ4(6,N)),e.R7$(2),e.Y8G("routerLink",e.lJ4(7,Y)))},dependencies:[u.MD,u.bT,u.vh,F.m_,F.An,c.tP,c.Zl,c.tL,c.ji,c.cC,c.YV,c.iL,c.KS,c.$R,c.YZ,c.NB,v.g7,v.So,y.Ou,y.iy,f.Cn,f.kk,f.fb,f.Cp,d.iI,d.Wk,p.Hl,p.$z,p.iY,p.Sr,b.YF,g.DJ,g.BO,g.sA],encapsulation:2})}}return a})();var n=s(9417),E=s(9443),D=s(450),G=s(801),h=s(636),C=s(2798),$=s(3);function q(a,r){if(1&a&&(e.j41(0,"span",14),e.EFF(1),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.Lme(" (+",((null==t.categoryForm.value.countries?null:t.categoryForm.value.countries.length)||0)-1," ",2===(null==t.categoryForm.value.countries?null:t.categoryForm.value.countries.length)?"other":"others",") ")}}function ee(a,r){if(1&a&&(e.j41(0,"mat-option",15),e.EFF(1),e.k0s()),2&a){const t=r.$implicit;e.Y8G("value",t.country),e.R7$(),e.JRh(t.country)}}let I=(()=>{class a{constructor(t,i,o,l,m){this.fb=t,this.categoryService=i,this.location=o,this.dialog=l,this.route=m,this.categoryForm=this.fb.group({name:["",n.k0.required],status:["",n.k0.required],image:["",n.k0.required],country:["",n.k0.required],states:["",n.k0.required],countries:["",n.k0.required]}),this.deliveryZones=this.route.snapshot.data.deliveryZones,this.mediaData={image:null,icon:null}}selectedCountry(t){this.selectedZone=this.deliveryZones.find(i=>i.country==t.value)}ngOnInit(){}submit(){this.categoryForm.valid&&this.categoryService.createCategory(this.categoryForm.getRawValue()).subscribe(t=>{this.location.back()})}back(){this.location.back()}addMedia(t){this.dialog.open(E.w).afterClosed().subscribe(o=>{o&&(this.categoryForm.patchValue({[t]:o.url}),this.mediaData[t]={[t]:o}[t])})}removeValue(t){this.categoryForm.patchValue({[t]:null}),this.mediaData[t]=null}static{this.\u0275fac=function(i){return new(i||a)(e.rXU(n.ok),e.rXU(k.w),e.rXU(u.aZ),e.rXU(R.bZ),e.rXU(d.nX))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-create-category"]],decls:23,vars:7,consts:[[1,"mat-elevation-z8","container","mx-auto","my-10","p-5",2,"width","50rem"],[3,"ngSubmit","formGroup"],["fxLayout","column","fxLayoutAlign","space-evenly stretch"],["valueName","Image",3,"removeValue","openMediaBrowser","isNew","mediaData"],["appearance","outline",1,"full-width"],["matInput","","cancellation","Name Of Category","formControlName","name"],["formControlName","status"],["appearance","fill"],["multiple","","formControlName","countries"],["class","example-additional-selection",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","space-around center","fxLayoutGap","10px"],["mat-raised-button","","fxFlex","50%",3,"click"],["mat-raised-button","","fxFlex","50%","color","primary",3,"disabled"],[1,"example-additional-selection"],[3,"value"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"form",1),e.bIt("ngSubmit",function(){return o.submit()}),e.j41(2,"div",2)(3,"app-select-media",3),e.bIt("removeValue",function(m){return o.removeValue(m)})("openMediaBrowser",function(m){return o.addMedia(m)}),e.k0s(),e.j41(4,"mat-form-field",4)(5,"mat-label"),e.EFF(6,"Name Of Category"),e.k0s(),e.nrm(7,"input",5),e.k0s(),e.j41(8,"mat-slide-toggle",6),e.EFF(9,"Enable"),e.k0s(),e.j41(10,"mat-form-field",7)(11,"mat-label"),e.EFF(12,"Country"),e.k0s(),e.j41(13,"mat-select",8)(14,"mat-select-trigger"),e.EFF(15),e.DNE(16,q,2,2,"span",9),e.k0s(),e.DNE(17,ee,2,2,"mat-option",10),e.k0s()(),e.j41(18,"div",11)(19,"a",12),e.bIt("click",function(){return o.back()}),e.EFF(20,"CANCEL"),e.k0s(),e.j41(21,"button",13),e.EFF(22,"SAVE"),e.k0s()()()()()),2&i&&(e.R7$(),e.Y8G("formGroup",o.categoryForm),e.R7$(2),e.Y8G("isNew",!1)("mediaData",null==o.mediaData?null:o.mediaData.image),e.R7$(12),e.SpI(" ",(null==o.categoryForm.value.countries?null:o.categoryForm.value.countries[0])||""," "),e.R7$(),e.Y8G("ngIf",((null==o.categoryForm.value||null==o.categoryForm.value.countries?null:o.categoryForm.value.countries.length)||0)>1),e.R7$(),e.Y8G("ngForOf",o.deliveryZones),e.R7$(4),e.Y8G("disabled",o.categoryForm.invalid))},dependencies:[u.MD,u.Sq,u.bT,F.m_,c.tP,v.g7,y.Ou,f.Cn,d.iI,p.Hl,p.It,p.$z,b.YF,g.DJ,g.BO,g.sA,g.UI,D.mV,D.sG,G.C,h.RG,h.rl,h.nJ,C.Ve,C.VO,C.$2,$.wT,n.X1,n.qT,n.me,n.BC,n.cb,n.j4,n.JD,n.YN],encapsulation:2})}}return a})();var _=s(3802);function te(a,r){if(1&a&&(e.j41(0,"span",14),e.EFF(1),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.Lme(" (+",((null==t.categoryForm.value.countries?null:t.categoryForm.value.countries.length)||0)-1," ",2===(null==t.categoryForm.value.countries?null:t.categoryForm.value.countries.length)?"other":"others",") ")}}function ae(a,r){if(1&a&&(e.j41(0,"mat-option",15),e.EFF(1),e.k0s()),2&a){const t=r.$implicit;e.Y8G("value",t.country),e.R7$(),e.JRh(t.country)}}let V=(()=>{class a{constructor(t,i,o,l,m){this.fb=t,this.categoryService=i,this.location=o,this.dialog=l,this.route=m,this.category=this.route.snapshot.data.category,this.deliveryZones=this.route.snapshot.data.deliveryZones,this.mediaData={image:null,icon:null},this.categoryForm=this.fb.group({name:[this.category.name,n.k0.required],status:[this.category.status,n.k0.required],image:[this.category.image,n.k0.required],countries:[this.category.countries,n.k0.required]}),this.mediaData={image:null,icon:null},this.mediaData.image=this.category.image}selectedCountry(t){this.selectedZone=this.deliveryZones.find(i=>i.country==t.value)}ngOnInit(){}submit(){this.categoryForm.valid&&this.categoryService.updateCategory(this.category._id,this.categoryForm.getRawValue()).subscribe(t=>{this.location.back()})}back(){this.location.back()}addMedia(t){this.dialog.open(E.w).afterClosed().subscribe(o=>{o&&(this.categoryForm.patchValue({[t]:o.url}),this.mediaData[t]={[t]:o}[t])})}removeValue(t){this.categoryForm.patchValue({[t]:null}),this.mediaData[t]=null}static{this.\u0275fac=function(i){return new(i||a)(e.rXU(n.ok),e.rXU(k.w),e.rXU(u.aZ),e.rXU(R.bZ),e.rXU(d.nX))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-categories-details"]],decls:23,vars:7,consts:[[1,"mat-elevation-z8","container","mx-auto","my-10","p-5",2,"width","50rem"],[3,"ngSubmit","formGroup"],["fxLayout","column","fxLayoutAlign","space-evenly stretch"],["valueName","Image",3,"removeValue","openMediaBrowser","isNew","mediaData"],["appearance","fill",1,"full-width"],["matInput","","cancellation","Name Of Cuisine","formControlName","name"],["formControlName","status"],["appearance","fill"],["multiple","","formControlName","countries"],["class","example-additional-selection",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","space-around center","fxLayoutGap","10px"],["mat-raised-button","","fxFlex","50%",3,"click"],["mat-raised-button","","fxFlex","50%","color","primary",3,"disabled"],[1,"example-additional-selection"],[3,"value"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"form",1),e.bIt("ngSubmit",function(){return o.submit()}),e.j41(2,"div",2)(3,"app-select-media",3),e.bIt("removeValue",function(m){return o.removeValue(m)})("openMediaBrowser",function(m){return o.addMedia(m)}),e.k0s(),e.j41(4,"mat-form-field",4)(5,"mat-label"),e.EFF(6,"Name Of Cuisine"),e.k0s(),e.nrm(7,"input",5),e.k0s(),e.j41(8,"mat-slide-toggle",6),e.EFF(9,"Enable"),e.k0s(),e.j41(10,"mat-form-field",7)(11,"mat-label"),e.EFF(12,"Country"),e.k0s(),e.j41(13,"mat-select",8)(14,"mat-select-trigger"),e.EFF(15),e.DNE(16,te,2,2,"span",9),e.k0s(),e.DNE(17,ae,2,2,"mat-option",10),e.k0s()(),e.j41(18,"div",11)(19,"a",12),e.bIt("click",function(){return o.back()}),e.EFF(20,"CANCEL"),e.k0s(),e.j41(21,"button",13),e.EFF(22,"SAVE"),e.k0s()()()()()),2&i&&(e.R7$(),e.Y8G("formGroup",o.categoryForm),e.R7$(2),e.Y8G("isNew",!1)("mediaData",null==o.mediaData?null:o.mediaData.image),e.R7$(12),e.SpI(" ",(null==o.categoryForm.value.countries?null:o.categoryForm.value.countries[0])||""," "),e.R7$(),e.Y8G("ngIf",((null==o.categoryForm.value||null==o.categoryForm.value.countries?null:o.categoryForm.value.countries.length)||0)>1),e.R7$(),e.Y8G("ngForOf",o.deliveryZones),e.R7$(4),e.Y8G("disabled",o.categoryForm.invalid))},dependencies:[u.MD,u.Sq,u.bT,F.m_,c.tP,v.g7,y.Ou,f.Cn,d.iI,p.Hl,p.It,p.$z,b.YF,g.DJ,g.BO,g.sA,g.UI,D.mV,D.sG,G.C,h.RG,h.rl,h.nJ,C.Ve,C.VO,C.$2,$.wT,n.X1,n.qT,n.me,n.BC,n.cb,n.j4,n.JD,n.YN],encapsulation:2})}}return a})();var w=s(4e3);const oe=[{path:"",component:j,children:[{path:"list",component:x,resolve:{categories:_.n}},{path:"new",component:I,resolve:{deliveryZones:w.K}},{path:":id/details",component:V,resolve:{category:_.G,deliveryZones:w.K}}]}];let ie=(()=>{class a{static{this.\u0275fac=function(i){return new(i||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({imports:[d.iI.forChild(oe),d.iI]})}}return a})(),ne=(()=>{class a{static{this.\u0275fac=function(i){return new(i||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({providers:[_.n,_.G,k.w],imports:[u.MD,ie,b.YF,n.X1,j,x,I,V]})}}return a})()}}]);