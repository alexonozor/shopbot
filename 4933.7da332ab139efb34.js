"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[4933],{4933:(Q,b,l)=>{l.r(b),l.d(b,{PaymentModule:()=>z});var r=l(177),p=l(8498),o=l(9417),f=l(8834),d=l(5351),c=l(636),u=l(2798),k=l(980),t=l(4020),g=l(9735),_=l(3);const R=()=>({name:"Yes",value:!0}),I=()=>({name:"No",value:!1}),N=(n,s)=>[n,s],$=()=>["Nigeria","Mauritius","Kenya","Rwanda"];function D(n,s){if(1&n&&(t.j41(0,"mat-option",18),t.EFF(1),t.k0s()),2&n){const e=s.$implicit;t.Y8G("value",e.value),t.R7$(),t.JRh(e.name)}}function G(n,s){if(1&n&&(t.j41(0,"span",19),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Lme(" (+",((null==e.paymentForm.value||null==e.paymentForm.value.region?null:e.paymentForm.value.region.length)||0)-1," ",2===(null==e.paymentForm.value||null==e.paymentForm.value.region?null:e.paymentForm.value.region.length)?"other":"others",") ")}}function T(n,s){if(1&n&&(t.j41(0,"mat-option",18),t.EFF(1),t.k0s()),2&n){const e=s.$implicit;t.Y8G("value",e),t.R7$(),t.JRh(e)}}let F=(()=>{class n{constructor(e,i,a,m){this._formBuilder=e,this.settingsService=i,this.dialogRef=a,this.data=m,this.isLoading=!1}ngOnInit(){this.paymentForm=this.createProductForm()}createProductForm(){return this._formBuilder.group({id:["",o.k0.required],image:["",o.k0.required],name:["",o.k0.required],secretKey:[],publicKey:[],region:[],active:[!1,o.k0.required],description:["",o.k0.required]})}save(){this.isLoading=!0,this.settingsService.createPayment(this.paymentForm.getRawValue()).pipe((0,k.j)(()=>this.isLoading=!1)).subscribe(e=>{this.isLoading=!0,this.dialogRef.close(!0)})}static{this.\u0275fac=function(i){return new(i||n)(t.rXU(o.ok),t.rXU(g.h),t.rXU(d.CP),t.rXU(d.Vh))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-create-payments"]],decls:44,vars:13,consts:[["matDialogTitle",""],["mat-dialog-content",""],["name","storeForm","fxLayout","column","fxFlex","",1,"product","w-100-p",3,"formGroup"],["appearance","fill","floatLabel","always",1,"w-100-p"],["matInput","","cancellation","Icon image code","name","image","formControlName","image","required",""],["matInput","","type","number","cancellation","Position","name","id","formControlName","id","required",""],["matInput","","cancellation","Product Name","name","name","formControlName","name","required",""],["matInput","","cancellation","Secret Key","name","name","formControlName","secretKey","required",""],["matInput","","cancellation","Public Key","name","name","formControlName","publicKey","required",""],["matInput","","cancellation","Product Description","name","description","formControlName","description","rows","5"],["formControlName","active","cancellation","Enabled"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill"],["multiple","","formControlName","region"],["class","example-additional-selection",4,"ngIf"],["mat-dialog-actions","",1,"pt-24"],["mat-button","","mat-dialog-close",""],["mat-raised-button","",1,"mat-accent","mr-16",3,"click","disabled"],[3,"value"],[1,"example-additional-selection"]],template:function(i,a){1&i&&(t.j41(0,"h1",0),t.EFF(1,"Create Payment Method"),t.k0s(),t.j41(2,"div",1)(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),t.EFF(6,"Icon"),t.k0s(),t.nrm(7,"input",4),t.k0s(),t.j41(8,"mat-form-field",3)(9,"mat-label"),t.EFF(10,"Position"),t.k0s(),t.nrm(11,"input",5),t.k0s(),t.j41(12,"mat-form-field",3)(13,"mat-label"),t.EFF(14,"Name"),t.k0s(),t.nrm(15,"input",6),t.k0s(),t.j41(16,"mat-form-field",3)(17,"mat-label"),t.EFF(18,"Secret Key"),t.k0s(),t.nrm(19,"input",7),t.k0s(),t.j41(20,"mat-form-field",3)(21,"mat-label"),t.EFF(22,"Public Key"),t.k0s(),t.nrm(23,"input",8),t.k0s(),t.j41(24,"mat-form-field",3)(25,"mat-label"),t.EFF(26,"Description"),t.k0s(),t.nrm(27,"textarea",9),t.k0s(),t.j41(28,"mat-form-field",3)(29,"mat-select",10),t.DNE(30,D,2,2,"mat-option",11),t.k0s()(),t.j41(31,"mat-form-field",12)(32,"mat-label"),t.EFF(33,"Region"),t.k0s(),t.j41(34,"mat-select",13)(35,"mat-select-trigger"),t.EFF(36),t.DNE(37,G,2,2,"span",14),t.k0s(),t.DNE(38,T,2,2,"mat-option",11),t.k0s()()()(),t.j41(39,"div",15)(40,"button",16),t.EFF(41,"Cancel"),t.k0s(),t.j41(42,"button",17),t.bIt("click",function(){return a.save()}),t.EFF(43),t.k0s()()),2&i&&(t.R7$(3),t.Y8G("formGroup",a.paymentForm),t.R7$(27),t.Y8G("ngForOf",t.l_i(9,N,t.lJ4(7,R),t.lJ4(8,I))),t.R7$(6),t.SpI(" ",(null==a.paymentForm.value||null==a.paymentForm.value.region?null:a.paymentForm.value.region[0])||""," "),t.R7$(),t.Y8G("ngIf",((null==a.paymentForm.value||null==a.paymentForm.value.region||null==a.paymentForm.value.region.value?null:a.paymentForm.value.region.value.length)||0)>1),t.R7$(),t.Y8G("ngForOf",t.lJ4(12,$)),t.R7$(4),t.Y8G("disabled",!a.paymentForm.valid),t.R7$(),t.JRh(a.isLoading?"Please wait..":"Create Payment Method"))},dependencies:[r.MD,r.Sq,r.bT,c.RG,c.rl,c.nJ,o.YN,o.qT,o.me,o.Q0,o.BC,o.cb,o.YS,u.Ve,u.VO,u.$2,_.wT,o.X1,o.j4,o.JD,f.Hl,f.$z],encapsulation:2})}}return n})();const x=()=>({name:"Yes",value:!0}),L=()=>({name:"No",value:!1}),Y=(n,s)=>[n,s],w=()=>["Nigeria","Mauritius","Kenya","Rwanda"];function S(n,s){if(1&n&&(t.j41(0,"mat-option",18),t.EFF(1),t.k0s()),2&n){const e=s.$implicit;t.Y8G("value",e.value),t.R7$(),t.JRh(e.name)}}function M(n,s){if(1&n&&(t.j41(0,"span",19),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Lme(" (+",((null==e.paymentForm.value||null==e.paymentForm.value.region?null:e.paymentForm.value.region.length)||0)-1," ",2===(null==e.paymentForm.value||null==e.paymentForm.value.region?null:e.paymentForm.value.region.length)?"other":"others",") ")}}function X(n,s){if(1&n&&(t.j41(0,"mat-option",18),t.EFF(1),t.k0s()),2&n){const e=s.$implicit;t.Y8G("value",e),t.R7$(),t.JRh(e)}}let h=(()=>{class n{constructor(e,i,a,m){this._formBuilder=e,this.settingsService=i,this.dialogRef=a,this.data=m,this.isLoading=!1,this.payment=m}ngOnInit(){this.paymentForm=this.createProductForm()}createProductForm(){return this._formBuilder.group({id:[this.payment.id,o.k0.required],image:[this.payment.image,o.k0.required],name:[this.payment.name,o.k0.required],region:[this.payment.region],secretKey:[this.payment.secretKey],publicKey:[this.payment.publicKey],active:[this.payment.active,o.k0.required],description:[this.payment.description,o.k0.required]})}save(){this.isLoading=!0,this.settingsService.updatePayment(this.payment._id,this.paymentForm.getRawValue()).pipe((0,k.j)(()=>this.isLoading=!1)).subscribe(e=>{this.isLoading=!0,this.dialogRef.close(!0)})}static{this.\u0275fac=function(i){return new(i||n)(t.rXU(o.ok),t.rXU(g.h),t.rXU(d.CP),t.rXU(d.Vh))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-edit-payments"]],decls:44,vars:13,consts:[["matDialogTitle",""],["mat-dialog-content",""],["name","storeForm","fxLayout","column","fxFlex","",1,"product","w-100-p",3,"formGroup"],["appearance","fill","floatLabel","always",1,"w-100-p"],["matInput","","cancellation","Icon image code","name","image","formControlName","image","required",""],["matInput","","type","number","cancellation","Position","name","id","formControlName","id","required",""],["matInput","","cancellation","Product Name","name","name","formControlName","name","required",""],["matInput","","cancellation","Secret Key","name","name","formControlName","secretKey","required",""],["matInput","","cancellation","Public Key","name","name","formControlName","publicKey","required",""],["matInput","","cancellation","Product Description","name","description","formControlName","description","rows","5"],["formControlName","active","cancellation","Enabled"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill"],["multiple","","formControlName","region"],["class","example-additional-selection",4,"ngIf"],["mat-dialog-actions","",1,"pt-24"],["mat-button","","mat-dialog-close",""],["mat-raised-button","",1,"mat-accent","mr-16",3,"click","disabled"],[3,"value"],[1,"example-additional-selection"]],template:function(i,a){1&i&&(t.j41(0,"h1",0),t.EFF(1,"Edit Payment Method"),t.k0s(),t.j41(2,"div",1)(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),t.EFF(6,"Icon"),t.k0s(),t.nrm(7,"input",4),t.k0s(),t.j41(8,"mat-form-field",3)(9,"mat-label"),t.EFF(10,"Position"),t.k0s(),t.nrm(11,"input",5),t.k0s(),t.j41(12,"mat-form-field",3)(13,"mat-label"),t.EFF(14,"Name"),t.k0s(),t.nrm(15,"input",6),t.k0s(),t.j41(16,"mat-form-field",3)(17,"mat-label"),t.EFF(18,"Secret Key"),t.k0s(),t.nrm(19,"input",7),t.k0s(),t.j41(20,"mat-form-field",3)(21,"mat-label"),t.EFF(22,"Public Key"),t.k0s(),t.nrm(23,"input",8),t.k0s(),t.j41(24,"mat-form-field",3)(25,"mat-label"),t.EFF(26,"Description"),t.k0s(),t.nrm(27,"textarea",9),t.k0s(),t.j41(28,"mat-form-field",3)(29,"mat-select",10),t.DNE(30,S,2,2,"mat-option",11),t.k0s()(),t.j41(31,"mat-form-field",12)(32,"mat-label"),t.EFF(33,"Region"),t.k0s(),t.j41(34,"mat-select",13)(35,"mat-select-trigger"),t.EFF(36),t.DNE(37,M,2,2,"span",14),t.k0s(),t.DNE(38,X,2,2,"mat-option",11),t.k0s()()()(),t.j41(39,"div",15)(40,"button",16),t.EFF(41,"Cancel"),t.k0s(),t.j41(42,"button",17),t.bIt("click",function(){return a.save()}),t.EFF(43),t.k0s()()),2&i&&(t.R7$(3),t.Y8G("formGroup",a.paymentForm),t.R7$(27),t.Y8G("ngForOf",t.l_i(9,Y,t.lJ4(7,x),t.lJ4(8,L))),t.R7$(6),t.SpI(" ",(null==a.paymentForm.value||null==a.paymentForm.value.region?null:a.paymentForm.value.region[0])||""," "),t.R7$(),t.Y8G("ngIf",((null==a.paymentForm.value||null==a.paymentForm.value.region||null==a.paymentForm.value.region.value?null:a.paymentForm.value.region.value.length)||0)>1),t.R7$(),t.Y8G("ngForOf",t.lJ4(12,w)),t.R7$(4),t.Y8G("disabled",!a.paymentForm.valid),t.R7$(),t.JRh(a.isLoading?"Please wait..":"Update Payment Method"))},dependencies:[r.MD,r.Sq,r.bT,c.RG,c.rl,c.nJ,o.YN,o.qT,o.me,o.Q0,o.BC,o.cb,o.YS,u.Ve,u.VO,u.$2,_.wT,o.X1,o.j4,o.JD,f.Hl,f.$z],encapsulation:2})}}return n})();var C=l(450),V=l(1269),y=l(9115),j=l(9213);function K(n,s){1&n&&(t.j41(0,"div",21),t.nrm(1,"div",22),t.EFF(2," Active "),t.k0s())}function J(n,s){1&n&&(t.j41(0,"div",21),t.nrm(1,"div",23),t.EFF(2," Inactive "),t.k0s())}function B(n,s){if(1&n){const e=t.RV6();t.j41(0,"button",19),t.bIt("click",function(){t.eBV(e);const a=t.XpG().$implicit,m=t.XpG();return t.Njj(m.viewDetails(a))}),t.j41(1,"mat-icon"),t.EFF(2,"done"),t.k0s(),t.EFF(3," Enable "),t.k0s()}}function U(n,s){if(1&n){const e=t.RV6();t.j41(0,"tr",9)(1,"th",10)(2,"div",11)(3,"div",12),t.EFF(4),t.k0s(),t.j41(5,"div",13),t.EFF(6),t.k0s()()(),t.j41(7,"td",14),t.DNE(8,K,3,0,"div",15)(9,J,3,0,"div",15),t.k0s(),t.j41(10,"td",14)(11,"mat-slide-toggle",16),t.mxI("ngModelChange",function(a){const m=t.eBV(e).$implicit;return t.DH7(m.active,a)||(m.active=a),t.Njj(a)}),t.bIt("change",function(a){const m=t.eBV(e).$implicit,v=t.XpG();return t.Njj(v.onChange(m,a))}),t.k0s()(),t.j41(12,"td",14)(13,"button",17)(14,"mat-icon"),t.EFF(15,"more_vert"),t.k0s()(),t.j41(16,"mat-menu",18,0),t.bIt("click",function(a){return t.eBV(e),t.Njj(a.stopPropagation())}),t.j41(18,"button",19),t.bIt("click",function(a){const m=t.eBV(e),v=m.$implicit,H=m.index;return t.XpG().delete(H,v._id),t.Njj(a.stopPropagation())}),t.j41(19,"mat-icon"),t.EFF(20,"delete"),t.k0s(),t.EFF(21," Delete"),t.k0s(),t.DNE(22,B,4,0,"button",20),t.j41(23,"button",19),t.bIt("click",function(){const a=t.eBV(e).$implicit,m=t.XpG();return t.Njj(m.viewDetails(a))}),t.j41(24,"mat-icon"),t.EFF(25,"edit"),t.k0s(),t.EFF(26," Edit / View "),t.k0s()()()()}if(2&n){const e=s.$implicit,i=t.sdS(17);t.R7$(4),t.JRh(e.name),t.R7$(2),t.JRh(e.description),t.R7$(2),t.Y8G("ngIf",e.active),t.R7$(),t.Y8G("ngIf",!e.active),t.R7$(2),t.R50("ngModel",e.active),t.R7$(2),t.Y8G("matMenuTriggerFor",i),t.R7$(9),t.Y8G("ngIf",!e.active)}}let P=(()=>{class n{constructor(e,i,a,m){this.settingsService=e,this._matDialog=i,this.router=a,this.route=m,this.payments=[]}ngOnInit(){this.payments=this.route.snapshot.data.payments}delete(e,i){this.confirmDialogRef=this._matDialog.open(V.Y,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Payment?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete this Payment?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(a=>{a&&(this.payments.splice(e,1),this.settingsService.deletePayment(i).subscribe()),this.confirmDialogRef=null})}addNewPayment(){this._matDialog.open(F,{width:"500px",disableClose:!1}).afterClosed().subscribe(i=>{i&&this.settingsService.getPayments().subscribe(a=>{this.payments=a})})}onChange(e,i){this.settingsService.updatePayment(e._id,{active:i.checked}).subscribe(()=>{})}viewDetails(e){this._matDialog.open(h,{data:e,width:"500px",disableClose:!1}).afterClosed().subscribe(a=>{a&&this.settingsService.getPayments().subscribe(m=>{this.payments=m})})}static{this.\u0275fac=function(i){return new(i||n)(t.rXU(g.h),t.rXU(d.bZ),t.rXU(p.Ix),t.rXU(p.nX))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-list-payments"]],decls:20,vars:1,consts:[["menu","matMenu"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],["mat-subheader",""],[1,"w-full","text-sm","text-left","text-gray-500"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50"],["scope","col",1,"px-6","py-3"],["class","bg-white border-b   hover:bg-gray-50 ",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","end end"],["mat-fab","","color","primary","aria-label","Add Store",1,"fixed",3,"click"],[1,"bg-white","border-b","hover:bg-gray-50"],["scope","row",1,"flex","items-center","px-6","py-4","text-gray-900","whitespace-nowrap","dark:text-white"],[1,"pl-3"],[1,"text-base","text-black","font-semibold"],[1,"font-normal","text-gray-500"],[1,"px-6","py-4"],["class","flex items-center",4,"ngIf"],["color","primary",1,"mx-8",3,"ngModelChange","change","ngModel"],["mat-icon-button","",3,"matMenuTriggerFor"],[3,"click"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"ngIf"],[1,"flex","items-center"],[1,"h-2.5","w-2.5","rounded-full","bg-green-500","mr-2"],[1,"h-2.5","w-2.5","rounded-full","bg-red-500","mr-2"]],template:function(i,a){1&i&&(t.j41(0,"div",1)(1,"div",2),t.EFF(2,"Payment Methods"),t.k0s(),t.j41(3,"table",3)(4,"thead",4)(5,"tr")(6,"th",5),t.EFF(7," Name "),t.k0s(),t.j41(8,"th",5),t.EFF(9," Visibility "),t.k0s(),t.j41(10,"th",5),t.EFF(11," Status "),t.k0s(),t.j41(12,"th",5),t.EFF(13," Action "),t.k0s()()(),t.j41(14,"tbody"),t.DNE(15,U,27,7,"tr",6),t.k0s()()(),t.j41(16,"div",7)(17,"button",8),t.bIt("click",function(){return a.addNewPayment()}),t.j41(18,"mat-icon"),t.EFF(19,"add"),t.k0s()()()),2&i&&(t.R7$(15),t.Y8G("ngForOf",a.payments))},dependencies:[r.MD,r.Sq,r.bT,p.iI,C.mV,C.sG,y.Cn,y.kk,y.fb,y.Cp,o.YN,o.BC,o.vS,j.m_,j.An],encapsulation:2})}}return n})();var E=l(6165);const O=[{path:"",component:P,resolve:{payments:E.A3}},{path:"create",component:F},{path:":id/edit",component:h,resolve:{payment:E.A3}}];let A=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[p.iI.forChild(O),p.iI]})}}return n})();var q=l(6924);let z=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({providers:[g.h],imports:[r.MD,A,o.YN,o.X1,q.YF,P,F,h]})}}return n})()}}]);