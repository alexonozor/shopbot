"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[87],{1087:(et,v,m)=>{m.r(v),m.d(v,{PaymentModule:()=>tt});var u=m(6814),d=m(1896),i=m(6223),s=m(7700),b=m(4716),t=m(5879),g=m(5372),T=m(3680),f=m(2296),y=m(9157),x=m(2032),h=m(8525),p=m(3814);function F(n,l){if(1&n&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&n){const e=l.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(e.name)}}function P(n,l){if(1&n&&(t.TgZ(0,"span",19),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.AsE(" (+",((null==e.paymentForm.value||null==e.paymentForm.value.region?null:e.paymentForm.value.region.length)||0)-1," ",2===(null==e.paymentForm.value||null==e.paymentForm.value.region?null:e.paymentForm.value.region.length)?"other":"others",") ")}}function U(n,l){if(1&n&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&n){const e=l.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}const N=function(){return{name:"Yes",value:!0}},I=function(){return{name:"No",value:!1}},J=function(n,l){return[n,l]},L=function(){return["Nigeria","Mauritius","Kenya","Rwanda"]};let C=(()=>{class n{constructor(e,o,a,r){this._formBuilder=e,this.settingsService=o,this.dialogRef=a,this.data=r,this.isLoading=!1}ngOnInit(){this.paymentForm=this.createProductForm()}createProductForm(){return this._formBuilder.group({id:["",i.kI.required],image:["",i.kI.required],name:["",i.kI.required],secretKey:[],publicKey:[],region:[],active:[!1,i.kI.required],description:["",i.kI.required]})}save(){this.isLoading=!0,this.settingsService.createPayment(this.paymentForm.getRawValue()).pipe((0,b.x)(()=>this.isLoading=!1)).subscribe(e=>{this.isLoading=!0,this.dialogRef.close(!0)})}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(i.qu),t.Y36(g.g),t.Y36(s.so),t.Y36(s.WI))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-payments"]],decls:44,vars:13,consts:[["matDialogTitle",""],["mat-dialog-content",""],["name","storeForm","fxLayout","column","fxFlex","",1,"product","w-100-p",3,"formGroup"],["appearance","outline","floatLabel","always",1,"w-100-p"],["matInput","","placeholder","Icon image code","name","image","formControlName","image","required",""],["matInput","","type","number","placeholder","Position","name","id","formControlName","id","required",""],["matInput","","placeholder","Product Name","name","name","formControlName","name","required",""],["matInput","","placeholder","Secret Key","name","name","formControlName","secretKey","required",""],["matInput","","placeholder","Public Key","name","name","formControlName","publicKey","required",""],["matInput","","placeholder","Product Description","name","description","formControlName","description","rows","5"],["formControlName","active","placeholder","Enabled"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline"],["multiple","","formControlName","region"],["class","example-additional-selection",4,"ngIf"],["mat-dialog-actions","",1,"pt-24"],["mat-button","","mat-dialog-close",""],["mat-raised-button","",1,"mat-accent","mr-16",3,"disabled","click"],[3,"value"],[1,"example-additional-selection"]],template:function(o,a){1&o&&(t.TgZ(0,"h1",0),t._uU(1,"Create Payment Method"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),t._uU(6,"Icon"),t.qZA(),t._UZ(7,"input",4),t.qZA(),t.TgZ(8,"mat-form-field",3)(9,"mat-label"),t._uU(10,"Position"),t.qZA(),t._UZ(11,"input",5),t.qZA(),t.TgZ(12,"mat-form-field",3)(13,"mat-label"),t._uU(14,"Name"),t.qZA(),t._UZ(15,"input",6),t.qZA(),t.TgZ(16,"mat-form-field",3)(17,"mat-label"),t._uU(18,"Secret Key"),t.qZA(),t._UZ(19,"input",7),t.qZA(),t.TgZ(20,"mat-form-field",3)(21,"mat-label"),t._uU(22,"Public Key"),t.qZA(),t._UZ(23,"input",8),t.qZA(),t.TgZ(24,"mat-form-field",3)(25,"mat-label"),t._uU(26,"Description"),t.qZA(),t._UZ(27,"textarea",9),t.qZA(),t.TgZ(28,"mat-form-field",3)(29,"mat-select",10),t.YNc(30,F,2,2,"mat-option",11),t.qZA()(),t.TgZ(31,"mat-form-field",12)(32,"mat-label"),t._uU(33,"Region"),t.qZA(),t.TgZ(34,"mat-select",13)(35,"mat-select-trigger"),t._uU(36),t.YNc(37,P,2,2,"span",14),t.qZA(),t.YNc(38,U,2,2,"mat-option",11),t.qZA()()()(),t.TgZ(39,"div",15)(40,"button",16),t._uU(41,"Cancel"),t.qZA(),t.TgZ(42,"button",17),t.NdJ("click",function(){return a.save()}),t._uU(43),t.qZA()()),2&o&&(t.xp6(3),t.Q6J("formGroup",a.paymentForm),t.xp6(27),t.Q6J("ngForOf",t.WLB(9,J,t.DdM(7,N),t.DdM(8,I))),t.xp6(6),t.hij(" ",(null==a.paymentForm.value||null==a.paymentForm.value.region?null:a.paymentForm.value.region[0])||""," "),t.xp6(1),t.Q6J("ngIf",((null==a.paymentForm.value||null==a.paymentForm.value.region||null==a.paymentForm.value.region.value?null:a.paymentForm.value.region.value.length)||0)>1),t.xp6(1),t.Q6J("ngForOf",t.DdM(12,L)),t.xp6(4),t.Q6J("disabled",!a.paymentForm.valid),t.xp6(1),t.Oqu(a.isLoading?"Please wait..":"Create Payment Method"))},dependencies:[u.sg,u.O5,T.ey,f.lW,y.KE,y.hX,x.Nt,h.gD,h.$L,s.ZT,s.uh,s.xY,s.H8,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.Q7,i.sg,i.u,p.xw,p.yH]})}return n})();function w(n,l){if(1&n&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&n){const e=l.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(e.name)}}function D(n,l){if(1&n&&(t.TgZ(0,"span",19),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.AsE(" (+",((null==e.paymentForm.value||null==e.paymentForm.value.region?null:e.paymentForm.value.region.length)||0)-1," ",2===(null==e.paymentForm.value||null==e.paymentForm.value.region?null:e.paymentForm.value.region.length)?"other":"others",") ")}}function M(n,l){if(1&n&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&n){const e=l.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}const K=function(){return{name:"Yes",value:!0}},Y=function(){return{name:"No",value:!1}},O=function(n,l){return[n,l]},Q=function(){return["Nigeria","Mauritius","Kenya","Rwanda"]};let A=(()=>{class n{constructor(e,o,a,r){this._formBuilder=e,this.settingsService=o,this.dialogRef=a,this.data=r,this.isLoading=!1,this.payment=r}ngOnInit(){this.paymentForm=this.createProductForm()}createProductForm(){return this._formBuilder.group({id:[this.payment.id,i.kI.required],image:[this.payment.image,i.kI.required],name:[this.payment.name,i.kI.required],region:[this.payment.region],secretKey:[this.payment.secretKey],publicKey:[this.payment.publicKey],active:[this.payment.active,i.kI.required],description:[this.payment.description,i.kI.required]})}save(){this.isLoading=!0,this.settingsService.updatePayment(this.payment._id,this.paymentForm.getRawValue()).pipe((0,b.x)(()=>this.isLoading=!1)).subscribe(e=>{this.isLoading=!0,this.dialogRef.close(!0)})}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(i.qu),t.Y36(g.g),t.Y36(s.so),t.Y36(s.WI))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-edit-payments"]],decls:44,vars:13,consts:[["matDialogTitle",""],["mat-dialog-content",""],["name","storeForm","fxLayout","column","fxFlex","",1,"product","w-100-p",3,"formGroup"],["appearance","outline","floatLabel","always",1,"w-100-p"],["matInput","","placeholder","Icon image code","name","image","formControlName","image","required",""],["matInput","","type","number","placeholder","Position","name","id","formControlName","id","required",""],["matInput","","placeholder","Product Name","name","name","formControlName","name","required",""],["matInput","","placeholder","Secret Key","name","name","formControlName","secretKey","required",""],["matInput","","placeholder","Public Key","name","name","formControlName","publicKey","required",""],["matInput","","placeholder","Product Description","name","description","formControlName","description","rows","5"],["formControlName","active","placeholder","Enabled"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline"],["multiple","","formControlName","region"],["class","example-additional-selection",4,"ngIf"],["mat-dialog-actions","",1,"pt-24"],["mat-button","","mat-dialog-close",""],["mat-raised-button","",1,"mat-accent","mr-16",3,"disabled","click"],[3,"value"],[1,"example-additional-selection"]],template:function(o,a){1&o&&(t.TgZ(0,"h1",0),t._uU(1,"Edit Payment Method"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),t._uU(6,"Icon"),t.qZA(),t._UZ(7,"input",4),t.qZA(),t.TgZ(8,"mat-form-field",3)(9,"mat-label"),t._uU(10,"Position"),t.qZA(),t._UZ(11,"input",5),t.qZA(),t.TgZ(12,"mat-form-field",3)(13,"mat-label"),t._uU(14,"Name"),t.qZA(),t._UZ(15,"input",6),t.qZA(),t.TgZ(16,"mat-form-field",3)(17,"mat-label"),t._uU(18,"Secret Key"),t.qZA(),t._UZ(19,"input",7),t.qZA(),t.TgZ(20,"mat-form-field",3)(21,"mat-label"),t._uU(22,"Public Key"),t.qZA(),t._UZ(23,"input",8),t.qZA(),t.TgZ(24,"mat-form-field",3)(25,"mat-label"),t._uU(26,"Description"),t.qZA(),t._UZ(27,"textarea",9),t.qZA(),t.TgZ(28,"mat-form-field",3)(29,"mat-select",10),t.YNc(30,w,2,2,"mat-option",11),t.qZA()(),t.TgZ(31,"mat-form-field",12)(32,"mat-label"),t._uU(33,"Region"),t.qZA(),t.TgZ(34,"mat-select",13)(35,"mat-select-trigger"),t._uU(36),t.YNc(37,D,2,2,"span",14),t.qZA(),t.YNc(38,M,2,2,"mat-option",11),t.qZA()()()(),t.TgZ(39,"div",15)(40,"button",16),t._uU(41,"Cancel"),t.qZA(),t.TgZ(42,"button",17),t.NdJ("click",function(){return a.save()}),t._uU(43),t.qZA()()),2&o&&(t.xp6(3),t.Q6J("formGroup",a.paymentForm),t.xp6(27),t.Q6J("ngForOf",t.WLB(9,O,t.DdM(7,K),t.DdM(8,Y))),t.xp6(6),t.hij(" ",(null==a.paymentForm.value||null==a.paymentForm.value.region?null:a.paymentForm.value.region[0])||""," "),t.xp6(1),t.Q6J("ngIf",((null==a.paymentForm.value||null==a.paymentForm.value.region||null==a.paymentForm.value.region.value?null:a.paymentForm.value.region.value.length)||0)>1),t.xp6(1),t.Q6J("ngForOf",t.DdM(12,Q)),t.xp6(4),t.Q6J("disabled",!a.paymentForm.valid),t.xp6(1),t.Oqu(a.isLoading?"Please wait..":"Update Payment Method"))},dependencies:[u.sg,u.O5,T.ey,f.lW,y.KE,y.hX,x.Nt,h.gD,h.$L,s.ZT,s.uh,s.xY,s.H8,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.Q7,i.sg,i.u,p.xw,p.yH]})}return n})();var R=m(6567),E=m(617),Z=m(7988),S=m(9038),k=m(2599);function $(n,l){1&n&&(t.TgZ(0,"div",21),t._UZ(1,"div",22),t._uU(2," Active "),t.qZA())}function B(n,l){1&n&&(t.TgZ(0,"div",21),t._UZ(1,"div",23),t._uU(2," Inactive "),t.qZA())}function G(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,r=t.oxw();return t.KtG(r.viewDetails(a))}),t.TgZ(1,"mat-icon"),t._uU(2,"done"),t.qZA(),t._uU(3," Enable "),t.qZA()}}function H(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"tr",8)(1,"th",9)(2,"div",10)(3,"div",11),t._uU(4),t.qZA(),t.TgZ(5,"div",12),t._uU(6),t.qZA()()(),t.TgZ(7,"td",13),t.YNc(8,$,3,0,"div",14),t.YNc(9,B,3,0,"div",14),t.qZA(),t.TgZ(10,"td",13)(11,"mat-slide-toggle",15),t.NdJ("ngModelChange",function(a){const c=t.CHM(e).$implicit;return t.KtG(c.active=a)})("change",function(a){const c=t.CHM(e).$implicit,_=t.oxw();return t.KtG(_.onChange(c,a))}),t.qZA()(),t.TgZ(12,"td",13)(13,"button",16)(14,"mat-icon"),t._uU(15,"more_vert"),t.qZA()(),t.TgZ(16,"mat-menu",17,18),t.NdJ("click",function(a){return a.stopPropagation()}),t.TgZ(18,"button",19),t.NdJ("click",function(a){const r=t.CHM(e),c=r.index,_=r.$implicit;return t.oxw().delete(c,_._id),t.KtG(a.stopPropagation())}),t.TgZ(19,"mat-icon"),t._uU(20,"delete"),t.qZA(),t._uU(21," Delete"),t.qZA(),t.YNc(22,G,4,0,"button",20),t.TgZ(23,"button",19),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.viewDetails(r))}),t.TgZ(24,"mat-icon"),t._uU(25,"edit"),t.qZA(),t._uU(26," Edit / View "),t.qZA()()()()}if(2&n){const e=l.$implicit,o=t.MAs(17);t.xp6(4),t.Oqu(e.name),t.xp6(2),t.Oqu(e.description),t.xp6(2),t.Q6J("ngIf",e.active),t.xp6(1),t.Q6J("ngIf",!e.active),t.xp6(2),t.Q6J("ngModel",e.active),t.xp6(2),t.Q6J("matMenuTriggerFor",o),t.xp6(9),t.Q6J("ngIf",!e.active)}}let V=(()=>{class n{constructor(e,o,a,r){this.settingsService=e,this._matDialog=o,this.router=a,this.route=r,this.payments=[]}ngOnInit(){this.payments=this.route.snapshot.data.payments}delete(e,o){this.confirmDialogRef=this._matDialog.open(R.X,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Payment?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete this Payment?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(a=>{a&&(this.payments.splice(e,1),this.settingsService.deletePayment(o).subscribe()),this.confirmDialogRef=null})}addNewPayment(){this._matDialog.open(C,{width:"500px",disableClose:!1}).afterClosed().subscribe(o=>{o&&this.settingsService.getPayments().subscribe(a=>{this.payments=a})})}onChange(e,o){this.settingsService.updatePayment(e._id,{active:o.checked}).subscribe(()=>{})}viewDetails(e){this._matDialog.open(A,{data:e,width:"500px",disableClose:!1}).afterClosed().subscribe(a=>{a&&this.settingsService.getPayments().subscribe(r=>{this.payments=r})})}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(g.g),t.Y36(s.uw),t.Y36(d.F0),t.Y36(d.gz))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-list-payments"]],decls:20,vars:1,consts:[[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],["mat-subheader",""],[1,"w-full","text-sm","text-left","text-gray-500"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50"],["scope","col",1,"px-6","py-3"],["class","bg-white border-b   hover:bg-gray-50 ",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","end end"],["mat-fab","","color","primary","aria-label","Add Store",1,"fixed",3,"click"],[1,"bg-white","border-b","hover:bg-gray-50"],["scope","row",1,"flex","items-center","px-6","py-4","text-gray-900","whitespace-nowrap","dark:text-white"],[1,"pl-3"],[1,"text-base","text-black","font-semibold"],[1,"font-normal","text-gray-500"],[1,"px-6","py-4"],["class","flex items-center",4,"ngIf"],["color","primary",1,"mx-8",3,"ngModel","ngModelChange","change"],["mat-icon-button","",3,"matMenuTriggerFor"],[3,"click"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"ngIf"],[1,"flex","items-center"],[1,"h-2.5","w-2.5","rounded-full","bg-green-500","mr-2"],[1,"h-2.5","w-2.5","rounded-full","bg-red-500","mr-2"]],template:function(o,a){1&o&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Payment Methods"),t.qZA(),t.TgZ(3,"table",2)(4,"thead",3)(5,"tr")(6,"th",4),t._uU(7," Name "),t.qZA(),t.TgZ(8,"th",4),t._uU(9," Visibility "),t.qZA(),t.TgZ(10,"th",4),t._uU(11," Status "),t.qZA(),t.TgZ(12,"th",4),t._uU(13," Action "),t.qZA()()(),t.TgZ(14,"tbody"),t.YNc(15,H,27,7,"tr",5),t.qZA()()(),t.TgZ(16,"div",6)(17,"button",7),t.NdJ("click",function(){return a.addNewPayment()}),t.TgZ(18,"mat-icon"),t._uU(19,"add"),t.qZA()()()),2&o&&(t.xp6(15),t.Q6J("ngForOf",a.payments))},dependencies:[u.sg,u.O5,f.RK,f.cs,E.Hw,Z.VK,Z.OP,Z.p6,S.gs,k.Rr,i.JJ,i.On,p.xw,p.Wh]})}return n})();var q=m(5951);const W=[{path:"",component:V,resolve:{payments:q.sG}},{path:"create",component:C},{path:":id/edit",component:A,resolve:{payment:q.sG}}];let X=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[d.Bz.forChild(W),d.Bz]})}return n})();var j=m(6005),z=m(1447);let tt=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({providers:[g.g],imports:[u.ez,X,j.q,i.u5,i.UX,z.o9]})}return n})()}}]);