"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[592],{4382:(f,h,i)=>{i.d(h,{D:()=>x});var o=i(3075),_=i(2349),u=i(1159),t=i(5e3),r=i(4779),m=i(9808),n=i(508),d=i(7423),g=i(6688),C=i(7322),v=i(5245),M=i(7531),T=i(4107),E=i(7093);function O(a,c){if(1&a){const e=t.EpF();t.TgZ(0,"mat-chip",18),t.NdJ("removed",function(){const p=t.CHM(e).$implicit,R=t.oxw(2);return t.KtG(R.remove(p))}),t._uU(1),t.TgZ(2,"button",19)(3,"mat-icon"),t._uU(4,"cancel"),t.qZA()()()}if(2&a){const e=c.$implicit;t.xp6(1),t.hij(" ",e.value.name," ")}}function D(a,c){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",13)(2,"mat-label"),t._uU(3,"Recipients"),t.qZA(),t.TgZ(4,"mat-chip-list",14,15),t.YNc(6,O,5,1,"mat-chip",16),t.TgZ(7,"input",17),t.NdJ("matChipInputTokenEnd",function(l){t.CHM(e);const p=t.oxw();return t.KtG(p.add(l))}),t.qZA()()(),t.BQk()}if(2&a){const e=t.MAs(5),s=t.oxw();t.xp6(6),t.Q6J("ngForOf",s.recipients.controls),t.xp6(1),t.Q6J("matChipInputFor",e)("matChipInputSeparatorKeyCodes",s.separatorKeysCodes)("matChipInputAddOnBlur",s.addOnBlur)}}function A(a,c){if(1&a&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&a){const e=c.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}const I=function(){return["Registered Customers","Unregistered Customers","Both"]};function P(a,c){1&a&&(t.TgZ(0,"mat-form-field")(1,"mat-label"),t._uU(2,"Select Recipients"),t.qZA(),t.TgZ(3,"mat-select",20),t.YNc(4,A,2,2,"mat-option",8),t.qZA()()),2&a&&(t.xp6(4),t.Q6J("ngForOf",t.DdM(1,I)))}function Z(a,c){if(1&a&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&a){const e=c.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}const U=function(){return["Notification","Email","Both"]};let x=(()=>{class a{constructor(e,s,l,p){this.fb=e,this.notificationsService=s,this.dialogRef=l,this.data=p,this.messagesForm=this.fb.group({title:["",o.kI.required],body:["",o.kI.required],recipients:this.fb.array([]),type:["",o.kI.required],recipientsType:[null]}),this.addOnBlur=!0,this.separatorKeysCodes=[u.K5,u.OC],this.recipientsData=[]}ngOnInit(){this.data.allCustomers||(this.data.isBulkMsg?(this.recipientsData=this.data.customers,this.recipientsData.forEach(e=>{e.phoneCredentials.length>0&&this.addRecipients(e)})):(this.recipientsData.push(this.data.customers),this.recipientsData.map(e=>this.addRecipients(e))))}get recipients(){return this.messagesForm.controls.recipients}addRecipients(e){const s=this.fb.group({name:[e.name],id:[e._id],phoneToken:[e.phoneCredentials]});this.recipients.push(s)}deleteRecipient(e){this.recipients.removeAt(e)}submit(){this.notificationsService.createNotification(this.messagesForm.getRawValue()).subscribe(e=>{this.dialogRef.close(e)})}add(e){const s=(e.value||"").trim();s&&this.recipientsData.push({name:s}),e.chipInput.clear()}remove(e){const s=this.recipientsData.indexOf(e);s>=0&&this.recipientsData.splice(s,1)}edit(e,s){const l=s.value.trim();if(!l)return void this.remove(e);const p=this.recipientsData.indexOf(e);p>0&&(this.recipientsData[p].name=l)}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(o.qu),t.Y36(r.T),t.Y36(_.so),t.Y36(_.WI))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-create-messages"]],decls:28,vars:10,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["fxLayout","column","fxLayoutAlign","space-around stretch",3,"formGroup"],[4,"ngIf","ngIfElse"],["selectRecipient",""],["appearance","fill"],["matInput","","placeholder","Enter Message Title","formControlName","title"],["formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Enter Message Body","rows","20","formControlName","body"],["mat-dialog-actions",""],["mat-button","",3,"mat-dialog-close"],["mat-button","","cdkFocusInitial","",3,"disabled","click"],["appearance","fill",1,"example-chip-list"],["aria-label","Fruit selection","formArrayName","recipients"],["chipList",""],[3,"removed",4,"ngFor","ngForOf"],[3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],[3,"removed"],["matChipRemove",""],["formControlName","recipientsType"],[3,"value"]],template:function(e,s){if(1&e&&(t.TgZ(0,"h1",0),t._uU(1,"Send Notification"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2),t.YNc(4,D,8,4,"ng-container",3),t.YNc(5,P,5,2,"ng-template",null,4,t.W1O),t.TgZ(7,"mat-form-field",5)(8,"mat-label"),t._uU(9,"Title"),t.qZA(),t._UZ(10,"input",6),t.qZA(),t.TgZ(11,"mat-form-field",5)(12,"mat-label"),t._uU(13,"Select Message Type"),t.qZA(),t.TgZ(14,"mat-select",7),t.YNc(15,Z,2,2,"mat-option",8),t.qZA()(),t.TgZ(16,"mat-form-field",5)(17,"mat-label"),t._uU(18,"body"),t.qZA(),t._UZ(19,"textarea",9),t.qZA()()(),t.TgZ(20,"div",10)(21,"button",11),t._uU(22,"Cancel"),t.qZA(),t.TgZ(23,"button",12),t.NdJ("click",function(){return s.submit()}),t._uU(24,"Send"),t.qZA()(),t.TgZ(25,"pre"),t._uU(26),t.ALo(27,"json"),t.qZA()),2&e){const l=t.MAs(6);t.xp6(3),t.Q6J("formGroup",s.messagesForm),t.xp6(1),t.Q6J("ngIf",!s.data.allCustomers)("ngIfElse",l),t.xp6(11),t.Q6J("ngForOf",t.DdM(9,U)),t.xp6(6),t.Q6J("mat-dialog-close",null),t.xp6(2),t.Q6J("disabled",s.messagesForm.invalid),t.xp6(3),t.hij("  ",t.lcZ(27,7,s.messagesForm.value),"\n")}},dependencies:[m.sg,m.O5,n.ey,d.lW,g.qn,g.HS,g.oH,g.qH,C.KE,C.hX,v.Hw,M.Nt,T.gD,_.ZT,_.uh,_.xY,_.H8,E.xw,E.Wh,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,o.CE,m.Ts]}),a})()},3880:(f,h,i)=>{i.d(h,{x:()=>t});var o=i(2340),_=i(5e3),u=i(520);let t=(()=>{class r{constructor(n){this._httpClient=n,this.hostServer=o.N.hostServer}createCuisine(n){return this._httpClient.post(`${this.hostServer}/cuisines`,n)}getCuisines(){return this._httpClient.get(`${this.hostServer}/cuisines`)}getCuisine(n){return this._httpClient.get(`${this.hostServer}/cuisines/${n}`)}updateCuisine(n,d){return this._httpClient.put(`${this.hostServer}/cuisines/${n}`,d)}deleteCuisine(n){return this._httpClient.delete(`${this.hostServer}/cuisines/${n}`)}}return r.\u0275fac=function(n){return new(n||r)(_.LFG(u.eN))},r.\u0275prov=_.Yz7({token:r,factory:r.\u0275fac}),r})()},4779:(f,h,i)=>{i.d(h,{T:()=>t});var o=i(2340),_=i(5e3),u=i(520);let t=(()=>{class r{constructor(n){this._httpClient=n,this.hostServer=o.N.hostServer}createNotification(n){return this._httpClient.post(`${this.hostServer}/notifications`,n)}getNotifications(){return this._httpClient.get(`${this.hostServer}/notifications`)}getNotification(n){return this._httpClient.get(`${this.hostServer}/notifications/${n}`)}updateNotification(n,d){return this._httpClient.put(`${this.hostServer}/notifications/${n}`,d)}deleteNotification(n){return this._httpClient.delete(`${this.hostServer}/notifications/${n}`)}}return r.\u0275fac=function(n){return new(n||r)(_.LFG(u.eN))},r.\u0275prov=_.Yz7({token:r,factory:r.\u0275fac}),r})()}}]);