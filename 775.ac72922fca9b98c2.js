"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[775],{6775:(Le,F,l)=>{l.r(F),l.d(F,{BannersModule:()=>Qe});var m=l(6814),p=l(1896),e=l(5879);let Q=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-banners"]],decls:1,vars:0,template:function(n,o){1&n&&e._UZ(0,"router-outlet")},dependencies:[p.lC],encapsulation:2}),t})();var D=l(6567),L=l(553),E=l(9862);let f=(()=>{class t{constructor(n){this._httpClient=n,this.hostServer=L.N.hostServer}createBanner(n){return this._httpClient.post(`${this.hostServer}/banners`,n)}getBanners(){return this._httpClient.get(`${this.hostServer}/banners/admin`)}getBanner(n){return this._httpClient.get(`${this.hostServer}/banners/${n}`)}updateBanner(n,o){return this._httpClient.put(`${this.hostServer}/banners/${n}`,o)}deleteBanner(n){return this._httpClient.delete(`${this.hostServer}/banners/${n}`)}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(E.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})();var Z=l(7700),g=l(2296),$=l(617),C=l(7988),x=l(2599),i=l(6223);function R(t,a){1&t&&(e.TgZ(0,"div",21),e._UZ(1,"div",22),e._uU(2," Active "),e.qZA())}function k(t,a){1&t&&(e.TgZ(0,"div",21),e._UZ(1,"div",23),e._uU(2," Inactive "),e.qZA())}function V(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"tr",8)(1,"th",9),e._UZ(2,"img",10),e.TgZ(3,"div",11)(4,"div",12),e._uU(5),e.qZA(),e.TgZ(6,"div",13),e._uU(7),e.qZA()()(),e.TgZ(8,"td",14),e.YNc(9,R,3,0,"div",15),e.YNc(10,k,3,0,"div",15),e.qZA(),e.TgZ(11,"td",14)(12,"mat-slide-toggle",16),e.NdJ("ngModelChange",function(r){const u=e.CHM(n).$implicit;return e.KtG(u.active=r)})("change",function(r){const u=e.CHM(n).$implicit,d=e.oxw();return e.KtG(d.onChange(u,r))}),e.qZA()(),e.TgZ(13,"td",14)(14,"button",17)(15,"mat-icon"),e._uU(16,"more_vert"),e.qZA()(),e.TgZ(17,"mat-menu",18,19),e.NdJ("click",function(r){return r.stopPropagation()}),e.TgZ(19,"button",20),e.NdJ("click",function(r){const s=e.CHM(n),u=s.index,d=s.$implicit;return e.oxw().delete(u,d._id),e.KtG(r.stopPropagation())}),e.TgZ(20,"mat-icon"),e._uU(21,"delete"),e.qZA(),e._uU(22," Delete"),e.qZA(),e.TgZ(23,"button",20),e.NdJ("click",function(){const s=e.CHM(n).$implicit,u=e.oxw();return e.KtG(u.viewDetails(s))}),e.TgZ(24,"mat-icon"),e._uU(25,"edit"),e.qZA(),e._uU(26," Edit / View "),e.qZA()()()()}if(2&t){const n=a.$implicit,o=e.MAs(18);e.xp6(2),e.Q6J("src",n.image,e.LSH),e.xp6(3),e.Oqu(n.title),e.xp6(2),e.lnq("",n.category," ",n.category," ",n.link,""),e.xp6(2),e.Q6J("ngIf",n.active),e.xp6(1),e.Q6J("ngIf",!n.active),e.xp6(2),e.Q6J("ngModel",n.active),e.xp6(2),e.Q6J("matMenuTriggerFor",o)}}let G=(()=>{class t{constructor(n,o,r,s){this.bannersService=n,this._matDialog=o,this.router=r,this.route=s,this.displayedColumns=["name","description","active","action"],this.banners=[],this.banners=this.route.snapshot.data.banners}ngOnInit(){}delete(n,o){this.confirmDialogRef=this._matDialog.open(D.X,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Banner?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete this banner?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(r=>{r&&(this.banners.splice(n,1),this.bannersService.deleteBanner(o).subscribe()),this.confirmDialogRef=null})}onChange(n,o){this.bannersService.updateBanner(n._id,{active:o.checked}).subscribe(()=>{})}viewDetails(n){this.router.navigate(["dashboard","banners",n._id,"edit"])}addBanner(){this.router.navigate(["dashboard","banners","new"])}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(f),e.Y36(Z.uw),e.Y36(p.F0),e.Y36(p.gz))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-list-banners"]],decls:18,vars:1,consts:[[1,"w-full","h-screen","relative"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","text-gray-500"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50"],["scope","col",1,"px-6","py-3"],["class","bg-white border-b ",4,"ngFor","ngForOf"],["mat-fab","","color","primary",2,"position","fixed","bottom","80px","right","15px",3,"click"],[1,"mat-18"],[1,"bg-white","border-b"],["scope","row",1,"flex","items-center","px-6","py-4","text-gray-900","whitespace-nowrap"],["alt","Jese image",1,"w-10","h-10","rounded-full",3,"src"],[1,"pl-3"],[1,"text-base","font-semibold"],[1,"font-normal","text-gray-500"],[1,"px-6","py-4"],["class","flex items-center",4,"ngIf"],["color","primary",1,"mx-8",3,"ngModel","ngModelChange","change"],["mat-icon-button","",3,"matMenuTriggerFor"],[3,"click"],["menu","matMenu"],["mat-menu-item","",3,"click"],[1,"flex","items-center"],[1,"h-2.5","w-2.5","rounded-full","bg-green-500","mr-2"],[1,"h-2.5","w-2.5","rounded-full","bg-red-500","mr-2"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"table",2)(3,"thead",3)(4,"tr")(5,"th",4),e._uU(6," Name "),e.qZA(),e.TgZ(7,"th",4),e._uU(8," Status "),e.qZA(),e.TgZ(9,"th",4),e._uU(10," Change Status "),e.qZA(),e.TgZ(11,"th",4),e._uU(12," Action "),e.qZA()()(),e.TgZ(13,"tbody"),e.YNc(14,V,27,9,"tr",5),e.qZA()()(),e.TgZ(15,"button",6),e.NdJ("click",function(){return o.addBanner()}),e.TgZ(16,"mat-icon",7),e._uU(17,"add"),e.qZA()()()),2&n&&(e.xp6(14),e.Q6J("ngForOf",o.banners))},dependencies:[m.sg,m.O5,g.RK,g.cs,$.Hw,C.VK,C.OP,C.p6,x.Rr,i.JJ,i.On]}),t})();var A=l(6116),B=l(7921),y=l(3620),S=l(4664),q=l(7398),N=l(6284),T=l(4151),I=l(940),_=l(4630),J=l(3680),h=l(9157),U=l(2032),v=l(8525),c=l(3814),M=l(7509),O=l(3064);function H(t,a){if(1&t&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n),e.xp6(1),e.Oqu(n)}}function P(t,a){if(1&t&&(e.TgZ(0,"mat-option",26)(1,"span"),e._uU(2),e.qZA()()),2&t){const n=a.$implicit;e.Q6J("value",n.name)("id",n._id),e.xp6(2),e.Oqu(n.name)}}function K(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"mat-form-field",21)(1,"mat-label"),e._uU(2,"Store"),e.qZA(),e._UZ(3,"input",22),e.TgZ(4,"mat-autocomplete",23,24),e.NdJ("optionSelected",function(r){e.CHM(n);const s=e.oxw();return e.KtG(s.onShopSelectionChanged(r))}),e.YNc(6,P,3,3,"mat-option",25),e.ALo(7,"async"),e.qZA()()}if(2&t){const n=e.MAs(5),o=e.oxw();e.xp6(3),e.Q6J("matAutocomplete",n)("formControl",o.storesCtrl),e.xp6(3),e.Q6J("ngForOf",e.lcZ(7,3,o.filteredStores))}}function z(t,a){if(1&t&&(e.TgZ(0,"mat-option",20)(1,"span"),e._uU(2),e.qZA()()),2&t){const n=a.$implicit;e.Q6J("value",n._id),e.xp6(2),e.Oqu(n.name)}}function X(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"mat-form-field",21)(1,"mat-label"),e._uU(2,"Select product menu"),e.qZA(),e.TgZ(3,"mat-select",27),e.NdJ("selectionChange",function(r){e.CHM(n);const s=e.oxw();return e.KtG(s.changeMenu(r))}),e.YNc(4,z,3,2,"mat-option",8),e.ALo(5,"async"),e.qZA()()}if(2&t){const n=e.oxw();e.xp6(4),e.Q6J("ngForOf",e.lcZ(5,1,n.menus$))}}function W(t,a){if(1&t&&(e.TgZ(0,"mat-option",20)(1,"span"),e._uU(2),e.qZA()()),2&t){const n=a.$implicit;e.Q6J("value",n._id),e.xp6(2),e.Oqu(n.name)}}function j(t,a){if(1&t&&(e.TgZ(0,"mat-form-field",21)(1,"mat-label"),e._uU(2,"Select product"),e.qZA(),e.TgZ(3,"mat-select",28),e.YNc(4,W,3,2,"mat-option",8),e.qZA()()),2&t){const n=e.oxw();e.xp6(4),e.Q6J("ngForOf",n.selectedMenu.foods)}}function ee(t,a){if(1&t&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n.value),e.xp6(1),e.Oqu(n.name)}}function ne(t,a){if(1&t&&(e.TgZ(0,"span",29),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.AsE(" (+",((null==n.bannerForm.value||null==n.bannerForm.value.country?null:n.bannerForm.value.country.length)||0)-1," ",2===(null==n.bannerForm.value||null==n.bannerForm.value.country?null:n.bannerForm.value.country.length)?"other":"others",") ")}}function te(t,a){if(1&t&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n),e.xp6(1),e.Oqu(n)}}function oe(t,a){if(1&t&&(e.TgZ(0,"span",29),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.AsE(" (+",((null==n.bannerForm.value||null==n.bannerForm.value.cities?null:n.bannerForm.value.cities.length)||0)-1," ",2===(null==n.bannerForm.value||null==n.bannerForm.value.cities?null:n.bannerForm.value.cities.length)?"other":"others",") ")}}function ae(t,a){if(1&t&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n),e.xp6(1),e.Oqu(n)}}const re=function(){return["Product","Category","Blog"]},ie=function(){return{value:!0,name:"Yes"}},le=function(){return{value:!1,name:"No"}},se=function(t,a){return[t,a]},me=function(){return["Nigeria","Mauritius","Kenya","Rwanda"]},ue=function(){return["Yenagoa","Lagos","Warri","PH"]};let ce=(()=>{class t{constructor(n,o,r,s,u,d,b,De){this.fb=n,this.bannerService=o,this.location=r,this.dialog=s,this.route=u,this.storesService=d,this.storeService=b,this.menusService=De,this.storesCtrl=new i.NI(""),this.stores=[],this.menus=[],this.banner=this.route.snapshot.data.banner,this.mediaData={image:null,icon:null},this.bannerForm=this.fb.group({image:[this.banner.image,i.kI.required],title:[this.banner.title,i.kI.required],active:[this.banner.active,i.kI.required],category:[this.banner.category,i.kI.required],link:[this.banner.link],showOnSlider:[this.banner.showOnSlider,i.kI.required],shortDescription:[this.banner.shortDescription,i.kI.required],storeId:[this.banner.storeId],menuId:[this.banner.menuId],productId:[this.banner.productId],country:[this.banner.country,i.kI.required],cities:[this.banner.cities,i.kI.required]}),this.mediaData={image:null,icon:null},this.mediaData.image=this.banner.image}ngOnInit(){"Product"==this.bannerForm.value.category&&(this.storeId=this.bannerForm.value.storeId,this.storeService.getStore(this.bannerForm.value.storeId).then(n=>{this.filteredStores=this.storesCtrl.valueChanges.pipe((0,B.O)(n.name),(0,y.b)(500),(0,S.w)(o=>this.storesService.search(o))),this.bannerForm.patchValue({storeId:n.name}),this.getStoreMenu(n._id)}))}onShopSelectionChanged(n){this.bannerForm.patchValue({storeId:n.option.value}),this.getStoreMenu(n.option.id),this.storeId=n.option.id}getStoreMenu(n){this.menus$=this.menusService.getStoreMenus(n).pipe((0,q.U)(o=>(this.menus=o,this.selectedMenu=this.menus.find(r=>r._id==this.banner.menuId),o)))}changeMenu(n){this.selectedMenu=this.menus.find(o=>o._id==n.source.value)}submit(){this.bannerForm.valid&&(this.bannerForm.patchValue({storeId:this.storeId}),this.bannerService.updateBanner(this.banner._id,this.bannerForm.getRawValue()).subscribe(n=>{this.location.back()}))}back(){this.location.back()}addMedia(n){this.dialog.open(A.R).afterClosed().subscribe(r=>{r&&(this.bannerForm.patchValue({[n]:r.url}),this.mediaData[n]={[n]:r}[n])})}removeValue(n){this.bannerForm.patchValue({[n]:null}),this.mediaData[n]=null}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(i.qu),e.Y36(f),e.Y36(m.Ye),e.Y36(Z.uw),e.Y36(p.gz),e.Y36(N._),e.Y36(T.d),e.Y36(I.O))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-edit-banners"]],decls:52,vars:23,consts:[["ngStyle.gt-sm","width: 50rem;","ngStyle.lt-lg","width: 100%",1,"mat-elevation-z8","container","mx-auto","my-10","p-5"],[3,"formGroup","ngSubmit"],["fxLayout","column","fxLayoutAlign","space-evenly stretch"],["valueName","Image",3,"isNew","mediaData","removeValue","openMediaBrowser"],["appearance","outline",1,"full-width"],["matInput","","placeholder","Name Of Banner","formControlName","title"],["matInput","","placeholder","Short Description","formControlName","shortDescription"],["formControlName","category"],[3,"value",4,"ngFor","ngForOf"],["class","example-full-width",4,"ngIf"],["matInput","","placeholder","Enter Link","formControlName","link"],["formControlName","showOnSlider"],["appearance","outline"],["multiple","","formControlName","country"],["class","example-additional-selection",4,"ngIf"],["multiple","","formControlName","cities"],["formControlName","active"],["fxLayout","row","fxLayoutAlign","space-around center","fxLayoutGap","10px"],["mat-raised-button","","fxFlex","50%",3,"click"],["mat-raised-button","","fxFlex","50%","color","primary",3,"disabled"],[3,"value"],[1,"example-full-width"],["matInput","","aria-label","Store","formControlName","storeId",3,"matAutocomplete","formControl"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value","id",4,"ngFor","ngForOf"],[3,"value","id"],["formControlName","menuId",3,"selectionChange"],["formControlName","productId"],[1,"example-additional-selection"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return o.submit()}),e.TgZ(2,"div",2)(3,"app-select-media",3),e.NdJ("removeValue",function(s){return o.removeValue(s)})("openMediaBrowser",function(s){return o.addMedia(s)}),e.qZA(),e.TgZ(4,"mat-form-field",4)(5,"mat-label"),e._uU(6,"Name Of Banner"),e.qZA(),e._UZ(7,"input",5),e.qZA(),e.TgZ(8,"mat-form-field",4)(9,"mat-label"),e._uU(10,"Short Description"),e.qZA(),e._UZ(11,"textarea",6),e.qZA(),e.TgZ(12,"mat-form-field",4)(13,"mat-label"),e._uU(14,"Category"),e.qZA(),e.TgZ(15,"mat-select",7),e.YNc(16,H,2,2,"mat-option",8),e.qZA()(),e.YNc(17,K,8,5,"mat-form-field",9),e.YNc(18,X,6,3,"mat-form-field",9),e.YNc(19,j,5,1,"mat-form-field",9),e.TgZ(20,"mat-form-field",4)(21,"mat-label"),e._uU(22,"Link"),e.qZA(),e._UZ(23,"input",10),e.qZA(),e.TgZ(24,"mat-form-field",4)(25,"mat-label"),e._uU(26,"Show on Slider"),e.qZA(),e.TgZ(27,"mat-select",11),e.YNc(28,ee,2,2,"mat-option",8),e.qZA()(),e.TgZ(29,"mat-form-field",12)(30,"mat-label"),e._uU(31,"Country"),e.qZA(),e.TgZ(32,"mat-select",13)(33,"mat-select-trigger"),e._uU(34),e.YNc(35,ne,2,2,"span",14),e.qZA(),e.YNc(36,te,2,2,"mat-option",8),e.qZA()(),e.TgZ(37,"mat-form-field",12)(38,"mat-label"),e._uU(39,"City"),e.qZA(),e.TgZ(40,"mat-select",15)(41,"mat-select-trigger"),e._uU(42),e.YNc(43,oe,2,2,"span",14),e.qZA(),e.YNc(44,ae,2,2,"mat-option",8),e.qZA()(),e.TgZ(45,"mat-slide-toggle",16),e._uU(46,"Enable"),e.qZA(),e.TgZ(47,"div",17)(48,"a",18),e.NdJ("click",function(){return o.back()}),e._uU(49,"CANCEL"),e.qZA(),e.TgZ(50,"button",19),e._uU(51,"SAVE"),e.qZA()()()()()),2&n&&(e.xp6(1),e.Q6J("formGroup",o.bannerForm),e.xp6(2),e.Q6J("isNew",!1)("mediaData",null==o.mediaData?null:o.mediaData.image),e.xp6(13),e.Q6J("ngForOf",e.DdM(15,re)),e.xp6(1),e.Q6J("ngIf","Product"===o.bannerForm.value.category),e.xp6(1),e.Q6J("ngIf",o.bannerForm.value.storeId),e.xp6(1),e.Q6J("ngIf",o.selectedMenu),e.xp6(9),e.Q6J("ngForOf",e.WLB(18,se,e.DdM(16,ie),e.DdM(17,le))),e.xp6(6),e.hij(" ",(null==o.bannerForm.value||null==o.bannerForm.value.country?null:o.bannerForm.value.country[0])||""," "),e.xp6(1),e.Q6J("ngIf",((null==o.bannerForm.value||null==o.bannerForm.value.country?null:o.bannerForm.value.country.length)||0)>1),e.xp6(1),e.Q6J("ngForOf",e.DdM(21,me)),e.xp6(6),e.hij(" ",(null==o.bannerForm.value||null==o.bannerForm.value.cities?null:o.bannerForm.value.cities[0])||""," "),e.xp6(1),e.Q6J("ngIf",((null==o.bannerForm.value||null==o.bannerForm.value.cities?null:o.bannerForm.value.cities.length)||0)>1),e.xp6(1),e.Q6J("ngForOf",e.DdM(22,ue)),e.xp6(6),e.Q6J("disabled",o.bannerForm.invalid))},dependencies:[m.sg,m.O5,_.XC,J.ey,_.ZL,g.zs,g.lW,h.KE,h.hX,U.Nt,v.gD,v.$L,x.Rr,i._Y,i.Fj,i.JJ,i.JL,i.oH,i.sg,i.u,c.xw,c.SQ,c.Wh,c.yH,M.Zl,O.t,m.Ov]}),t})();function pe(t,a){if(1&t&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n),e.xp6(1),e.Oqu(n)}}function de(t,a){if(1&t&&(e.TgZ(0,"mat-option",26)(1,"span"),e._uU(2),e.qZA()()),2&t){const n=a.$implicit;e.Q6J("value",n.name)("id",n._id),e.xp6(2),e.Oqu(n.name)}}function fe(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"mat-form-field",21)(1,"mat-label"),e._uU(2,"Store"),e.qZA(),e._UZ(3,"input",22),e.TgZ(4,"mat-autocomplete",23,24),e.NdJ("optionSelected",function(r){e.CHM(n);const s=e.oxw();return e.KtG(s.onShopSelectionChanged(r))}),e.YNc(6,de,3,3,"mat-option",25),e.ALo(7,"async"),e.qZA()()}if(2&t){const n=e.MAs(5),o=e.oxw();e.xp6(3),e.Q6J("matAutocomplete",n)("formControl",o.storesCtrl),e.xp6(3),e.Q6J("ngForOf",e.lcZ(7,3,o.filteredStores))}}function ge(t,a){if(1&t&&(e.TgZ(0,"mat-option",20)(1,"span"),e._uU(2),e.qZA()()),2&t){const n=a.$implicit;e.Q6J("value",n._id),e.xp6(2),e.Oqu(n.name)}}function _e(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"mat-form-field",21)(1,"mat-label"),e._uU(2,"Select product menu"),e.qZA(),e.TgZ(3,"mat-select",27),e.NdJ("selectionChange",function(r){e.CHM(n);const s=e.oxw();return e.KtG(s.changeMenu(r))}),e.YNc(4,ge,3,2,"mat-option",8),e.ALo(5,"async"),e.qZA()()}if(2&t){const n=e.oxw();e.xp6(4),e.Q6J("ngForOf",e.lcZ(5,1,n.menus$))}}function he(t,a){if(1&t&&(e.TgZ(0,"mat-option",20)(1,"span"),e._uU(2),e.qZA()()),2&t){const n=a.$implicit;e.Q6J("value",n._id),e.xp6(2),e.Oqu(n.name)}}function ve(t,a){if(1&t&&(e.TgZ(0,"mat-form-field",21)(1,"mat-label"),e._uU(2,"Select product"),e.qZA(),e.TgZ(3,"mat-select",28),e.YNc(4,he,3,2,"mat-option",8),e.qZA()()),2&t){const n=e.oxw();e.xp6(4),e.Q6J("ngForOf",n.selectedMenu.foods)}}function be(t,a){if(1&t&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n.value),e.xp6(1),e.Oqu(n.name)}}function Ze(t,a){if(1&t&&(e.TgZ(0,"span",29),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.AsE(" (+",((null==n.bannerForm.value||null==n.bannerForm.value.country?null:n.bannerForm.value.country.length)||0)-1," ",2===(null==n.bannerForm.value||null==n.bannerForm.value.country?null:n.bannerForm.value.country.length)?"other":"others",") ")}}function Ce(t,a){if(1&t&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n),e.xp6(1),e.Oqu(n)}}function xe(t,a){if(1&t&&(e.TgZ(0,"span",29),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.AsE(" (+",((null==n.bannerForm.value||null==n.bannerForm.value.cities?null:n.bannerForm.value.cities.length)||0)-1," ",2===(null==n.bannerForm.value||null==n.bannerForm.value.cities?null:n.bannerForm.value.cities.length)?"other":"others",") ")}}function Te(t,a){if(1&t&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n),e.xp6(1),e.Oqu(n)}}const Fe=function(){return["Product","Category","Blog","Ads"]},Ae=function(){return{value:!0,name:"Yes"}},Be=function(){return{value:!1,name:"No"}},ye=function(t,a){return[t,a]},Se=function(){return["Nigeria","Mauritius","Kenya","Rwanda"]},qe=function(){return["Yenagoa","Yenegoa","Lagos","Warri","PH"]};let Ne=(()=>{class t{constructor(n,o,r,s,u,d,b){this.fb=n,this.bannerService=o,this.location=r,this.dialog=s,this.storesService=u,this.menusService=d,this.storeService=b,this.storesCtrl=new i.NI(""),this.stores=[],this.menus=[],this.mediaData={image:null,icon:null},this.bannerForm=this.fb.group({image:["",i.kI.required],title:["",i.kI.required],active:[!1,i.kI.required],category:["",i.kI.required],link:[""],shortDescription:["",i.kI.required],showOnSlider:[!1,i.kI.required],storeId:[""],menuId:[""],productId:[""],country:["",i.kI.required],cities:["",i.kI.required]})}ngOnInit(){this.filteredStores=this.storesCtrl.valueChanges.pipe((0,B.O)(""),(0,y.b)(500),(0,S.w)(n=>this.storesService.search(n)))}submit(){this.bannerForm.valid&&this.bannerService.createBanner(this.bannerForm.getRawValue()).subscribe(n=>{this.location.back()})}onShopSelectionChanged(n){this.bannerForm.patchValue({storeId:n.option.id}),this.getStoreMenu(n.option.id)}getStoreMenu(n){this.menus$=this.menusService.getStoreMenus(n).pipe((0,q.U)(o=>this.menus=o))}changeMenu(n){this.selectedMenu=this.menus.find(o=>o._id==n.source.value)}back(){this.location.back()}displayFn(n){return n.name}selectedStore(n){console.log(n.option.value)}addMedia(n){this.dialog.open(A.R).afterClosed().subscribe(r=>{r&&(this.bannerForm.patchValue({[n]:r.url}),this.mediaData[n]={[n]:r}[n])})}removeValue(n){this.bannerForm.patchValue({[n]:null}),this.mediaData[n]=null}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(i.qu),e.Y36(f),e.Y36(m.Ye),e.Y36(Z.uw),e.Y36(N._),e.Y36(I.O),e.Y36(T.d))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-create-banners"]],decls:52,vars:23,consts:[["ngStyle.gt-sm","width: 50rem;","ngStyle.lt-lg","width: 100%",1,"mat-elevation-z8","container","mx-auto","my-10","p-5"],[3,"formGroup","ngSubmit"],["fxLayout","column","fxLayoutAlign","space-evenly stretch"],["valueName","Image",3,"isNew","mediaData","removeValue","openMediaBrowser"],["appearance","outline",1,"full-width"],["matInput","","placeholder","Name Of Banner","formControlName","title"],["matInput","","placeholder","Short Description","formControlName","shortDescription"],["formControlName","category"],[3,"value",4,"ngFor","ngForOf"],["class","example-full-width",4,"ngIf"],["formControlName","showOnSlider"],["matInput","","placeholder","Enter Link","formControlName","link"],["appearance","outline"],["multiple","","formControlName","country"],["class","example-additional-selection",4,"ngIf"],["multiple","","formControlName","cities"],["formControlName","active"],["fxLayout","row","fxLayoutAlign","space-around center","fxLayoutGap","10px"],["mat-raised-button","","fxFlex","50%",3,"click"],["mat-raised-button","","fxFlex","50%","color","primary",3,"disabled"],[3,"value"],[1,"example-full-width"],["matInput","","aria-label","Store","formControlName","storeId",3,"matAutocomplete","formControl"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value","id",4,"ngFor","ngForOf"],[3,"value","id"],["formControlName","menuId",3,"selectionChange"],["formControlName","productId"],[1,"example-additional-selection"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return o.submit()}),e.TgZ(2,"div",2)(3,"app-select-media",3),e.NdJ("removeValue",function(s){return o.removeValue(s)})("openMediaBrowser",function(s){return o.addMedia(s)}),e.qZA(),e.TgZ(4,"mat-form-field",4)(5,"mat-label"),e._uU(6,"Name Of Banner"),e.qZA(),e._UZ(7,"input",5),e.qZA(),e.TgZ(8,"mat-form-field",4)(9,"mat-label"),e._uU(10,"Short Description"),e.qZA(),e._UZ(11,"input",6),e.qZA(),e.TgZ(12,"mat-form-field",4)(13,"mat-label"),e._uU(14,"Category"),e.qZA(),e.TgZ(15,"mat-select",7),e.YNc(16,pe,2,2,"mat-option",8),e.qZA()(),e.YNc(17,fe,8,5,"mat-form-field",9),e.YNc(18,_e,6,3,"mat-form-field",9),e.YNc(19,ve,5,1,"mat-form-field",9),e.TgZ(20,"mat-form-field",4)(21,"mat-label"),e._uU(22,"Show on Slider"),e.qZA(),e.TgZ(23,"mat-select",10),e.YNc(24,be,2,2,"mat-option",8),e.qZA()(),e.TgZ(25,"mat-form-field",4)(26,"mat-label"),e._uU(27,"Link"),e.qZA(),e._UZ(28,"input",11),e.qZA(),e.TgZ(29,"mat-form-field",12)(30,"mat-label"),e._uU(31,"Country"),e.qZA(),e.TgZ(32,"mat-select",13)(33,"mat-select-trigger"),e._uU(34),e.YNc(35,Ze,2,2,"span",14),e.qZA(),e.YNc(36,Ce,2,2,"mat-option",8),e.qZA()(),e.TgZ(37,"mat-form-field",12)(38,"mat-label"),e._uU(39,"City"),e.qZA(),e.TgZ(40,"mat-select",15)(41,"mat-select-trigger"),e._uU(42),e.YNc(43,xe,2,2,"span",14),e.qZA(),e.YNc(44,Te,2,2,"mat-option",8),e.qZA()(),e.TgZ(45,"mat-slide-toggle",16),e._uU(46,"Enable"),e.qZA(),e.TgZ(47,"div",17)(48,"a",18),e.NdJ("click",function(){return o.back()}),e._uU(49,"CANCEL"),e.qZA(),e.TgZ(50,"button",19),e._uU(51,"SAVE"),e.qZA()()()()()),2&n&&(e.xp6(1),e.Q6J("formGroup",o.bannerForm),e.xp6(2),e.Q6J("isNew",!1)("mediaData",null==o.mediaData?null:o.mediaData.image),e.xp6(13),e.Q6J("ngForOf",e.DdM(15,Fe)),e.xp6(1),e.Q6J("ngIf","Product"===o.bannerForm.value.category),e.xp6(1),e.Q6J("ngIf",o.bannerForm.value.storeId),e.xp6(1),e.Q6J("ngIf",o.selectedMenu),e.xp6(5),e.Q6J("ngForOf",e.WLB(18,ye,e.DdM(16,Ae),e.DdM(17,Be))),e.xp6(10),e.hij(" ",o.bannerForm.value.country[0]||""," "),e.xp6(1),e.Q6J("ngIf",((null==o.bannerForm.value||null==o.bannerForm.value.country?null:o.bannerForm.value.country.length)||0)>1),e.xp6(1),e.Q6J("ngForOf",e.DdM(21,Se)),e.xp6(6),e.hij(" ",(null==o.bannerForm.value||null==o.bannerForm.value.cities?null:o.bannerForm.value.cities[0])||""," "),e.xp6(1),e.Q6J("ngIf",((null==o.bannerForm.value||null==o.bannerForm.value.cities?null:o.bannerForm.value.cities.length)||0)>1),e.xp6(1),e.Q6J("ngForOf",e.DdM(22,qe)),e.xp6(6),e.Q6J("disabled",o.bannerForm.invalid))},dependencies:[m.sg,m.O5,_.XC,J.ey,_.ZL,g.zs,g.lW,h.KE,h.hX,U.Nt,v.gD,v.$L,x.Rr,i._Y,i.Fj,i.JJ,i.JL,i.oH,i.sg,i.u,c.xw,c.SQ,c.Wh,c.yH,M.Zl,O.t,m.Ov],styles:[".example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}.example-option-img[_ngcontent-%COMP%]{vertical-align:middle;margin-right:8px}[dir=rtl][_ngcontent-%COMP%]   .example-option-img[_ngcontent-%COMP%]{margin-right:0;margin-left:8px}"]}),t})(),w=(()=>{class t{constructor(n){this.bannersService=n}resolve(){return this.bannersService.getBanners()}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(f))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Y=(()=>{class t{constructor(n){this.bannerService=n}resolve(n){const o=n.paramMap.get("id");return this.bannerService.getBanner(o)}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(f))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Ie=[{path:"",component:Q,children:[{path:"list",component:G,resolve:{banners:w}},{path:"new",component:Ne},{path:":id/edit",component:ce,resolve:{banner:Y}}]}];let Je=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[p.Bz.forChild(Ie),p.Bz]}),t})();var Ue=l(1447),Me=l(6005),Oe=l(7026),we=l(784),Ye=l(6208);let Qe=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[w,Y,f,T.d],imports:[Je,m.ez,Me.q,we.c,i.UX,i.u5,Ue.o9,Oe.a,p.Bz,Ye.m]}),t})()}}]);