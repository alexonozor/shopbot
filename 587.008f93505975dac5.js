"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[587],{7587:(z,p,o)=>{o.r(p),o.d(p,{FinanceModule:()=>G});var c=o(6814),l=o(1896),t=o(5879);let A=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-finance"]],decls:1,vars:0,template:function(e,a){1&e&&t._UZ(0,"router-outlet")},dependencies:[l.lC]}),n})();var u=o(6676),s=o(6223),T=o(9397),F=o(3997),y=o(7921),U=o(4664),g=o(7069),C=o(7747),v=o(9862),L=o(553);let f=(()=>{class n{constructor(e){this._httpClient=e,this.hostServer=L.N.hostServer}getFinances(e){let a=new v.LE({fromObject:e});return this._httpClient.get(`${this.hostServer}/transactions/financial/reports?${a.toString()}`)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(v.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var O=o(7700),q=o(2296),m=o(9157),d=o(8034),h=o(3814),S=o(7509);const M=["pdfTable"];function I(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Invalid start date"),t.qZA())}function w(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Invalid end date"),t.qZA())}function N(n,r){if(1&n&&(t.TgZ(0,"tr",24)(1,"td",25)(2,"div",21),t._uU(3),t.qZA()(),t.TgZ(4,"td",26),t._uU(5),t.ALo(6,"date"),t.qZA(),t.TgZ(7,"th",27)(8,"div",28)(9,"div",29),t._uU(10),t.qZA(),t.TgZ(11,"div",30),t._uU(12),t.qZA()()(),t.TgZ(13,"td",26),t._uU(14),t.qZA(),t.TgZ(15,"td",26),t._uU(16),t.ALo(17,"currency"),t.qZA(),t.TgZ(18,"td",26),t._uU(19),t.ALo(20,"currency"),t.qZA(),t.TgZ(21,"td",26),t._uU(22),t.qZA(),t.TgZ(23,"td",26),t._uU(24),t.ALo(25,"currency"),t.qZA()()),2&n){const e=r.$implicit,a=r.index;t.xp6(3),t.hij(" ",a+1," "),t.xp6(2),t.hij(" ",t.xi3(6,10,e.createdAt,"dd-MM-YYYY MM:HH:SS")," "),t.xp6(5),t.Oqu(e.user.name),t.xp6(2),t.hij("Order from ",e.store.name,""),t.xp6(2),t.hij(" #",e.reference," "),t.xp6(2),t.hij(" ",t.xi3(17,13,e.serviceFee,e.store.currency)," "),t.xp6(3),t.hij(" ",t.xi3(20,16,e.shippingFee,e.store.currency)," "),t.xp6(3),t.AsE(" ",e.vendorCommissionAmount,"(%",e.vendorCommission,") "),t.xp6(2),t.hij(" ",t.xi3(25,19,e.total,e.store.currency)," ")}}function Y(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",1,2)(2,"div",3)(3,"div",4)(4,"p"),t._uU(5,"Export"),t.qZA(),t.TgZ(6,"button",5),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.exportPDF())}),t._uU(7,"PDF"),t.qZA()(),t.TgZ(8,"mat-form-field",6)(9,"mat-label"),t._uU(10,"Enter a date range"),t.qZA(),t.TgZ(11,"mat-date-range-input",7),t._UZ(12,"input",8)(13,"input",9),t.qZA(),t._UZ(14,"mat-datepicker-toggle",10)(15,"mat-date-range-picker",null,11),t.YNc(17,I,2,0,"mat-error",12),t.YNc(18,w,2,0,"mat-error",12),t.qZA()(),t.TgZ(19,"div",13)(20,"dl",14)(21,"div",15)(22,"dt",16),t._uU(23),t.qZA(),t.TgZ(24,"dd",17),t._uU(25,"Total Orders"),t.qZA()(),t.TgZ(26,"div",15)(27,"dt",16),t._uU(28),t.ALo(29,"currency"),t.qZA(),t.TgZ(30,"dd",17),t._uU(31,"Total Customer Delivery Fee"),t.qZA()(),t.TgZ(32,"div",15)(33,"dt",16),t._uU(34),t.ALo(35,"currency"),t.qZA(),t.TgZ(36,"dd",17),t._uU(37,"Total Customer Commissions"),t.qZA()(),t.TgZ(38,"div",15)(39,"dt",16),t._uU(40),t.ALo(41,"currency"),t.qZA(),t.TgZ(42,"dd",17),t._uU(43,"Total Vendor Commissions"),t.qZA()(),t.TgZ(44,"div",15)(45,"dt",16),t._uU(46),t.ALo(47,"currency"),t.qZA(),t.TgZ(48,"dd",17),t._uU(49,"Total Sales"),t.qZA()(),t.TgZ(50,"div",15)(51,"dt",16),t._uU(52),t.ALo(53,"currency"),t.qZA(),t.TgZ(54,"dd",17),t._uU(55,"Total Expenses"),t.qZA()(),t.TgZ(56,"div",15)(57,"dt",16),t._uU(58),t.ALo(59,"currency"),t.qZA(),t.TgZ(60,"dd",17),t._uU(61,"Gross Profits"),t.qZA()(),t.TgZ(62,"div",15)(63,"dt",16),t._uU(64),t.ALo(65,"currency"),t.qZA(),t.TgZ(66,"dd",17),t._uU(67,"Net income"),t.qZA()()()(),t.TgZ(68,"table",18)(69,"thead",19)(70,"tr")(71,"th",20)(72,"div",21),t._uU(73," S/N "),t.qZA()(),t.TgZ(74,"th",20),t._uU(75," Created "),t.qZA(),t.TgZ(76,"th",22),t._uU(77," Name "),t.qZA(),t.TgZ(78,"th",22),t._uU(79," Order Number "),t.qZA(),t.TgZ(80,"th",22),t._uU(81," Service Fee "),t.qZA(),t.TgZ(82,"th",22),t._uU(83," Shipping Fee "),t.qZA(),t.TgZ(84,"th",22),t._uU(85," Vendor Commission "),t.qZA(),t.TgZ(86,"th",22),t._uU(87," Total "),t.qZA()()(),t.TgZ(88,"tbody"),t.YNc(89,N,26,22,"tr",23),t.qZA()()()}if(2&n){const e=r.ngIf,a=t.MAs(16),i=t.oxw();t.xp6(11),t.Q6J("formGroup",i.range)("rangePicker",a),t.xp6(3),t.Q6J("for",a),t.xp6(3),t.Q6J("ngIf",i.range.controls.start.hasError("matStartDateInvalid")),t.xp6(1),t.Q6J("ngIf",i.range.controls.end.hasError("matEndDateInvalid")),t.xp6(5),t.Oqu(e.orders.length),t.xp6(5),t.Oqu(t.xi3(29,14,e.deliveryFee,"\u20a6")),t.xp6(6),t.Oqu(t.xi3(35,17,e.customersServiceFee,"\u20a6")),t.xp6(6),t.Oqu(t.xi3(41,20,e.totalVendorCommissionAmount,"\u20a6")),t.xp6(6),t.Oqu(t.xi3(47,23,e.ordersTotal,"\u20a6")),t.xp6(6),t.Oqu(t.xi3(53,26,e.fundRequestsTotal,"\u20a6")),t.xp6(6),t.Oqu(t.xi3(59,29,e.totalProfits,"\u20a6")),t.xp6(6),t.Oqu(t.xi3(65,32,e.totalProfits-e.fundRequestsTotal,"\u20a6")),t.xp6(25),t.Q6J("ngForOf",e.orders)}}const Z=u().startOf("month").toDate(),x=u().endOf("month").toDate(),D=o(8777);g.vfs=C.I.vfs;const b=[{path:"",component:A,children:[{path:"list",component:(()=>{class n{constructor(e,a,i,Q){this.route=e,this.financesService=a,this._matDialog=i,this.router=Q,this.range=new s.cw({start:new s.NI(Z),end:new s.NI(x)}),this.isLoading=!1}ngAfterViewInit(){}ngOnInit(){this.getFinances()}openModal(e){this.router.navigate(["dashboard","reports","payouts",e,"details"])}getFinances(){this.finances$=this.range.valueChanges.pipe((0,T.b)(()=>this.isLoading=!0),(0,F.x)(),(0,y.O)({start:Z,end:x}),(0,U.w)(e=>this.financesService.getFinances(e)))}exportPDF(){var a=D(this.pdfTable.nativeElement.innerHTML);g.createPdf({content:a}).download()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.gz),t.Y36(f),t.Y36(O.uw),t.Y36(l.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-finance-list"]],viewQuery:function(e,a){if(1&e&&t.Gf(M,5),2&e){let i;t.iGM(i=t.CRH())&&(a.pdfTable=i.first)}},decls:2,vars:3,consts:[["class","relative overflow-x-auto shadow-md sm:rounded-lg","id","pdfTable",4,"ngIf"],["id","pdfTable",1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],["pdfTable",""],["fxLayout","row","fxLayoutAlign","space-between start","fxLayout.lt-md","column","fxLayoutAlign.lt-md","start stretch",1,"p-3","bg-white"],["ngClass.lt-md","mb-5 w-full"],["mat-raised-button","",3,"click"],["appearance","fill"],[3,"formGroup","rangePicker"],["matStartDate","","formControlName","start","placeholder","Start date"],["matEndDate","","formControlName","end","placeholder","End date"],["matSuffix","",3,"for"],["picker",""],[4,"ngIf"],["id","stats",1,"p-4","bg-white","rounded-lg","md:p-8"],[1,"grid","max-w-screen-xl","grid-cols-1","gap-8","p-4","mx-auto","text-gray-900","sm:grid-cols-1","xl:grid-cols-3","sm:p-8"],[1,"flex","flex-col","items-center","justify-center"],[1,"mb-2","text-3xl","font-extrabold"],[1,"text-gray-500"],[1,"w-full","text-sm","text-left"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50"],["scope","col",1,"p-4"],[1,"flex","items-center"],["scope","col",1,"px-6","py-3"],["class","bg-white border-b ",4,"ngFor","ngForOf"],[1,"bg-white","border-b"],[1,"w-4","p-4"],[1,"px-6","py-4"],["scope","row",1,"flex","items-center","px-6","py-4","font-medium","text-gray-900","whitespace-nowrap"],[1,"pl-3"],[1,"text-base","font-semibold"],[1,"font-normal","text-gray-500"]],template:function(e,a){1&e&&(t.YNc(0,Y,90,35,"div",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,a.finances$))},dependencies:[c.sg,c.O5,q.lW,m.KE,m.hX,m.TO,m.R9,d.nW,d.wx,d.zY,d.By,d._g,h.xw,h.Wh,S.oO,s.Fj,s.JJ,s.JL,s.sg,s.u,c.Ov,c.H9,c.uU]}),n})()}]}];let E=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.Bz.forChild(b),l.Bz]}),n})();var j=o(1447),J=o(6005),P=o(6208);let R=(()=>{class n{constructor(e){this.financesService=e}resolve(){const e=u().startOf("month").toDate(),a=u().endOf("month").toDate();return this.financesService.getFinances({start:e,end:a})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(f))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),G=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[f,R],imports:[c.ez,E,J.q,j.o9,s.UX,s.u5,P.m,d.FA]}),n})()}}]);