"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[598],{9129:(F,L,r)=>{r.d(L,{R:()=>H});var t=r(8746),A=r(520),E=r(7579),v=r(2349),e=r(5e3),f=r(9808),y=r(6696),S=r(2340);let x=(()=>{class a{constructor(n){this.http=n,this.endpoint=S.N.hostServer}getMedias(){return this.http.get(`${this.endpoint}/media`)}getMedia(n){return this.http.get(`${this.endpoint}/media/${n}`)}updateMedia(n,o){return this.http.put(`${this.endpoint}/media/${n}`,o)}saveMedia(n){return this.http.post(`${this.endpoint}/media`,n)}deleteMedia(n){return this.http.delete(`${this.endpoint}/media/${n}`)}uploadCsv(n){return this.http.post(`${this.endpoint}/medias/upload/csv`,n,{reportProgress:!0,observe:"events"})}}return a.\u0275fac=function(n){return new(n||a)(e.LFG(A.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var w=r(7423),N=r(5245),M=r(3251),U=r(5899),g=r(7093);function I(a,l){1&a&&e._UZ(0,"div",6)}function D(a,l){if(1&a){const n=e.EpF();e.TgZ(0,"div",2),e.NdJ("click",function(){e.CHM(n);const c=e.oxw();return e.KtG(c.select(c.media))}),e.TgZ(1,"button",3),e.NdJ("click",function(){e.CHM(n);const c=e.oxw();return e.KtG(c.delete())}),e.TgZ(2,"mat-icon",4),e._uU(3,"delete"),e.qZA()(),e.YNc(4,I,1,0,"div",5),e.qZA()}if(2&a){const n=e.oxw();e.Udp("background-image","url("+n.media.url+")"),e.xp6(4),e.Q6J("ngIf",n.media.isSelected)}}function d(a,l){1&a&&e._UZ(0,"div",6)}function _(a,l){if(1&a){const n=e.EpF();e.TgZ(0,"div",7),e.NdJ("click",function(){e.CHM(n);const c=e.oxw();return e.KtG(c.select(c.media))}),e.TgZ(1,"p",8)(2,"mat-icon",9),e._uU(3,"description"),e.qZA()(),e.TgZ(4,"span",10),e._uU(5),e.qZA(),e.TgZ(6,"span",11),e._uU(7),e.qZA(),e.TgZ(8,"button",3),e.NdJ("click",function(){e.CHM(n);const c=e.oxw();return e.KtG(c.delete())}),e.TgZ(9,"mat-icon",4),e._uU(10,"delete"),e.qZA()(),e.YNc(11,d,1,0,"div",5),e.qZA()}if(2&a){const n=e.oxw();e.xp6(5),e.Oqu(n.media.fileName),e.xp6(2),e.Oqu(n.media.format),e.xp6(4),e.Q6J("ngIf",n.media.isSelected)}}const i=function(){return["jpg","png","jpeg"]},m=function(){return["pdf","xls"]};let s=(()=>{class a{constructor(){this.deleteMedia=new e.vpe,this.selectedMedia=new e.vpe}delete(){this.deleteMedia.emit()}select(n){this.selectedMedia.emit(n)}}return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-file-media-card"]],inputs:{media:"media"},outputs:{deleteMedia:"deleteMedia",selectedMedia:"selectedMedia"},decls:2,vars:4,consts:[["class","mat-elevation-z8 relative rounded-lg bg-center bg-no-repeat bg-cover h-52 m-5","fxLayout","column","fxLayoutAlign","center center",3,"background-image","click",4,"ngIf"],["class","mat-elevation-z8 relative rounded-lg h-52 bg-gray-200 m-5","fxLayout","column","fxLayoutAlign","center center",3,"click",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"mat-elevation-z8","relative","rounded-lg","bg-center","bg-no-repeat","bg-cover","h-52","m-5",3,"click"],["mat-icon-button","","color","warn",3,"click"],[1,"mat-18"],["class","p-3 bg-blue-500 rounded-full absolute right-2 bottom-2",4,"ngIf"],[1,"p-3","bg-blue-500","rounded-full","absolute","right-2","bottom-2"],["fxLayout","column","fxLayoutAlign","center center",1,"mat-elevation-z8","relative","rounded-lg","h-52","bg-gray-200","m-5",3,"click"],[1,"text-5xl"],[1,"mat-18","material-icons-outlined"],[1,"text-center"],[1,"text-center","uppercase","my-5"]],template:function(n,o){1&n&&(e.YNc(0,D,5,3,"div",0),e.YNc(1,_,12,3,"div",1)),2&n&&(e.Q6J("ngIf",e.DdM(2,i).includes(o.media.format)),e.xp6(1),e.Q6J("ngIf",e.DdM(3,m).includes(o.media.format)))},dependencies:[f.O5,w.lW,N.Hw]}),a})();function h(a,l){if(1&a){const n=e.EpF();e.TgZ(0,"app-file-media-card",3),e.NdJ("selectedMedia",function(c){e.CHM(n);const u=e.oxw().ngIf,p=e.oxw();return e.KtG(p.selectedMedia(c,u))})("deleteMedia",function(){const u=e.CHM(n).$implicit,p=e.oxw(2);return e.KtG(p.delete(u._id))}),e.qZA()}2&a&&e.Q6J("media",l.$implicit)}function C(a,l){if(1&a&&(e.TgZ(0,"div")(1,"div",1),e.YNc(2,h,1,1,"app-file-media-card",2),e.qZA()()),2&a){const n=l.ngIf;e.xp6(2),e.Q6J("ngForOf",n)}}let b=(()=>{class a{constructor(n){this.mediaService=n,this.browseMediaEvent=new e.vpe,this.chosenMediaEvent=new e.vpe}ngOnInit(){this.events.subscribe(()=>{this.loadMedias()}),this.loadMedias()}loadMedias(){this.media$=this.mediaService.getMedias()}delete(n){this.mediaService.deleteMedia(n).subscribe(()=>{this.loadMedias()})}openMedia(){this.browseMediaEvent.emit()}selectedMedia(n,o){o.forEach(c=>{c.isSelected=!1}),n.isSelected=!0,this.chosenMediaEvent.emit(n)}}return a.\u0275fac=function(n){return new(n||a)(e.Y36(x))},a.\u0275cmp=e.Xpm({type:a,selectors:[["portal-lists-all-media"]],inputs:{events:"events"},outputs:{browseMediaEvent:"browseMediaEvent",chosenMediaEvent:"chosenMediaEvent"},decls:2,vars:3,consts:[[4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","start start","fxLayoutGap","10px",1,"w-full","p-5"],["fxFlex","300px",3,"media","selectedMedia","deleteMedia",4,"ngFor","ngForOf"],["fxFlex","300px",3,"media","selectedMedia","deleteMedia"]],template:function(n,o){1&n&&(e.YNc(0,C,3,1,"div",0),e.ALo(1,"async")),2&n&&e.Q6J("ngIf",e.lcZ(1,1,o.media$))},dependencies:[f.sg,f.O5,g.xw,g.SQ,g.Wh,g.yH,s,f.Ov]}),a})();function T(a,l){1&a&&e._UZ(0,"mat-progress-bar",15)}function Z(a,l){if(1&a){const n=e.EpF();e.TgZ(0,"portal-lists-all-media",16),e.NdJ("chosenMediaEvent",function(c){e.CHM(n);const u=e.oxw();return e.KtG(u.selectedMedia(c))})("browseMediaEvent",function(){e.CHM(n),e.oxw();const c=e.MAs(2);return e.KtG(c.click())}),e.qZA()}if(2&a){const n=e.oxw();e.Q6J("events",n.eventsSubject.asObservable())}}function J(a,l){}function k(a,l){}function Y(a,l){}function q(a,l){}function O(a,l){if(1&a){const n=e.EpF();e.TgZ(0,"mat-dialog-actions",17)(1,"button",18),e._uU(2,"CANCEL"),e.qZA(),e.TgZ(3,"button",19),e.NdJ("click",function(){e.CHM(n);const c=e.oxw();return e.KtG(c.selectMedia())}),e._uU(4,"SELECT"),e.qZA()()}}let H=(()=>{class a{constructor(n,o,c,u,p,P){this.location=n,this.route=o,this.router=c,this.mediaService=u,this.dialogRef=p,this.data=P,this.selectedTab=0,this.eventsSubject=new E.x}ngOnInit(){this.route.queryParams.subscribe(n=>{this.selectedTab=n.tab||0})}tabChanged(n){const o=Object.assign({},this.route.snapshot.queryParams);o.tab=n.index,this.router.navigate(["."],{queryParams:o,relativeTo:this.route})}back(){this.location.back()}emitEventToChild(){this.eventsSubject.next()}onFileLogoSelected(n){this.uploadProgress=0;const o=n.target.files[0];if(o){this.fileName=o.name;const c=new FormData;c.append("file",o);const u=this.mediaService.saveMedia(c).pipe((0,t.x)(()=>this.reset()));this.uploadSub=u.subscribe(p=>{p.type==A.dt.UploadProgress?this.uploadProgress=Math.round(p.loaded/p.total*100):p.hasOwnProperty("body")})}}selectedMedia(n){this.selectedMediaData=n}selectMedia(){this.dialogRef.close(this.selectedMediaData)}reset(){this.emitEventToChild(),this.uploadProgress=null,this.uploadSub=null}}return a.\u0275fac=function(n){return new(n||a)(e.Y36(f.Ye),e.Y36(y.gz),e.Y36(y.F0),e.Y36(x),e.Y36(v.so,8),e.Y36(v.WI,8))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-media"]],decls:26,vars:3,consts:[["type","file",1,"file-input",3,"change"],["logoUpload",""],["fxLayout","row","fxLayoutAlign","space-between center",1,"card","bg-white","mat-elevation-z2","px-2","py-2"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"text-lg","font-thin"],[1,"material-icons-outlined"],["mat-raised-button","","color","primary","type","submit",1,"material-icons-outlined",3,"click"],["mode","indeterminate",4,"ngIf"],[3,"selectedIndex","selectedTabChange"],["label","ALL"],["matTabContent",""],["label","IMAGES"],["label","DOCUMENTS"],["label","VIDEOS"],["label","AUDIO"],["align","start",4,"ngIf"],["mode","indeterminate"],[3,"events","chosenMediaEvent","browseMediaEvent"],["align","start"],["mat-button","","matDialogClose",""],["mat-raised-button","","color","primary",3,"click"]],template:function(n,o){if(1&n){const c=e.EpF();e.TgZ(0,"mat-dialog-content")(1,"input",0,1),e.NdJ("change",function(p){return o.onFileLogoSelected(p)}),e.qZA(),e.TgZ(3,"div",2)(4,"span",3)(5,"mat-icon",4),e._uU(6,"perm_media"),e.qZA(),e.TgZ(7,"span"),e._uU(8," Media"),e.qZA()(),e.TgZ(9,"button",5),e.NdJ("click",function(){e.CHM(c);const p=e.MAs(2);return e.KtG(p.click())}),e.TgZ(10,"mat-icon"),e._uU(11,"add_photo_alternate"),e.qZA(),e._uU(12," Add Media "),e.qZA()(),e.YNc(13,T,1,0,"mat-progress-bar",6),e.TgZ(14,"mat-tab-group",7),e.NdJ("selectedTabChange",function(p){return o.tabChanged(p)}),e.TgZ(15,"mat-tab",8),e.YNc(16,Z,1,1,"ng-template",9),e.qZA(),e.TgZ(17,"mat-tab",10),e.YNc(18,J,0,0,"ng-template",9),e.qZA(),e.TgZ(19,"mat-tab",11),e.YNc(20,k,0,0,"ng-template",9),e.qZA(),e.TgZ(21,"mat-tab",12),e.YNc(22,Y,0,0,"ng-template",9),e.qZA(),e.TgZ(23,"mat-tab",13),e.YNc(24,q,0,0,"ng-template",9),e.qZA()()(),e.YNc(25,O,5,0,"mat-dialog-actions",14)}2&n&&(e.xp6(13),e.Q6J("ngIf",o.uploadProgress),e.xp6(1),e.Q6J("selectedIndex",o.selectedTab),e.xp6(11),e.Q6J("ngIf",o.dialogRef))},dependencies:[f.O5,w.lW,N.Hw,M.SP,M.uX,M.Vc,U.pW,v.ZT,v.xY,v.H8,g.xw,g.SQ,g.Wh,b],styles:[".file-input[_ngcontent-%COMP%]{display:none}"]}),a})()},9866:(F,L,r)=>{r.d(L,{t:()=>D});var t=r(5e3),A=r(9808),E=r(7423),v=r(5245);function e(d,_){if(1&d){const i=t.EpF();t.TgZ(0,"div",4),t.NdJ("click",function(){t.CHM(i);const s=t.oxw(2);return t.KtG(s.select())}),t.TgZ(1,"span")(2,"mat-icon",5),t._uU(3,"add_photo_alternate"),t.qZA()(),t.TgZ(4,"span",6),t._uU(5),t.qZA()()}if(2&d){const i=t.oxw(2);t.xp6(5),t.hij("Add ",i.valueName,"")}}function f(d,_){if(1&d){const i=t.EpF();t.TgZ(0,"div",7)(1,"a",8),t.NdJ("click",function(){t.CHM(i);const s=t.oxw(2);return t.KtG(s.remove())}),t.TgZ(2,"mat-icon",5),t._uU(3,"delete"),t.qZA()()()}if(2&d){const i=t.oxw(2);t.Udp("background-image","url("+i.mediaData.url+")")}}function y(d,_){if(1&d){const i=t.EpF();t.TgZ(0,"div",9)(1,"p",10)(2,"mat-icon",11),t._uU(3,"description"),t.qZA()(),t.TgZ(4,"span",6),t._uU(5),t.qZA(),t.TgZ(6,"span",12),t._uU(7),t.qZA(),t.TgZ(8,"a",8),t.NdJ("click",function(){t.CHM(i);const s=t.oxw(2);return t.KtG(s.remove())}),t.TgZ(9,"mat-icon",5),t._uU(10,"delete"),t.qZA()()()}if(2&d){const i=t.oxw(2);t.xp6(5),t.Oqu(i.mediaData.fileName),t.xp6(2),t.Oqu(i.mediaData.format)}}const S=function(){return["jpg","png","jpeg"]},x=function(){return["pdf","xls"]};function w(d,_){if(1&d&&(t.TgZ(0,"div"),t.YNc(1,e,6,1,"div",1),t.YNc(2,f,4,2,"div",2),t.YNc(3,y,11,2,"div",3),t.qZA()),2&d){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",!i.mediaData),t.xp6(1),t.Q6J("ngIf",i.mediaData&&t.DdM(3,S).includes(i.mediaData.format)),t.xp6(1),t.Q6J("ngIf",i.mediaData&&t.DdM(4,x).includes(i.mediaData.format))}}function N(d,_){if(1&d){const i=t.EpF();t.TgZ(0,"div",4),t.NdJ("click",function(){t.CHM(i);const s=t.oxw(2);return t.KtG(s.select())}),t.TgZ(1,"span")(2,"mat-icon",5),t._uU(3,"add_photo_alternate"),t.qZA()(),t.TgZ(4,"span",6),t._uU(5),t.qZA()()}if(2&d){const i=t.oxw(2);t.xp6(5),t.hij("Add ",i.valueName,"")}}function M(d,_){if(1&d){const i=t.EpF();t.TgZ(0,"div",7)(1,"a",8),t.NdJ("click",function(){t.CHM(i);const s=t.oxw(2);return t.KtG(s.remove())}),t.TgZ(2,"mat-icon",5),t._uU(3,"delete"),t.qZA()()()}if(2&d){const i=t.oxw(2);t.Udp("background-image","url("+i.mediaData+")")}}function U(d,_){if(1&d){const i=t.EpF();t.TgZ(0,"div",14)(1,"p",10)(2,"mat-icon",11),t._uU(3,"description"),t.qZA()(),t.TgZ(4,"span",12),t._uU(5),t.qZA(),t.TgZ(6,"a",8),t.NdJ("click",function(){t.CHM(i);const s=t.oxw(2);return t.KtG(s.remove())}),t.TgZ(7,"mat-icon",5),t._uU(8,"delete"),t.qZA()()()}if(2&d){const i=t.oxw(2);t.xp6(5),t.Oqu(i.getUrlExtension(i.mediaData))}}const g=function(){return["jpg","png","jpeg","svg"]};function I(d,_){if(1&d&&(t.TgZ(0,"div"),t.YNc(1,N,6,1,"div",1),t.YNc(2,M,4,2,"div",2),t.YNc(3,U,9,1,"div",13),t.qZA()),2&d){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",!i.mediaData),t.xp6(1),t.Q6J("ngIf",i.mediaData&&t.DdM(3,g).includes(i.getUrlExtension(i.mediaData))),t.xp6(1),t.Q6J("ngIf",i.mediaData&&t.DdM(4,x).includes(i.getUrlExtension(i.mediaData)))}}let D=(()=>{class d{constructor(){this.valueName="no value name",this.removeValue=new t.vpe,this.openMediaBrowser=new t.vpe}remove(){this.removeValue.emit(this.valueName.toLowerCase())}select(){this.openMediaBrowser.emit(this.valueName.toLowerCase())}getUrlExtension(i){var m,s,h,C,b,T,Z;return"string"==typeof i?null===(h=null===(s=null===(m=null==i?void 0:i.split(/[#?]/)[0])||void 0===m?void 0:m.split("."))||void 0===s?void 0:s.pop())||void 0===h?void 0:h.trim():(this.isNew=!0,null===(Z=null===(T=null===(b=null===(C=i.url)||void 0===C?void 0:C.split(/[#?]/)[0])||void 0===b?void 0:b.split("."))||void 0===T?void 0:T.pop())||void 0===Z?void 0:Z.trim())}}return d.\u0275fac=function(i){return new(i||d)},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-select-media"]],inputs:{mediaData:"mediaData",valueName:"valueName",isNew:"isNew"},outputs:{removeValue:"removeValue",openMediaBrowser:"openMediaBrowser"},decls:2,vars:2,consts:[[4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","w-200 h-300 p-5 border-2 cursor-pointer border-gray-300 rounded-lg",3,"click",4,"ngIf"],["class","w-56 h-56 p-5 border-2 cursor-pointer bg-no-repeat bg-contain border-gray-300 rounded-lg","fxLayout","column","fxLayoutAlign","center center",3,"background-image",4,"ngIf"],["class","w-200 h-300 p-5 border-2 cursor-pointer border-gray-300 rounded-lg","fxLayout","column","fxLayoutAlign","center center",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"w-200","h-300","p-5","border-2","cursor-pointer","border-gray-300","rounded-lg",3,"click"],[1,"mat-18"],[1,"text-center"],["fxLayout","column","fxLayoutAlign","center center",1,"w-56","h-56","p-5","border-2","cursor-pointer","bg-no-repeat","bg-contain","border-gray-300","rounded-lg"],["mat-icon-button","","color","warn",3,"click"],["fxLayout","column","fxLayoutAlign","center center",1,"w-200","h-300","p-5","border-2","cursor-pointer","border-gray-300","rounded-lg"],[1,"text-5xl"],[1,"mat-18","material-icons-outlined"],[1,"text-center","uppercase","my-5"],["class","w-200 h-300 min-w-min p-5 border-2 cursor-pointer border-gray-300 rounded-lg","fxLayout","column","fxLayoutAlign","center center","style","width: 250px;",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"w-200","h-300","min-w-min","p-5","border-2","cursor-pointer","border-gray-300","rounded-lg",2,"width","250px"]],template:function(i,m){1&i&&(t.YNc(0,w,4,5,"div",0),t.YNc(1,I,4,5,"div",0)),2&i&&(t.Q6J("ngIf",m.isNew),t.xp6(1),t.Q6J("ngIf",!m.isNew))},dependencies:[A.O5,E.zs,v.Hw]}),d})()}}]);