"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[9443],{5904:(A,C,i)=>{i.d(C,{Y:()=>L});var e=i(4020),m=i(177),g=i(9213),E=i(6924),p=i(2920);const I=()=>["jpg","png","jpeg"],s=()=>["pdf","xls"];function h(n,u){1&n&&e.nrm(0,"div",6)}function O(n,u){if(1&n){const a=e.RV6();e.j41(0,"div",2),e.bIt("click",function(){e.eBV(a);const o=e.XpG();return e.Njj(o.select(o.media))}),e.j41(1,"button",3),e.bIt("click",function(){e.eBV(a);const o=e.XpG();return e.Njj(o.delete())}),e.j41(2,"mat-icon",4),e.EFF(3,"delete"),e.k0s()(),e.DNE(4,h,1,0,"div",5),e.k0s()}if(2&n){const a=e.XpG();e.xc7("background-image","url("+a.media.url+")"),e.R7$(4),e.Y8G("ngIf",a.media.isSelected)}}function T(n,u){1&n&&e.nrm(0,"div",6)}function P(n,u){if(1&n){const a=e.RV6();e.j41(0,"div",7),e.bIt("click",function(){e.eBV(a);const o=e.XpG();return e.Njj(o.select(o.media))}),e.j41(1,"p",8)(2,"mat-icon",9),e.EFF(3,"description"),e.k0s()(),e.j41(4,"span",10),e.EFF(5),e.k0s(),e.j41(6,"span",11),e.EFF(7),e.k0s(),e.j41(8,"button",3),e.bIt("click",function(){e.eBV(a);const o=e.XpG();return e.Njj(o.delete())}),e.j41(9,"mat-icon",4),e.EFF(10,"delete"),e.k0s()(),e.DNE(11,T,1,0,"div",5),e.k0s()}if(2&n){const a=e.XpG();e.R7$(5),e.JRh(a.media.fileName),e.R7$(2),e.JRh(a.media.format),e.R7$(4),e.Y8G("ngIf",a.media.isSelected)}}let j=(()=>{class n{constructor(){this.deleteMedia=new e.bkB,this.selectedMedia=new e.bkB}delete(){this.deleteMedia.emit()}select(a){this.selectedMedia.emit(a)}static{this.\u0275fac=function(l){return new(l||n)}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-file-media-card"]],inputs:{media:"media"},outputs:{deleteMedia:"deleteMedia",selectedMedia:"selectedMedia"},decls:2,vars:4,consts:[["class","mat-elevation-z8 relative rounded-lg bg-center bg-no-repeat bg-cover h-52 m-5","fxLayout","column","fxLayoutAlign","center center",3,"background-image","click",4,"ngIf"],["class","mat-elevation-z8 relative rounded-lg h-52 bg-gray-200 m-5","fxLayout","column","fxLayoutAlign","center center",3,"click",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"mat-elevation-z8","relative","rounded-lg","bg-center","bg-no-repeat","bg-cover","h-52","m-5",3,"click"],["mat-icon-button","","color","warn",3,"click"],[1,"mat-18"],["class","p-3 bg-blue-500 rounded-full absolute right-2 bottom-2",4,"ngIf"],[1,"p-3","bg-blue-500","rounded-full","absolute","right-2","bottom-2"],["fxLayout","column","fxLayoutAlign","center center",1,"mat-elevation-z8","relative","rounded-lg","h-52","bg-gray-200","m-5",3,"click"],[1,"text-5xl"],[1,"mat-18","material-icons-outlined"],[1,"text-center"],[1,"text-center","uppercase","my-5"]],template:function(l,o){1&l&&e.DNE(0,O,5,3,"div",0)(1,P,12,3,"div",1),2&l&&(e.Y8G("ngIf",e.lJ4(2,I).includes(o.media.format)),e.R7$(),e.Y8G("ngIf",e.lJ4(3,s).includes(o.media.format)))},dependencies:[m.MD,m.bT,g.m_,g.An,E.YF,p.DJ,p.sA],encapsulation:2})}}return n})();var t=i(6158);function F(n,u){if(1&n){const a=e.RV6();e.j41(0,"app-file-media-card",3),e.bIt("selectedMedia",function(o){e.eBV(a);const D=e.XpG().ngIf,y=e.XpG();return e.Njj(y.selectedMedia(o,D))})("deleteMedia",function(){const o=e.eBV(a).$implicit,D=e.XpG(2);return e.Njj(D.delete(o._id))}),e.k0s()}2&n&&e.Y8G("media",u.$implicit)}function x(n,u){if(1&n&&(e.j41(0,"div")(1,"div",1),e.DNE(2,F,1,1,"app-file-media-card",2),e.k0s()()),2&n){const a=u.ngIf;e.R7$(2),e.Y8G("ngForOf",a)}}let L=(()=>{class n{constructor(a){this.mediaService=a,this.browseMediaEvent=new e.bkB,this.chosenMediaEvent=new e.bkB}ngOnInit(){this.events.subscribe(()=>{this.loadMedias()}),this.loadMedias()}loadMedias(){this.media$=this.mediaService.getMedias()}delete(a){this.mediaService.deleteMedia(a).subscribe(()=>{this.loadMedias()})}openMedia(){this.browseMediaEvent.emit()}selectedMedia(a,l){l.forEach(o=>{o.isSelected=!1}),a.isSelected=!0,this.chosenMediaEvent.emit(a)}static{this.\u0275fac=function(l){return new(l||n)(e.rXU(t.u))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["portal-lists-all-media"]],inputs:{events:"events"},outputs:{browseMediaEvent:"browseMediaEvent",chosenMediaEvent:"chosenMediaEvent"},decls:2,vars:3,consts:[[4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","start start","fxLayoutGap","10px",1,"w-full","p-5"],["fxFlex","300px",3,"media","selectedMedia","deleteMedia",4,"ngFor","ngForOf"],["fxFlex","300px",3,"selectedMedia","deleteMedia","media"]],template:function(l,o){1&l&&(e.DNE(0,x,3,1,"div",0),e.nI1(1,"async")),2&l&&e.Y8G("ngIf",e.bMT(1,1,o.media$))},dependencies:[m.MD,m.Sq,m.bT,m.Jj,j,E.YF,p.DJ,p.BO,p.sA,p.UI],encapsulation:2})}}return n})()},6158:(A,C,i)=>{i.d(C,{u:()=>E});var e=i(5312),m=i(4020),g=i(1626);let E=(()=>{class p{constructor(s){this.http=s,this.endpoint=e.c.hostServer}getMedias(){return this.http.get(`${this.endpoint}/media`)}getMedia(s){return this.http.get(`${this.endpoint}/media/${s}`)}updateMedia(s,h){return this.http.put(`${this.endpoint}/media/${s}`,h)}saveMedia(s){return this.http.post(`${this.endpoint}/media`,s)}deleteMedia(s){return this.http.delete(`${this.endpoint}/media/${s}`)}uploadCsv(s){return this.http.post(`${this.endpoint}/medias/upload/csv`,s,{reportProgress:!0,observe:"events"})}static{this.\u0275fac=function(h){return new(h||p)(m.KVO(g.Qq))}}static{this.\u0275prov=m.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}}return p})()},9443:(A,C,i)=>{i.d(C,{w:()=>y});var e=i(177),m=i(6850),g=i(8498),E=i(980),p=i(1626),I=i(1413),s=i(5351),h=i(7575),O=i(5904),T=i(9213),P=i(6924),j=i(8834),t=i(4020),F=i(6158),x=i(2920);function L(_,b){1&_&&t.nrm(0,"mat-progress-bar",15)}function n(_,b){if(1&_){const d=t.RV6();t.j41(0,"portal-lists-all-media",16),t.bIt("chosenMediaEvent",function(c){t.eBV(d);const f=t.XpG();return t.Njj(f.selectedMedia(c))})("browseMediaEvent",function(){t.eBV(d),t.XpG();const c=t.sdS(2);return t.Njj(c.click())}),t.k0s()}if(2&_){const d=t.XpG();t.Y8G("events",d.eventsSubject.asObservable())}}function u(_,b){}function a(_,b){}function l(_,b){}function o(_,b){}function D(_,b){if(1&_){const d=t.RV6();t.j41(0,"mat-dialog-actions",17)(1,"button",18),t.EFF(2,"CANCEL"),t.k0s(),t.j41(3,"button",19),t.bIt("click",function(){t.eBV(d);const c=t.XpG();return t.Njj(c.selectMedia())}),t.EFF(4,"SELECT"),t.k0s()()}}let y=(()=>{class _{constructor(d,r,c,f,M,v){this.location=d,this.route=r,this.router=c,this.mediaService=f,this.dialogRef=M,this.data=v,this.selectedTab=0,this.eventsSubject=new I.B}ngOnInit(){this.route.queryParams.subscribe(d=>{this.selectedTab=d.tab||0})}tabChanged(d){const r=Object.assign({},this.route.snapshot.queryParams);r.tab=d.index,this.router.navigate(["."],{queryParams:r,relativeTo:this.route})}back(){this.location.back()}emitEventToChild(){this.eventsSubject.next()}onFileLogoSelected(d){this.uploadProgress=0;const r=d.target.files[0];if(r){this.fileName=r.name;const c=new FormData;c.append("file",r);const f=this.mediaService.saveMedia(c).pipe((0,E.j)(()=>this.reset()));this.uploadSub=f.subscribe(M=>{M.type==p.hv.UploadProgress?this.uploadProgress=Math.round(M.loaded/M.total*100):M.hasOwnProperty("body")})}}selectedMedia(d){this.selectedMediaData=d}selectMedia(){this.dialogRef.close(this.selectedMediaData)}reset(){this.emitEventToChild(),this.uploadProgress=null,this.uploadSub=null}static{this.\u0275fac=function(r){return new(r||_)(t.rXU(e.aZ),t.rXU(g.nX),t.rXU(g.Ix),t.rXU(F.u),t.rXU(s.CP,8),t.rXU(s.Vh,8))}}static{this.\u0275cmp=t.VBU({type:_,selectors:[["app-media"]],decls:26,vars:3,consts:[["logoUpload",""],["type","file",1,"file-input",3,"change"],["fxLayout","row","fxLayoutAlign","space-between center",1,"card","bg-white","mat-elevation-z2","px-2","py-2"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"text-lg","font-thin"],[1,"material-icons-outlined"],["mat-raised-button","","color","primary","type","submit",1,"material-icons-outlined",3,"click"],["mode","indeterminate",4,"ngIf"],[3,"selectedTabChange","selectedIndex"],["label","ALL"],["matTabContent",""],["label","IMAGES"],["label","DOCUMENTS"],["label","VIDEOS"],["label","AUDIO"],["align","start",4,"ngIf"],["mode","indeterminate"],[3,"chosenMediaEvent","browseMediaEvent","events"],["align","start"],["mat-button","","matDialogClose",""],["mat-raised-button","","color","primary",3,"click"]],template:function(r,c){if(1&r){const f=t.RV6();t.j41(0,"mat-dialog-content")(1,"input",1,0),t.bIt("change",function(v){return t.eBV(f),t.Njj(c.onFileLogoSelected(v))}),t.k0s(),t.j41(3,"div",2)(4,"span",3)(5,"mat-icon",4),t.EFF(6,"perm_media"),t.k0s(),t.j41(7,"span"),t.EFF(8," Media"),t.k0s()(),t.j41(9,"button",5),t.bIt("click",function(){t.eBV(f);const v=t.sdS(2);return t.Njj(v.click())}),t.j41(10,"mat-icon"),t.EFF(11,"add_photo_alternate"),t.k0s(),t.EFF(12," Add Media "),t.k0s()(),t.DNE(13,L,1,0,"mat-progress-bar",6),t.j41(14,"mat-tab-group",7),t.bIt("selectedTabChange",function(v){return t.eBV(f),t.Njj(c.tabChanged(v))}),t.j41(15,"mat-tab",8),t.DNE(16,n,1,1,"ng-template",9),t.k0s(),t.j41(17,"mat-tab",10),t.DNE(18,u,0,0,"ng-template",9),t.k0s(),t.j41(19,"mat-tab",11),t.DNE(20,a,0,0,"ng-template",9),t.k0s(),t.j41(21,"mat-tab",12),t.DNE(22,l,0,0,"ng-template",9),t.k0s(),t.j41(23,"mat-tab",13),t.DNE(24,o,0,0,"ng-template",9),t.k0s()()(),t.DNE(25,D,5,0,"mat-dialog-actions",14)}2&r&&(t.R7$(13),t.Y8G("ngIf",c.uploadProgress),t.R7$(),t.Y8G("selectedIndex",c.selectedTab),t.R7$(11),t.Y8G("ngIf",c.dialogRef))},dependencies:[g.iI,s.hM,s.tx,s.E7,s.Yi,h.PO,h.HM,m.RI,m.$L,m.mq,m.T8,O.Y,T.m_,T.An,P.YF,x.DJ,x.BO,x.sA,e.MD,e.bT,j.Hl,j.$z],styles:[".file-input[_ngcontent-%COMP%]{display:none}"]})}}return _})()}}]);