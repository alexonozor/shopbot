"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[987],{4987:(st,_,a)=>{a.r(_),a.d(_,{MessagesModule:()=>it});var u=a(6814),r=a(1896),t=a(5879);let y=(()=>{class e{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-messages"]],decls:1,vars:0,template:function(o,s){1&o&&t._UZ(0,"router-outlet")},dependencies:[r.lC],encapsulation:2})}return e})();var M=a(8337),x=a(3365),c=a(5313),C=a(6567),v=a(437),m=a(712),A=a(7700),p=a(2296),L=a(617),b=a(5986),d=a(7988),f=a(3814);function S(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"span",25)(1,"button",26),t._uU(2),t.qZA(),t.TgZ(3,"button",27)(4,"mat-icon",24),t._uU(5,"campaign"),t.qZA(),t._uU(6," Message Customers"),t.qZA(),t.TgZ(7,"button",28),t.NdJ("click",function(){t.CHM(n);const s=t.oxw();return t.KtG(s.deleteSelected())}),t.TgZ(8,"mat-icon",24),t._uU(9,"delete"),t.qZA(),t._uU(10," Delete Selected Customers"),t.qZA()()}if(2&e){const n=t.oxw();t.xp6(2),t.hij("",n.selection.selected.length," Selected")}}function D(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"th",29)(1,"mat-checkbox",30),t.NdJ("change",function(s){t.CHM(n);const l=t.oxw();return t.KtG(s?l.toggleAllRows():null)}),t.qZA()()}if(2&e){const n=t.oxw();t.xp6(1),t.Q6J("checked",n.selection.hasValue()&&n.isAllSelected())("indeterminate",n.selection.hasValue()&&!n.isAllSelected())("aria-label",n.checkboxLabel())}}function N(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"td",31)(1,"mat-checkbox",32),t.NdJ("click",function(s){return s.stopPropagation()})("change",function(s){const h=t.CHM(n).$implicit,g=t.oxw();return t.KtG(s?g.selection.toggle(h):null)}),t.qZA()()}if(2&e){const n=i.$implicit,o=t.oxw();t.xp6(1),t.Q6J("checked",o.selection.isSelected(n))("aria-label",o.checkboxLabel(n))}}function U(e,i){1&e&&(t.TgZ(0,"th",29),t._uU(1,"Recipients"),t.qZA())}function w(e,i){if(1&e&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(n.recipients.length)}}function k(e,i){1&e&&(t.TgZ(0,"th",29),t._uU(1,"Phone Number"),t.qZA())}function Y(e,i){if(1&e&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(n.type)}}function R(e,i){1&e&&(t.TgZ(0,"th",29),t._uU(1,"Email"),t.qZA())}function Q(e,i){if(1&e&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(n.email)}}function q(e,i){1&e&&(t.TgZ(0,"th",29),t._uU(1,"Notification Type"),t.qZA())}function B(e,i){if(1&e&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(n.type)}}function J(e,i){1&e&&(t.TgZ(0,"th",29),t._uU(1,"Title"),t.qZA())}function F(e,i){if(1&e&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(n.title)}}function O(e,i){1&e&&(t.TgZ(0,"th",29),t._uU(1,"Body"),t.qZA())}function G(e,i){if(1&e&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(n.body)}}function I(e,i){1&e&&(t.TgZ(0,"th",29),t._uU(1,"Registered at"),t.qZA())}function $(e,i){if(1&e&&(t.TgZ(0,"td",31),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,n.createdAt,"short"))}}function z(e,i){1&e&&(t.TgZ(0,"th",29),t._uU(1,"Actions"),t.qZA())}function H(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"td",31)(1,"button",33)(2,"mat-icon"),t._uU(3,"more_vert"),t.qZA()(),t.TgZ(4,"mat-menu",null,34)(6,"button",35),t.NdJ("click",function(){const s=t.CHM(n),l=s.$implicit,h=s.index,g=t.oxw();return t.KtG(g.deleteNotification(l._id,h))}),t.TgZ(7,"mat-icon",36),t._uU(8,"delete"),t.qZA(),t.TgZ(9,"span"),t._uU(10,"Delete"),t.qZA()()()()}if(2&e){const n=t.MAs(5);t.xp6(1),t.Q6J("matMenuTriggerFor",n)}}function E(e,i){1&e&&t._UZ(0,"tr",37)}function K(e,i){1&e&&t._UZ(0,"tr",38)}const X=function(){return[15,30,60]};let j=(()=>{class e{constructor(n,o,s){this.route=n,this.notificationService=o,this._matDialog=s,this.displayedColumns=["select","recipients","type","title","body","createdAt","actions"],this.dataSource=new c.by([]),this.selection=new M.Ov(!0,[]),this.deliveries=this.route.snapshot.data.deliveries}ngAfterViewInit(){this.dataSource.paginator=this.paginator}ngOnInit(){this.dataSource=new c.by(this.route.snapshot.data.notifications)}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}deleteSelected(){this.confirmDialogRef=this._matDialog.open(C.X,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete notifications?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete these notifications?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(n=>{n&&this.selection.selected.forEach((o,s)=>{this.dataSource.data.splice(s,1),this.dataSource=new c.by(this.dataSource.data),this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.notificationService.deleteNotification(o._id).subscribe()})})}checkboxLabel(n){return n?`${this.selection.isSelected(n)?"deselect":"select"} row ${n.position+1}`:(this.isAllSelected()?"deselect":"select")+" all"}deleteNotification(n,o){this.confirmDialogRef=this._matDialog.open(C.X,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Customer?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete this customer?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(s=>{s&&(this.dataSource.data.splice(o,1),this.dataSource=new c.by(this.dataSource.data),this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.notificationService.deleteNotification(n).subscribe())})}openMessaging(){this._matDialog.open(v.D,{data:{customers:this.selection.selected,isBulkMsg:!0,allCustomers:!0,deliveries:this.deliveries},width:"500px"})}message(n){}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(r.gz),t.Y36(m.T),t.Y36(A.uw))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-list-messages"]],viewQuery:function(o,s){if(1&o&&t.Gf(x.NW,5),2&o){let l;t.iGM(l=t.CRH())&&(s.paginator=l.first)}},decls:49,vars:6,consts:[["fxLayout","row","fxLayout.lt-md","column","fxLayoutAlign.lt-md","space-around stretch","fxLayoutAlign","space-between start"],["fxLayout","column","fxLayoutAlign","space-between start"],[1,"m-0"],["mat-raised-button","","color","primary",3,"click"],["fxLayout","row","fxLayoutGap","10px","fxLayoutAlign","start center",1,"card","bg-white","w-full","mat-elevation-z2","px-2","py-2"],["class","text-lg font-thin","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",4,"ngIf"],[1,"mat-elevation-z8"],["mat-table","",1,"w-full",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","recipients"],["matColumnDef","phoneNumber"],["matColumnDef","email"],["matColumnDef","type"],["matColumnDef","title"],["matColumnDef","body"],["matColumnDef","createdAt"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["fxLayout","row","fxLayoutAlign","end center",1,"m-5"],["mat-fab","","color","primary",1,"m-10",3,"click"],[1,"mat-18"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"text-lg","font-thin"],["mat-button",""],["mat-stroked-button","","color","primary"],["mat-stroked-button","","color","warn",3,"click"],["mat-header-cell",""],[3,"checked","indeterminate","aria-label","change"],["mat-cell",""],[3,"checked","aria-label","click","change"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],[1,"material-icons-outlined"],["mat-header-row",""],["mat-row",""]],template:function(o,s){1&o&&(t.TgZ(0,"div")(1,"div",0)(2,"div",1)(3,"h1",2),t._uU(4,"Notifications"),t.qZA(),t.TgZ(5,"p"),t._uU(6,"List of push notification sent to users"),t.qZA()(),t.TgZ(7,"button",3),t.NdJ("click",function(){return s.openMessaging()}),t._uU(8,"Send Message"),t.qZA()(),t.TgZ(9,"div",4),t.YNc(10,S,11,1,"span",5),t.qZA(),t.TgZ(11,"div",6)(12,"table",7),t.ynx(13,8),t.YNc(14,D,2,3,"th",9),t.YNc(15,N,2,2,"td",10),t.BQk(),t.ynx(16,11),t.YNc(17,U,2,0,"th",9),t.YNc(18,w,2,1,"td",10),t.BQk(),t.ynx(19,12),t.YNc(20,k,2,0,"th",9),t.YNc(21,Y,2,1,"td",10),t.BQk(),t.ynx(22,13),t.YNc(23,R,2,0,"th",9),t.YNc(24,Q,2,1,"td",10),t.BQk(),t.ynx(25,14),t.YNc(26,q,2,0,"th",9),t.YNc(27,B,2,1,"td",10),t.BQk(),t.ynx(28,15),t.YNc(29,J,2,0,"th",9),t._UZ(30,"th"),t.YNc(31,F,2,1,"td",10),t.BQk(),t.ynx(32,16),t.YNc(33,O,2,0,"th",9),t._UZ(34,"th"),t.YNc(35,G,2,1,"td",10),t.BQk(),t.ynx(36,17),t.YNc(37,I,2,0,"th",9),t.YNc(38,$,3,4,"td",10),t.BQk(),t.ynx(39,18),t.YNc(40,z,2,0,"th",9),t.YNc(41,H,11,1,"td",10),t.BQk(),t.YNc(42,E,1,0,"tr",19),t.YNc(43,K,1,0,"tr",20),t.qZA(),t._UZ(44,"mat-paginator",21),t.qZA(),t.TgZ(45,"div",22)(46,"button",23),t.NdJ("click",function(){return s.openMessaging()}),t.TgZ(47,"mat-icon",24),t._uU(48,"add"),t.qZA()()()()),2&o&&(t.xp6(10),t.Q6J("ngIf",s.selection.selected.length),t.xp6(2),t.Q6J("dataSource",s.dataSource),t.xp6(30),t.Q6J("matHeaderRowDef",s.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",s.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(5,X)))},dependencies:[u.O5,p.lW,p.RK,p.cs,L.Hw,x.NW,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,b.oG,d.VK,d.OP,d.p6,f.xw,f.SQ,f.Wh,u.uU]})}return e})(),Z=(()=>{class e{constructor(n){this.notificationService=n}resolve(){return this.notificationService.getNotifications()}static#t=this.\u0275fac=function(o){return new(o||e)(t.LFG(m.T))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),V=(()=>{class e{constructor(n){this.notificationService=n}resolve(n){const o=n.paramMap.get("id");return this.notificationService.getNotification(o)}static#t=this.\u0275fac=function(o){return new(o||e)(t.LFG(m.T))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var T=a(3212);const W=[{path:"",component:y,children:[{path:"list",component:j,resolve:{notifications:Z,deliveries:T.h}}]}];let P=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[r.Bz.forChild(W),r.Bz]})}return e})();var tt=a(1447),et=a(6223),nt=a(6005),ot=a(2557);let it=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({providers:[m.T,Z,V,T.h],imports:[u.ez,P,nt.q,tt.o9,et.UX,ot.Hi]})}return e})()}}]);