"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[1939],{1939:(Fe,C,l)=>{l.r(C),l.d(C,{OrdersModule:()=>he});var u=l(177),f=l(8498),t=l(3953);let w=(()=>{class o{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-orders"]],decls:1,vars:0,template:function(r,n){1&r&&t.nrm(0,"router-outlet")},dependencies:[f.n3],encapsulation:2})}return o})();var N=l(5024),E=l(6440),d=l(9159),x=l(1269),Y=l(5558),A=l(5473),h=l(342),p=l(5351),V=l(2815),v=l(8834),y=l(6471),k=l(9213),J=l(2765),j=l(9115),g=l(2920);const B=o=>[o],X=o=>["../",o,"details"];function U(o,a){if(1&o){const e=t.RV6();t.j41(0,"span",2)(1,"button",25),t.EFF(2),t.k0s(),t.j41(3,"button",26)(4,"mat-icon",27),t.EFF(5,"campaign"),t.k0s(),t.EFF(6," Message Orders"),t.k0s(),t.j41(7,"button",28),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.deleteSelected())}),t.j41(8,"mat-icon",27),t.EFF(9,"delete"),t.k0s(),t.EFF(10," Delete Selected Orders"),t.k0s()()}if(2&o){const e=t.XpG();t.R7$(2),t.SpI("",e.selection.selected.length," Selected")}}function M(o,a){if(1&o){const e=t.RV6();t.j41(0,"th",29)(1,"mat-checkbox",30),t.bIt("change",function(n){t.eBV(e);const i=t.XpG();return t.Njj(n?i.toggleAllRows():null)}),t.k0s()()}if(2&o){const e=t.XpG();t.R7$(),t.Y8G("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())("aria-label",e.checkboxLabel())}}function P(o,a){if(1&o){const e=t.RV6();t.j41(0,"td",31)(1,"mat-checkbox",32),t.bIt("click",function(n){return t.eBV(e),t.Njj(n.stopPropagation())})("change",function(n){const i=t.eBV(e).$implicit,s=t.XpG();return t.Njj(n?s.selection.toggle(i):null)}),t.k0s()()}if(2&o){const e=a.$implicit,r=t.XpG();t.R7$(),t.Y8G("checked",r.selection.isSelected(e))("aria-label",r.checkboxLabel(e))}}function H(o,a){1&o&&(t.j41(0,"th",29),t.EFF(1,"#"),t.k0s())}function z(o,a){if(1&o&&(t.j41(0,"td",31),t.EFF(1),t.k0s()),2&o){const e=a.index;t.R7$(),t.JRh(e+1)}}function K(o,a){1&o&&(t.j41(0,"th",29),t.EFF(1,"Order Id"),t.k0s())}function Q(o,a){if(1&o&&(t.j41(0,"td",31),t.EFF(1),t.k0s()),2&o){const e=a.$implicit;t.R7$(),t.JRh(e.reference)}}function W(o,a){1&o&&(t.j41(0,"th",29),t.EFF(1,"Vendor Name"),t.k0s())}function Z(o,a){if(1&o&&(t.j41(0,"td",31),t.EFF(1),t.k0s()),2&o){const e=a.$implicit;t.R7$(),t.JRh(null==e||null==e.store?null:e.store.name)}}function q(o,a){1&o&&(t.j41(0,"th",29),t.EFF(1,"Customer Name"),t.k0s())}function tt(o,a){if(1&o&&(t.j41(0,"td",31),t.EFF(1),t.k0s()),2&o){const e=a.$implicit;t.R7$(),t.JRh(e.user?e.user.name:"Customer has been removed")}}function et(o,a){1&o&&(t.j41(0,"th",29),t.EFF(1,"Device"),t.k0s())}function nt(o,a){if(1&o&&(t.j41(0,"td",31),t.EFF(1),t.k0s()),2&o){const e=a.$implicit;t.R7$(),t.JRh(e.user.phoneCredentials[0].deviceType+" "+e.user.phoneCredentials[0].make+" "+e.user.phoneCredentials[0].os)}}function rt(o,a){1&o&&(t.j41(0,"th",29),t.EFF(1,"Date"),t.k0s())}function it(o,a){if(1&o&&(t.j41(0,"td",31),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&o){const e=a.$implicit;t.R7$(),t.JRh(t.i5U(2,1,e.createdAt,"medium"))}}function ot(o,a){1&o&&(t.j41(0,"th",29),t.EFF(1,"Order Status"),t.k0s())}function st(o,a){if(1&o&&(t.j41(0,"mat-chip"),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.status[0].name)}}function at(o,a){if(1&o&&(t.j41(0,"mat-chip"),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.status[0].name)}}function lt(o,a){if(1&o&&(t.j41(0,"mat-chip"),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.status[0].name)}}function dt(o,a){if(1&o&&(t.j41(0,"mat-chip",39),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.status[0].name)}}function ct(o,a){if(1&o&&(t.j41(0,"mat-chip",40),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.status[0].name)}}function mt(o,a){if(1&o&&(t.j41(0,"mat-chip",41),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.status[0].name)}}function ut(o,a){if(1&o&&(t.j41(0,"mat-chip",42),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.status[0].name)}}function ft(o,a){if(1&o&&(t.j41(0,"td",31)(1,"mat-chip-set",33),t.DNE(2,st,2,1,"mat-chip",34)(3,at,2,1,"mat-chip",34)(4,lt,2,1,"mat-chip",34)(5,dt,2,1,"mat-chip",35)(6,ct,2,1,"mat-chip",36)(7,mt,2,1,"mat-chip",37)(8,ut,2,1,"mat-chip",38),t.k0s()()),2&o){const e=a.$implicit;t.R7$(2),t.Y8G("ngIf","Shipped"===e.status[0].name),t.R7$(),t.Y8G("ngIf","Preparing"===e.status[0].name),t.R7$(),t.Y8G("ngIf","Ready for Pickup"===e.status[0].name),t.R7$(),t.Y8G("ngIf","Delivered"===e.status[0].name),t.R7$(),t.Y8G("ngIf","Canceled"===e.status[0].name),t.R7$(),t.Y8G("ngIf","Pending"===e.status[0].name),t.R7$(),t.Y8G("ngIf","Accepted"===e.status[0].name)}}function pt(o,a){1&o&&(t.j41(0,"th",29),t.EFF(1,"Payment Status"),t.k0s())}function ht(o,a){if(1&o&&(t.j41(0,"mat-chip",39),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.paymentStatus)}}function gt(o,a){if(1&o&&(t.j41(0,"mat-chip",44),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.paymentStatus)}}function _t(o,a){if(1&o&&(t.j41(0,"td",31)(1,"mat-chip-set",33),t.DNE(2,ht,2,1,"mat-chip",35)(3,gt,2,1,"mat-chip",43),t.k0s()()),2&o){const e=a.$implicit;t.R7$(2),t.Y8G("ngIf","Paid"===e.paymentStatus),t.R7$(),t.Y8G("ngIf","Unpaid"===e.paymentStatus)}}function Ft(o,a){1&o&&(t.j41(0,"th",29),t.EFF(1,"Settlement"),t.k0s())}function vt(o,a){if(1&o&&(t.j41(0,"td",31),t.EFF(1),t.k0s()),2&o){const e=a.$implicit;t.R7$(),t.SpI(" ",e.settled?"Settled":"Not Settled"," ")}}function bt(o,a){1&o&&(t.j41(0,"th",29),t.EFF(1,"Payment Type"),t.k0s())}function jt(o,a){if(1&o&&(t.j41(0,"td",31),t.EFF(1),t.k0s()),2&o){const e=a.$implicit;t.R7$(),t.JRh(e.payment)}}function Rt(o,a){1&o&&(t.j41(0,"th",29),t.EFF(1,"Amount"),t.k0s())}function Ct(o,a){if(1&o&&(t.j41(0,"td",31),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&o){const e=a.$implicit;t.R7$(),t.JRh(t.i5U(2,1,e.total,null==e||null==e.store?null:e.store.currency))}}function Et(o,a){1&o&&(t.j41(0,"th",29),t.EFF(1,"Actions"),t.k0s())}function xt(o,a){if(1&o){const e=t.RV6();t.j41(0,"button",49),t.bIt("click",function(){t.eBV(e);const n=t.XpG(),i=n.$implicit,s=n.index,m=t.XpG();return t.Njj(m.deleteOrder(i._id,s))}),t.j41(1,"mat-icon",48),t.EFF(2,"delete"),t.k0s(),t.j41(3,"span"),t.EFF(4,"Delete"),t.k0s()()}}function yt(o,a){if(1&o&&(t.j41(0,"td",31)(1,"button",45)(2,"mat-icon"),t.EFF(3,"more_vert"),t.k0s()(),t.j41(4,"mat-menu",null,0),t.DNE(6,xt,5,0,"button",46),t.j41(7,"button",47)(8,"mat-icon",48),t.EFF(9,"visibility"),t.k0s(),t.j41(10,"span"),t.EFF(11,"View Order"),t.k0s()()()()),2&o){const e=a.$implicit,r=t.sdS(5),n=t.XpG();t.R7$(),t.Y8G("matMenuTriggerFor",r),t.R7$(5),t.Y8G("ngIf",n.auth.isShow(t.eq3(3,B,n.Role.SuperAdmin))),t.R7$(),t.Y8G("routerLink",t.eq3(5,X,e._id))}}function kt(o,a){1&o&&t.nrm(0,"tr",50)}function Ot(o,a){1&o&&t.nrm(0,"tr",51)}let It=(()=>{class o{constructor(e,r,n,i){this.route=e,this.orderService=r,this._matDialog=n,this.auth=i,this.displayedColumns=["select","no","orderId","vendorName","customerName","device","date","status","paymentStatus","settled","paymentType","amount","actions"],this.dataSource=new d.I6([]),this.selection=new N.CB(!0,[]),this.totalOrders=0,this.Role=A.X}ngAfterViewInit(){this.paginator.page.pipe((0,Y.n)(e=>this.orderService.getOrders({data:{$match:{}},control:[{$sort:{createdAt:-1}},{$skip:e.pageSize*e.pageIndex},{$limit:20}]}))).subscribe(e=>{this.dataSource=new d.I6(e)})}ngOnInit(){this.dataSource=new d.I6(this.route.snapshot.data.orders),this.totalOrders=this.route.snapshot.data.totalOrders}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}deleteSelected(){this.confirmDialogRef=this._matDialog.open(x.Y,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete orders?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete these orders?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(e=>{e&&this.selection.selected.forEach((r,n)=>{this.dataSource.data.splice(n,1),this.dataSource=new d.I6(this.dataSource.data),this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.orderService.deleteOrder(r._id).subscribe()})})}checkboxLabel(e){return e?`${this.selection.isSelected(e)?"deselect":"select"} row ${e.position+1}`:(this.isAllSelected()?"deselect":"select")+" all"}deleteOrder(e,r){this.confirmDialogRef=this._matDialog.open(x.Y,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Customer?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete this order?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(n=>{n&&(this.dataSource.data.splice(r,1),this.dataSource=new d.I6(this.dataSource.data),this.dataSource._updateChangeSubscription(),this.orderService.deleteOrder(e).subscribe())})}static#t=this.\u0275fac=function(r){return new(r||o)(t.rXU(f.nX),t.rXU(h.B),t.rXU(p.bZ),t.rXU(V.u))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-list-orders"]],viewQuery:function(r,n){if(1&r&&t.GBs(E.iy,5),2&r){let i;t.mGM(i=t.lsd())&&(n.paginator=i.first)}},decls:50,vars:6,consts:[["menu","matMenu"],["fxLayout","row","fxLayoutGap","10px","fxLayoutAlign","start center",1,"card","bg-white","w-full","mat-elevation-z2","px-2","py-2"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"text-lg","font-thin"],[1,"text-2xl"],["class","text-lg font-thin","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",4,"ngIf"],[1,"mat-elevation-z8"],["mat-table","",1,"w-full",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","no"],["matColumnDef","orderId"],["matColumnDef","vendorName"],["matColumnDef","customerName"],["matColumnDef","device"],["matColumnDef","date"],["matColumnDef","status"],["matColumnDef","paymentStatus"],["matColumnDef","settled"],["matColumnDef","paymentType"],["matColumnDef","amount"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page of periodic elements",3,"pageSize","length"],["mat-button",""],["mat-stroked-button","","color","primary"],[1,"mat-18"],["mat-stroked-button","","color","warn",3,"click"],["mat-header-cell",""],[3,"change","checked","indeterminate","aria-label"],["mat-cell",""],[3,"click","change","checked","aria-label"],["aria-label","Fish selection"],[4,"ngIf"],["style","background-color: rgb(3, 138, 3); color: #fff",4,"ngIf"],["color","warn","selected","",4,"ngIf"],["style","background-color: rgb(210, 235, 49); color: #fff","selected","",4,"ngIf"],["style","background-color: rgb(200, 68, 90); color: #fff","selected","",4,"ngIf"],[2,"background-color","rgb(3, 138, 3)","color","#fff"],["color","warn","selected",""],["selected","",2,"background-color","rgb(210, 235, 49)","color","#fff"],["selected","",2,"background-color","rgb(200, 68, 90)","color","#fff"],["style","background-color: red; color: #fff","selected","",4,"ngIf"],["selected","",2,"background-color","red","color","#fff"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"routerLink"],[1,"material-icons-outlined"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(r,n){1&r&&(t.j41(0,"div")(1,"div",1)(2,"span",2)(3,"span",3),t.EFF(4,"Orders"),t.k0s()(),t.DNE(5,U,11,1,"span",4),t.k0s(),t.j41(6,"div",5)(7,"table",6),t.qex(8,7),t.DNE(9,M,2,3,"th",8)(10,P,2,2,"td",9),t.bVm(),t.qex(11,10),t.DNE(12,H,2,0,"th",8)(13,z,2,1,"td",9),t.bVm(),t.qex(14,11),t.DNE(15,K,2,0,"th",8)(16,Q,2,1,"td",9),t.bVm(),t.qex(17,12),t.DNE(18,W,2,0,"th",8)(19,Z,2,1,"td",9),t.bVm(),t.qex(20,13),t.DNE(21,q,2,0,"th",8)(22,tt,2,1,"td",9),t.bVm(),t.qex(23,14),t.DNE(24,et,2,0,"th",8)(25,nt,2,1,"td",9),t.bVm(),t.qex(26,15),t.DNE(27,rt,2,0,"th",8)(28,it,3,4,"td",9),t.bVm(),t.qex(29,16),t.DNE(30,ot,2,0,"th",8)(31,ft,9,7,"td",9),t.bVm(),t.qex(32,17),t.DNE(33,pt,2,0,"th",8)(34,_t,4,2,"td",9),t.bVm(),t.qex(35,18),t.DNE(36,Ft,2,0,"th",8)(37,vt,2,1,"td",9),t.bVm(),t.qex(38,19),t.DNE(39,bt,2,0,"th",8)(40,jt,2,1,"td",9),t.bVm(),t.qex(41,20),t.DNE(42,Rt,2,0,"th",8)(43,Ct,3,4,"td",9),t.bVm(),t.qex(44,21),t.DNE(45,Et,2,0,"th",8)(46,yt,12,7,"td",9),t.bVm(),t.DNE(47,kt,1,0,"tr",22)(48,Ot,1,0,"tr",23),t.k0s(),t.nrm(49,"mat-paginator",24),t.k0s()()),2&r&&(t.R7$(5),t.Y8G("ngIf",n.selection.selected.length),t.R7$(2),t.Y8G("dataSource",n.dataSource),t.R7$(40),t.Y8G("matHeaderRowDef",n.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",n.displayedColumns),t.R7$(),t.Y8G("pageSize",20)("length",n.totalOrders))},dependencies:[u.bT,f.Wk,v.$z,v.iY,y.Jl,y.Jo,k.An,E.iy,d.Zl,d.tL,d.ji,d.cC,d.YV,d.iL,d.KS,d.$R,d.YZ,d.NB,J.So,j.kk,j.fb,j.Cp,g.DJ,g.BO,g.sA,u.oe,u.vh]})}return o})();var $t=l(980),O=l(2643),Dt=l(7235),I=l(5416),b=l(3719),St=l(9631),_=l(3902),Lt=l(450),F=l(9417);function Tt(o,a){if(1&o&&(t.j41(0,"mat-list-option",9),t.EFF(1),t.k0s()),2&o){const e=a.$implicit;t.Y8G("value",e),t.R7$(),t.SpI(" ",e.text," ")}}function Gt(o,a){if(1&o){const e=t.RV6();t.qex(0),t.j41(1,"mat-form-field",10)(2,"mat-label"),t.EFF(3,"Tell us the reason.."),t.k0s(),t.j41(4,"textarea",11),t.mxI("ngModelChange",function(n){t.eBV(e);const i=t.XpG();return t.DH7(i.cancellationText,n)||(i.cancellationText=n),t.Njj(n)}),t.k0s()(),t.j41(5,"mat-slide-toggle",12),t.mxI("ngModelChange",function(n){t.eBV(e);const i=t.XpG();return t.DH7(i.vendorIssue,n)||(i.vendorIssue=n),t.Njj(n)}),t.EFF(6,"Is this cancellation caused by vendor?"),t.k0s(),t.bVm()}if(2&o){const e=t.XpG();t.R7$(4),t.R50("ngModel",e.cancellationText),t.R7$(),t.R50("ngModel",e.vendorIssue)}}let wt=(()=>{class o{constructor(e,r,n){this.dialogRef=e,this.data=r,this.snackbar=n,this.title="",this.confirmMessage="",this.confirmButton="",this.cancellationText="",this.vendorIssue=!1,this.cancellationReasons=[{text:"Customer change of mind",vendorIssue:!1},{text:"Customer found a better deal",vendorIssue:!1},{text:"Item out of stock",vendorIssue:!0},{text:"Restaurant is closed",vendorIssue:!0},{text:"Delivery Issues",vendorIssue:!1},{text:"Unable to reach the customer",vendorIssue:!1},{text:"Unable to reach the Vendor",vendorIssue:!0},{text:"Payment Issues",vendorIssue:!1},{text:"Others",vendorIssue:!1}]}ngOnInit(){}closeDialog(e){e&&("Others"===e.text?this.cancellationText.length>2?this.dialogRef.close({text:this.cancellationText,vendorIssue:this.vendorIssue}):this.snackbar.open("Please tell us why!","Ok",{duration:3e3}):this.dialogRef.close(e))}static#t=this.\u0275fac=function(r){return new(r||o)(t.rXU(p.CP),t.rXU(p.Vh),t.rXU(I.UG))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-order-cancelation"]],decls:14,vars:6,consts:[["reason",""],["mat-dialog-title",""],["mat-dialog-content",""],[3,"multiple"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["mat-dialog-actions",""],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","warn",3,"click"],[3,"value"],[1,"w-full"],["matInput","","cancellation","Tell us the reason of your cancellation",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"]],template:function(r,n){if(1&r){const i=t.RV6();t.j41(0,"h1",1),t.EFF(1),t.k0s(),t.j41(2,"div",2)(3,"p"),t.EFF(4),t.k0s(),t.j41(5,"mat-selection-list",3,0),t.DNE(7,Tt,2,2,"mat-list-option",4),t.k0s(),t.DNE(8,Gt,7,2,"ng-container",5),t.k0s(),t.j41(9,"div",6)(10,"button",7),t.EFF(11,"Close"),t.k0s(),t.j41(12,"button",8),t.bIt("click",function(){t.eBV(i);const m=t.sdS(6);return t.Njj(n.closeDialog(m.selectedOptions.selected[0].value||n.cancellationText))}),t.EFF(13),t.k0s()()}if(2&r){const i=t.sdS(6);t.R7$(),t.JRh(n.title),t.R7$(3),t.JRh(n.confirmMessage),t.R7$(),t.Y8G("multiple",!1),t.R7$(2),t.Y8G("ngForOf",n.cancellationReasons),t.R7$(),t.Y8G("ngIf",i.selectedOptions.hasValue()&&"Others"===i.selectedOptions.selected[0].value.text),t.R7$(5),t.JRh(n.confirmButton)}},dependencies:[u.Sq,u.bT,v.$z,b.rl,b.nJ,St.fg,p.tx,p.BI,p.E7,p.Yi,_.p6,_.oh,Lt.sG,F.me,F.BC,F.vS]})}return o})();var Nt=l(6600),Yt=l(2798),At=l(1997),Vt=l(6038);class c{static hashStr(a,e=!1){return this.onePassHasher.start().appendStr(a).end(e)}static hashAsciiStr(a,e=!1){return this.onePassHasher.start().appendAsciiStr(a).end(e)}static#t=this.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]);static#e=this.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);static#n=this.hexChars="0123456789abcdef";static#r=this.hexOut=[];static#i=this.onePassHasher=new c;static _hex(a){const e=c.hexChars,r=c.hexOut;let n,i,s,m;for(m=0;m<4;m+=1)for(i=8*m,n=a[m],s=0;s<8;s+=2)r[i+1+s]=e.charAt(15&n),n>>>=4,r[i+0+s]=e.charAt(15&n),n>>>=4;return r.join("")}static _md5cycle(a,e){let r=a[0],n=a[1],i=a[2],s=a[3];r+=(n&i|~n&s)+e[0]-680876936|0,r=(r<<7|r>>>25)+n|0,s+=(r&n|~r&i)+e[1]-389564586|0,s=(s<<12|s>>>20)+r|0,i+=(s&r|~s&n)+e[2]+606105819|0,i=(i<<17|i>>>15)+s|0,n+=(i&s|~i&r)+e[3]-1044525330|0,n=(n<<22|n>>>10)+i|0,r+=(n&i|~n&s)+e[4]-176418897|0,r=(r<<7|r>>>25)+n|0,s+=(r&n|~r&i)+e[5]+1200080426|0,s=(s<<12|s>>>20)+r|0,i+=(s&r|~s&n)+e[6]-1473231341|0,i=(i<<17|i>>>15)+s|0,n+=(i&s|~i&r)+e[7]-45705983|0,n=(n<<22|n>>>10)+i|0,r+=(n&i|~n&s)+e[8]+1770035416|0,r=(r<<7|r>>>25)+n|0,s+=(r&n|~r&i)+e[9]-1958414417|0,s=(s<<12|s>>>20)+r|0,i+=(s&r|~s&n)+e[10]-42063|0,i=(i<<17|i>>>15)+s|0,n+=(i&s|~i&r)+e[11]-1990404162|0,n=(n<<22|n>>>10)+i|0,r+=(n&i|~n&s)+e[12]+1804603682|0,r=(r<<7|r>>>25)+n|0,s+=(r&n|~r&i)+e[13]-40341101|0,s=(s<<12|s>>>20)+r|0,i+=(s&r|~s&n)+e[14]-1502002290|0,i=(i<<17|i>>>15)+s|0,n+=(i&s|~i&r)+e[15]+1236535329|0,n=(n<<22|n>>>10)+i|0,r+=(n&s|i&~s)+e[1]-165796510|0,r=(r<<5|r>>>27)+n|0,s+=(r&i|n&~i)+e[6]-1069501632|0,s=(s<<9|s>>>23)+r|0,i+=(s&n|r&~n)+e[11]+643717713|0,i=(i<<14|i>>>18)+s|0,n+=(i&r|s&~r)+e[0]-373897302|0,n=(n<<20|n>>>12)+i|0,r+=(n&s|i&~s)+e[5]-701558691|0,r=(r<<5|r>>>27)+n|0,s+=(r&i|n&~i)+e[10]+38016083|0,s=(s<<9|s>>>23)+r|0,i+=(s&n|r&~n)+e[15]-660478335|0,i=(i<<14|i>>>18)+s|0,n+=(i&r|s&~r)+e[4]-405537848|0,n=(n<<20|n>>>12)+i|0,r+=(n&s|i&~s)+e[9]+568446438|0,r=(r<<5|r>>>27)+n|0,s+=(r&i|n&~i)+e[14]-1019803690|0,s=(s<<9|s>>>23)+r|0,i+=(s&n|r&~n)+e[3]-187363961|0,i=(i<<14|i>>>18)+s|0,n+=(i&r|s&~r)+e[8]+1163531501|0,n=(n<<20|n>>>12)+i|0,r+=(n&s|i&~s)+e[13]-1444681467|0,r=(r<<5|r>>>27)+n|0,s+=(r&i|n&~i)+e[2]-51403784|0,s=(s<<9|s>>>23)+r|0,i+=(s&n|r&~n)+e[7]+1735328473|0,i=(i<<14|i>>>18)+s|0,n+=(i&r|s&~r)+e[12]-1926607734|0,n=(n<<20|n>>>12)+i|0,r+=(n^i^s)+e[5]-378558|0,r=(r<<4|r>>>28)+n|0,s+=(r^n^i)+e[8]-2022574463|0,s=(s<<11|s>>>21)+r|0,i+=(s^r^n)+e[11]+1839030562|0,i=(i<<16|i>>>16)+s|0,n+=(i^s^r)+e[14]-35309556|0,n=(n<<23|n>>>9)+i|0,r+=(n^i^s)+e[1]-1530992060|0,r=(r<<4|r>>>28)+n|0,s+=(r^n^i)+e[4]+1272893353|0,s=(s<<11|s>>>21)+r|0,i+=(s^r^n)+e[7]-155497632|0,i=(i<<16|i>>>16)+s|0,n+=(i^s^r)+e[10]-1094730640|0,n=(n<<23|n>>>9)+i|0,r+=(n^i^s)+e[13]+681279174|0,r=(r<<4|r>>>28)+n|0,s+=(r^n^i)+e[0]-358537222|0,s=(s<<11|s>>>21)+r|0,i+=(s^r^n)+e[3]-722521979|0,i=(i<<16|i>>>16)+s|0,n+=(i^s^r)+e[6]+76029189|0,n=(n<<23|n>>>9)+i|0,r+=(n^i^s)+e[9]-640364487|0,r=(r<<4|r>>>28)+n|0,s+=(r^n^i)+e[12]-421815835|0,s=(s<<11|s>>>21)+r|0,i+=(s^r^n)+e[15]+530742520|0,i=(i<<16|i>>>16)+s|0,n+=(i^s^r)+e[2]-995338651|0,n=(n<<23|n>>>9)+i|0,r+=(i^(n|~s))+e[0]-198630844|0,r=(r<<6|r>>>26)+n|0,s+=(n^(r|~i))+e[7]+1126891415|0,s=(s<<10|s>>>22)+r|0,i+=(r^(s|~n))+e[14]-1416354905|0,i=(i<<15|i>>>17)+s|0,n+=(s^(i|~r))+e[5]-57434055|0,n=(n<<21|n>>>11)+i|0,r+=(i^(n|~s))+e[12]+1700485571|0,r=(r<<6|r>>>26)+n|0,s+=(n^(r|~i))+e[3]-1894986606|0,s=(s<<10|s>>>22)+r|0,i+=(r^(s|~n))+e[10]-1051523|0,i=(i<<15|i>>>17)+s|0,n+=(s^(i|~r))+e[1]-2054922799|0,n=(n<<21|n>>>11)+i|0,r+=(i^(n|~s))+e[8]+1873313359|0,r=(r<<6|r>>>26)+n|0,s+=(n^(r|~i))+e[15]-30611744|0,s=(s<<10|s>>>22)+r|0,i+=(r^(s|~n))+e[6]-1560198380|0,i=(i<<15|i>>>17)+s|0,n+=(s^(i|~r))+e[13]+1309151649|0,n=(n<<21|n>>>11)+i|0,r+=(i^(n|~s))+e[4]-145523070|0,r=(r<<6|r>>>26)+n|0,s+=(n^(r|~i))+e[11]-1120210379|0,s=(s<<10|s>>>22)+r|0,i+=(r^(s|~n))+e[2]+718787259|0,i=(i<<15|i>>>17)+s|0,n+=(s^(i|~r))+e[9]-343485551|0,n=(n<<21|n>>>11)+i|0,a[0]=r+a[0]|0,a[1]=n+a[1]|0,a[2]=i+a[2]|0,a[3]=s+a[3]|0}constructor(){this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(c.stateIdentity),this}appendStr(a){const e=this._buffer8,r=this._buffer32;let i,s,n=this._bufferLength;for(s=0;s<a.length;s+=1){if(i=a.charCodeAt(s),i<128)e[n++]=i;else if(i<2048)e[n++]=192+(i>>>6),e[n++]=63&i|128;else if(i<55296||i>56319)e[n++]=224+(i>>>12),e[n++]=i>>>6&63|128,e[n++]=63&i|128;else{if(i=1024*(i-55296)+(a.charCodeAt(++s)-56320)+65536,i>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");e[n++]=240+(i>>>18),e[n++]=i>>>12&63|128,e[n++]=i>>>6&63|128,e[n++]=63&i|128}n>=64&&(this._dataLength+=64,c._md5cycle(this._state,r),n-=64,r[0]=r[16])}return this._bufferLength=n,this}appendAsciiStr(a){const e=this._buffer8,r=this._buffer32;let i,n=this._bufferLength,s=0;for(;;){for(i=Math.min(a.length-s,64-n);i--;)e[n++]=a.charCodeAt(s++);if(n<64)break;this._dataLength+=64,c._md5cycle(this._state,r),n=0}return this._bufferLength=n,this}appendByteArray(a){const e=this._buffer8,r=this._buffer32;let i,n=this._bufferLength,s=0;for(;;){for(i=Math.min(a.length-s,64-n);i--;)e[n++]=a[s++];if(n<64)break;this._dataLength+=64,c._md5cycle(this._state,r),n=0}return this._bufferLength=n,this}getState(){const a=this,e=a._state;return{buffer:String.fromCharCode.apply(null,a._buffer8),buflen:a._bufferLength,length:a._dataLength,state:[e[0],e[1],e[2],e[3]]}}setState(a){const e=a.buffer,r=a.state,n=this._state;let i;for(this._dataLength=a.length,this._bufferLength=a.buflen,n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],i=0;i<e.length;i+=1)this._buffer8[i]=e.charCodeAt(i)}end(a=!1){const e=this._bufferLength,r=this._buffer8,n=this._buffer32,i=1+(e>>2);let s;if(this._dataLength+=e,r[e]=128,r[e+1]=r[e+2]=r[e+3]=0,n.set(c.buffer32Identity.subarray(i),i),e>55&&(c._md5cycle(this._state,n),n.set(c.buffer32Identity)),s=8*this._dataLength,s<=4294967295)n[14]=s;else{const m=s.toString(16).match(/(.*?)(.{0,8})$/);if(null===m)return;const ge=parseInt(m[2],16),_e=parseInt(m[1],16)||0;n[14]=ge,n[15]=_e}return c._md5cycle(this._state,n),a?this._state:c._hex(this._state)}}"5d41402abc4b2a76b9719d911017c592"!==c.hashStr("hello")&&console.error("Md5 self test failed.");let Jt=(()=>{class o{set email(e){this.updateEmail(e)}constructor(e){this.el=e,this.fallback="wavatar"}ngOnInit(){this.el&&(this.el.nativeElement.src="//www.gravatar.com/avatar/")}updateEmail(e){if(console.log(e),!e||!this.el.nativeElement)return;const r=c.hashStr(e.trim().toLowerCase());this.el.nativeElement.src=`//www.gravatar.com/avatar/${r}?d=${this.fallback}`,console.log(this.el.nativeElement.src,r)}static#t=this.\u0275fac=function(r){return new(r||o)(t.rXU(t.aKT))};static#e=this.\u0275dir=t.FsC({type:o,selectors:[["","appGravatar",""]],inputs:{email:"email"}})}return o})();const Bt=["pdfTable"],$=o=>["../../../customers",o,"details"],Xt=o=>["dashboard","customers",o,"details"],R=o=>["../../../stores",o,"explore"],Ut=()=>["Paid","Unpaid"];function Mt(o,a){1&o&&(t.j41(0,"mat-icon",63),t.EFF(1,"close"),t.k0s())}function Pt(o,a){1&o&&(t.j41(0,"mat-icon",63),t.EFF(1,"check"),t.k0s())}function Ht(o,a){if(1&o){const e=t.RV6();t.qex(0),t.j41(1,"div",59)(2,"button",60),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.cancelOrder(n.order))}),t.DNE(3,Mt,2,0,"mat-icon",61),t.EFF(4),t.k0s(),t.j41(5,"button",62),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.accept(n.order))}),t.DNE(6,Pt,2,0,"mat-icon",61),t.EFF(7),t.k0s()(),t.bVm()}if(2&o){const e=t.XpG();t.R7$(2),t.Y8G("disabled",e.isCanceling),t.R7$(),t.Y8G("ngIf",!e.isCanceling),t.R7$(),t.SpI(" ",e.isCanceling?"CANCELLING....":"CANCEL ORDER"," "),t.R7$(2),t.Y8G("ngIf",!e.isAccepting),t.R7$(),t.SpI(" ",e.isAccepting?"ACCEPTING....":"ACCEPT ORDER"," ")}}function zt(o,a){if(1&o&&(t.j41(0,"mat-option",70),t.EFF(1),t.k0s()),2&o){const e=a.$implicit;t.Y8G("value",e),t.R7$(),t.JRh(e)}}function Kt(o,a){if(1&o&&(t.j41(0,"mat-option",70),t.EFF(1),t.k0s()),2&o){const e=a.$implicit;t.Y8G("value",e),t.R7$(),t.JRh(e.name)}}function Qt(o,a){if(1&o&&(t.j41(0,"mat-option",70),t.EFF(1),t.k0s()),2&o){const e=a.$implicit;t.Y8G("value",e._id),t.R7$(),t.JRh(e.firstName+" "+e.lastName)}}function Wt(o,a){if(1&o){const e=t.RV6();t.j41(0,"div",64)(1,"mat-form-field",65)(2,"mat-label"),t.EFF(3,"Payment Status"),t.k0s(),t.j41(4,"mat-select",66),t.bIt("selectionChange",function(n){t.eBV(e);const i=t.XpG();return t.Njj(i.updatePaymentStatus(i.order,n))}),t.mxI("ngModelChange",function(n){t.eBV(e);const i=t.XpG();return t.DH7(i.order.paymentStatus,n)||(i.order.paymentStatus=n),t.Njj(n)}),t.DNE(5,zt,2,2,"mat-option",67),t.k0s()(),t.j41(6,"mat-form-field",65)(7,"mat-label"),t.EFF(8,"Order Status"),t.k0s(),t.j41(9,"mat-select",68),t.bIt("selectionChange",function(n){t.eBV(e);const i=t.XpG();return t.Njj(i.updateStatus(n,i.order))}),t.mxI("ngModelChange",function(n){t.eBV(e);const i=t.XpG();return t.DH7(i.order.status[0].name,n)||(i.order.status[0].name=n),t.Njj(n)}),t.DNE(10,Kt,2,2,"mat-option",67),t.k0s()(),t.j41(11,"mat-form-field",65)(12,"mat-label"),t.EFF(13,"Rider"),t.k0s(),t.j41(14,"mat-select",69),t.bIt("selectionChange",function(n){t.eBV(e);const i=t.XpG();return t.Njj(i.selectRider(n))}),t.mxI("ngModelChange",function(n){t.eBV(e);const i=t.XpG();return t.DH7(i.order.rider,n)||(i.order.rider=n),t.Njj(n)}),t.DNE(15,Qt,2,2,"mat-option",67),t.k0s()()()}if(2&o){const e=t.XpG();t.R7$(4),t.Y8G("disabled",e.order.settled),t.R50("ngModel",e.order.paymentStatus),t.R7$(),t.Y8G("ngForOf",t.lJ4(8,Ut)),t.R7$(4),t.R50("ngModel",e.order.status[0].name),t.Y8G("compareWith",e.compareFn),t.R7$(),t.Y8G("ngForOf",e.statuses),t.R7$(4),t.R50("ngModel",e.order.rider),t.R7$(),t.Y8G("ngForOf",e.riders)}}function Zt(o,a){if(1&o&&(t.j41(0,"div",7)(1,"h3",71),t.EFF(2,"Cancellation Reason"),t.k0s(),t.j41(3,"p",71),t.EFF(4),t.k0s()()),2&o){const e=t.XpG();t.R7$(4),t.JRh(e.order.orderCancellationReason||"No reason stated")}}function qt(o,a){1&o&&(t.j41(0,"mat-list-item",8)(1,"mat-icon",10),t.EFF(2,"redeem"),t.k0s(),t.j41(3,"div",11),t.EFF(4,"It's a gift"),t.k0s()())}function te(o,a){if(1&o&&(t.j41(0,"mat-list-item")(1,"a",11),t.EFF(2),t.k0s()()),2&o){const e=t.XpG();t.R7$(2),t.JRh(e.order.shipping.streetName)}}function ee(o,a){if(1&o&&(t.j41(0,"div",7)(1,"div",14),t.nrm(2,"img",72),t.j41(3,"h2",73),t.EFF(4),t.k0s(),t.j41(5,"button",74),t.EFF(6),t.k0s()(),t.j41(7,"mat-list")(8,"mat-list-item")(9,"mat-icon",10),t.EFF(10,"phone_android"),t.k0s(),t.j41(11,"a",18),t.EFF(12),t.k0s()(),t.nrm(13,"mat-divider"),t.j41(14,"mat-list-item")(15,"mat-icon",10),t.EFF(16,"location_on"),t.k0s(),t.j41(17,"div",11),t.EFF(18),t.k0s()(),t.nrm(19,"mat-divider"),t.j41(20,"div",9),t.EFF(21,"Notes"),t.k0s(),t.j41(22,"mat-list-item")(23,"p"),t.EFF(24),t.k0s()()()()),2&o){const e=t.XpG();t.R7$(4),t.JRh(e.order.receiver.name),t.R7$(2),t.SpI(" Gift Receiver (",e.order.receiver.surprise?"surprise":"Not surprise",") "),t.R7$(5),t.Y8G("href","tel:"+e.order.receiver.phoneNumber,t.B4B),t.R7$(),t.JRh(e.order.receiver.phoneNumber),t.R7$(6),t.JRh(e.order.receiver.address.name+" "+e.order.receiver.address.administrativeArea+" "+e.order.receiver.address.locality),t.R7$(6),t.SpI("",e.order.receiver.note||"No Notes"," ")}}function ne(o,a){if(1&o&&(t.j41(0,"mat-list-item")(1,"a",11),t.EFF(2),t.k0s()()),2&o){const e=t.XpG();t.R7$(2),t.JRh(e.order.store.contactInfo.address)}}function re(o,a){if(1&o&&(t.j41(0,"div",75)(1,"div",50)(2,"h3",76)(3,"mat-icon",63),t.EFF(4,"alarm"),t.k0s(),t.EFF(5," Schedule Delivery"),t.k0s()(),t.j41(6,"div",77),t.EFF(7),t.k0s()()),2&o){const e=t.XpG();t.R7$(7),t.Lme(" This order is Scheduled for ",e.order.deliveryTime.date," ",e.order.deliveryTime.time,", kindly inform both the vendor and the customers. ")}}function ie(o,a){if(1&o&&(t.j41(0,"div",84),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&o){const e=a.$implicit,r=t.XpG(2);t.R7$(),t.E5c(" ",e.quantity," x ",e.name," = ",t.i5U(2,3,e.quantity*e.price,r.order.store.currency)," ")}}function oe(o,a){if(1&o&&(t.j41(0,"tr")(1,"td",30)(2,"div",50),t.nrm(3,"div",78),t.j41(4,"div",79)(5,"div",80),t.EFF(6),t.k0s(),t.j41(7,"div",81),t.DNE(8,ie,3,6,"div",82),t.k0s()()()(),t.j41(9,"td",30)(10,"div",36),t.EFF(11),t.k0s()(),t.j41(12,"td",30)(13,"div",37),t.EFF(14),t.nI1(15,"currency"),t.k0s()(),t.j41(16,"td",30)(17,"div",37),t.EFF(18),t.nI1(19,"currency"),t.k0s()(),t.j41(20,"td",30)(21,"div",38)(22,"button",83)(23,"mat-icon",63),t.EFF(24,"delete"),t.k0s()()()()()),2&o){const e=a.$implicit,r=t.XpG();t.R7$(6),t.JRh(e.name),t.R7$(2),t.Y8G("ngForOf",e.options),t.R7$(3),t.JRh(e.quantity),t.R7$(3),t.JRh(t.i5U(15,5,e.price+r.optionsPrice(e.options),r.order.store.currency)),t.R7$(4),t.JRh(t.i5U(19,8,(e.price+r.optionsPrice(e.options))*e.quantity,r.order.store.currency))}}function se(o,a){if(1&o&&(t.j41(0,"li",49)(1,"div",50)(2,"div",51),t.qSk(),t.j41(3,"svg",52),t.nrm(4,"path",53),t.k0s()(),t.joV(),t.nrm(5,"div",54),t.k0s(),t.j41(6,"div",55)(7,"h3"),t.EFF(8),t.k0s(),t.j41(9,"time",57),t.EFF(10),t.nI1(11,"date"),t.k0s()()()),2&o){const e=a.$implicit;t.R7$(7),t.HbH("text-lg font-semibold "+e.color),t.R7$(),t.JRh(e.name),t.R7$(2),t.JRh(t.i5U(11,4,null==e?null:e.updatedOn,"medium"))}}const ae=l(5680);O.vfs=Dt.b.vfs;let le=(()=>{class o{constructor(e,r,n,i,s){this.route=e,this.orderService=r,this._matDialog=n,this._matSnack=i,this.router=s,this.riders=[],this.statuses=[{id:0,name:"Accepted",color:"text-yellow-700",updatedOn:new Date},{id:1,name:"Preparing",color:"text-blue-500",updatedOn:new Date},{id:2,name:"Ready for Pickup",color:"text-blue-500",updatedOn:new Date},{id:4,name:"Shipped",color:"text-blue-500",updatedOn:new Date},{id:3,name:"Canceled",color:"text-red-500",updatedOn:new Date},{id:5,name:"Delivered",color:"text-green-500",updatedOn:new Date}]}ngOnInit(){this.order=this.route.snapshot.data.order,this.riders=this.route.snapshot.data.riders}optionsPrice(e){return e.reduce((r,n)=>r+n.price*n.quantity,0)}accept(e){this.isAccepting=!0,this.updateStatus({id:0,name:"Accepted",color:"text-yellow-700",updatedOn:new Date},e,!1),e.category="Processing"}cancel(e,r){this.cancelationDialogRef=this._matDialog.open(wt,{disableClose:!1}),this.cancelationDialogRef.componentInstance.title="Cancel orders?",this.cancelationDialogRef.componentInstance.confirmMessage="Tell us why you are canceling this order?",this.cancelationDialogRef.componentInstance.confirmButton="Cancel Order",this.cancelationDialogRef.afterClosed().subscribe(n=>{n&&(r.vendorIssue=n.vendorIssue,r.orderCancellationReason=n.text,this.orderService.updateOrderStatus(e._id,e.user._id,r).subscribe(i=>{this.isCanceling=!1,this.isAccepting=!1,this._matSnack.open("You have updated this order to Canceled","Close",{duration:3e3})}),this.orderService.updateOrder(e._id,{orderCancellationReason:n.text}).subscribe())})}cancelOrder(e){this.isCanceling=!0,this.cancel(e,{id:3,name:"Canceled",color:"text-red-500",updatedOn:new Date}),e.category="Canceled"}updatePaymentStatus(e,r){this.orderService.updateOrder(e._id,{paymentStatus:r.value}).pipe((0,$t.j)(()=>this.isCanceling=!1)).subscribe(n=>{e.paymentStatus=r.value,this._matSnack.open("Payment updated!","Close",{duration:3e3})})}compareFn(e,r){return e.name===r}updateStatus(e,r,n=!0){"Canceled"===(n?e.value.name:e.name)?this.cancel(r,e.value):this.orderService.updateOrderStatus(r._id,r.user._id,n?e.value:e).subscribe(i=>{this.isCanceling=!1,this.isAccepting=!1,this._matSnack.open(`You have updated this order to ${e.value.name}`,"Close",{duration:3e3})})}selectRider(e){console.log(e.value),this.orderService.updateOrder(this.order._id,{rider:e.value}).subscribe(r=>{this._matSnack.open("You have assigned a rider to this order","Close",{duration:3e3})})}exportPDF(){var r=ae(this.pdfTable.nativeElement.innerHTML);O.createPdf({content:r}).download()}open(){window.open(`google.navigation:q=${this.order.store.location?.coordinates[0]}+${this.order.store.location?.coordinates[1]}`,"_blank")}static#t=this.\u0275fac=function(r){return new(r||o)(t.rXU(f.nX),t.rXU(h.B),t.rXU(p.bZ),t.rXU(I.UG),t.rXU(f.Ix))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-orders-details"]],viewQuery:function(r,n){if(1&r&&t.GBs(Bt,5),2&r){let i;t.mGM(i=t.lsd())&&(n.pdfTable=i.first)}},decls:286,vars:86,consts:[["statusControl",""],["pdfTable",""],[1,"lg:flex","lg:items-center","lg:justify-between"],[4,"ngIf","ngIfElse"],["fxLayout.gt-md","row","fxLayoutAlign.gt-md","space-between start","fxLayout.lt-lg","column","fxLayoutAlign.lt-lg","space-around stretch","fxLayoutGap","20px",1,"mt-10"],["fxLayout","column","fxLayoutAlign","space-between start","fxFlex.gt-md","30%","fxFlex.lt-md","100%","fxLayoutGap","20px"],["class","mat-elevation-z2  rounded-md w-full","fxLayout","column","fxLayoutAlign","start start",4,"ngIf"],["fxLayout","column","fxLayoutAlign","start start",1,"mat-elevation-z2","rounded-md","w-full"],[1,"w-full"],["mat-subheader",""],["matListItemIcon","",1,"material-icons-outlined"],["matListItemTitle",""],["class","w-full",4,"ngIf"],[1,"w-full",3,"click"],["fxLayout","column","fxLayoutAlign","space-around center",1,"w-full","p-3"],["appGravatar","","width","150","height","150",1,"rounded-full","cursor-pointer",3,"routerLink","email"],[1,"text-center","font-bolder","text-blue-600",3,"routerLink"],["type","button",1,"inline-flex","items-center","rounded-md","border","border-transparent","bg-green-600","px-4","py-2","text-sm","font-medium","text-white","shadow-sm","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:ring-offset-2",3,"routerLink"],["matListItemTitle","",3,"href"],[4,"ngIf"],[1,"mat-elevation-z2","rounded-md","w-full"],["width","150","height","150",1,"rounded-full","cursor-pointer",3,"routerLink","src"],[1,"text-center","font-bolder","text-blue-500","cursor-pointer",3,"routerLink"],["fxFlex","70%","fxLayoutGap","20px"],["id","alert-additional-content-1","class","p-4 mb-4 text-blue-800 border border-blue-300 rounded-lg bg-blue-50","role","alert",4,"ngIf"],["id","pdfTable",1,"mat-elevation-z2","p-3","rounded-md","w-full"],[1,"p-3"],[1,"overflow-x-auto"],[1,"table-auto","w-full"],[1,"text-xs","font-semibold","uppercase","text-gray-400","bg-gray-50"],[1,"p-2","whitespace-nowrap"],[1,"font-semibold","text-left"],[1,"font-semibold","text-center"],[1,"text-sm","divide-y","divide-gray-100"],[4,"ngFor","ngForOf"],[1,"text-left","font-bold"],[1,"text-left"],[1,"text-left","font-medium","text-black"],[1,"text-lg","text-center"],[1,"text-left","font-medium","text-red-500"],[1,"bg-gray-700"],[1,"font-semibold","text-white","dark:white"],["scope","row",1,"py-3","px-6","whitespace-nowrap","text-base"],[1,"text-left","font-medium","text-white"],[1,"bg-blue-700"],[1,"bg-pink-700"],[1,"bg-green-700"],[1,"mat-elevation-z2","p-3","rounded-md","w-full","mt-5"],[1,"items-center","sm:flex"],[1,"relative","mb-6","sm:mb-0"],[1,"flex","items-center"],[1,"flex","z-10","justify-center","items-center","w-6","h-6","bg-blue-200","rounded-full","ring-0","ring-white","dark:bg-blue-900","sm:ring-8","dark:ring-gray-900","shrink-0"],["aria-hidden","true","fill","currentColor","viewBox","0 0 20 20","xmlns","http://www.w3.org/2000/svg",1,"w-3","h-3","text-blue-600","dark:text-blue-300"],["fill-rule","evenodd","d","M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z","clip-rule","evenodd"],[1,"hidden","sm:flex","w-full","bg-gray-200","h-0.5","dark:bg-gray-700"],[1,"mt-3","sm:pr-8"],[1,"text-lg","font-semibold"],[1,"block","mb-2","text-sm","font-normal","leading-none","text-gray-400","dark:text-gray-500"],["class","relative mb-6 sm:mb-0",4,"ngFor","ngForOf"],["fxLayout.lt-lg","column","fxLayoutAlign.lt-lg","space-around stretch","ngClass.lt-lg","mt-10","fxLayoutGap","15px"],["type","button",1,"inline-flex","items-center","rounded-md","border","border-red-500","bg-white","px-4","py-2","text-sm","font-medium","text-red-500","shadow-sm","hover:bg-red-50","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:ring-offset-2",3,"click","disabled"],["class","mat-18",4,"ngIf"],["type","button",1,"inline-flex","items-center","rounded-md","border","border-transparent","bg-green-600","px-4","py-2","text-sm","font-medium","text-white","shadow-sm","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:ring-offset-2",3,"click"],[1,"mat-18"],["fxLayout.lt-lg","column","fxLayoutAlign.lt-lg","space-around stretch","ngClass.lt-lg","mt-10","fxLayoutGap.gt-md","10px"],["appearance","outline"],[3,"selectionChange","ngModelChange","disabled","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"selectionChange","ngModelChange","ngModel","compareWith"],[3,"selectionChange","ngModelChange","ngModel"],[3,"value"],[1,"px-5","py-3"],["src","https://davur.dexignzone.com/react/demo/static/media/1.7c3d5aa9.jpg","width","150","height","150",1,"rounded-full"],[1,"text-center","font-bolder"],["type","button",1,"inline-flex","items-center","rounded-md","border","border-transparent","bg-pink-600","px-4","py-2","text-sm","font-medium","text-white","shadow-sm","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:ring-offset-2"],["id","alert-additional-content-1","role","alert",1,"p-4","mb-4","text-blue-800","border","border-blue-300","rounded-lg","bg-blue-50"],[1,"text-lg","font-medium","m-0",2,"margin","0","padding","0"],[1,"mt-2","mb-4","text-sm"],[1,"w-10","h-10","flex-shrink-0","mr-2","sm:mr-3"],["fxLayout","column","fxLayoutAlign","start start"],[1,"font-medium","text-blue-800"],["fxLayout","column","fxLayoutAlign","space-around start"],["class","font-medium text-gray-800",4,"ngFor","ngForOf"],["mat-icon-button","","color","warm"],[1,"font-medium","text-gray-800"]],template:function(r,n){if(1&r){const i=t.RV6();t.j41(0,"div",2),t.DNE(1,Ht,8,5,"ng-container",3)(2,Wt,16,9,"ng-template",null,0,t.C5r),t.k0s(),t.j41(4,"div",4)(5,"div",5),t.DNE(6,Zt,5,1,"div",6),t.j41(7,"div",7)(8,"mat-list",8)(9,"div",9),t.EFF(10),t.k0s(),t.j41(11,"mat-list-item",8)(12,"mat-icon",10),t.EFF(13,"card_travel"),t.k0s(),t.j41(14,"div",11),t.EFF(15),t.k0s()(),t.nrm(16,"mat-divider"),t.j41(17,"mat-list-item",8)(18,"mat-icon",10),t.EFF(19,"credit_score"),t.k0s(),t.j41(20,"div",11),t.EFF(21),t.k0s()(),t.nrm(22,"mat-divider"),t.j41(23,"mat-list-item",8)(24,"mat-icon",10),t.EFF(25,"calendar_today"),t.k0s(),t.j41(26,"div",11),t.EFF(27),t.nI1(28,"date"),t.k0s()(),t.nrm(29,"mat-divider"),t.DNE(30,qt,5,0,"mat-list-item",12),t.nrm(31,"mat-divider"),t.j41(32,"mat-list-item",13),t.bIt("click",function(){return t.eBV(i),t.Njj(n.exportPDF())}),t.j41(33,"mat-icon",10),t.EFF(34,"print"),t.k0s(),t.j41(35,"div",11),t.EFF(36,"Export Order"),t.k0s()(),t.nrm(37,"mat-divider"),t.j41(38,"mat-list-item",8)(39,"mat-icon",10),t.EFF(40,"memory"),t.k0s(),t.j41(41,"div",11),t.EFF(42),t.k0s()()()(),t.j41(43,"div",7)(44,"div",14),t.nrm(45,"img",15),t.j41(46,"h2",16),t.EFF(47),t.k0s(),t.j41(48,"a",17),t.EFF(49," Customer "),t.k0s()(),t.j41(50,"mat-list",8)(51,"mat-list-item",8)(52,"mat-icon",10),t.EFF(53,"phone_android"),t.k0s(),t.j41(54,"a",18),t.EFF(55),t.k0s()(),t.nrm(56,"mat-divider"),t.j41(57,"mat-list-item")(58,"mat-icon",10),t.EFF(59,"location_on"),t.k0s(),t.j41(60,"a",11),t.EFF(61),t.k0s()(),t.DNE(62,te,3,1,"mat-list-item",19),t.nrm(63,"mat-divider"),t.j41(64,"mat-list-item")(65,"mat-icon",10),t.EFF(66,"phone"),t.k0s(),t.j41(67,"a",11),t.EFF(68),t.k0s()(),t.nrm(69,"mat-divider")(70,"mat-divider"),t.j41(71,"div",9),t.EFF(72,"Notes"),t.k0s(),t.j41(73,"mat-list-item")(74,"p"),t.EFF(75),t.k0s()()()(),t.DNE(76,ee,25,6,"div",6),t.j41(77,"div",20)(78,"div",14),t.nrm(79,"img",21),t.j41(80,"h2",22),t.EFF(81),t.k0s(),t.j41(82,"a",17),t.EFF(83," Restaurant "),t.k0s()(),t.j41(84,"mat-list",8)(85,"mat-list-item",8)(86,"mat-icon",10),t.EFF(87,"phone_android"),t.k0s(),t.j41(88,"a",18),t.EFF(89),t.k0s()(),t.nrm(90,"mat-divider"),t.j41(91,"mat-list-item")(92,"mat-icon",10),t.EFF(93,"location_on"),t.k0s(),t.j41(94,"a",11),t.EFF(95),t.k0s()(),t.DNE(96,ne,3,1,"mat-list-item",19),t.nrm(97,"mat-divider"),t.j41(98,"mat-list-item")(99,"mat-icon",10),t.EFF(100,"mail"),t.k0s(),t.j41(101,"a",11),t.EFF(102),t.k0s()()()()(),t.j41(103,"div",23),t.DNE(104,re,8,2,"div",24),t.j41(105,"div",25,1)(107,"div",26)(108,"div",27)(109,"table",28)(110,"thead",29)(111,"tr")(112,"th",30)(113,"div",31),t.EFF(114,"Items"),t.k0s()(),t.j41(115,"th",30)(116,"div",31),t.EFF(117," Qty"),t.k0s()(),t.j41(118,"th",30)(119,"div",31),t.EFF(120,"Price"),t.k0s()(),t.j41(121,"th",30)(122,"div",31),t.EFF(123,"Total Price"),t.k0s()(),t.j41(124,"th",30)(125,"div",32),t.EFF(126,"Action"),t.k0s()()()(),t.j41(127,"tbody",33),t.DNE(128,oe,25,11,"tr",34),t.j41(129,"tr")(130,"td",30)(131,"div",35),t.EFF(132,"Service Fee"),t.k0s()(),t.j41(133,"td",30)(134,"div",36),t.EFF(135,"-"),t.k0s()(),t.j41(136,"td",30)(137,"div",37),t.EFF(138,"-"),t.k0s()(),t.j41(139,"td",30)(140,"div",37),t.EFF(141),t.nI1(142,"currency"),t.k0s()(),t.j41(143,"td",30)(144,"div",38),t.EFF(145," - "),t.k0s()()(),t.j41(146,"tr")(147,"td",30)(148,"div",35),t.EFF(149,"Shipping Fee"),t.k0s()(),t.j41(150,"td",30)(151,"div",36),t.EFF(152,"-"),t.k0s()(),t.j41(153,"td",30)(154,"div",39),t.EFF(155,"-"),t.k0s()(),t.j41(156,"td",30)(157,"div",39),t.EFF(158),t.nI1(159,"currency"),t.k0s()(),t.j41(160,"td",30)(161,"div",38),t.EFF(162," - "),t.k0s()()(),t.j41(163,"tr")(164,"td",30)(165,"div",35),t.EFF(166,"Discount"),t.k0s()(),t.j41(167,"td",30)(168,"div",36),t.EFF(169,"-"),t.k0s()(),t.j41(170,"td",30)(171,"div",37),t.EFF(172,"-"),t.k0s()(),t.j41(173,"td",30)(174,"div",37),t.EFF(175),t.nI1(176,"currency"),t.k0s()(),t.j41(177,"td",30)(178,"div",38),t.EFF(179," - "),t.k0s()()()(),t.j41(180,"tfoot",40)(181,"tr",41)(182,"th",42)(183,"div",35),t.EFF(184,"Total"),t.k0s()(),t.j41(185,"td",30)(186,"div",36),t.EFF(187,"-"),t.k0s()(),t.j41(188,"td",30)(189,"div",43),t.EFF(190,"-"),t.k0s()(),t.j41(191,"td",30)(192,"div",43),t.EFF(193),t.nI1(194,"currency"),t.k0s()(),t.j41(195,"td",30)(196,"div",38),t.EFF(197," - "),t.k0s()()()(),t.j41(198,"tfoot",40)(199,"tr",41)(200,"th",42)(201,"div",35),t.EFF(202,"Driver Tips"),t.k0s()(),t.j41(203,"td",30)(204,"div",36),t.EFF(205,"-"),t.k0s()(),t.j41(206,"td",30)(207,"div",43),t.EFF(208,"-"),t.k0s()(),t.j41(209,"td",30)(210,"div",43),t.EFF(211),t.nI1(212,"currency"),t.k0s()(),t.j41(213,"td",30)(214,"div",38),t.EFF(215," - "),t.k0s()()()(),t.j41(216,"tfoot",44)(217,"tr",41)(218,"th",42)(219,"div",35),t.EFF(220,"Total Vendor Commission"),t.k0s()(),t.j41(221,"td",30)(222,"div",36),t.EFF(223,"-"),t.k0s()(),t.j41(224,"td",30)(225,"div",43),t.EFF(226,"-"),t.k0s()(),t.j41(227,"td",30)(228,"div",43),t.EFF(229),t.nI1(230,"currency"),t.k0s()(),t.j41(231,"td",30)(232,"div",38),t.EFF(233," - "),t.k0s()()()(),t.j41(234,"tfoot",45)(235,"tr",41)(236,"th",42)(237,"div",35),t.EFF(238,"Vendor Receive's"),t.k0s()(),t.j41(239,"td",30)(240,"div",36),t.EFF(241,"-"),t.k0s()(),t.j41(242,"td",30)(243,"div",43),t.EFF(244,"-"),t.k0s()(),t.j41(245,"td",30)(246,"div",43),t.EFF(247),t.nI1(248,"currency"),t.k0s()(),t.j41(249,"td",30)(250,"div",38),t.EFF(251," - "),t.k0s()()()(),t.j41(252,"tfoot",46)(253,"tr",41)(254,"th",42)(255,"div",35),t.EFF(256,"Shopbot Receives"),t.k0s()(),t.j41(257,"td",30)(258,"div",36),t.EFF(259,"-"),t.k0s()(),t.j41(260,"td",30)(261,"div",43),t.EFF(262,"-"),t.k0s()(),t.j41(263,"td",30)(264,"div",43),t.EFF(265),t.nI1(266,"currency"),t.k0s()(),t.j41(267,"td",30)(268,"div",38),t.EFF(269," - "),t.k0s()()()()()()()(),t.j41(270,"div",47)(271,"div",26)(272,"ol",48)(273,"li",49)(274,"div",50)(275,"div",51),t.qSk(),t.j41(276,"svg",52),t.nrm(277,"path",53),t.k0s()(),t.joV(),t.nrm(278,"div",54),t.k0s(),t.j41(279,"div",55)(280,"h3",56),t.EFF(281,"Order Created"),t.k0s(),t.j41(282,"time",57),t.EFF(283),t.nI1(284,"date"),t.k0s()()(),t.DNE(285,se,12,7,"li",58),t.k0s()()()()()}if(2&r){const i=t.sdS(3);t.R7$(),t.Y8G("ngIf","New"==n.order.category)("ngIfElse",i),t.R7$(5),t.Y8G("ngIf","Canceled"===n.order.status[0].name),t.R7$(4),t.SpI("Order reference #",n.order.reference,""),t.R7$(5),t.JRh(n.order.payment),t.R7$(6),t.JRh(n.order.paymentStatus),t.R7$(6),t.JRh(t.i5U(28,44,n.order.createdAt,"medium")),t.R7$(3),t.Y8G("ngIf",n.order.gift),t.R7$(12),t.SpI(" ",n.order.currentAppVersion||"No Version",""),t.R7$(3),t.Y8G("routerLink",t.eq3(74,$,n.order.user._id))("email",n.order.user.email),t.R7$(),t.Y8G("routerLink",t.eq3(76,Xt,n.order.user._id)),t.R7$(),t.JRh(n.order.user.name),t.R7$(),t.Y8G("routerLink",t.eq3(78,$,n.order.user._id)),t.R7$(6),t.Y8G("href","tel:"+n.order.user.phoneNumber,t.B4B),t.R7$(),t.JRh(n.order.user.phoneNumber),t.R7$(6),t.JRh(n.order.shipping.name+" "+n.order.shipping.administrativeArea),t.R7$(),t.Y8G("ngIf",n.order.shipping.streetName),t.R7$(6),t.JRh(n.order.user.phoneCredentials[0].deviceType+" "+n.order.user.phoneCredentials[0].make+" "+n.order.user.phoneCredentials[0].os),t.R7$(7),t.SpI("",n.order.orderInstruction||"No Notes"," "),t.R7$(),t.Y8G("ngIf",n.order.gift),t.R7$(3),t.Y8G("routerLink",t.eq3(80,R,n.order.store._id))("src",n.order.store.logo,t.B4B),t.R7$(),t.Y8G("routerLink",t.eq3(82,R,n.order.store._id)),t.R7$(),t.JRh(n.order.store.name),t.R7$(),t.Y8G("routerLink",t.eq3(84,R,n.order.user._id)),t.R7$(6),t.Y8G("href","tel:"+n.order.store.contactInfo.phone,t.B4B),t.R7$(),t.JRh(n.order.store.contactInfo.phone),t.R7$(6),t.JRh(n.order.store.contactInfo.placeNumber+" "+n.order.store.contactInfo.placeName+" "||0),t.R7$(),t.Y8G("ngIf",n.order.store.contactInfo.address),t.R7$(6),t.JRh(n.order.store.contactInfo.email),t.R7$(2),t.Y8G("ngIf","Schedule Delivery"===(null==n.order||null==n.order.deliveryTime?null:n.order.deliveryTime.name)),t.R7$(24),t.Y8G("ngForOf",n.order.cart.products),t.R7$(13),t.JRh(t.i5U(142,47,n.order.serviceFee,n.order.store.currency)),t.R7$(17),t.JRh(t.i5U(159,50,n.order.shippingFee,n.order.store.currency)),t.R7$(17),t.JRh(t.i5U(176,53,n.order.discount,n.order.store.currency)),t.R7$(18),t.SpI(" ",t.i5U(194,56,n.order.total,n.order.store.currency)," "),t.R7$(18),t.SpI(" ",t.i5U(212,59,n.order.driverTip||0,n.order.store.currency)," "),t.R7$(18),t.Lme(" ",t.i5U(230,62,n.order.vendorCommissionAmount,n.order.store.currency)," (",n.order.vendorCommission,"%) "),t.R7$(18),t.SpI(" ",t.i5U(248,65,n.order.subTotal-n.order.vendorCommissionAmount,n.order.store.currency)," "),t.R7$(18),t.SpI(" ",t.i5U(266,68,n.order.total-(n.order.subTotal-n.order.vendorCommissionAmount),n.order.store.currency)," "),t.R7$(18),t.JRh(t.i5U(284,71,n.order.createdAt,"medium")),t.R7$(2),t.Y8G("ngForOf",n.order.status)}},dependencies:[u.Sq,u.bT,f.Wk,Nt.wT,v.iY,b.rl,b.nJ,k.An,Yt.VO,_.jt,_.YE,_.ZV,_.EI,At.q,_.yE,g.DJ,g.BO,g.sA,g.UI,Vt.PW,F.BC,F.vS,Jt,u.oe,u.vh]})}return o})();var D=l(7586);let S=(()=>{class o{constructor(e){this.orderService=e}resolve(){return this.orderService.getOrders({data:{$match:{}},control:[{$sort:{createdAt:-1}},{$limit:20},{$skip:0}]})}static#t=this.\u0275fac=function(r){return new(r||o)(t.KVO(h.B))};static#e=this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),L=(()=>{class o{constructor(e){this.orderService=e}resolve(){return this.orderService.countOrders()}static#t=this.\u0275fac=function(r){return new(r||o)(t.KVO(h.B))};static#e=this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),T=(()=>{class o{constructor(e){this.orderService=e}resolve(e){const r=e.paramMap.get("id");return this.orderService.getOrder(r)}static#t=this.\u0275fac=function(r){return new(r||o)(t.KVO(h.B))};static#e=this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),de=(()=>{class o{constructor(e){this.orderService=e}resolve(e){const r=D().startOf("month").format("YYYY-MM-DD hh:mm"),n=D().endOf("month").format("YYYY-MM-DD hh:mm");return this.orderService.updateOrderCommission({startDate:r,endDate:n})}static#t=this.\u0275fac=function(r){return new(r||o)(t.KVO(h.B))};static#e=this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var G=l(1081);const ce=[{path:"",component:w,children:[{path:"list",component:It,resolve:{orders:S,totalOrders:L}},{path:":id/details",component:le,resolve:{order:T,riders:G.K}}]}];let me=(()=>{class o{static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275mod=t.$C({type:o});static#n=this.\u0275inj=t.G2t({imports:[f.iI.forChild(ce),f.iI]})}return o})();var ue=l(6924),fe=l(3457),pe=l(1002);let he=(()=>{class o{static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275mod=t.$C({type:o});static#n=this.\u0275inj=t.G2t({providers:[S,T,h.B,de,L,G.K,pe.D],imports:[u.MD,me,fe.G,ue.YF,F.X1,F.YN]})}return o})()}}]);