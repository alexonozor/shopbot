"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[943],{5943:(At,v,u)=>{u.r(v),u.d(v,{FundRequestsModule:()=>Ft});var f=u(6814),d=u(1896),t=u(5879);let w=(()=>{class n{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-fund-requests"]],decls:1,vars:0,template:function(o,i){1&o&&t._UZ(0,"router-outlet")},dependencies:[d.lC]})}return n})();var F=u(3365),l=u(5313),N=u(8337),q=u(6567),S=u(553),U=u(9862);let h=(()=>{class n{constructor(e){this._httpClient=e,this.hostServer=S.N.hostServer}createFundRequests(e){return this._httpClient.post(`${this.hostServer}/fund-requests`,e)}getFundRequests(){return this._httpClient.get(`${this.hostServer}/fund-requests`)}getFundRequest(e){return this._httpClient.get(`${this.hostServer}/fund-requests/${e}`)}deleteFundRequests(e){return this._httpClient.delete(`${this.hostServer}/fund-requests/${e}`)}updateFundRequests(e,o){return this._httpClient.put(`${this.hostServer}/fund-requests/${e}`,o)}updateStatusFundRequests(e,o){return this._httpClient.put(`${this.hostServer}/fund-requests/${e}/status`,o)}static#t=this.\u0275fac=function(o){return new(o||n)(t.LFG(U.eN))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac})}return n})();var k=u(7700),p=u(2296),x=u(617),I=u(5986),y=u(7988),c=u(3814);function D(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"span",2)(1,"button",22),t._uU(2),t.qZA(),t.TgZ(3,"button",23),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.updateStatus("Approve"))}),t.TgZ(4,"mat-icon",21),t._uU(5,"campaign"),t.qZA(),t._uU(6," Approve Fund Requests"),t.qZA(),t.TgZ(7,"button",24),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.updateStatus("Reject"))}),t.TgZ(8,"mat-icon",21),t._uU(9,"campaign"),t.qZA(),t._uU(10," Reject Fund Requests"),t.qZA(),t.TgZ(11,"button",25),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.deleteSelected())}),t.TgZ(12,"mat-icon",21),t._uU(13,"delete"),t.qZA(),t._uU(14," Delete Selected Fund Request"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.hij("",e.selection.selected.length," Selected")}}function J(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"th",26)(1,"mat-checkbox",27),t.NdJ("change",function(i){t.CHM(e);const r=t.oxw();return t.KtG(i?r.toggleAllRows():null)}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())("aria-label",e.checkboxLabel())}}function Q(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"td",28)(1,"mat-checkbox",29),t.NdJ("click",function(i){return i.stopPropagation()})("change",function(i){const m=t.CHM(e).$implicit,Z=t.oxw();return t.KtG(i?Z.selection.toggle(m):null)}),t.qZA()()}if(2&n){const e=s.$implicit,o=t.oxw();t.xp6(1),t.Q6J("checked",o.selection.isSelected(e))("aria-label",o.checkboxLabel(e))}}function Y(n,s){1&n&&(t.TgZ(0,"th",26),t._uU(1,"Created At"),t.qZA())}function E(n,s){if(1&n&&(t.TgZ(0,"td",28),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.createdAt,"medium"))}}function G(n,s){1&n&&(t.TgZ(0,"th",26),t._uU(1,"Requested By"),t.qZA())}function O(n,s){if(1&n&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.Oqu(e.requestedBy.name)}}function $(n,s){1&n&&(t.TgZ(0,"th",26),t._uU(1,"Category"),t.qZA())}function M(n,s){if(1&n&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.Oqu(e.category)}}function B(n,s){1&n&&(t.TgZ(0,"th",26),t._uU(1,"Status"),t.qZA())}function z(n,s){if(1&n&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.hij(" ",e.status,"")}}function H(n,s){1&n&&(t.TgZ(0,"th",26),t._uU(1,"Requested Items"),t.qZA())}function K(n,s){if(1&n&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.Oqu(e.items.length)}}function j(n,s){1&n&&(t.TgZ(0,"th",26),t._uU(1,"Total"),t.qZA())}function V(n,s){if(1&n&&(t.TgZ(0,"td",28),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.total,e.currency))}}function X(n,s){1&n&&(t.TgZ(0,"th",26),t._uU(1,"Actions"),t.qZA())}const W=function(n){return["../",n,"edit"]};function P(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"td",28)(1,"button",30)(2,"mat-icon"),t._uU(3,"more_vert"),t.qZA()(),t.TgZ(4,"mat-menu",null,31)(6,"button",32),t.NdJ("click",function(){const i=t.CHM(e),r=i.$implicit,m=i.index,Z=t.oxw();return t.KtG(Z.deleteFundRequest(r._id,m))}),t.TgZ(7,"mat-icon",33),t._uU(8,"delete"),t.qZA(),t.TgZ(9,"span"),t._uU(10,"Delete"),t.qZA()(),t.TgZ(11,"button",34)(12,"mat-icon",33),t._uU(13,"visibility"),t.qZA(),t.TgZ(14,"span"),t._uU(15,"View Request"),t.qZA()()()()}if(2&n){const e=s.$implicit,o=t.MAs(5);t.xp6(1),t.Q6J("matMenuTriggerFor",o),t.xp6(10),t.Q6J("routerLink",t.VKq(2,W,e._id))}}function tt(n,s){1&n&&t._UZ(0,"tr",35)}function et(n,s){1&n&&t._UZ(0,"tr",36)}const nt=function(){return[15,30,60]},ot=function(){return["../","new"]};let it=(()=>{class n{constructor(e,o,i){this.route=e,this.fundRequestsService=o,this._matDialog=i,this.displayedColumns=["select","createdAt","requestedBy","category","status","items","total","actions"],this.dataSource=new l.by([]),this.selection=new N.Ov(!0,[])}ngAfterViewInit(){this.dataSource.paginator=this.paginator}ngOnInit(){this.dataSource=new l.by(this.route.snapshot.data.funds)}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}deleteSelected(){this.confirmDialogRef=this._matDialog.open(q.X,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Fund Request?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete these Fund Request?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(e=>{e&&this.selection.selected.forEach((o,i)=>{this.dataSource.data.splice(i,1),this.dataSource=new l.by(this.dataSource.data),this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.fundRequestsService.deleteFundRequests(o._id).subscribe()})})}updateStatus(e){this.confirmDialogRef=this._matDialog.open(q.X,{disableClose:!1}),this.confirmDialogRef.componentInstance.title=`${e} Fund Request?`,this.confirmDialogRef.componentInstance.confirmMessage=`Are you sure you want to ${e} these Fund Request?`,this.confirmDialogRef.componentInstance.confirmButton=`${e}`,this.confirmDialogRef.afterClosed().subscribe(o=>{o&&this.selection.selected.forEach((i,r)=>{i.status=e,this.dataSource=new l.by(this.dataSource.data),this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.fundRequestsService.updateStatusFundRequests(i._id,{status:e,id:i.requestedBy._id}).subscribe({})})})}checkboxLabel(e){return e?`${this.selection.isSelected(e)?"deselect":"select"} row ${e.position+1}`:(this.isAllSelected()?"deselect":"select")+" all"}deleteFundRequest(e,o){this.confirmDialogRef=this._matDialog.open(q.X,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Fund Requests?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete this Fund Requests?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(i=>{i&&(this.dataSource.data.splice(o,1),this.dataSource=new l.by(this.dataSource.data),this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.fundRequestsService.deleteFundRequests(e).subscribe())})}update(e,o){this.fundRequestsService.updateFundRequests(e,{enabled:o.checked}).subscribe(i=>{})}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(d.gz),t.Y36(h),t.Y36(k.uw))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-fund-requests-list"]],viewQuery:function(o,i){if(1&o&&t.Gf(F.NW,5),2&o){let r;t.iGM(r=t.CRH())&&(i.paginator=r.first)}},decls:38,vars:8,consts:[[1,"h-screen","w-full"],["fxLayout","row","fxLayoutGap","10px","fxLayoutAlign","start center",1,"card","bg-white","w-full","mat-elevation-z2","px-2","py-2"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"text-lg","font-thin"],[1,"text-2xl"],["class","text-lg font-thin","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",4,"ngIf"],[1,"mat-elevation-z8"],["mat-table","",1,"w-full",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","createdAt"],["matColumnDef","requestedBy"],["matColumnDef","category"],["matColumnDef","status"],["matColumnDef","items"],["matColumnDef","total"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["mat-fab","","color","primary",2,"position","fixed","bottom","80px","right","15px",3,"routerLink"],[1,"mat-18"],["mat-button",""],["mat-stroked-button","","color","primary",3,"click"],["mat-stroked-button","","color","accent",3,"click"],["mat-stroked-button","","color","warn",3,"click"],["mat-header-cell",""],[3,"checked","indeterminate","aria-label","change"],["mat-cell",""],[3,"checked","aria-label","click","change"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],[1,"material-icons-outlined"],["mat-menu-item","",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span",2)(3,"span",3),t._uU(4,"Fund Requests"),t.qZA()(),t.YNc(5,D,15,1,"span",4),t.qZA(),t.TgZ(6,"div",5)(7,"table",6),t.ynx(8,7),t.YNc(9,J,2,3,"th",8),t.YNc(10,Q,2,2,"td",9),t.BQk(),t.ynx(11,10),t.YNc(12,Y,2,0,"th",8),t.YNc(13,E,3,4,"td",9),t.BQk(),t.ynx(14,11),t.YNc(15,G,2,0,"th",8),t.YNc(16,O,2,1,"td",9),t.BQk(),t.ynx(17,12),t.YNc(18,$,2,0,"th",8),t.YNc(19,M,2,1,"td",9),t.BQk(),t.ynx(20,13),t.YNc(21,B,2,0,"th",8),t.YNc(22,z,2,1,"td",9),t.BQk(),t.ynx(23,14),t.YNc(24,H,2,0,"th",8),t.YNc(25,K,2,1,"td",9),t.BQk(),t.ynx(26,15),t.YNc(27,j,2,0,"th",8),t.YNc(28,V,3,4,"td",9),t.BQk(),t.ynx(29,16),t.YNc(30,X,2,0,"th",8),t.YNc(31,P,16,4,"td",9),t.BQk(),t.YNc(32,tt,1,0,"tr",17),t.YNc(33,et,1,0,"tr",18),t.qZA(),t._UZ(34,"mat-paginator",19),t.qZA(),t.TgZ(35,"button",20)(36,"mat-icon",21),t._uU(37,"add"),t.qZA()()()),2&o&&(t.xp6(5),t.Q6J("ngIf",i.selection.selected.length),t.xp6(2),t.Q6J("dataSource",i.dataSource),t.xp6(25),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(6,nt)),t.xp6(1),t.Q6J("routerLink",t.DdM(7,ot)))},dependencies:[f.O5,d.rH,p.lW,p.RK,p.cs,x.Hw,F.NW,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,I.oG,y.VK,y.OP,y.p6,c.xw,c.SQ,c.Wh,f.H9,f.uU]})}return n})();var a=u(6223),A=u(7175),C=u(3680),g=u(9157),T=u(2032),b=u(8525);function at(n,s){if(1&n&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function st(n,s){if(1&n&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e.country),t.xp6(1),t.hij(" ",e.country," ")}}function ut(n,s){if(1&n&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e.countryCode),t.xp6(1),t.hij(" ",e.currencyCode," ")}}function rt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",22)(1,"mat-form-field",23)(2,"mat-label"),t._uU(3,"Item Name"),t.qZA(),t._UZ(4,"input",24),t.qZA(),t.TgZ(5,"mat-form-field",23)(6,"mat-label"),t._uU(7,"Price"),t.qZA(),t._UZ(8,"input",25),t.qZA(),t.TgZ(9,"mat-form-field",23)(10,"mat-label"),t._uU(11,"Quantity"),t.qZA(),t._UZ(12,"input",26),t.qZA(),t.TgZ(13,"mat-form-field",23)(14,"mat-label"),t._uU(15,"Note"),t.qZA(),t._UZ(16,"input",27),t.qZA(),t.TgZ(17,"button",28),t.NdJ("click",function(){const r=t.CHM(e).index,m=t.oxw();return t.KtG(m.removeItems(r))}),t.TgZ(18,"mat-icon"),t._uU(19,"delete"),t.qZA()()()}2&n&&t.Q6J("formGroupName",s.index)}const lt=function(){return["Operations","Marketing","Mentainace","Trip"]};let ct=(()=>{class n{constructor(e,o,i,r,m){this.fb=e,this.auth=o,this.route=i,this.requestedFundService=r,this.router=m,this.requestForm=this.fb.group({requestedBy:[this.auth.currentUser._id,a.kI.required],category:["",a.kI.required],status:["Pending",a.kI.required],items:this.fb.array([]),total:[{value:0,disabled:!0},a.kI.required],currency:["",a.kI.required],country:["",a.kI.required],description:[""]}),this.isLoading=!1,this.deliveries=[]}ngOnInit(){this.addItems(),this.deliveries=this.route.snapshot.data.deliveries}newItems(){const e=this.fb.group({item:["",a.kI.required],price:["",a.kI.required],quantity:["",a.kI.required],note:["",a.kI.required]});return e.valueChanges.subscribe(()=>{this.calculateTotal()}),e}calculateTotal(){let e=0;this.items.controls.forEach(o=>{const i=o.get("price").value,r=o.get("quantity").value;i&&r&&(e+=i*r)}),this.requestForm.patchValue({total:e})}addItems(){this.items.push(this.newItems())}removeItems(e){this.items.removeAt(e)}get items(){return this.requestForm.get("items")}submit(){this.requestedFundService.createFundRequests(this.requestForm.getRawValue()).subscribe(()=>{this.back()})}back(){this.router.navigate(["dashboard","reports","fund-requests","list"])}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(a.qu),t.Y36(A.e),t.Y36(d.gz),t.Y36(h),t.Y36(d.F0))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-new-fund-requests"]],decls:46,vars:8,consts:[["fxLayout","row","fxLayoutGap","10px","fxLayoutAlign","start center",1,"card","bg-white","w-full","mat-elevation-z2","px-2","py-2"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"text-lg","font-thin"],[1,"text-2xl"],[1,"mat-elevation-z3","container","mx-auto","my-10","w-full","p-5"],[3,"formGroup","ngSubmit"],["fxLayout","column","fxLayoutAlign","start start"],["fxLayout.gt-md","row",1,"w-full"],["appearance","outline",1,"w-full"],["formControlName","category"],[3,"value",4,"ngFor","ngForOf"],["formControlName","country"],["formControlName","currency"],["formArrayName","items"],["mat-button","","color","primary",3,"click"],["fxLayout.gt-md","row","fxLayoutAlign.gt-md","space-around start","fxLayout.lt-lg","column","fxLayoutAlign.lt-lg","space-around stretch","class","w-full","fxLayoutGap","10px",3,"formGroupName",4,"ngFor","ngForOf"],["fxLayout.gt-md","row","fxLayoutAlign.gt-md","space-around start","fxLayout.lt-lg","column","fxLayoutAlign.lt-lg","space-around stretch",1,"w-full"],["matInput","","type","number","cancellation","note","formControlName","total"],["matInput","","cancellation","Short Description","formControlName","description"],["fxLayout.gt-md","row","fxLayoutAlign.gt-md","space-around start","fxLayout.lt-lg","column","fxLayoutAlign.lt-lg","space-around stretch","fxLayoutGap","10px",1,"w-full"],["mat-raised-button","","fxFlex","50%",3,"click"],["mat-raised-button","","fxFlex","50%","color","primary",3,"disabled"],[3,"value"],["fxLayout.gt-md","row","fxLayoutAlign.gt-md","space-around start","fxLayout.lt-lg","column","fxLayoutAlign.lt-lg","space-around stretch","fxLayoutGap","10px",1,"w-full",3,"formGroupName"],["appearance","outline","fxFlex.gt-md","50%",1,"full-width"],["matInput","","type","text","cancellation","Enter an item name","formControlName","item"],["matInput","","type","number","cancellation","Enter an item price","formControlName","price"],["matInput","","type","number","cancellation","Enter quantity","formControlName","quantity"],["matInput","","type","text","cancellation","note","formControlName","note"],["mat-icon-button","","color","warn","fxFlexAlign","auto",3,"click"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"span",1)(2,"span",2),t._uU(3,"Create Fund Requests"),t.qZA()()(),t.TgZ(4,"div",3)(5,"form",4),t.NdJ("ngSubmit",function(){return i.submit()}),t.TgZ(6,"div",5)(7,"div",6)(8,"mat-form-field",7)(9,"mat-label"),t._uU(10,"Category"),t.qZA(),t.TgZ(11,"mat-select",8),t.YNc(12,at,2,2,"mat-option",9),t.qZA()()(),t.TgZ(13,"div",6)(14,"mat-form-field",7)(15,"mat-label"),t._uU(16,"Country"),t.qZA(),t.TgZ(17,"mat-select",10),t.YNc(18,st,2,2,"mat-option",9),t.qZA()()(),t.TgZ(19,"div",6)(20,"mat-form-field",7)(21,"mat-label"),t._uU(22,"Currency"),t.qZA(),t.TgZ(23,"mat-select",11),t.YNc(24,ut,2,2,"mat-option",9),t.qZA()()(),t.ynx(25,12),t.TgZ(26,"a",13),t.NdJ("click",function(){return i.addItems()}),t.TgZ(27,"mat-icon"),t._uU(28,"add"),t.qZA(),t._uU(29," ADD ITEMS"),t.qZA(),t.YNc(30,rt,20,1,"div",14),t.BQk(),t.TgZ(31,"div",15)(32,"mat-form-field",7)(33,"mat-label"),t._uU(34,"Total"),t.qZA(),t._UZ(35,"input",16),t.qZA()(),t.TgZ(36,"div",15)(37,"mat-form-field",7)(38,"mat-label"),t._uU(39,"Note"),t.qZA(),t._UZ(40,"textarea",17),t.qZA()(),t.TgZ(41,"div",18)(42,"a",19),t.NdJ("click",function(){return i.back()}),t._uU(43,"CANCEL"),t.qZA(),t.TgZ(44,"button",20),t._uU(45),t.qZA()()()()()),2&o&&(t.xp6(5),t.Q6J("formGroup",i.requestForm),t.xp6(7),t.Q6J("ngForOf",t.DdM(7,lt)),t.xp6(6),t.Q6J("ngForOf",i.deliveries),t.xp6(6),t.Q6J("ngForOf",i.deliveries),t.xp6(6),t.Q6J("ngForOf",i.items.controls),t.xp6(14),t.Q6J("disabled",i.requestForm.invalid),t.xp6(1),t.Oqu(i.isLoading?"CHECKING...":"SAVE"))},dependencies:[f.sg,C.ey,p.zs,p.lW,p.RK,g.KE,g.hX,x.Hw,T.Nt,b.gD,c.xw,c.SQ,c.Wh,c.XD,c.yH,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.sg,a.u,a.x0,a.CE]})}return n})(),R=(()=>{class n{constructor(e){this.fundRequestService=e}resolve(){return this.fundRequestService.getFundRequests()}static#t=this.\u0275fac=function(o){return new(o||n)(t.LFG(h))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),L=(()=>{class n{constructor(e){this.fundRequestService=e}resolve(e){const o=e.paramMap.get("id");return this.fundRequestService.getFundRequest(o)}static#t=this.\u0275fac=function(o){return new(o||n)(t.LFG(h))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mt(n,s){if(1&n&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function dt(n,s){if(1&n&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e.country),t.xp6(1),t.hij(" ",e.country," ")}}function pt(n,s){if(1&n&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e.currencyCode),t.xp6(1),t.Oqu(e.currencyCode)}}function ft(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",22)(1,"mat-form-field",23)(2,"mat-label"),t._uU(3,"Item Name"),t.qZA(),t._UZ(4,"input",24),t.qZA(),t.TgZ(5,"mat-form-field",23)(6,"mat-label"),t._uU(7,"Price"),t.qZA(),t._UZ(8,"input",25),t.qZA(),t.TgZ(9,"mat-form-field",23)(10,"mat-label"),t._uU(11,"Quantity"),t.qZA(),t._UZ(12,"input",26),t.qZA(),t.TgZ(13,"mat-form-field",23)(14,"mat-label"),t._uU(15,"Note"),t.qZA(),t._UZ(16,"input",27),t.qZA(),t.TgZ(17,"button",28),t.NdJ("click",function(){const r=t.CHM(e).index,m=t.oxw();return t.KtG(m.removeItems(r))}),t.TgZ(18,"mat-icon"),t._uU(19,"delete"),t.qZA()()()}2&n&&t.Q6J("formGroupName",s.index)}const ht=function(){return["Operations","Marketing","Mentainace","Trip"]};let gt=(()=>{class n{constructor(e,o,i,r,m){this.fb=e,this.auth=o,this.requestedFundService=i,this.router=r,this.route=m,this.isLoading=!1,this.deliveries=[],this.fund=this.route.snapshot.data.fund,this.deliveries=this.route.snapshot.data.deliveries}ngOnInit(){this.requestForm=this.fb.group({requestedBy:[this.auth.currentUser._id,a.kI.required],category:[this.fund.category,a.kI.required],status:[this.fund.status,a.kI.required],items:this.fb.array([]),total:[{value:this.fund.total,disabled:!0},a.kI.required],country:[this.fund.country,a.kI.required],currency:[this.fund.currency,a.kI.required],description:[this.fund.description]}),this.fund.items.forEach(e=>{this.addItems(e)})}newItems(e){const o=this.fb.group({item:[e?.item,a.kI.required],price:[e?.price,a.kI.required],quantity:[e?.quantity,a.kI.required],note:[e?.note,a.kI.required]});return o.valueChanges.subscribe(()=>{this.calculateTotal()}),o}calculateTotal(){let e=0;this.items.controls.forEach(o=>{const i=o.get("price").value,r=o.get("quantity").value;i&&r&&(e+=i*r)}),this.requestForm.patchValue({total:e})}addItems(e){this.items.push(this.newItems(e))}removeItems(e){this.items.removeAt(e)}get items(){return this.requestForm.get("items")}submit(){this.requestedFundService.updateFundRequests(this.fund._id,this.requestForm.getRawValue()).subscribe(()=>{this.back()})}back(){this.router.navigate(["dashboard","reports","fund-requests","list"])}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(a.qu),t.Y36(A.e),t.Y36(h),t.Y36(d.F0),t.Y36(d.gz))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-edit-fund-requests"]],decls:46,vars:8,consts:[["fxLayout","row","fxLayoutGap","10px","fxLayoutAlign","start center",1,"card","bg-white","w-full","mat-elevation-z2","px-2","py-2"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"text-lg","font-thin"],[1,"text-2xl"],[1,"mat-elevation-z3","container","mx-auto","my-10","w-full","p-5"],[3,"formGroup","ngSubmit"],["fxLayout","column","fxLayoutAlign","start start"],["fxLayout.gt-md","row",1,"w-full"],["appearance","outline",1,"w-full"],["formControlName","category"],[3,"value",4,"ngFor","ngForOf"],["formControlName","country"],["formControlName","currency"],["formArrayName","items"],["mat-button","","color","primary",3,"click"],["fxLayout.gt-md","row","fxLayoutAlign.gt-md","space-around start","fxLayout.lt-lg","column","fxLayoutAlign.lt-lg","space-around stretch","class","w-full","fxLayoutGap","10px",3,"formGroupName",4,"ngFor","ngForOf"],["fxLayout.gt-md","row","fxLayoutAlign.gt-md","space-around start","fxLayout.lt-lg","column","fxLayoutAlign.lt-lg","space-around stretch",1,"w-full"],["matInput","","type","number","cancellation","note","formControlName","total"],["matInput","","cancellation","Short Description","formControlName","description"],["fxLayout.gt-md","row","fxLayoutAlign.gt-md","space-around start","fxLayout.lt-lg","column","fxLayoutAlign.lt-lg","space-around stretch","fxLayoutGap","10px",1,"w-full"],["mat-raised-button","","fxFlex","50%",3,"click"],["mat-raised-button","","fxFlex","50%","color","primary",3,"disabled"],[3,"value"],["fxLayout.gt-md","row","fxLayoutAlign.gt-md","space-around start","fxLayout.lt-lg","column","fxLayoutAlign.lt-lg","space-around stretch","fxLayoutGap","10px",1,"w-full",3,"formGroupName"],["appearance","outline","fxFlex.gt-md","50%",1,"full-width"],["matInput","","type","text","cancellation","Enter an item name","formControlName","item"],["matInput","","type","number","cancellation","Enter an item price","formControlName","price"],["matInput","","type","number","cancellation","Enter quantity","formControlName","quantity"],["matInput","","type","text","cancellation","note","formControlName","note"],["mat-icon-button","","color","warn","fxFlexAlign","auto",3,"click"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"span",1)(2,"span",2),t._uU(3,"Create Fund Requests"),t.qZA()()(),t.TgZ(4,"div",3)(5,"form",4),t.NdJ("ngSubmit",function(){return i.submit()}),t.TgZ(6,"div",5)(7,"div",6)(8,"mat-form-field",7)(9,"mat-label"),t._uU(10,"Category"),t.qZA(),t.TgZ(11,"mat-select",8),t.YNc(12,mt,2,2,"mat-option",9),t.qZA()()(),t.TgZ(13,"div",6)(14,"mat-form-field",7)(15,"mat-label"),t._uU(16,"Country"),t.qZA(),t.TgZ(17,"mat-select",10),t.YNc(18,dt,2,2,"mat-option",9),t.qZA()()(),t.TgZ(19,"div",6)(20,"mat-form-field",7)(21,"mat-label"),t._uU(22,"Currency"),t.qZA(),t.TgZ(23,"mat-select",11),t.YNc(24,pt,2,2,"mat-option",9),t.qZA()()(),t.ynx(25,12),t.TgZ(26,"a",13),t.NdJ("click",function(){return i.addItems()}),t.TgZ(27,"mat-icon"),t._uU(28,"add"),t.qZA(),t._uU(29," ADD ITEMS"),t.qZA(),t.YNc(30,ft,20,1,"div",14),t.BQk(),t.TgZ(31,"div",15)(32,"mat-form-field",7)(33,"mat-label"),t._uU(34,"Total"),t.qZA(),t._UZ(35,"input",16),t.qZA()(),t.TgZ(36,"div",15)(37,"mat-form-field",7)(38,"mat-label"),t._uU(39,"Note"),t.qZA(),t._UZ(40,"textarea",17),t.qZA()(),t.TgZ(41,"div",18)(42,"a",19),t.NdJ("click",function(){return i.back()}),t._uU(43,"CANCEL"),t.qZA(),t.TgZ(44,"button",20),t._uU(45),t.qZA()()()()()),2&o&&(t.xp6(5),t.Q6J("formGroup",i.requestForm),t.xp6(7),t.Q6J("ngForOf",t.DdM(7,ht)),t.xp6(6),t.Q6J("ngForOf",i.deliveries),t.xp6(6),t.Q6J("ngForOf",i.deliveries),t.xp6(6),t.Q6J("ngForOf",i.items.controls),t.xp6(14),t.Q6J("disabled",i.requestForm.invalid),t.xp6(1),t.Oqu(i.isLoading?"CHECKING...":"SAVE"))},dependencies:[f.sg,C.ey,p.zs,p.lW,p.RK,g.KE,g.hX,x.Hw,T.Nt,b.gD,c.xw,c.SQ,c.Wh,c.XD,c.yH,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.sg,a.u,a.x0,a.CE]})}return n})();var _=u(3212);const _t=[{path:"",component:w,children:[{path:"list",component:it,resolve:{funds:R}},{path:"new",component:ct,resolve:{deliveries:_.h}},{path:":id/edit",component:gt,resolve:{fund:L,deliveries:_.h}}]}];let qt=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[d.Bz.forChild(_t),d.Bz]})}return n})();var xt=u(1447),yt=u(6005),Zt=u(6208),vt=u(547);let Ft=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({providers:[R,h,L,_.h,_.g,vt._],imports:[f.ez,qt,yt.q,xt.o9,a.UX,a.u5,Zt.m]})}return n})()}}]);