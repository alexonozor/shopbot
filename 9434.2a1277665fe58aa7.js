(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[9434],{9434:(k,A,O)=>{"use strict";O.r(A),O.d(A,{BusinessHoursTabComponent:()=>h});var w=O(9417),u=O(7586),c=O(6625),o=O(5749),b=O(980),D=O(177),f=O(6924),g=O(3457),v=O(8910),e=O(3953),M=O(5416),_=O(8498),S=O(8834),L=O(9213),P=O(2765),E=O(7575),i=O(1997),n=O(450),t=O(2920);function a(p,y){1&p&&e.nrm(0,"mat-progress-bar",11)}function s(p,y){if(1&p&&(e.j41(0,"div",12)(1,"div",13)(2,"section",14)(3,"p"),e.EFF(4,"Never open on:"),e.k0s(),e.nrm(5,"mat-slide-toggle",15),e.j41(6,"p")(7,"strong"),e.EFF(8),e.nI1(9,"titlecase"),e.k0s()()()(),e.j41(10,"div",16),e.nrm(11,"ngx-mat-timepicker",17)(12,"ngx-mat-timepicker",18),e.k0s(),e.j41(13,"section",19)(14,"mat-checkbox",20),e.EFF(15,"Closed for the day"),e.k0s()()()),2&p){const d=y.$implicit;e.Y8G("formGroupName",d.day),e.R7$(8),e.SpI("",e.bMT(9,4,d.day)," "),e.R7$(3),e.Y8G("enableMeridian",!0),e.R7$(),e.Y8G("enableMeridian",!0)}}const{range:l}=(0,c.extendMoment)(u);let h=(()=>{class p{constructor(d,T,x,R){this._formBuilder=d,this.storeService=T,this._snackBar=x,this.route=R,this.isLoading=!1,this.store=this.route.parent?.parent?.snapshot.data.store}ngOnInit(){let d=l(u().day(0),u().day(6)),x=Array.from(d.by("days")).map(C=>({date:C.format("YYYY-MM-DD"),openingTime:C,closingTime:C,day:C.format("dddd").toLowerCase(),closed:!1,referenceDate:C,neverOpen:!1}));this.days=x;let j=Object.keys(this.store.businessHours).map(C=>({...this.store.businessHours[C]}));this.businessHoursForm=this.createProductForm(j),console.log(this.businessHoursForm.value)}createProductForm(d){return this._formBuilder.group({businessHours:this._formBuilder.group({...this.newOptions(d)})})}newOptions(d){let T={};for(let x=0;x<d.length;x++)T[d[x].name.toLowerCase()]=this._formBuilder.group({name:[d[x].name,w.k0.required],openingTime:[new Date(d[x].openingTime),w.k0.required],closingTime:[new Date(d[x].closingTime),w.k0.required],closed:d[x].closed,neverOpen:d[x].neverOpen});return T}formatDateTimeTo12Hrs(d){const T=u(d).format("YYYY-MM-DD hh:mm A");return u(T,"YYYY-MM-DD hh:mm A")}changeStoreStatus(){this.isLoading=!0,this.store.paused=!this.store.paused,this.storeService.saveStore({paused:this.store.paused},this.store._id).pipe((0,b.j)(()=>this.isLoading=!1)).subscribe(d=>{this._snackBar.open(this.store.paused?"Store has been paused":"Store was resumed","ok",{duration:5e3,horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition})})}save(){this.isLoading=!0,this.storeService.saveStore(this.businessHoursForm.getRawValue(),this.store._id).pipe((0,b.j)(()=>this.isLoading=!1)).subscribe(d=>{this._snackBar.open("Opening Hour update","ok",{duration:5e3,horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition})})}static#t=this.\u0275fac=function(T){return new(T||p)(e.rXU(w.ok),e.rXU(o.n),e.rXU(M.UG),e.rXU(_.nX))};static#e=this.\u0275cmp=e.VBU({type:p,selectors:[["app-business-hours-tab"]],inputs:{store:"store"},standalone:!0,features:[e.Jv_([o.n]),e.aNF],decls:22,vars:9,consts:[["fxLayout","row","fxLayout.lt-md","column","fxLayoutAlign","space-between center","fxLayoutAlign.lt-md","start start",1,"header"],["fxLayout","column","fxLayoutAlign","start start",1,"mt-3"],[1,"details"],["fxLayout","row","fxLayoutAlign","space-between center","fxLayoutGap","10px"],["mat-button","",3,"click","color"],[1,"mat-18"],["mat-raised-button","","color","primary",3,"click","disabled"],["mode","indeterminate",4,"ngIf"],[3,"formGroup"],["formGroupName","businessHours"],["fxLayout","row","fxLayoutAlign","space-between center","fxLayout.lt-md","column","fxLayoutAlign.lt-md","start start","class","days",3,"formGroupName",4,"ngFor","ngForOf"],["mode","indeterminate"],["fxLayout","row","fxLayoutAlign","space-between center","fxLayout.lt-md","column","fxLayoutAlign.lt-md","start start",1,"days",3,"formGroupName"],["fxLayout.lg-sm","column","fxLayoutAlign.lg-sm","space-around start","fxFlex","20"],["fxLayout","column","fxLayoutAlign","space-between start","fxLayoutGap","10px","fxLayout.lt-md","row","fxLayoutAlign.lt-md","space-between start",1,"example-section"],["color","primary","formControlName","neverOpen",1,"example-margin"],["fxLayout","row","fxLayoutAlign","space-around start","fxLayout.lt-md","column","fxLayoutAlign.lt-md","start stretch","fxFlex","60"],["formControlName","openingTime",3,"enableMeridian"],["formControlName","closingTime",3,"enableMeridian"],["fxLayout","column","fxLayoutAlign","space-between center","fxFlex","20",1,"example-section"],["formControlName","closed",1,"example-margin"]],template:function(T,x){1&T&&(e.j41(0,"div",0)(1,"div",1)(2,"h3")(3,"strong"),e.EFF(4),e.k0s()(),e.j41(5,"div",2)(6,"p"),e.EFF(7),e.k0s()()(),e.j41(8,"div",3)(9,"button",4),e.bIt("click",function(){return x.changeStoreStatus()}),e.j41(10,"mat-icon",5),e.EFF(11),e.k0s(),e.EFF(12),e.k0s(),e.j41(13,"button",6),e.bIt("click",function(){return x.save()}),e.j41(14,"mat-icon",5),e.EFF(15,"add"),e.k0s(),e.EFF(16," SAVE STORE "),e.k0s()()(),e.nrm(17,"mat-divider"),e.DNE(18,a,1,0,"mat-progress-bar",7),e.j41(19,"form",8)(20,"div",9),e.DNE(21,s,16,6,"div",10),e.k0s()()),2&T&&(e.R7$(4),e.SpI("Opening hours for ",x.store.name,""),e.R7$(3),e.SpI("Set opening hours and special closures for ",x.store.name,""),e.R7$(2),e.Y8G("color",x.store.paused?"primary":"warn"),e.R7$(2),e.SpI("",x.store.paused?"play_arrow":"pause"," "),e.R7$(),e.SpI(" ",x.store.paused?"RESUME STORE":"PAUSE STORE",""),e.R7$(),e.Y8G("disabled",x.isLoading),e.R7$(5),e.Y8G("ngIf",x.isLoading),e.R7$(),e.Y8G("formGroup",x.businessHoursForm),e.R7$(2),e.Y8G("ngForOf",x.days))},dependencies:[g.G,S.$z,L.An,P.So,E.HM,i.q,n.sG,D.MD,D.Sq,D.bT,D.PV,w.YN,w.qT,w.BC,w.cb,w.X1,w.j4,w.JD,w.$R,f.YF,t.DJ,t.BO,t.sA,t.UI,v.Hw,v.T_,v.gu,v.Xg],styles:[".dash[_ngcontent-%COMP%]{border:10px black;width:34px;background:#000;height:2px}.days[_ngcontent-%COMP%]{padding:10px 30px;border-bottom:1px solid #ccc}.days[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 12px}.header[_ngcontent-%COMP%]{margin-top:30px;border-bottom:2px #ccc;width:100%;padding:0 20px}.header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0}"]})}return p})()},6625:function(k,A,O){var w;k.exports=(w=O(7586),function(u){function m(r){if(c[r])return c[r].exports;var o=c[r]={i:r,l:!1,exports:{}};return u[r].call(o.exports,o,o.exports,m),o.l=!0,o.exports}var c={};return m.m=u,m.c=c,m.i=function(r){return r},m.d=function(r,o,b){m.o(r,o)||Object.defineProperty(r,o,{configurable:!1,enumerable:!0,get:b})},m.n=function(r){var o=r&&r.__esModule?function(){return r.default}:function(){return r};return m.d(o,"a",o),o},m.o=function(r,o){return Object.prototype.hasOwnProperty.call(r,o)},m.p="",m(m.s=3)}([function(u,m,c){"use strict";var r=c(5)();u.exports=function(o){return o!==r&&null!==o}},function(u,m,c){"use strict";u.exports=c(18)()?Symbol:c(20)},function(u,m){u.exports=w},function(u,m,c){"use strict";function r(i){return i&&i.__esModule?i:{default:i}}function o(i,n,t){return n in i?Object.defineProperty(i,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[n]=t,i}function f(i){return i.split("/")}Object.defineProperty(m,"__esModule",{value:!0}),m.DateRange=void 0;var g=function(){return function(n,t){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return function i(n,t){var a=[],s=!0,l=!1,h=void 0;try{for(var p,y=n[Symbol.iterator]();!(s=(p=y.next()).done)&&(a.push(p.value),!t||a.length!==t);s=!0);}catch(d){l=!0,h=d}finally{try{!s&&y.return&&y.return()}finally{if(l)throw h}}return a}(n,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},e=function(){function i(n,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(n,s.key,s)}}return function(n,t,a){return t&&i(n.prototype,t),a&&i(n,a),n}}();m.extendMoment=function D(i){return i.range=function(n,t){return"string"==typeof n&&P.hasOwnProperty(n)?new E(i(this).startOf(n),i(this).endOf(n)):new E(n,t)},i.rangeFromInterval=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i();if(i.isMoment(a)||(a=i(a)),!a.isValid())throw new Error("Invalid date.");var s=a.clone().add(t,n),l=[];return l.push(i.min(a,s)),l.push(i.max(a,s)),new E(l)},i.rangeFromISOString=function(n){var t=f(n),a=i.parseZone(t[0]),s=i.parseZone(t[1]);return new E(a,s)},i.parseZoneRange=i.rangeFromISOString,i.fn.range=i.range,i.range.constructor=E,i.isRange=function(n){return n instanceof E},i.fn.within=function(n){return n.contains(this.toDate())},i};var _=r(c(2)),L=r(c(1)),P={year:!0,quarter:!0,month:!0,week:!0,day:!0,hour:!0,minute:!0,second:!0},E=m.DateRange=function(){function i(n,t){!function b(i,n){if(!(i instanceof n))throw new TypeError("Cannot call a class as a function")}(this,i);var a=n,s=t;if(1===arguments.length||void 0===t)if("object"===(void 0===n?"undefined":v(n))&&2===n.length){var l=g(n,2);a=l[0],s=l[1]}else if("string"==typeof n){var h=f(n),p=g(h,2);a=p[0],s=p[1]}this.start=(0,_.default)(a||0===a?a:-864e13),this.end=(0,_.default)(s||0===s?s:864e13)}return e(i,[{key:"adjacent",value:function(n){var t=this.start.isSame(n.end),a=this.end.isSame(n.start);return t&&n.start.valueOf()<=this.start.valueOf()||a&&n.end.valueOf()>=this.end.valueOf()}},{key:"add",value:function(n){return this.overlaps(n,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{adjacent:!1})?new this.constructor(_.default.min(this.start,n.start),_.default.max(this.end,n.end)):null}},{key:"by",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{excludeEnd:!1,step:1},a=this;return o({},L.default.iterator,function(){var s=t.step||1,l=Math.abs(a.start.diff(a.end,n))/s,h=t.excludeEnd||!1,p=0;return t.hasOwnProperty("exclusive")&&(h=t.exclusive),{next:function(){var y=a.start.clone().add(p*s,n),d=h?!(p<l):!(p<=l);return p++,{done:d,value:d?void 0:y}}}})}},{key:"byRange",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{excludeEnd:!1,step:1},a=this,s=t.step||1,l=this.valueOf()/n.valueOf()/s,h=Math.floor(l),p=t.excludeEnd||!1,y=0;return t.hasOwnProperty("exclusive")&&(p=t.exclusive),o({},L.default.iterator,function(){return h===1/0?{done:!0}:{next:function(){var d=(0,_.default)(a.start.valueOf()+n.valueOf()*y*s),T=h===l&&p?!(y<h):!(y<=h);return y++,{done:T,value:T?void 0:d}}}})}},{key:"center",value:function(){var n=this.start.valueOf()+this.diff()/2;return(0,_.default)(n)}},{key:"clone",value:function(){return new this.constructor(this.start.clone(),this.end.clone())}},{key:"contains",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{excludeStart:!1,excludeEnd:!1},a=this.start.valueOf(),s=this.end.valueOf(),l=n.valueOf(),h=n.valueOf(),p=t.excludeStart||!1,y=t.excludeEnd||!1;return t.hasOwnProperty("exclusive")&&(p=y=t.exclusive),n instanceof i&&(l=n.start.valueOf(),h=n.end.valueOf()),(a<l||a<=l&&!p)&&(s>h||s>=h&&!y)}},{key:"diff",value:function(n,t){return this.end.diff(this.start,n,t)}},{key:"duration",value:function(n,t){return this.diff(n,t)}},{key:"intersect",value:function(n){var t=this.start.valueOf(),a=this.end.valueOf(),s=n.start.valueOf(),l=n.end.valueOf(),p=s==l;if(t==a){if(t==s||t==l)return null;if(t>s&&t<l)return this.clone()}else if(p){if(s==t||s==a)return null;if(s>t&&s<a)return new this.constructor(s,s)}return t<=s&&s<a&&a<l?new this.constructor(s,a):s<t&&t<l&&l<=a?new this.constructor(t,l):s<t&&t<=a&&a<l?this.clone():t<=s&&s<=l&&l<=a?new this.constructor(s,l):null}},{key:"isEqual",value:function(n){return this.start.isSame(n.start)&&this.end.isSame(n.end)}},{key:"isSame",value:function(n){return this.isEqual(n)}},{key:"overlaps",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{adjacent:!1},a=null!==this.intersect(n);return t.adjacent&&!a?this.adjacent(n):a}},{key:"reverseBy",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{excludeStart:!1,step:1},a=this;return o({},L.default.iterator,function(){var s=t.step||1,l=Math.abs(a.start.diff(a.end,n))/s,h=t.excludeStart||!1,p=0;return t.hasOwnProperty("exclusive")&&(h=t.exclusive),{next:function(){var y=a.end.clone().subtract(p*s,n),d=h?!(p<l):!(p<=l);return p++,{done:d,value:d?void 0:y}}}})}},{key:"reverseByRange",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{excludeStart:!1,step:1},a=this,s=t.step||1,l=this.valueOf()/n.valueOf()/s,h=Math.floor(l),p=t.excludeStart||!1,y=0;return t.hasOwnProperty("exclusive")&&(p=t.exclusive),o({},L.default.iterator,function(){return h===1/0?{done:!0}:{next:function(){var d=(0,_.default)(a.end.valueOf()-n.valueOf()*y*s),T=h===l&&p?!(y<h):!(y<=h);return y++,{done:T,value:T?void 0:d}}}})}},{key:"snapTo",value:function(n){var t=this.clone();return t.start.isSame((0,_.default)(-864e13))||(t.start=t.start.startOf(n)),t.end.isSame((0,_.default)(864e13))||(t.end=t.end.endOf(n)),t}},{key:"subtract",value:function(n){var t=this.start.valueOf(),a=this.end.valueOf(),s=n.start.valueOf(),l=n.end.valueOf();return null===this.intersect(n)?[this]:s<=t&&t<a&&a<=l?[]:s<=t&&t<l&&l<a?[new this.constructor(l,a)]:t<s&&s<a&&a<=l?[new this.constructor(t,s)]:t<s&&s<l&&l<a?[new this.constructor(t,s),new this.constructor(l,a)]:t<s&&s<a&&l<a?[new this.constructor(t,s),new this.constructor(s,a)]:[]}},{key:"toDate",value:function(){return[this.start.toDate(),this.end.toDate()]}},{key:"toString",value:function(){return this.start.format()+"/"+this.end.format()}},{key:"valueOf",value:function(){return this.end.valueOf()-this.start.valueOf()}}]),i}()},function(u,m,c){"use strict";var r,o=c(6),b=c(13),D=c(9),f=c(15);r=u.exports=function(g,v){var e,M,_,S,L;return arguments.length<2||"string"!=typeof g?(S=v,v=g,g=null):S=arguments[2],null==g?(e=_=!0,M=!1):(e=f.call(g,"c"),M=f.call(g,"e"),_=f.call(g,"w")),L={value:v,configurable:e,enumerable:M,writable:_},S?o(b(S),L):L},r.gs=function(g,v,e){var M,_,S,L;return"string"!=typeof g?(S=e,e=v,v=g,g=null):S=arguments[3],null==v?v=void 0:D(v)?null==e?e=void 0:D(e)||(S=e,e=void 0):(S=v,v=e=void 0),null==g?(M=!0,_=!1):(M=f.call(g,"c"),_=f.call(g,"e")),L={get:v,set:e,configurable:M,enumerable:_},S?o(b(S),L):L}},function(u,m,c){"use strict";u.exports=function(){}},function(u,m,c){"use strict";u.exports=c(7)()?Object.assign:c(8)},function(u,m,c){"use strict";u.exports=function(){var r,o=Object.assign;return"function"==typeof o&&(o(r={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),r.foo+r.bar+r.trzy==="razdwatrzy")}},function(u,m,c){"use strict";var r=c(10),o=c(14),b=Math.max;u.exports=function(D,f){var g,v,e,M=b(arguments.length,2);for(D=Object(o(D)),e=function(_){try{D[_]=f[_]}catch(S){g||(g=S)}},v=1;v<M;++v)r(f=arguments[v]).forEach(e);if(void 0!==g)throw g;return D}},function(u,m,c){"use strict";u.exports=function(r){return"function"==typeof r}},function(u,m,c){"use strict";u.exports=c(11)()?Object.keys:c(12)},function(u,m,c){"use strict";u.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},function(u,m,c){"use strict";var r=c(0),o=Object.keys;u.exports=function(b){return o(r(b)?Object(b):b)}},function(u,m,c){"use strict";var r=c(0),o=Array.prototype.forEach,b=Object.create;u.exports=function(f){var g=b(null);return o.call(arguments,function(v){r(v)&&function(f,g){var v;for(v in f)g[v]=f[v]}(Object(v),g)}),g}},function(u,m,c){"use strict";var r=c(0);u.exports=function(o){if(!r(o))throw new TypeError("Cannot use null or undefined");return o}},function(u,m,c){"use strict";u.exports=c(16)()?String.prototype.contains:c(17)},function(u,m,c){"use strict";var r="razdwatrzy";u.exports=function(){return"function"==typeof r.contains&&!0===r.contains("dwa")&&!1===r.contains("foo")}},function(u,m,c){"use strict";var r=String.prototype.indexOf;u.exports=function(o){return r.call(this,o,arguments[1])>-1}},function(u,m,c){"use strict";var r={object:!0,symbol:!0};u.exports=function(){var o;if("function"!=typeof Symbol)return!1;o=Symbol("test symbol");try{String(o)}catch{return!1}return!!r[typeof Symbol.iterator]&&!!r[typeof Symbol.toPrimitive]&&!!r[typeof Symbol.toStringTag]}},function(u,m,c){"use strict";u.exports=function(r){return!!r&&("symbol"==typeof r||!!r.constructor&&"Symbol"===r.constructor.name&&"Symbol"===r[r.constructor.toStringTag])}},function(u,m,c){"use strict";var r,o,b,D,f=c(4),g=c(21),v=Object.create,e=Object.defineProperties,M=Object.defineProperty,_=Object.prototype,S=v(null);if("function"==typeof Symbol){r=Symbol;try{String(r()),D=!0}catch{}}var P,L=(P=v(null),function(E){for(var i,n,t=0;P[E+(t||"")];)++t;return P[E+=t||""]=!0,M(_,i="@@"+E,f.gs(null,function(a){n||(n=!0,M(this,i,f(a)),n=!1)})),i});b=function(P){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return o(P)},u.exports=o=function P(E){var i;if(this instanceof P)throw new TypeError("Symbol is not a constructor");return D?r(E):(i=v(b.prototype),E=void 0===E?"":String(E),e(i,{__description__:f("",E),__name__:f("",L(E))}))},e(o,{for:f(function(P){return S[P]?S[P]:S[P]=o(String(P))}),keyFor:f(function(P){var E;for(E in g(P),S)if(S[E]===P)return E}),hasInstance:f("",r&&r.hasInstance||o("hasInstance")),isConcatSpreadable:f("",r&&r.isConcatSpreadable||o("isConcatSpreadable")),iterator:f("",r&&r.iterator||o("iterator")),match:f("",r&&r.match||o("match")),replace:f("",r&&r.replace||o("replace")),search:f("",r&&r.search||o("search")),species:f("",r&&r.species||o("species")),split:f("",r&&r.split||o("split")),toPrimitive:f("",r&&r.toPrimitive||o("toPrimitive")),toStringTag:f("",r&&r.toStringTag||o("toStringTag")),unscopables:f("",r&&r.unscopables||o("unscopables"))}),e(b.prototype,{constructor:f(o),toString:f("",function(){return this.__name__})}),e(o.prototype,{toString:f(function(){return"Symbol ("+g(this).__description__+")"}),valueOf:f(function(){return g(this)})}),M(o.prototype,o.toPrimitive,f("",function(){var P=g(this);return"symbol"==typeof P?P:P.toString()})),M(o.prototype,o.toStringTag,f("c","Symbol")),M(b.prototype,o.toStringTag,f("c",o.prototype[o.toStringTag])),M(b.prototype,o.toPrimitive,f("c",o.prototype[o.toPrimitive]))},function(u,m,c){"use strict";var r=c(19);u.exports=function(o){if(!r(o))throw new TypeError(o+" is not a symbol");return o}}]))}}]);