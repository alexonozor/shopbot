"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[6330],{3949:(T,_,a)=>{a.r(_),a.d(_,{MerchantTabComponent:()=>O});var r=a(9417),E=a(980),c=a(177),i=a(636),m=a(2798),g=a(9631),h=a(8834),t=a(4020),M=a(5351),u=a(8498),f=a(5749),v=a(5416),d=a(3);function D(n,p){if(1&n&&(t.j41(0,"mat-option",8),t.EFF(1),t.k0s()),2&n){const e=p.$implicit;t.Y8G("value",e._id),t.R7$(),t.JRh(e.name)}}let O=(()=>{class n{constructor(e,o,s,l,C,P){this._matDialog=e,this.router=o,this._formBuilder=s,this.storeService=l,this._snackBar=C,this.route=P,this.store=this.storeService.store,this.merchants=this.route.parent?.snapshot.data.merchants}ngOnInit(){this.generalSettingForm=this.createGeneralSettingForm(),this.generalSettingForm.get("merchant")?.valueChanges.subscribe(e=>{this.generalSettingForm.patchValue({owner:e},{emitEvent:!1})})}createGeneralSettingForm(){return this._formBuilder.group({merchant:[this.store?.merchant,r.k0.required],owner:[this.store?.merchant,r.k0.required]})}save(){this.isLoading=!0;const e=this.generalSettingForm.getRawValue();e.owner=e.merchant,this.storeService.saveStore(e,this.store._id).pipe((0,E.j)(()=>this.isLoading=!1)).subscribe(o=>{this._snackBar.open("Saved","ok",{duration:5e3}),this.storeService.getStore()})}addMerchant(){this.router.navigate(["dashboard","merchants","new"])}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(M.bZ),t.rXU(u.Ix),t.rXU(r.ok),t.rXU(f.n),t.rXU(v.UG),t.rXU(u.nX))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-merchant-tab"]],inputs:{store:"store",merchants:"merchants"},decls:12,vars:2,consts:[[1,"w-full","h-screen","relative","p-5"],[3,"formGroup"],["appearance","fill","floatLabel","always",1,"w-full"],["formControlName","merchant","cancellation","Select Merchant"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center","fxLayout.lt-lg","column","fxLayoutAlign.lt-lg","start stretch","fxLayoutGap","10px"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"],[3,"value"]],template:function(o,s){1&o&&(t.j41(0,"div",0)(1,"form",1)(2,"mat-form-field",2)(3,"mat-label"),t.EFF(4,"Select Merchant"),t.k0s(),t.j41(5,"mat-select",3),t.DNE(6,D,2,2,"mat-option",4),t.k0s()()(),t.j41(7,"div",5)(8,"button",6),t.bIt("click",function(){return s.addMerchant()}),t.EFF(9,"Create Merchant"),t.k0s(),t.j41(10,"button",7),t.bIt("click",function(){return s.save()}),t.EFF(11,"Save"),t.k0s()()()),2&o&&(t.R7$(),t.Y8G("formGroup",s.generalSettingForm),t.R7$(5),t.Y8G("ngForOf",s.merchants))},dependencies:[c.MD,c.Sq,r.YN,r.qT,r.BC,r.cb,i.RG,i.rl,i.nJ,m.Ve,m.VO,d.wT,r.X1,r.j4,r.JD,g.fS,h.Hl,h.$z],encapsulation:2})}}return n})()}}]);