"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[592],{437:(p,u,r)=>{r.d(u,{D:()=>S});var n=r(6223),a=r(7700),c=r(6028),t=r(5879),s=r(712),O=r(1896),e=r(6814),o=r(3680),f=r(2296),g=r(2557),C=r(9157),D=r(617),P=r(2032),E=r(8525),M=r(3814);function T(_,m){if(1&_&&(t.TgZ(0,"span",14),t._uU(1),t.qZA()),2&_){const i=t.oxw(2);t.xp6(1),t.AsE(" (+",((null==i.messagesForm.value.countries?null:i.messagesForm.value.countries.length)||0)-1," ",2===(null==i.messagesForm.value.countries?null:i.messagesForm.value.countries.length)?"other":"others",") ")}}function U(_,m){if(1&_&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&_){const i=m.$implicit;t.Q6J("value",i.country),t.xp6(1),t.Oqu(i.country)}}function A(_,m){if(1&_&&(t.TgZ(0,"mat-form-field",5)(1,"mat-label"),t._uU(2,"countries"),t.qZA(),t.TgZ(3,"mat-select",11)(4,"mat-select-trigger"),t._uU(5),t.YNc(6,T,2,2,"span",12),t.qZA(),t.YNc(7,U,2,2,"mat-option",13),t.qZA()()),2&_){const i=t.oxw();t.xp6(5),t.hij(" ",(null==i.messagesForm.value.countries?null:i.messagesForm.value.countries[0])||""," "),t.xp6(1),t.Q6J("ngIf",((null==i.messagesForm.value.countries?null:i.messagesForm.value.countries.length)||0)>1),t.xp6(1),t.Q6J("ngForOf",i.deliveries)}}function I(_,m){if(1&_){const i=t.EpF();t.TgZ(0,"mat-chip-row",22),t.NdJ("removed",function(){const d=t.CHM(i).index,v=t.oxw(2);return t.KtG(v.deleteRecipient(d))}),t._uU(1),t.TgZ(2,"button",23)(3,"mat-icon"),t._uU(4,"cancel"),t.qZA()()()}if(2&_){const i=m.$implicit;t.xp6(1),t.hij(" ",i.value.name," ")}}function R(_,m){if(1&_&&(t.TgZ(0,"mat-form-field",16)(1,"mat-label"),t._uU(2,"Recipients"),t.qZA(),t.TgZ(3,"mat-chip-grid",17,18),t.YNc(5,I,5,1,"mat-chip-row",19),t.qZA(),t._UZ(6,"input",20,21),t.qZA()),2&_){const i=t.MAs(4),l=t.oxw();t.xp6(5),t.Q6J("ngForOf",l.recipients.controls),t.xp6(1),t.Q6J("matChipInputFor",i)("matChipInputSeparatorKeyCodes",l.separatorKeysCodes)}}let S=(()=>{class _{constructor(i,l,h,d,v){this.fb=i,this.notificationsService=l,this.dialogRef=h,this.data=d,this.route=v,this.messagesForm=this.fb.group({title:["",n.kI.required],body:["",n.kI.required],recipients:this.fb.array([]),type:[""],recipientsType:[""],countries:[""]}),this.addOnBlur=!0,this.separatorKeysCodes=[c.K5,c.OC],this.recipientsData=[],this.deliveries=d.deliveries}ngOnInit(){this.data.allCustomers||(this.data.isBulkMsg?(this.recipientsData=this.data.customers,this.recipientsData.forEach(i=>{i.phoneCredentials.length>0&&this.addRecipients(i)})):(this.recipientsData.push(this.data.customers),this.recipientsData.map(i=>this.addRecipients(i))))}get recipients(){return this.messagesForm.controls.recipients}addRecipients(i){const l=this.fb.group({name:[i.name],id:[i._id],phoneToken:[i.phoneCredentials]});this.recipients.push(l)}deleteRecipient(i){this.recipients.removeAt(i),this.recipients.length<1&&!this.data.allCustomers&&this.dialogRef.close()}submit(){this.notificationsService.createNotification(this.messagesForm.getRawValue()).subscribe(i=>{this.dialogRef.close(i)})}remove(i,l){const h=this.recipientsData.indexOf(i);h>=0&&this.recipientsData.splice(h,1)}static#t=this.\u0275fac=function(l){return new(l||_)(t.Y36(n.qu),t.Y36(s.T),t.Y36(a.so),t.Y36(a.WI),t.Y36(O.gz))};static#e=this.\u0275cmp=t.Xpm({type:_,selectors:[["app-create-messages"]],decls:19,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["fxLayout","column","fxLayoutAlign","space-around stretch",3,"formGroup"],["appearance","fill",4,"ngIf"],["class","example-chip-list",4,"ngIf"],["appearance","fill"],["matInput","","cancellation","Enter Message Title","formControlName","title"],["matInput","","cancellation","Enter Message Body","rows","20","formControlName","body"],["mat-dialog-actions",""],["mat-button","",3,"mat-dialog-close"],["mat-button","","cdkFocusInitial","",3,"disabled","click"],["multiple","","formControlName","countries"],["class","example-additional-selection",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[1,"example-additional-selection"],[3,"value"],[1,"example-chip-list"],["aria-label","Message Recipients"],["chipGrid",""],[3,"removed",4,"ngFor","ngForOf"],["formArrayName","recipients",3,"matChipInputFor","matChipInputSeparatorKeyCodes"],["fruitInput",""],[3,"removed"],["matChipRemove",""]],template:function(l,h){1&l&&(t.TgZ(0,"h1",0),t._uU(1,"Send Notification"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2),t.YNc(4,A,8,3,"mat-form-field",3),t.YNc(5,R,8,3,"mat-form-field",4),t.TgZ(6,"mat-form-field",5)(7,"mat-label"),t._uU(8,"Title"),t.qZA(),t._UZ(9,"input",6),t.qZA(),t.TgZ(10,"mat-form-field",5)(11,"mat-label"),t._uU(12,"body"),t.qZA(),t._UZ(13,"textarea",7),t.qZA()()(),t.TgZ(14,"div",8)(15,"button",9),t._uU(16,"Cancel"),t.qZA(),t.TgZ(17,"button",10),t.NdJ("click",function(){return h.submit()}),t._uU(18,"Send"),t.qZA()()),2&l&&(t.xp6(3),t.Q6J("formGroup",h.messagesForm),t.xp6(1),t.Q6J("ngIf",h.deliveries),t.xp6(1),t.Q6J("ngIf",!h.data.allCustomers),t.xp6(10),t.Q6J("mat-dialog-close",null),t.xp6(2),t.Q6J("disabled",h.messagesForm.invalid))},dependencies:[e.sg,e.O5,o.ey,f.lW,g.RA,g.oH,g.qH,g.z3,C.KE,C.hX,D.Hw,P.Nt,E.gD,E.$L,a.ZT,a.uh,a.xY,a.H8,M.xw,M.Wh,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,n.CE]})}return _})()},1423:(p,u,r)=>{r.d(u,{T:()=>c,f:()=>t});var n=r(5879),a=r(9329);let c=(()=>{class s{constructor(e){this.permissionService=e}resolve(){return this.permissionService.getPermissions()}static#t=this.\u0275fac=function(o){return new(o||s)(n.LFG(a.$))};static#e=this.\u0275prov=n.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),t=(()=>{class s{constructor(e){this.permissionService=e}resolve(e){const o=e.paramMap.get("id");return this.permissionService.getPermission(o)}static#t=this.\u0275fac=function(o){return new(o||s)(n.LFG(a.$))};static#e=this.\u0275prov=n.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})()},5988:(p,u,r)=>{r.d(u,{M:()=>t,x:()=>c});var n=r(5879),a=r(1973);let c=(()=>{class s{constructor(e){this.riderService=e}resolve(){return this.riderService.getRiders()}static#t=this.\u0275fac=function(o){return new(o||s)(n.LFG(a.U))};static#e=this.\u0275prov=n.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),t=(()=>{class s{constructor(e){this.riderService=e}resolve(e){const o=e.paramMap.get("id");return this.riderService.getRider(o)}static#t=this.\u0275fac=function(o){return new(o||s)(n.LFG(a.U))};static#e=this.\u0275prov=n.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})()},1973:(p,u,r)=>{r.d(u,{U:()=>t});var n=r(553),a=r(5879),c=r(9862);let t=(()=>{class s{constructor(e){this._httpClient=e,this.hostServer=n.N.hostServer}getRiders(){return this._httpClient.get(`${this.hostServer}/riders`)}getRider(e){return this._httpClient.get(`${this.hostServer}/riders/${e}`)}deleteRider(e){return this._httpClient.delete(`${this.hostServer}/riders/${e}`)}updateRider(e,o){return this._httpClient.put(`${this.hostServer}/riders/${e}`,o)}createRider(e){return this._httpClient.post(`${this.hostServer}/riders`,e)}static#t=this.\u0275fac=function(o){return new(o||s)(a.LFG(c.eN))};static#e=this.\u0275prov=a.Yz7({token:s,factory:s.\u0275fac})}return s})()},9329:(p,u,r)=>{r.d(u,{$:()=>t});var n=r(553),a=r(5879),c=r(9862);let t=(()=>{class s{constructor(e){this._httpClient=e,this.hostServer=n.N.hostServer}createPermission(e){return this._httpClient.post(`${this.hostServer}/roles`,e)}getPermissions(){return this._httpClient.get(`${this.hostServer}/roles`)}getPermission(e){return this._httpClient.get(`${this.hostServer}/roles/${e}`)}updatePermission(e,o){return this._httpClient.put(`${this.hostServer}/roles/${e}`,o)}deletePermission(e){return this._httpClient.delete(`${this.hostServer}/roles/${e}`)}static#t=this.\u0275fac=function(o){return new(o||s)(a.LFG(c.eN))};static#e=this.\u0275prov=a.Yz7({token:s,factory:s.\u0275fac})}return s})()},1803:(p,u,r)=>{r.d(u,{f:()=>t});var n=r(553),a=r(5879),c=r(9862);let t=(()=>{class s{constructor(e){this._httpClient=e,this.hostServer=n.N.hostServer}getUsers(e){const f=JSON.stringify(e);return this._httpClient.get(`${this.hostServer}/users?query=${f}`)}getUser(e){return this._httpClient.get(`${this.hostServer}/users/${e}`)}countUsers(){return this._httpClient.get(`${this.hostServer}/users/count/all`)}deleteUser(e){return this._httpClient.delete(`${this.hostServer}/users/${e}`)}updateUser(e,o){return this._httpClient.put(`${this.hostServer}/users/${e}`,o)}getUserTransactions(e){return this._httpClient.get(`${this.hostServer}/wallet-transactions/${e}/transactions`)}getUserReferrals(e){return this._httpClient.get(`${this.hostServer}/referrals/${e}/transactions`)}getUserReferralStats(e){return this._httpClient.get(`${this.hostServer}/referrals/${e}/stats`)}getUserAddresses(e){return this._httpClient.get(`${this.hostServer}/addresses/${e}/user`)}static#t=this.\u0275fac=function(o){return new(o||s)(a.LFG(c.eN))};static#e=this.\u0275prov=a.Yz7({token:s,factory:s.\u0275fac})}return s})()}}]);