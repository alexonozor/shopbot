"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[9814],{9814:(he,S,l)=>{l.r(S),l.d(S,{CustomersModule:()=>pe});var d=l(177),h=l(8498),t=l(4020),g=l(2382);let $=(()=>{class s{constructor(e){this.userService=e}resolve(){return this.userService.getUsers({data:{$match:{country:"Nigeria"}},control:[{$sort:{createdAt:-1}},{$limit:20},{$skip:0}]})}static{this.\u0275fac=function(i){return new(i||s)(t.KVO(g.g))}}static{this.\u0275prov=t.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),I=(()=>{class s{constructor(e){this.userService=e}resolve(e){const i=e.paramMap.get("id");return this.userService.getUser(i)}static{this.\u0275fac=function(i){return new(i||s)(t.KVO(g.g))}}static{this.\u0275prov=t.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),w=(()=>{class s{constructor(e){this.userService=e}resolve(){return this.userService.countUsers()}static{this.\u0275fac=function(i){return new(i||s)(t.KVO(g.g))}}static{this.\u0275prov=t.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),L=(()=>{class s{constructor(){}ngOnInit(){}static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-customers"]],decls:1,vars:0,template:function(i,o){1&i&&t.nrm(0,"router-outlet")},dependencies:[h.iI,h.n3],encapsulation:2})}}return s})();var c=l(9159),W=l(4572),T=l(9172),H=l(5558),C=l(6440),N=l(5024),b=l(1269),G=l(1384),A=l(5473),a=l(9417),p=l(8834),j=l(9213),_=l(9115),E=l(2765),f=l(636),k=l(2798),y=l(6924),P=l(2815),m=l(5351),U=l(3),F=l(2920);const V=s=>[s],Z=s=>["../",s,"details"];function K(s,n){if(1&s&&(t.j41(0,"mat-option",27),t.EFF(1),t.k0s()),2&s){const e=n.$implicit;t.Y8G("value",e.country),t.R7$(),t.JRh(e.country)}}function Q(s,n){if(1&s){const e=t.RV6();t.j41(0,"button",33),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.deleteSelected())}),t.j41(1,"mat-icon",31),t.EFF(2,"delete"),t.k0s(),t.EFF(3," Delete Selected Customers"),t.k0s()}}function q(s,n){if(1&s){const e=t.RV6();t.j41(0,"span",28)(1,"button",29),t.EFF(2),t.k0s(),t.j41(3,"button",30),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.sendMessagesToSelectedCustomers())}),t.j41(4,"mat-icon",31),t.EFF(5,"campaign"),t.k0s(),t.EFF(6," Message Customers"),t.k0s(),t.DNE(7,Q,4,0,"button",32),t.k0s()}if(2&s){const e=t.XpG();t.R7$(2),t.SpI("",e.selection.selected.length," Selected"),t.R7$(5),t.Y8G("ngIf",e.auth.isShow(t.eq3(2,V,e.Role.SuperAdmin)))}}function tt(s,n){if(1&s){const e=t.RV6();t.j41(0,"th",34)(1,"mat-checkbox",35),t.bIt("change",function(o){t.eBV(e);const r=t.XpG();return t.Njj(o?r.toggleAllRows():null)}),t.k0s()()}if(2&s){const e=t.XpG();t.R7$(),t.Y8G("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())("aria-label",e.checkboxLabel())}}function et(s,n){if(1&s){const e=t.RV6();t.j41(0,"td",36)(1,"mat-checkbox",37),t.bIt("click",function(o){return t.eBV(e),t.Njj(o.stopPropagation())})("change",function(o){const r=t.eBV(e).$implicit,u=t.XpG();return t.Njj(o?u.selection.toggle(r):null)}),t.k0s()()}if(2&s){const e=n.$implicit,i=t.XpG();t.R7$(),t.Y8G("checked",i.selection.isSelected(e))("aria-label",i.checkboxLabel(e))}}function st(s,n){1&s&&(t.j41(0,"th",34),t.EFF(1,"Name"),t.k0s())}function ot(s,n){if(1&s&&(t.j41(0,"td",36),t.EFF(1),t.k0s()),2&s){const e=n.$implicit;t.R7$(),t.JRh(e.name)}}function it(s,n){1&s&&(t.j41(0,"th",34),t.EFF(1,"Phone Number"),t.k0s())}function nt(s,n){if(1&s&&(t.j41(0,"td",36),t.EFF(1),t.k0s()),2&s){const e=n.$implicit;t.R7$(),t.JRh(e.phoneNumber)}}function at(s,n){1&s&&(t.j41(0,"th",34),t.EFF(1,"Email"),t.k0s())}function rt(s,n){if(1&s&&(t.j41(0,"td",36),t.EFF(1),t.k0s()),2&s){const e=n.$implicit;t.R7$(),t.JRh(e.email)}}function lt(s,n){1&s&&(t.j41(0,"th",34),t.EFF(1,"Device"),t.k0s())}function ct(s,n){if(1&s&&(t.j41(0,"td",36),t.EFF(1),t.k0s()),2&s){const e=n.$implicit;t.R7$(),t.JRh((null==e||null==e.phoneCredentials[0]?null:e.phoneCredentials[0].deviceType)+" "+(null==e||null==e.phoneCredentials[0]?null:e.phoneCredentials[0].make)+" "+(null==e||null==e.phoneCredentials[0]?null:e.phoneCredentials[0].os))}}function mt(s,n){1&s&&(t.j41(0,"th",34),t.EFF(1,"Country"),t.k0s())}function ut(s,n){if(1&s&&(t.j41(0,"td",36),t.EFF(1),t.k0s()),2&s){const e=n.$implicit;t.R7$(),t.JRh(e.country)}}function dt(s,n){1&s&&(t.j41(0,"th",34),t.EFF(1,"Wallet"),t.k0s())}function pt(s,n){if(1&s&&(t.j41(0,"td",36),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&s){const e=n.$implicit;t.R7$(),t.JRh(t.i5U(2,1,e.walletBallance,e.currency))}}function ft(s,n){1&s&&(t.j41(0,"th",34),t.EFF(1,"Registered at"),t.k0s())}function ht(s,n){if(1&s&&(t.j41(0,"td",36),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&s){const e=n.$implicit;t.R7$(),t.JRh(t.i5U(2,1,e.createdAt,"short"))}}function gt(s,n){1&s&&(t.j41(0,"th",34),t.EFF(1,"Actions"),t.k0s())}function _t(s,n){if(1&s){const e=t.RV6();t.j41(0,"button",39),t.bIt("click",function(){t.eBV(e);const o=t.XpG(),r=o.$implicit,u=o.index,R=t.XpG();return t.Njj(R.deleteUser(r._id,u))}),t.j41(1,"mat-icon",40),t.EFF(2,"delete"),t.k0s(),t.j41(3,"span"),t.EFF(4,"Delete"),t.k0s()()}}function Ft(s,n){if(1&s){const e=t.RV6();t.j41(0,"td",36)(1,"button",38)(2,"mat-icon"),t.EFF(3,"more_vert"),t.k0s()(),t.j41(4,"mat-menu",null,0)(6,"button",39),t.bIt("click",function(){const o=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.message(o))}),t.j41(7,"mat-icon",40),t.EFF(8,"campaign"),t.k0s(),t.j41(9,"span"),t.EFF(10,"Message Customer"),t.k0s()(),t.DNE(11,_t,5,0,"button",41),t.j41(12,"button",42)(13,"mat-icon",40),t.EFF(14,"person"),t.k0s(),t.j41(15,"span"),t.EFF(16,"Profile"),t.k0s()()()()}if(2&s){const e=n.$implicit,i=t.sdS(5),o=t.XpG();t.R7$(),t.Y8G("matMenuTriggerFor",i),t.R7$(10),t.Y8G("ngIf",o.auth.isShow(t.eq3(3,V,o.Role.SuperAdmin))),t.R7$(),t.Y8G("routerLink",t.eq3(5,Z,e._id))}}function Ct(s,n){1&s&&t.nrm(0,"tr",43)}function bt(s,n){1&s&&t.nrm(0,"tr",44)}let Y=(()=>{class s{constructor(e,i,o,r,u){this.route=e,this.userService=i,this.auth=o,this._matDialog=r,this.fb=u,this.displayedColumns=["select","Name","phoneNumber","email","device","country","wallet","createdAt","actions"],this.dataSource=new c.I6([]),this.selection=new N.CB(!0,[]),this.Role=A.X,this.resultsLength=0,this.deliveries=[],this.filterForm=this.fb.group({country:new a.MJ("Nigeria"),search:new a.MJ(null)}),this.deliveries=this.route.snapshot.data.deliveries,this.resultsLength=this.route.snapshot.data.count}ngAfterViewInit(){(0,W.z)([this.filterForm.valueChanges.pipe((0,T.Z)({country:"Nigeria"})),this.paginator.page.pipe((0,T.Z)({pageIndex:0,pageSize:20}))]).pipe((0,H.n)(([e,i])=>{const{country:o,search:r}=e,u=i.pageSize*i.pageIndex;return r?(this.paginator.pageIndex=0,this.resultsLength=20,this.userService.getUsers({data:{$match:{country:o,name:{$regex:r,$options:"i"}}},control:[{$sort:{createdAt:-1}}]})):(this.resultsLength=this.route.snapshot.data.count,this.userService.getUsers({data:{$match:{country:o}},control:[{$sort:{createdAt:-1}},{$skip:u},{$limit:20}]}))})).subscribe(e=>{this.dataSource=new c.I6(e)})}ngOnInit(){this.userObject=this.route.snapshot.data.customers,this.dataSource=new c.I6(this.userObject)}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}deleteSelected(){this.confirmDialogRef=this._matDialog.open(b.Y,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete customers?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete these customers?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(e=>{e&&this.selection.selected.forEach((i,o)=>{this.dataSource.data.splice(o,1),this.dataSource=new c.I6(this.dataSource.data),this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.userService.deleteUser(i._id).subscribe()})})}checkboxLabel(e){return e?`${this.selection.isSelected(e)?"deselect":"select"} row ${e.position+1}`:(this.isAllSelected()?"deselect":"select")+" all"}deleteUser(e,i){this.confirmDialogRef=this._matDialog.open(b.Y,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Customer?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete this customer?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(o=>{o&&(this.dataSource.data.splice(i,1),this.dataSource=new c.I6(this.dataSource.data),this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.userService.deleteUser(e).subscribe())})}message(e){this._matDialog.open(G.W,{data:{customers:e,isBulkMsg:!1,allCustomers:!1},width:"500px"})}sendMessagesToSelectedCustomers(){this._matDialog.open(G.W,{data:{customers:this.selection.selected,isBulkMsg:!0,allCustomers:!1},width:"500px"})}static{this.\u0275fac=function(i){return new(i||s)(t.rXU(h.nX),t.rXU(g.g),t.rXU(P.u),t.rXU(m.bZ),t.rXU(a.ok))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-list-customers"]],viewQuery:function(i,o){if(1&i&&t.GBs(C.iy,5),2&i){let r;t.mGM(r=t.lsd())&&(o.paginator=r.first)}},decls:51,vars:8,consts:[["menu","matMenu"],["fxLayout","row","fxLayout.lt-md","column","fxLayoutAlign.lt-md","space-around stretch","fxLayoutAlign","space-between start"],["fxLayout","column","fxLayoutAlign","space-between start"],[1,"m-0"],["fxLayout","row","fxLayout.lt-md","column","fxLayoutGap","20px","fxLayoutAlign.lt-md","space-around stretch","fxLayoutAlign","space-between start",3,"formGroup"],[1,"example-full-width"],["matInput","","formControlName","search","cancellation","Search"],["formControlName","country"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutGap","10px","fxLayoutAlign","start center",1,"card","bg-white","w-full","mat-elevation-z2","px-2","py-2"],["class","text-lg font-thin","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",4,"ngIf"],[1,"mat-elevation-z8"],["mat-table","","matSort","","matTableResponsive","",1,"w-full",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Name"],["matColumnDef","phoneNumber"],["matColumnDef","email"],["matColumnDef","device"],["matColumnDef","country"],["matColumnDef","wallet"],["matColumnDef","createdAt"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page of periodic elements",3,"pageSize","length"],[3,"value"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"text-lg","font-thin"],["mat-button",""],["mat-stroked-button","","color","primary",3,"click"],[1,"mat-18"],["mat-stroked-button","","color","warn",3,"click",4,"ngIf"],["mat-stroked-button","","color","warn",3,"click"],["mat-header-cell",""],[3,"change","checked","indeterminate","aria-label"],["mat-cell",""],[3,"click","change","checked","aria-label"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],[1,"material-icons-outlined"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(i,o){1&i&&(t.j41(0,"div")(1,"div",1)(2,"div",2)(3,"h1",3),t.EFF(4,"Customers"),t.k0s(),t.j41(5,"p"),t.EFF(6,"List of Customers"),t.k0s()(),t.j41(7,"div",4)(8,"mat-form-field",5)(9,"mat-label"),t.EFF(10,"Search"),t.k0s(),t.nrm(11,"input",6),t.k0s(),t.j41(12,"mat-form-field")(13,"mat-label"),t.EFF(14,"Select a country"),t.k0s(),t.j41(15,"mat-select",7),t.DNE(16,K,2,2,"mat-option",8),t.k0s()()()(),t.j41(17,"div",9),t.DNE(18,q,8,4,"span",10),t.k0s(),t.j41(19,"div",11)(20,"table",12),t.qex(21,13),t.DNE(22,tt,2,3,"th",14)(23,et,2,2,"td",15),t.bVm(),t.qex(24,16),t.DNE(25,st,2,0,"th",14)(26,ot,2,1,"td",15),t.bVm(),t.qex(27,17),t.DNE(28,it,2,0,"th",14)(29,nt,2,1,"td",15),t.bVm(),t.qex(30,18),t.DNE(31,at,2,0,"th",14)(32,rt,2,1,"td",15),t.bVm(),t.qex(33,19),t.DNE(34,lt,2,0,"th",14)(35,ct,2,1,"td",15),t.bVm(),t.qex(36,20),t.DNE(37,mt,2,0,"th",14)(38,ut,2,1,"td",15),t.bVm(),t.qex(39,21),t.DNE(40,dt,2,0,"th",14)(41,pt,3,4,"td",15),t.bVm(),t.qex(42,22),t.DNE(43,ft,2,0,"th",14)(44,ht,3,4,"td",15),t.bVm(),t.qex(45,23),t.DNE(46,gt,2,0,"th",14)(47,Ft,17,7,"td",15),t.bVm(),t.DNE(48,Ct,1,0,"tr",24)(49,bt,1,0,"tr",25),t.k0s(),t.nrm(50,"mat-paginator",26),t.k0s()()),2&i&&(t.R7$(7),t.Y8G("formGroup",o.filterForm),t.R7$(9),t.Y8G("ngForOf",o.deliveries),t.R7$(2),t.Y8G("ngIf",o.selection.selected.length),t.R7$(2),t.Y8G("dataSource",o.dataSource),t.R7$(28),t.Y8G("matHeaderRowDef",o.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",o.displayedColumns),t.R7$(),t.Y8G("pageSize",20)("length",o.resultsLength))},dependencies:[d.MD,d.Sq,d.bT,d.oe,d.vh,c.tP,c.Zl,c.tL,c.ji,c.cC,c.YV,c.iL,c.KS,c.$R,c.YZ,c.NB,h.iI,h.Wk,p.Hl,p.$z,p.iY,C.Ou,C.iy,j.m_,j.An,_.Cn,_.kk,_.fb,_.Cp,E.g7,E.So,f.RG,f.rl,f.nJ,k.Ve,k.VO,U.wT,y.YF,F.DJ,F.BO,F.sA,a.X1,a.me,a.BC,a.cb,a.j4,a.JD,a.YN],styles:["tr[_ngcontent-%COMP%]:hover{background:#f5f5f5}"]})}}return s})();var kt=l(6354);const vt=()=>["Male","Female"],Rt=()=>["English","French"],jt=()=>["Nigeria","Mauritius"];function Et(s,n){if(1&s&&(t.j41(0,"mat-option",13),t.EFF(1),t.k0s()),2&s){const e=n.$implicit;t.Y8G("value",e),t.R7$(),t.JRh(e)}}function yt(s,n){if(1&s&&(t.j41(0,"mat-option",13),t.EFF(1),t.k0s()),2&s){const e=n.$implicit;t.Y8G("value",e),t.R7$(),t.JRh(e)}}function Dt(s,n){if(1&s&&(t.j41(0,"mat-option",13),t.EFF(1),t.k0s()),2&s){const e=n.$implicit;t.Y8G("value",e),t.R7$(),t.JRh(e)}}let X=(()=>{class s{constructor(e,i,o,r){this.fb=e,this.userService=i,this.dialogRef=o,this.data=r,this.customerForm=this.fb.group({name:[this.data.name,a.k0.required],phoneNumber:[this.data.phoneNumber,a.k0.required],gender:[this.data.gender,a.k0.required],email:[this.data.email,[a.k0.required,a.k0.email]],language:[this.data.language],country:[this.data.country]})}ngOnInit(){console.log(this.data)}submit(){this.customerForm.valid&&this.userService.updateUser(this.data._id,this.customerForm.getRawValue()).subscribe(e=>{this.dialogRef.close(this.customerForm.getRawValue())})}static{this.\u0275fac=function(i){return new(i||s)(t.rXU(a.ok),t.rXU(g.g),t.rXU(m.CP),t.rXU(m.Vh))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-edit-customers-info"]],decls:37,vars:8,consts:[["matDialogTitle",""],[3,"formGroup"],["fxLayout","column","fxLayoutAlign","space-evenly stretch"],["appearance","fill",1,"full-width"],["matInput","","cancellation","Full Name","formControlName","name"],["matInput","","cancellation","Phone Number","formControlName","phoneNumber"],["matInput","","cancellation","Email","formControlName","email"],["formControlName","gender"],[3,"value",4,"ngFor","ngForOf"],["formControlName","language"],["formControlName","country"],["mat-button","","matDialogClose",""],["mat-raised-button","","color","primary",3,"click","disabled"],[3,"value"]],template:function(i,o){1&i&&(t.j41(0,"h1",0),t.EFF(1,"Edit customer"),t.k0s(),t.j41(2,"mat-dialog-content")(3,"form",1)(4,"div",2)(5,"mat-form-field",3)(6,"mat-label"),t.EFF(7,"Full Name"),t.k0s(),t.nrm(8,"input",4),t.k0s(),t.j41(9,"mat-form-field",3)(10,"mat-label"),t.EFF(11,"Phone Number"),t.k0s(),t.nrm(12,"input",5),t.k0s(),t.j41(13,"mat-form-field",3)(14,"mat-label"),t.EFF(15,"Email"),t.k0s(),t.nrm(16,"input",6),t.k0s(),t.j41(17,"mat-form-field",3)(18,"mat-label"),t.EFF(19,"Gender"),t.k0s(),t.j41(20,"mat-select",7),t.DNE(21,Et,2,2,"mat-option",8),t.k0s()(),t.j41(22,"mat-form-field",3)(23,"mat-label"),t.EFF(24,"Language"),t.k0s(),t.j41(25,"mat-select",9),t.DNE(26,yt,2,2,"mat-option",8),t.k0s()(),t.j41(27,"mat-form-field",3)(28,"mat-label"),t.EFF(29,"Country"),t.k0s(),t.j41(30,"mat-select",10),t.DNE(31,Dt,2,2,"mat-option",8),t.k0s()()()()(),t.j41(32,"mat-dialog-actions")(33,"button",11),t.EFF(34,"CANCEL"),t.k0s(),t.j41(35,"button",12),t.bIt("click",function(){return o.submit()}),t.EFF(36,"Save"),t.k0s()()),2&i&&(t.R7$(3),t.Y8G("formGroup",o.customerForm),t.R7$(18),t.Y8G("ngForOf",t.lJ4(5,vt)),t.R7$(5),t.Y8G("ngForOf",t.lJ4(6,Rt)),t.R7$(5),t.Y8G("ngForOf",t.lJ4(7,jt)),t.R7$(4),t.Y8G("disabled",o.customerForm.invalid))},dependencies:[d.MD,d.Sq,m.hM,m.tx,m.BI,m.E7,m.Yi,p.Hl,p.$z,a.YN,a.qT,a.me,a.BC,a.cb,a.X1,a.j4,a.JD,f.RG,f.rl,f.nJ,k.Ve,k.VO,U.wT],encapsulation:2})}}return s})(),B=(()=>{class s{constructor(e,i,o,r){this.fb=e,this.userService=i,this.dialogRef=o,this.data=r,this.customerForm=this.fb.group({notes:[this.data.notes]})}ngOnInit(){}submit(){this.customerForm.valid&&this.userService.updateUser(this.data._id,this.customerForm.getRawValue()).subscribe(e=>{this.dialogRef.close(this.customerForm.getRawValue())})}static{this.\u0275fac=function(i){return new(i||s)(t.rXU(a.ok),t.rXU(g.g),t.rXU(m.CP),t.rXU(m.Vh))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-edit-customers-notes"]],decls:14,vars:2,consts:[["matDialogTitle",""],[3,"formGroup"],["fxLayout","column","fxLayoutAlign","space-evenly stretch"],["appearance","fill",1,"full-width"],["matInput","","cancellation","Add a note","formControlName","notes"],["mat-button","","matDialogClose",""],["mat-raised-button","","color","primary",3,"click","disabled"]],template:function(i,o){1&i&&(t.j41(0,"h1",0),t.EFF(1,"Edit Notes"),t.k0s(),t.j41(2,"mat-dialog-content")(3,"form",1)(4,"div",2)(5,"mat-form-field",3)(6,"mat-label"),t.EFF(7,"Add a note"),t.k0s(),t.nrm(8,"textarea",4),t.k0s()()()(),t.j41(9,"mat-dialog-actions")(10,"button",5),t.EFF(11,"CANCEL"),t.k0s(),t.j41(12,"button",6),t.bIt("click",function(){return o.submit()}),t.EFF(13,"Save"),t.k0s()()),2&i&&(t.R7$(3),t.Y8G("formGroup",o.customerForm),t.R7$(9),t.Y8G("disabled",o.customerForm.invalid))},dependencies:[d.MD,m.hM,m.tx,m.BI,m.E7,m.Yi,p.Hl,p.$z,a.YN,a.qT,a.me,a.BC,a.cb,a.X1,a.j4,a.JD,f.RG,f.rl,f.nJ],encapsulation:2})}}return s})(),M=(()=>{class s{constructor(e,i,o,r){this.fb=e,this.userService=i,this.dialogRef=o,this.data=r,this.customerForm=this.fb.group({allowNotifications:[this.data.allowNotifications,a.k0.required],allowSalesNotifications:[this.data.allowSalesNotifications,a.k0.required]})}ngOnInit(){}submit(){this.customerForm.valid&&this.userService.updateUser(this.data._id,this.customerForm.getRawValue()).subscribe(e=>{this.dialogRef.close(this.customerForm.getRawValue())})}static{this.\u0275fac=function(i){return new(i||s)(t.rXU(a.ok),t.rXU(g.g),t.rXU(m.CP),t.rXU(m.Vh))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-edit-customers-marketing-status"]],decls:14,vars:2,consts:[["matDialogTitle",""],[3,"formGroup"],["fxLayout","column","fxLayoutAlign","space-evenly stretch","fxLayoutGap","20px"],["formControlName","allowNotifications"],["formControlName","allowSalesNotifications"],["mat-button","","matDialogClose",""],["mat-raised-button","","color","primary",3,"click","disabled"]],template:function(i,o){1&i&&(t.j41(0,"h1",0),t.EFF(1,"Edit Marketing Status"),t.k0s(),t.j41(2,"mat-dialog-content")(3,"form",1)(4,"div",2)(5,"mat-slide-toggle",3),t.EFF(6,"Mobile Notification Subscribed"),t.k0s(),t.j41(7,"mat-slide-toggle",4),t.EFF(8,"Sales Notification Subscribed"),t.k0s()()()(),t.j41(9,"mat-dialog-actions")(10,"button",5),t.EFF(11,"CANCEL"),t.k0s(),t.j41(12,"button",6),t.bIt("click",function(){return o.submit()}),t.EFF(13,"Save"),t.k0s()()),2&i&&(t.R7$(3),t.Y8G("formGroup",o.customerForm),t.R7$(9),t.Y8G("disabled",o.customerForm.invalid))},dependencies:[d.MD,m.hM,m.tx,m.BI,m.E7,m.Yi,p.Hl,p.$z,a.YN,a.qT,a.BC,a.cb,a.X1,a.j4,a.JD,f.RG],encapsulation:2})}}return s})(),O=(()=>{class s{constructor(e,i,o,r){this.fb=e,this.userService=i,this.dialogRef=o,this.data=r,this.customerForm=this.fb.group({walletBallance:[0|this.data.walletBallance,a.k0.required]})}ngOnInit(){}submit(){this.customerForm.valid&&this.userService.updateUser(this.data._id,this.customerForm.getRawValue()).subscribe(e=>{this.dialogRef.close(this.customerForm.getRawValue())})}static{this.\u0275fac=function(i){return new(i||s)(t.rXU(a.ok),t.rXU(g.g),t.rXU(m.CP),t.rXU(m.Vh))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-edit-wallet"]],decls:14,vars:2,consts:[["matDialogTitle",""],[3,"formGroup"],["fxLayout","column","fxLayoutAlign","space-evenly stretch"],["appearance","fill",1,"full-width"],["matInput","","cancellation","Ballance","formControlName","walletBallance"],["mat-button","","matDialogClose",""],["mat-raised-button","","color","primary",3,"click","disabled"]],template:function(i,o){1&i&&(t.j41(0,"h1",0),t.EFF(1,"Update Balance"),t.k0s(),t.j41(2,"mat-dialog-content")(3,"form",1)(4,"div",2)(5,"mat-form-field",3)(6,"mat-label"),t.EFF(7,"Ballance"),t.k0s(),t.nrm(8,"input",4),t.k0s()()()(),t.j41(9,"mat-dialog-actions")(10,"button",5),t.EFF(11,"CANCEL"),t.k0s(),t.j41(12,"button",6),t.bIt("click",function(){return o.submit()}),t.EFF(13,"Save"),t.k0s()()),2&i&&(t.R7$(3),t.Y8G("formGroup",o.customerForm),t.R7$(9),t.Y8G("disabled",o.customerForm.invalid))},dependencies:[d.MD,m.hM,m.tx,m.BI,m.E7,m.Yi,p.Hl,p.$z,a.YN,a.qT,a.me,a.BC,a.cb,a.X1,a.j4,a.JD,f.RG,f.rl,f.nJ],encapsulation:2})}}return s})();var D=l(6850),J=l(450),v=l(3902),xt=l(342),St=l(3664);const $t=s=>[s],It=()=>[5,10,15];function wt(s,n){if(1&s){const e=t.RV6();t.j41(0,"p",45),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.editWallet())}),t.EFF(1,"Edit wallet"),t.k0s()}}function Lt(s,n){if(1&s&&(t.j41(0,"div")(1,"h1",16),t.EFF(2),t.nI1(3,"currency"),t.k0s()()),2&s){const e=n.ngIf,i=t.XpG();t.R7$(2),t.JRh(t.i5U(3,1,e.totalEarnings,i.customer.currency))}}function Tt(s,n){if(1&s){const e=t.RV6();t.j41(0,"span",48)(1,"button",40),t.EFF(2),t.k0s(),t.j41(3,"button",63)(4,"mat-icon",5),t.EFF(5,"campaign"),t.k0s(),t.EFF(6," Message Customers"),t.k0s(),t.j41(7,"button",64),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.deleteSelected())}),t.j41(8,"mat-icon",5),t.EFF(9,"delete"),t.k0s(),t.EFF(10," Delete Selected Customers"),t.k0s()()}if(2&s){const e=t.XpG(2);t.R7$(2),t.SpI("",e.selection.selected.length," Selected ")}}function Nt(s,n){if(1&s){const e=t.RV6();t.j41(0,"th",65)(1,"mat-checkbox",66),t.bIt("change",function(o){t.eBV(e);const r=t.XpG(2);return t.Njj(o?r.toggleAllRows():null)}),t.k0s()()}if(2&s){const e=t.XpG(2);t.R7$(),t.Y8G("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())("aria-label",e.checkboxLabel())}}function Gt(s,n){if(1&s){const e=t.RV6();t.j41(0,"td",67)(1,"mat-checkbox",68),t.bIt("click",function(o){return t.eBV(e),t.Njj(o.stopPropagation())})("change",function(o){const r=t.eBV(e).$implicit,u=t.XpG(2);return t.Njj(o?u.selection.toggle(r):null)}),t.k0s()()}if(2&s){const e=n.$implicit,i=t.XpG(2);t.R7$(),t.Y8G("checked",i.selection.isSelected(e))("aria-label",i.checkboxLabel(e))}}function At(s,n){1&s&&(t.j41(0,"th",65),t.EFF(1,"Order Num"),t.k0s())}function Ut(s,n){if(1&s&&(t.j41(0,"td",67),t.EFF(1),t.k0s()),2&s){const e=n.$implicit;t.R7$(),t.JRh(e.reference)}}function Vt(s,n){1&s&&(t.j41(0,"th",65),t.EFF(1,"Category"),t.k0s())}function Yt(s,n){if(1&s&&(t.j41(0,"td",67),t.EFF(1),t.k0s()),2&s){const e=n.$implicit;t.R7$(),t.JRh(e.category)}}function Xt(s,n){1&s&&(t.j41(0,"th",65),t.EFF(1,"Store"),t.k0s())}function Bt(s,n){if(1&s&&(t.j41(0,"td",67),t.EFF(1),t.k0s()),2&s){const e=n.$implicit;t.R7$(),t.JRh(e.store.name)}}function Mt(s,n){1&s&&(t.j41(0,"th",65),t.EFF(1,"Amount"),t.k0s())}function Ot(s,n){if(1&s&&(t.j41(0,"td",67),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&s){const e=n.$implicit;t.R7$(),t.JRh(t.i5U(2,1,null==e?null:e.total,null==e||null==e.store?null:e.store.currency))}}function Jt(s,n){1&s&&(t.j41(0,"th",65),t.EFF(1,"Ordered"),t.k0s())}function zt(s,n){if(1&s&&(t.j41(0,"td",67),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&s){const e=n.$implicit;t.R7$(),t.JRh(t.i5U(2,1,e.createdAt,"short"))}}function Wt(s,n){1&s&&(t.j41(0,"th",65),t.EFF(1,"Actions"),t.k0s())}function Ht(s,n){if(1&s){const e=t.RV6();t.j41(0,"td",67)(1,"button",69)(2,"mat-icon"),t.EFF(3,"more_vert"),t.k0s()(),t.j41(4,"mat-menu",null,0)(6,"button",70),t.bIt("click",function(){const o=t.eBV(e).$implicit,r=t.XpG(2);return t.Njj(r.message(o))}),t.j41(7,"mat-icon",71),t.EFF(8,"campaign"),t.k0s(),t.j41(9,"span"),t.EFF(10,"Message Customer"),t.k0s()(),t.j41(11,"button",70),t.bIt("click",function(){const o=t.eBV(e),r=o.$implicit,u=o.index,R=t.XpG(2);return t.Njj(R.deleteOrder(r._id,u))}),t.j41(12,"mat-icon",71),t.EFF(13,"delete"),t.k0s(),t.j41(14,"span"),t.EFF(15,"Delete"),t.k0s()(),t.j41(16,"button",70),t.bIt("click",function(){const o=t.eBV(e).$implicit,r=t.XpG(2);return t.Njj(r.openOrder(o._id))}),t.j41(17,"mat-icon",71),t.EFF(18,"receipt_long"),t.k0s(),t.j41(19,"span"),t.EFF(20,"Open Order"),t.k0s()()()()}if(2&s){const e=t.sdS(5);t.R7$(),t.Y8G("matMenuTriggerFor",e)}}function Pt(s,n){1&s&&t.nrm(0,"tr",72)}function Zt(s,n){1&s&&t.nrm(0,"tr",73)}function Kt(s,n){if(1&s&&(t.j41(0,"div",46)(1,"div",47)(2,"span",48)(3,"span"),t.EFF(4,"Orders"),t.k0s()(),t.DNE(5,Tt,11,1,"span",49),t.k0s(),t.j41(6,"table",50),t.qex(7,51),t.DNE(8,Nt,2,3,"th",52)(9,Gt,2,2,"td",53),t.bVm(),t.qex(10,54),t.DNE(11,At,2,0,"th",52)(12,Ut,2,1,"td",53),t.bVm(),t.qex(13,55),t.DNE(14,Vt,2,0,"th",52)(15,Yt,2,1,"td",53),t.bVm(),t.qex(16,56),t.DNE(17,Xt,2,0,"th",52)(18,Bt,2,1,"td",53),t.bVm(),t.qex(19,57),t.DNE(20,Mt,2,0,"th",52)(21,Ot,3,4,"td",53),t.bVm(),t.qex(22,58),t.DNE(23,Jt,2,0,"th",52)(24,zt,3,4,"td",53),t.bVm(),t.qex(25,59),t.DNE(26,Wt,2,0,"th",52)(27,Ht,21,1,"td",53),t.bVm(),t.DNE(28,Pt,1,0,"tr",60)(29,Zt,1,0,"tr",61),t.k0s(),t.nrm(30,"mat-paginator",62),t.k0s()),2&s){const e=t.XpG();t.R7$(5),t.Y8G("ngIf",e.selection.selected.length),t.R7$(),t.Y8G("dataSource",e.dataSource),t.R7$(22),t.Y8G("matHeaderRowDef",e.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",e.displayedColumns),t.R7$(),t.Y8G("pageSizeOptions",t.lJ4(5,It))}}function Qt(s,n){if(1&s&&(t.j41(0,"tr",74)(1,"th",75),t.EFF(2),t.k0s(),t.j41(3,"td",76),t.EFF(4),t.k0s(),t.j41(5,"td",76),t.EFF(6),t.k0s(),t.j41(7,"td",76),t.EFF(8),t.nI1(9,"currency"),t.k0s(),t.j41(10,"td",76),t.EFF(11),t.nI1(12,"date"),t.k0s()()),2&s){const e=n.$implicit;t.R7$(2),t.SpI(" ",e.narration," "),t.R7$(2),t.SpI(" ",e.status," "),t.R7$(2),t.SpI(" ",e.type," "),t.R7$(2),t.SpI(" ",t.i5U(9,5,e.totalAmount,e.currency)," "),t.R7$(3),t.SpI(" ",t.i5U(12,8,e.createdAt,"medium")," ")}}function qt(s,n){if(1&s&&(t.j41(0,"table",32)(1,"thead",33)(2,"tr")(3,"th",34),t.EFF(4," Narration "),t.k0s(),t.j41(5,"th",34),t.EFF(6," Status "),t.k0s(),t.j41(7,"th",34),t.EFF(8," Type "),t.k0s(),t.j41(9,"th",34),t.EFF(10," Amount "),t.k0s(),t.j41(11,"th",34),t.EFF(12," Date "),t.k0s()()(),t.j41(13,"tbody"),t.DNE(14,Qt,13,11,"tr",35),t.k0s()()),2&s){const e=n.ngIf;t.R7$(14),t.Y8G("ngForOf",e)}}function te(s,n){if(1&s&&(t.j41(0,"tr",74)(1,"th",75),t.EFF(2),t.k0s(),t.j41(3,"td",76),t.EFF(4),t.k0s(),t.j41(5,"td",76),t.EFF(6),t.nI1(7,"currency"),t.k0s(),t.j41(8,"td",76),t.EFF(9),t.nI1(10,"date"),t.k0s(),t.j41(11,"td",76),t.EFF(12),t.nI1(13,"date"),t.k0s()()),2&s){const e=n.$implicit;t.R7$(2),t.SpI(" ",e.referee.name," "),t.R7$(2),t.SpI(" ",e.earned?"Yes":"NO"," "),t.R7$(2),t.SpI(" ",t.i5U(7,5,e.amount,e.currency)," "),t.R7$(3),t.SpI(" ",t.i5U(10,8,e.createdAt,"medium")," "),t.R7$(3),t.SpI(" ",t.i5U(13,11,e.updatedAt,"medium")," ")}}function ee(s,n){if(1&s&&(t.j41(0,"table",32)(1,"thead",33)(2,"tr")(3,"th",34),t.EFF(4," Referee "),t.k0s(),t.j41(5,"th",34),t.EFF(6," Status "),t.k0s(),t.j41(7,"th",34),t.EFF(8," Amount "),t.k0s(),t.j41(9,"th",34),t.EFF(10," Signed up "),t.k0s(),t.j41(11,"th",34),t.EFF(12," Ordered at "),t.k0s()()(),t.j41(13,"tbody"),t.DNE(14,te,14,14,"tr",35),t.k0s()()),2&s){const e=n.ngIf;t.R7$(14),t.Y8G("ngForOf",e)}}function se(s,n){if(1&s&&(t.j41(0,"tr",74)(1,"th",75),t.EFF(2),t.k0s(),t.j41(3,"td",76),t.EFF(4),t.k0s(),t.j41(5,"td",76),t.EFF(6),t.k0s(),t.j41(7,"td",76),t.EFF(8),t.k0s(),t.j41(9,"td",76),t.EFF(10),t.nI1(11,"date"),t.k0s()()),2&s){const e=n.$implicit;t.R7$(2),t.SpI(" ",e.name," "),t.R7$(2),t.SpI(" ",e.label," "),t.R7$(2),t.SpI(" ",e.state," "),t.R7$(2),t.SpI(" ",e.country," "),t.R7$(2),t.SpI(" ",t.i5U(11,5,e.createdAt,"medium")," ")}}function oe(s,n){if(1&s&&(t.j41(0,"table",32)(1,"thead",33)(2,"tr")(3,"th",34),t.EFF(4," Name "),t.k0s(),t.j41(5,"th",34),t.EFF(6," Label "),t.k0s(),t.j41(7,"th",34),t.EFF(8," State "),t.k0s(),t.j41(9,"th",34),t.EFF(10," Country "),t.k0s(),t.j41(11,"th",34),t.EFF(12," Created "),t.k0s()()(),t.j41(13,"tbody"),t.DNE(14,se,12,8,"tr",35),t.k0s()()),2&s){const e=n.ngIf;t.R7$(14),t.Y8G("ngForOf",e)}}function ie(s,n){if(1&s&&(t.j41(0,"tr",74)(1,"th",75),t.EFF(2),t.k0s(),t.j41(3,"td",76),t.EFF(4),t.k0s(),t.j41(5,"td",76),t.EFF(6),t.k0s(),t.j41(7,"td",76),t.EFF(8),t.k0s(),t.j41(9,"td",76),t.EFF(10),t.k0s()()),2&s){const e=n.$implicit;t.R7$(2),t.SpI(" ",e.make," "),t.R7$(2),t.SpI(" ",e.model," "),t.R7$(2),t.SpI(" ",e.deviceType," "),t.R7$(2),t.SpI(" ",e.osVersion," "),t.R7$(2),t.SpI(" ",e.sdkVersion," ")}}function ne(s,n){if(1&s&&(t.j41(0,"mat-list-item")(1,"mat-icon",43),t.EFF(2,"place"),t.k0s(),t.j41(3,"div",44),t.EFF(4),t.k0s()()),2&s){const e=t.XpG();t.R7$(4),t.JRh(e.customer.shipping.name)}}function ae(s,n){if(1&s&&(t.j41(0,"mat-list-item")(1,"mat-icon",43),t.EFF(2,"flag"),t.k0s(),t.j41(3,"div",44),t.EFF(4),t.k0s()()),2&s){const e=t.XpG();t.R7$(4),t.JRh(e.customer.country)}}function re(s,n){if(1&s&&(t.j41(0,"mat-list-item")(1,"mat-icon",43),t.EFF(2,"male"),t.k0s(),t.j41(3,"div",44),t.EFF(4),t.k0s()()),2&s){const e=t.XpG();t.R7$(4),t.JRh(e.customer.gender)}}function le(s,n){if(1&s&&(t.j41(0,"mat-list-item")(1,"mat-icon",43),t.EFF(2,"language"),t.k0s(),t.j41(3,"div",44),t.EFF(4),t.k0s()()),2&s){const e=t.XpG();t.R7$(4),t.JRh(e.customer.language)}}let z=(()=>{class s{constructor(e,i,o,r,u,R,fe){this.route=e,this.userService=i,this.orderService=o,this.router=r,this.location=u,this._matDialog=R,this.auth=fe,this.displayedColumns=["select","reference","category","store","amount","createdAt","actions"],this.dataSource=new c.I6([]),this.selection=new N.CB(!0,[]),this.Role=A.X}ngOnInit(){this.customer=this.route.snapshot.data.customer,this.getCustomerOrders(this.customer._id),this.getUsersTransaction(),this.getUserReferrals(),this.getUserReferralsStat(),this.getUserAddresses()}getCustomerOrders(e){this.orders$=this.orderService.getUserOrders(e).pipe((0,kt.T)(i=>(this.dataSource=new c.I6(i),this.dataSource.paginator=this.paginator,i)))}getUsersTransaction(){this.transactions$=this.userService.getUserTransactions(this.customer._id)}getUserReferrals(){this.userReferrals$=this.userService.getUserReferrals(this.customer._id)}getUserReferralsStat(){this.userReferralStat$=this.userService.getUserReferralStats(this.customer._id)}getUserAddresses(){this.userAddresses$=this.userService.getUserAddresses(this.customer._id)}openOrder(e){this.router.navigate(["dashboard","orders",e,"details"])}back(){this.location.back()}ngAfterViewInit(){}checkboxLabel(e){return e?`${this.selection.isSelected(e)?"deselect":"select"} row ${e.position+1}`:(this.isAllSelected()?"deselect":"select")+" all"}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}deleteUser(e,i){this.confirmDialogRef=this._matDialog.open(b.Y,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Customer?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete this customer?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(o=>{o&&(this.dataSource.data.splice(i,1),this.dataSource=new c.I6(this.dataSource.data),this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.userService.deleteUser(e).subscribe())})}deleteOrder(e,i){this.confirmDialogRef=this._matDialog.open(b.Y,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Order?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete this order?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(o=>{o&&(this.dataSource.data.splice(i,1),this.dataSource=new c.I6(this.dataSource.data),this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.orderService.deleteOrder(e).subscribe())})}deleteSelected(){this.confirmDialogRef=this._matDialog.open(b.Y,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete orders?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete these orders?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(e=>{e&&this.selection.selected.forEach((i,o)=>{this.dataSource.data.splice(o,1),this.dataSource=new c.I6(this.dataSource.data),this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.userService.deleteUser(i._id).subscribe()})})}openCustomerBasicInfo(){this._matDialog.open(X,{data:this.customer,width:"400px"}).afterClosed().subscribe(i=>{i&&(this.customer={...this.customer,...i})})}editWallet(){this._matDialog.open(O,{data:this.customer,width:"400px"}).afterClosed().subscribe(i=>{i&&(this.customer={...this.customer,...i})})}openCustomerNote(){this._matDialog.open(B,{data:this.customer,width:"400px"}).afterClosed().subscribe(i=>{i&&(this.customer={...this.customer,...i})})}openCustomerMarketingStatus(){this._matDialog.open(M,{data:this.customer,width:"400px"}).afterClosed().subscribe(i=>{i&&(this.customer={...this.customer,...i})})}disableAccount(e){this.customer={...this.customer,deleteAccount:e.checked},this.userService.updateUser(this.customer._id,{deleteAccount:this.customer.deleteAccount}).subscribe()}banAccount(e){this.customer={...this.customer,ban:e.checked},this.userService.updateUser(this.customer._id,{ban:this.customer.ban}).subscribe()}allowCash(e){this.customer={...this.customer,allowCashOnDelivery:e.checked},this.userService.updateUser(this.customer._id,{allowCashOnDelivery:this.customer.allowCashOnDelivery}).subscribe()}allowWallet(e){this.customer={...this.customer,allowWallet:e.checked},this.userService.updateUser(this.customer._id,{allowWallet:this.customer.allowWallet}).subscribe()}deleteAccount(){this.confirmDialogRef=this._matDialog.open(b.Y,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete customers?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete these customers?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(e=>{e&&this.userService.deleteUser(this.customer._id).subscribe(()=>{this.location.back()})})}message(e){}static{this.\u0275fac=function(i){return new(i||s)(t.rXU(h.nX),t.rXU(g.g),t.rXU(xt.B),t.rXU(h.Ix),t.rXU(d.aZ),t.rXU(m.bZ),t.rXU(St.u))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-customers-details"]],viewQuery:function(i,o){if(1&i&&t.GBs(C.iy,5),2&i){let r;t.mGM(r=t.lsd())&&(o.paginator=r.first)}},decls:160,vars:54,consts:[["menu","matMenu"],[1,"md:container","md:mx-auto"],["fxLayout","row","fxLayoutAlign","space-between start",1,"mb-10"],["fxLayout","row","fxLayoutAlign","start start","flexLayoutGap","10px"],["mat-icon-button","",3,"click"],[1,"mat-18"],["fxLayout","column","fxLayoutAlign","start start"],[2,"margin","0px"],["target","_blank",3,"href"],["fxLayout","row","fxLayoutAlign","start start","fxLayoutGap.gt-md","10px"],["mat-raised-button",""],["mat-raised-button","",3,"click","color"],["fxLayout","row","fxLayoutAlign","space-between start","fxLayoutGap","20px"],["fxLayout","column","fxLayoutAlign","space-around start","fxFlex","60%"],["fxLayout","row","fxLayoutAlign","space-between center",1,"mat-elevation-z3","divide-x","divide-gray-300","rounded-md","p-5","w-full"],["fxLayout","column","fxLayoutAlign","space-evenly center ","fxFlex","30%",1,"text-center"],[1,"text-center"],["fxLayout","column","fxLayoutAlign","space-evenly center","fxFlex","30%",1,"text-center"],["fxLayout","row","fxLayoutAlign","space-between center",1,"mat-elevation-z3","divide-x","divide-gray-300","rounded-md","p-5","mt-5","w-full"],["fxLayout","column","fxLayoutAlign","space-evenly center ","fxFlex","50%",1,"text-center"],["class","text-center text-xs cursor-pointer text-blue-700",3,"click",4,"ngIf"],["fxLayout","column","fxLayoutAlign","space-evenly center","fxFlex","50%",1,"text-center"],[4,"ngIf"],[1,"w-full","mt-5"],["label","Orders"],["class","w-full mat-elevation-z3 mt-5",4,"ngIf"],["label","Transactions"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],["class","w-full mt-5 text-sm text-left rtl:text-right text-gray-500 ",4,"ngIf"],["label","Referrals"],["label","Addresses"],["label","Devices"],[1,"w-full","mt-5","text-sm","text-left","rtl:text-right","text-gray-500"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50"],["scope","col",1,"px-6","py-3"],["class","bg-white border-b   hover:bg-gray-50",4,"ngFor","ngForOf"],["fxLayout","column","fxLayoutAlign","space-around start","fxFlex","40%"],["fxLayout","column","fxLayoutAlign","space-around start",1,"mat-elevation-z3","rounded-md","p-2","mb-5","w-full"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-full","px-2"],["fxLayout","row","fxLayoutAlign","space-between start",1,"w-full"],["mat-button",""],[3,"change","checked"],[1,"p-5"],["matListItemIcon","",1,"material-icons-outlined"],["matListItemTitle",""],[1,"text-center","text-xs","cursor-pointer","text-blue-700",3,"click"],[1,"w-full","mat-elevation-z3","mt-5"],["fxLayout","row","fxLayoutGap","10px","fxLayoutAlign","start center",1,"card","bg-white","w-full","mat-elevation-z2","px-2","py-2"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"text-lg","font-thin"],["class","text-lg font-thin","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",4,"ngIf"],["mat-table","",1,"mat-elevation-z3","w-full",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","reference"],["matColumnDef","category"],["matColumnDef","store"],["matColumnDef","amount"],["matColumnDef","createdAt"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["mat-stroked-button","","color","primary"],["mat-stroked-button","","color","warn",3,"click"],["mat-header-cell",""],[3,"change","checked","indeterminate","aria-label"],["mat-cell",""],[3,"click","change","checked","aria-label"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],[1,"material-icons-outlined"],["mat-header-row",""],["mat-row",""],[1,"bg-white","border-b","hover:bg-gray-50"],["scope","row",1,"px-6","py-4","font-medium","text-gray-900","whitespace-nowrap"],[1,"px-6","py-4"]],template:function(i,o){1&i&&(t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"button",4),t.bIt("click",function(){return o.back()}),t.j41(4,"mat-icon",5),t.EFF(5,"arrow_back_ios"),t.k0s()(),t.j41(6,"div",6)(7,"h2",7),t.EFF(8),t.k0s(),t.j41(9,"p"),t.EFF(10),t.nI1(11,"date"),t.k0s(),t.j41(12,"a",8),t.EFF(13),t.k0s()()(),t.j41(14,"div",9)(15,"button",10),t.EFF(16,"Message Customer"),t.k0s(),t.j41(17,"button",11),t.bIt("click",function(){return o.deleteAccount()}),t.EFF(18,"Delete Customer"),t.k0s()()(),t.j41(19,"div",12)(20,"div",13)(21,"div",14)(22,"div",15)(23,"p",16),t.EFF(24,"Amount spent"),t.k0s(),t.j41(25,"h1",16),t.EFF(26),t.nI1(27,"currency"),t.k0s()(),t.j41(28,"div",17)(29,"p",16),t.EFF(30,"Orders"),t.k0s(),t.j41(31,"h1",16),t.EFF(32),t.k0s()(),t.j41(33,"div",17)(34,"p",16),t.EFF(35,"Average order value"),t.k0s(),t.j41(36,"h1",16),t.EFF(37),t.nI1(38,"currency"),t.k0s()()(),t.j41(39,"div",18)(40,"div",19)(41,"p",16),t.EFF(42,"Wallet Ballance"),t.k0s(),t.j41(43,"h1",16),t.EFF(44),t.nI1(45,"currency"),t.k0s(),t.DNE(46,wt,2,0,"p",20),t.k0s(),t.j41(47,"div",21)(48,"p",16),t.EFF(49,"Referral Bonus"),t.k0s(),t.DNE(50,Lt,4,4,"div",22),t.nI1(51,"async"),t.k0s()(),t.j41(52,"mat-tab-group",23)(53,"mat-tab",24),t.DNE(54,Kt,31,6,"div",25),t.nI1(55,"async"),t.k0s(),t.j41(56,"mat-tab",26)(57,"div",27),t.DNE(58,qt,15,1,"table",28),t.nI1(59,"async"),t.k0s()(),t.j41(60,"mat-tab",29)(61,"div",27),t.DNE(62,ee,15,1,"table",28),t.nI1(63,"async"),t.k0s()(),t.j41(64,"mat-tab",30)(65,"div",27),t.DNE(66,oe,15,1,"table",28),t.nI1(67,"async"),t.k0s()(),t.j41(68,"mat-tab",31)(69,"div",27)(70,"table",32)(71,"thead",33)(72,"tr")(73,"th",34),t.EFF(74," Make "),t.k0s(),t.j41(75,"th",34),t.EFF(76," Model "),t.k0s(),t.j41(77,"th",34),t.EFF(78," Device Type "),t.k0s(),t.j41(79,"th",34),t.EFF(80," OS Version "),t.k0s(),t.j41(81,"th",34),t.EFF(82," sdk Version "),t.k0s()()(),t.j41(83,"tbody"),t.DNE(84,ie,11,5,"tr",35),t.k0s()()()()()(),t.j41(85,"div",36)(86,"div",37)(87,"div",38)(88,"div",39)(89,"button",40),t.EFF(90,"Accessibility"),t.k0s(),t.j41(91,"button",4),t.bIt("click",function(){return o.openCustomerMarketingStatus()}),t.j41(92,"mat-icon",5),t.EFF(93,"edit"),t.k0s()()()(),t.j41(94,"mat-list")(95,"mat-list-item")(96,"mat-slide-toggle",41),t.bIt("change",function(u){return o.banAccount(u)}),t.EFF(97,"Ban Customer"),t.k0s()(),t.j41(98,"mat-list-item")(99,"mat-slide-toggle",41),t.bIt("change",function(u){return o.allowCash(u)}),t.EFF(100,"Allow cash on delivery"),t.k0s()(),t.j41(101,"mat-list-item")(102,"mat-slide-toggle",41),t.bIt("change",function(u){return o.allowWallet(u)}),t.EFF(103,"Allow wallet for this Customer"),t.k0s()(),t.j41(104,"mat-list-item")(105,"mat-slide-toggle",41),t.bIt("change",function(u){return o.disableAccount(u)}),t.EFF(106,"Disable Account"),t.k0s()()()(),t.j41(107,"div",37)(108,"div",38)(109,"div",39)(110,"button",40),t.EFF(111,"Notes"),t.k0s(),t.j41(112,"button",4),t.bIt("click",function(){return o.openCustomerNote()}),t.j41(113,"mat-icon",5),t.EFF(114,"edit"),t.k0s()()()(),t.j41(115,"div")(116,"p",42),t.EFF(117),t.k0s()()(),t.j41(118,"div",37)(119,"div",38)(120,"div",39)(121,"button",40),t.EFF(122,"Customers"),t.k0s(),t.j41(123,"button",4),t.bIt("click",function(){return o.openCustomerBasicInfo()}),t.j41(124,"mat-icon",5),t.EFF(125,"edit"),t.k0s()()()(),t.j41(126,"mat-list")(127,"mat-list-item")(128,"mat-icon",43),t.EFF(129,"email"),t.k0s(),t.j41(130,"div",44),t.EFF(131),t.k0s()(),t.j41(132,"mat-list-item")(133,"mat-icon",43),t.EFF(134,"call"),t.k0s(),t.j41(135,"div",44),t.EFF(136),t.k0s()(),t.DNE(137,ne,5,1,"mat-list-item",22)(138,ae,5,1,"mat-list-item",22)(139,re,5,1,"mat-list-item",22)(140,le,5,1,"mat-list-item",22),t.k0s()(),t.j41(141,"div",37)(142,"div",38)(143,"div",39)(144,"button",40),t.EFF(145,"Marketing status"),t.k0s(),t.j41(146,"button",4),t.bIt("click",function(){return o.openCustomerMarketingStatus()}),t.j41(147,"mat-icon",5),t.EFF(148,"edit"),t.k0s()()()(),t.j41(149,"mat-list")(150,"mat-list-item")(151,"mat-icon",43),t.EFF(152,"notifications_active"),t.k0s(),t.j41(153,"div",44),t.EFF(154),t.k0s()(),t.j41(155,"mat-list-item")(156,"mat-icon",43),t.EFF(157,"campaign"),t.k0s(),t.j41(158,"div",44),t.EFF(159),t.k0s()()()()()()()),2&i&&(t.R7$(8),t.Lme("",o.customer.name," (",o.customer.username,")"),t.R7$(2),t.JRh(t.i5U(11,30,o.customer.createdAt,"medium")),t.R7$(2),t.Y8G("href",o.customer.referralLink,t.B4B),t.R7$(),t.JRh(o.customer.referralLink),t.R7$(4),t.Y8G("color","warn"),t.R7$(9),t.JRh(t.i5U(27,33,o.customer.totalAmountSpent,o.customer.currency)),t.R7$(6),t.JRh(o.customer.totalOrders),t.R7$(5),t.JRh(t.i5U(38,36,o.customer.avgAmountSpent,o.customer.currency)),t.R7$(7),t.JRh(t.i5U(45,39,o.customer.walletBallance||0,o.customer.currency)),t.R7$(2),t.Y8G("ngIf",o.auth.isShow(t.eq3(52,$t,o.Role.SuperAdmin))),t.R7$(4),t.Y8G("ngIf",t.bMT(51,42,o.userReferralStat$)),t.R7$(4),t.Y8G("ngIf",t.bMT(55,44,o.orders$)),t.R7$(4),t.Y8G("ngIf",t.bMT(59,46,o.transactions$)),t.R7$(4),t.Y8G("ngIf",t.bMT(63,48,o.userReferrals$)),t.R7$(4),t.Y8G("ngIf",t.bMT(67,50,o.userAddresses$)),t.R7$(18),t.Y8G("ngForOf",o.customer.phoneCredentials),t.R7$(12),t.Y8G("checked",o.customer.ban),t.R7$(3),t.Y8G("checked",o.customer.allowCashOnDelivery),t.R7$(3),t.Y8G("checked",o.customer.allowWallet),t.R7$(3),t.Y8G("checked",o.customer.deleteAccount),t.R7$(12),t.JRh(o.customer.notes?o.customer.notes:"No notes about this customer"),t.R7$(14),t.JRh(o.customer.email),t.R7$(5),t.JRh(o.customer.phoneNumber),t.R7$(),t.Y8G("ngIf",o.customer.shipping),t.R7$(),t.Y8G("ngIf",o.customer.country),t.R7$(),t.Y8G("ngIf",o.customer.gender),t.R7$(),t.Y8G("ngIf",o.customer.language),t.R7$(14),t.JRh(o.customer.allowNotifications?"Mobile Notification Subscribed":"Mobile Notification Unsubscribed"),t.R7$(5),t.JRh(o.customer.allowSalesNotifications?"Sales Notification Subscribed":"Sales Notification Unsubscribed"))},dependencies:[d.MD,d.Sq,d.bT,d.Jj,d.oe,d.vh,c.tP,c.Zl,c.tL,c.ji,c.cC,c.YV,c.iL,c.KS,c.$R,c.YZ,c.NB,h.iI,p.Hl,p.$z,p.iY,C.Ou,C.iy,j.m_,j.An,_.Cn,_.kk,_.fb,_.Cp,E.g7,E.So,f.RG,k.Ve,y.YF,F.DJ,F.BO,F.sA,F.UI,a.X1,a.YN,D.RI,D.mq,D.T8,J.mV,J.sG,v.Fg,v.jt,v.YE,v.ZV,v.yE],encapsulation:2})}}return s})();var x=l(4e3);const ce=[{path:"",component:L,children:[{path:"list",component:Y,resolve:{customers:$,deliveries:x.K,count:w}},{path:":id/details",component:z,resolve:{customer:I}}]}];let me=(()=>{class s{static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275mod=t.$C({type:s})}static{this.\u0275inj=t.G2t({imports:[h.iI.forChild(ce),h.iI]})}}return s})();var ue=l(5490),de=l(4919);let pe=(()=>{class s{static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275mod=t.$C({type:s})}static{this.\u0275inj=t.G2t({providers:[I,$,g.g,ue.I,x.K,x.X,de.s,w],imports:[d.MD,me,y.YF,a.X1,L,Y,z,X,B,M,O]})}}return s})()}}]);