"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[592],{4382:(f,h,n)=>{n.d(h,{D:()=>Z});var o=n(3075),_=n(2349),p=n(1159),e=n(5e3),i=n(2152),l=n(9808),s=n(508),d=n(7423),g=n(6688),v=n(7322),E=n(5245),M=n(7531),O=n(4107),C=n(7093);function P(a,c){if(1&a){const t=e.EpF();e.TgZ(0,"mat-chip",18),e.NdJ("removed",function(){const u=e.CHM(t).$implicit,S=e.oxw(2);return e.KtG(S.remove(u))}),e._uU(1),e.TgZ(2,"button",19)(3,"mat-icon"),e._uU(4,"cancel"),e.qZA()()()}if(2&a){const t=c.$implicit;e.xp6(1),e.hij(" ",t.value.name," ")}}function T(a,c){if(1&a){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-form-field",13)(2,"mat-label"),e._uU(3,"Recipients"),e.qZA(),e.TgZ(4,"mat-chip-list",14,15),e.YNc(6,P,5,1,"mat-chip",16),e.TgZ(7,"input",17),e.NdJ("matChipInputTokenEnd",function(m){e.CHM(t);const u=e.oxw();return e.KtG(u.add(m))}),e.qZA()()(),e.BQk()}if(2&a){const t=e.MAs(5),r=e.oxw();e.xp6(6),e.Q6J("ngForOf",r.recipients.controls),e.xp6(1),e.Q6J("matChipInputFor",t)("matChipInputSeparatorKeyCodes",r.separatorKeysCodes)("matChipInputAddOnBlur",r.addOnBlur)}}function D(a,c){if(1&a&&(e.TgZ(0,"mat-option",21),e._uU(1),e.qZA()),2&a){const t=c.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}const A=function(){return["Registered Customers","Unregistered Customers","Both"]};function I(a,c){1&a&&(e.TgZ(0,"mat-form-field")(1,"mat-label"),e._uU(2,"Select Recipients"),e.qZA(),e.TgZ(3,"mat-select",20),e.YNc(4,D,2,2,"mat-option",8),e.qZA()()),2&a&&(e.xp6(4),e.Q6J("ngForOf",e.DdM(1,A)))}function U(a,c){if(1&a&&(e.TgZ(0,"mat-option",21),e._uU(1),e.qZA()),2&a){const t=c.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}const R=function(){return["Notification","Email","Both"]};let Z=(()=>{class a{constructor(t,r,m,u){this.fb=t,this.notificationsService=r,this.dialogRef=m,this.data=u,this.messagesForm=this.fb.group({title:["",o.kI.required],body:["",o.kI.required],recipients:this.fb.array([]),type:["",o.kI.required],recipientsType:[""]}),this.addOnBlur=!0,this.separatorKeysCodes=[p.K5,p.OC],this.recipientsData=[]}ngOnInit(){this.data.allCustomers||(this.data.isBulkMsg?(this.recipientsData=this.data.customers,this.recipientsData.forEach(t=>{t.phoneCredentials.length>0&&this.addRecipients(t)})):(this.recipientsData.push(this.data.customers),this.recipientsData.map(t=>this.addRecipients(t))))}get recipients(){return this.messagesForm.controls.recipients}addRecipients(t){const r=this.fb.group({name:[t.name],id:[t._id],phoneToken:[t.phoneCredentials]});this.recipients.push(r)}deleteRecipient(t){this.recipients.removeAt(t)}submit(){this.notificationsService.createNotification(this.messagesForm.getRawValue()).subscribe(t=>{this.dialogRef.close(t)})}add(t){const r=(t.value||"").trim();r&&this.recipientsData.push({name:r}),t.chipInput.clear()}remove(t){const r=this.recipientsData.indexOf(t);r>=0&&this.recipientsData.splice(r,1)}edit(t,r){const m=r.value.trim();if(!m)return void this.remove(t);const u=this.recipientsData.indexOf(t);u>0&&(this.recipientsData[u].name=m)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(o.qu),e.Y36(i.T),e.Y36(_.so),e.Y36(_.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-create-messages"]],decls:25,vars:7,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["fxLayout","column","fxLayoutAlign","space-around stretch",3,"formGroup"],[4,"ngIf","ngIfElse"],["selectRecipient",""],["appearance","fill"],["matInput","","placeholder","Enter Message Title","formControlName","title"],["formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Enter Message Body","rows","20","formControlName","body"],["mat-dialog-actions",""],["mat-button","",3,"mat-dialog-close"],["mat-button","","cdkFocusInitial","",3,"disabled","click"],["appearance","fill",1,"example-chip-list"],["aria-label","Fruit selection","formArrayName","recipients"],["chipList",""],[3,"removed",4,"ngFor","ngForOf"],[3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],[3,"removed"],["matChipRemove",""],["formControlName","recipientsType"],[3,"value"]],template:function(t,r){if(1&t&&(e.TgZ(0,"h1",0),e._uU(1,"Send Notification"),e.qZA(),e.TgZ(2,"div",1)(3,"form",2),e.YNc(4,T,8,4,"ng-container",3),e.YNc(5,I,5,2,"ng-template",null,4,e.W1O),e.TgZ(7,"mat-form-field",5)(8,"mat-label"),e._uU(9,"Title"),e.qZA(),e._UZ(10,"input",6),e.qZA(),e.TgZ(11,"mat-form-field",5)(12,"mat-label"),e._uU(13,"Select Message Type"),e.qZA(),e.TgZ(14,"mat-select",7),e.YNc(15,U,2,2,"mat-option",8),e.qZA()(),e.TgZ(16,"mat-form-field",5)(17,"mat-label"),e._uU(18,"body"),e.qZA(),e._UZ(19,"textarea",9),e.qZA()()(),e.TgZ(20,"div",10)(21,"button",11),e._uU(22,"Cancel"),e.qZA(),e.TgZ(23,"button",12),e.NdJ("click",function(){return r.submit()}),e._uU(24,"Send"),e.qZA()()),2&t){const m=e.MAs(6);e.xp6(3),e.Q6J("formGroup",r.messagesForm),e.xp6(1),e.Q6J("ngIf",!r.data.allCustomers)("ngIfElse",m),e.xp6(11),e.Q6J("ngForOf",e.DdM(6,R)),e.xp6(6),e.Q6J("mat-dialog-close",null),e.xp6(2),e.Q6J("disabled",r.messagesForm.invalid)}},dependencies:[l.sg,l.O5,s.ey,d.lW,g.qn,g.HS,g.oH,g.qH,v.KE,v.hX,E.Hw,M.Nt,O.gD,_.ZT,_.uh,_.xY,_.H8,C.xw,C.Wh,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,o.CE]}),a})()},3475:(f,h,n)=>{n.d(h,{T:()=>p,f:()=>e});var o=n(5e3),_=n(6614);let p=(()=>{class i{constructor(s){this.permissionService=s}resolve(){return this.permissionService.getPermissions()}}return i.\u0275fac=function(s){return new(s||i)(o.LFG(_.$))},i.\u0275prov=o.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),e=(()=>{class i{constructor(s){this.permissionService=s}resolve(s){const d=s.paramMap.get("id");return this.permissionService.getPermission(d)}}return i.\u0275fac=function(s){return new(s||i)(o.LFG(_.$))},i.\u0275prov=o.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},6614:(f,h,n)=>{n.d(h,{$:()=>e});var o=n(2340),_=n(5e3),p=n(520);let e=(()=>{class i{constructor(s){this._httpClient=s,this.hostServer=o.N.hostServer}createPermission(s){return this._httpClient.post(`${this.hostServer}/roles`,s)}getPermissions(){return this._httpClient.get(`${this.hostServer}/roles`)}getPermission(s){return this._httpClient.get(`${this.hostServer}/roles/${s}`)}updatePermission(s,d){return this._httpClient.put(`${this.hostServer}/roles/${s}`,d)}deletePermission(s){return this._httpClient.delete(`${this.hostServer}/roles/${s}`)}}return i.\u0275fac=function(s){return new(s||i)(_.LFG(p.eN))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})()},6575:(f,h,n)=>{n.d(h,{f:()=>e});var o=n(2340),_=n(5e3),p=n(520);let e=(()=>{class i{constructor(s){this._httpClient=s,this.hostServer=o.N.hostServer}getUsers(){return this._httpClient.get(`${this.hostServer}/users`)}getUser(s){return this._httpClient.get(`${this.hostServer}/users/${s}`)}deleteUser(s){return this._httpClient.delete(`${this.hostServer}/users/${s}`)}updateUser(s,d){return this._httpClient.put(`${this.hostServer}/users/${s}`,d)}}return i.\u0275fac=function(s){return new(s||i)(_.LFG(p.eN))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac}),i})()}}]);