"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[327],{6327:(nt,_,s)=>{s.r(_),s.d(_,{PayoutsModule:()=>ot});var u=s(6814),l=s(1896),t=s(5879);let b=(()=>{class o{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-payouts"]],decls:1,vars:0,template:function(n,i){1&n&&t._UZ(0,"router-outlet")},dependencies:[l.lC]})}return o})();var y=s(3365),r=s(5313),L=s(8337),x=s(6567),w=s(553),U=s(9862);let m=(()=>{class o{constructor(e){this._httpClient=e,this.hostServer=w.N.hostServer}createTransaction(e){return this._httpClient.post(`${this.hostServer}/transactions`,e)}getTransactions(){return this._httpClient.get(`${this.hostServer}/transactions`)}getTransaction(e){return this._httpClient.get(`${this.hostServer}/transactions/${e}`)}updateTransaction(e,n){return this._httpClient.put(`${this.hostServer}/transactions/${e}`,n)}deleteTransaction(e){return this._httpClient.delete(`${this.hostServer}/transactions/${e}`)}static#t=this.\u0275fac=function(n){return new(n||o)(t.LFG(U.eN))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac})}return o})();var v=s(7700),h=s(2296),Z=s(617),D=s(5986),f=s(7988),p=s(3814);function F(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"span",2)(1,"button",18),t._uU(2),t.qZA(),t.TgZ(3,"button",19),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.deleteSelected())}),t.TgZ(4,"mat-icon",20),t._uU(5,"delete"),t.qZA(),t._uU(6," Delete Selected Fund Request"),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(2),t.hij("",e.selection.selected.length," Selected")}}function P(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"th",21)(1,"mat-checkbox",22),t.NdJ("change",function(i){t.CHM(e);const c=t.oxw();return t.KtG(i?c.toggleAllRows():null)}),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())("aria-label",e.checkboxLabel())}}function k(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"td",23)(1,"mat-checkbox",24),t.NdJ("click",function(i){return i.stopPropagation()})("change",function(i){const d=t.CHM(e).$implicit,g=t.oxw();return t.KtG(i?g.selection.toggle(d):null)}),t.qZA()()}if(2&o){const e=a.$implicit,n=t.oxw();t.xp6(1),t.Q6J("checked",n.selection.isSelected(e))("aria-label",n.checkboxLabel(e))}}function q(o,a){1&o&&(t.TgZ(0,"th",21),t._uU(1,"Created At"),t.qZA())}function R(o,a){if(1&o&&(t.TgZ(0,"td",23),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.createdAt,"medium"))}}function N(o,a){1&o&&(t.TgZ(0,"th",21),t._uU(1,"Vendor"),t.qZA())}function Y(o,a){if(1&o&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.Oqu(e.store.name)}}function M(o,a){1&o&&(t.TgZ(0,"th",21),t._uU(1,"Number of orders"),t.qZA())}function $(o,a){if(1&o&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.Oqu(e.orders.length)}}function J(o,a){1&o&&(t.TgZ(0,"th",21),t._uU(1,"Total"),t.qZA())}function Q(o,a){if(1&o&&(t.TgZ(0,"td",23),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.totalAmount,e.store.currency))}}function G(o,a){1&o&&(t.TgZ(0,"th",21),t._uU(1,"Actions"),t.qZA())}const O=function(o){return["../",o,"edit"]};function z(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"td",23)(1,"button",25),t.NdJ("click",function(i){return i.stopPropagation()}),t.TgZ(2,"mat-icon"),t._uU(3,"more_vert"),t.qZA()(),t.TgZ(4,"mat-menu",null,26)(6,"button",27),t.NdJ("click",function(){const i=t.CHM(e),c=i.$implicit,d=i.index,g=t.oxw();return t.KtG(g.deleteTransaction(c._id,d))}),t.TgZ(7,"mat-icon",28),t._uU(8,"delete"),t.qZA(),t.TgZ(9,"span"),t._uU(10,"Delete"),t.qZA()(),t.TgZ(11,"button",29)(12,"mat-icon",28),t._uU(13,"visibility"),t.qZA(),t.TgZ(14,"span"),t._uU(15,"View Request"),t.qZA()()()()}if(2&o){const e=a.$implicit,n=t.MAs(5);t.xp6(1),t.Q6J("matMenuTriggerFor",n),t.xp6(10),t.Q6J("routerLink",t.VKq(2,O,e._id))}}function H(o,a){1&o&&t._UZ(0,"tr",30)}function B(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr",31),t.NdJ("click",function(){const c=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.openModal(c._id))}),t.qZA()}}const I=function(){return[15,30,60]};let j=(()=>{class o{constructor(e,n,i,c){this.route=e,this.transactionsService=n,this._matDialog=i,this.router=c,this.displayedColumns=["select","createdAt","vendor","orders","total","actions"],this.dataSource=new r.by([]),this.selection=new L.Ov(!0,[])}ngAfterViewInit(){this.dataSource.paginator=this.paginator}ngOnInit(){this.dataSource=new r.by(this.route.snapshot.data.transactions)}openModal(e){this.router.navigate(["dashboard","reports","payouts",e,"details"])}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}deleteSelected(){this.confirmDialogRef=this._matDialog.open(x.X,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Fund Request?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete these Fund Request?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(e=>{e&&this.selection.selected.forEach((n,i)=>{this.dataSource.data.splice(i,1),this.dataSource=new r.by(this.dataSource.data),this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.transactionsService.deleteTransaction(n._id).subscribe()})})}checkboxLabel(e){return e?`${this.selection.isSelected(e)?"deselect":"select"} row ${e.position+1}`:(this.isAllSelected()?"deselect":"select")+" all"}deleteTransaction(e,n){this.confirmDialogRef=this._matDialog.open(x.X,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Fund Requests?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete this Fund Requests?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(i=>{i&&(this.dataSource.data.splice(n,1),this.dataSource=new r.by(this.dataSource.data),this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.transactionsService.deleteTransaction(e).subscribe())})}update(e,n){this.transactionsService.updateTransaction(e,{enabled:n.checked}).subscribe(i=>{})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(l.gz),t.Y36(m),t.Y36(v.uw),t.Y36(l.F0))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-payouts-list"]],viewQuery:function(n,i){if(1&n&&t.Gf(y.NW,5),2&n){let c;t.iGM(c=t.CRH())&&(i.paginator=c.first)}},decls:29,vars:6,consts:[[1,"h-screen","w-full"],["fxLayout","row","fxLayoutGap","10px","fxLayoutAlign","start center",1,"card","bg-white","w-full","mat-elevation-z2","px-2","py-2"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"text-lg","font-thin"],[1,"text-2xl"],["class","text-lg font-thin","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",4,"ngIf"],[1,"mat-elevation-z8"],["mat-table","",1,"w-full",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","createdAt"],["matColumnDef","vendor"],["matColumnDef","orders"],["matColumnDef","total"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","cursor-pointer",3,"click",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["mat-button",""],["mat-stroked-button","","color","warn",3,"click"],[1,"mat-18"],["mat-header-cell",""],[3,"checked","indeterminate","aria-label","change"],["mat-cell",""],[3,"checked","aria-label","click","change"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor","click"],["menu","matMenu"],["mat-menu-item","",3,"click"],[1,"material-icons-outlined"],["mat-menu-item","",3,"routerLink"],["mat-header-row",""],["mat-row","",1,"cursor-pointer",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span",2)(3,"span",3),t._uU(4,"Payout Settlement"),t.qZA()(),t.YNc(5,F,7,1,"span",4),t.qZA(),t.TgZ(6,"div",5)(7,"table",6),t.ynx(8,7),t.YNc(9,P,2,3,"th",8),t.YNc(10,k,2,2,"td",9),t.BQk(),t.ynx(11,10),t.YNc(12,q,2,0,"th",8),t.YNc(13,R,3,4,"td",9),t.BQk(),t.ynx(14,11),t.YNc(15,N,2,0,"th",8),t.YNc(16,Y,2,1,"td",9),t.BQk(),t.ynx(17,12),t.YNc(18,M,2,0,"th",8),t.YNc(19,$,2,1,"td",9),t.BQk(),t.ynx(20,13),t.YNc(21,J,2,0,"th",8),t.YNc(22,Q,3,4,"td",9),t.BQk(),t.ynx(23,14),t.YNc(24,G,2,0,"th",8),t.YNc(25,z,16,4,"td",9),t.BQk(),t.YNc(26,H,1,0,"tr",15),t.YNc(27,B,1,0,"tr",16),t.qZA(),t._UZ(28,"mat-paginator",17),t.qZA()()),2&n&&(t.xp6(5),t.Q6J("ngIf",i.selection.selected.length),t.xp6(2),t.Q6J("dataSource",i.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(5,I)))},dependencies:[u.O5,l.rH,h.lW,h.RK,Z.Hw,y.NW,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,D.oG,f.VK,f.OP,f.p6,p.xw,p.SQ,p.Wh,u.H9,u.uU]})}return o})(),T=(()=>{class o{constructor(e){this.transactionsService=e}resolve(){return this.transactionsService.getTransactions()}static#t=this.\u0275fac=function(n){return new(n||o)(t.LFG(m))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),C=(()=>{class o{constructor(e){this.transactionService=e}resolve(e){const n=e.paramMap.get("id");return this.transactionService.getTransaction(n)}static#t=this.\u0275fac=function(n){return new(n||o)(t.LFG(m))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function K(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"li",13),t.NdJ("click",function(){const c=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.goToOrder(c._id))}),t.TgZ(1,"div",6)(2,"div",7)(3,"p",8),t._uU(4),t.qZA()(),t.TgZ(5,"div",7)(6,"p",8),t._uU(7),t.ALo(8,"date"),t.qZA()(),t.TgZ(9,"div",9),t._uU(10),t.ALo(11,"currency"),t.qZA()()()}if(2&o){const e=a.$implicit,n=t.oxw();t.xp6(4),t.hij(" ",e.payment," "),t.xp6(3),t.hij(" ",t.xi3(8,3,e.createdAt,"meduim")," "),t.xp6(3),t.hij(" ",t.xi3(11,6,e.total-e.serviceFee-e.shippingFee-(e.total-e.serviceFee-e.shippingFee)/100*e.vendorCommission,n.transaction.store.currency)," ")}}let A=(()=>{class o{constructor(e,n,i){this.route=e,this.transactionsService=n,this.router=i,this.transaction=this.route.snapshot.data.transaction}ngOnInit(){}closeModal(){this.router.navigate(["dashboard","reports","payouts","list"])}goToOrder(e){this.router.navigate(["dashboard","orders",e,"details"])}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(l.gz),t.Y36(m),t.Y36(l.F0))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-payouts-details"]],decls:49,vars:11,consts:[[1,"mat-elevation-z8","container","mx-auto","my-10","p-5",2,"width","40rem"],["fxLayout","row","fxLayoutAlign","space-between center",1,"mb-3"],[1,"text-slate-500"],["mat-icon-button","",3,"click"],[1,"divide-y","w-full","divide-gray-200"],[1,"pb-3","sm:pb-4"],[1,"flex","items-center","space-x-4"],[1,"flex-1","min-w-0"],[1,"text-sm","font-medium","text-gray-900","truncate"],[1,"inline-flex","items-center","text-base","font-semibold","text-gray-900"],[1,"py-3","sm:py-4"],[1,"divide-y","w-full","divide-gray-100"],["class","py-3 sm:py-4 hover:bg-slate-300 cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"py-3","sm:py-4","hover:bg-slate-300","cursor-pointer",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),t._uU(3,"Settlement information"),t.qZA(),t.TgZ(4,"button",3),t.NdJ("click",function(){return i.closeModal()}),t.TgZ(5,"mat-icon"),t._uU(6,"close"),t.qZA()()(),t.TgZ(7,"ul",4)(8,"li",5)(9,"div",6)(10,"div",7)(11,"p",8),t._uU(12," Reference "),t.qZA()(),t.TgZ(13,"div",9),t._uU(14),t.qZA()()(),t.TgZ(15,"li",10)(16,"div",6)(17,"div",7)(18,"p",8),t._uU(19," Store / Vendor "),t.qZA()(),t.TgZ(20,"div",9),t._uU(21),t.qZA()()(),t.TgZ(22,"li",10)(23,"div",6)(24,"div",7)(25,"p",8),t._uU(26," Created "),t.qZA()(),t.TgZ(27,"div",9),t._uU(28),t.ALo(29,"date"),t.qZA()()(),t.TgZ(30,"li",10)(31,"div",6)(32,"div",7)(33,"p",8),t._uU(34," Status "),t.qZA()(),t.TgZ(35,"div",9),t._uU(36),t.qZA()()(),t.TgZ(37,"li",10)(38,"div",6)(39,"div",7)(40,"p",8),t._uU(41," Fee "),t.qZA()(),t.TgZ(42,"div",9),t._uU(43),t.ALo(44,"currency"),t.qZA()()()(),t.TgZ(45,"h3",2),t._uU(46,"Orders that make up this settlement"),t.qZA(),t.TgZ(47,"ul",11),t.YNc(48,K,12,9,"li",12),t.qZA()()),2&n&&(t.xp6(14),t.hij(" ",i.transaction.reference," "),t.xp6(7),t.hij(" ",i.transaction.store.name," "),t.xp6(7),t.hij(" ",t.lcZ(29,6,i.transaction.createdAt)," "),t.xp6(8),t.hij(" ",i.transaction.status," "),t.xp6(7),t.hij(" ",t.xi3(44,8,i.transaction.totalAmount,i.transaction.store.currency)," "),t.xp6(5),t.Q6J("ngForOf",i.transaction.orders))},dependencies:[u.sg,h.RK,Z.Hw,p.xw,p.Wh,u.H9,u.uU]})}return o})();const E=[{path:"",component:b,children:[{path:"list",component:j,resolve:{transactions:T}},{path:":id/details",component:A,resolve:{transaction:C}}]}];let V=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[l.Bz.forChild(E),l.Bz]})}return o})();var X=s(1447),S=s(6223),W=s(6005),tt=s(6208);let et=(()=>{class o{constructor(e,n){this.dialog=e,this.router=n}canActivate(e,n){const i=e.paramMap.get("id");return this.dialog.open(A,{data:{id:i}}),!1}static#t=this.\u0275fac=function(n){return new(n||o)(t.LFG(v.uw),t.LFG(l.F0))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac})}return o})(),ot=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({providers:[m,T,C,et],imports:[u.ez,V,W.q,X.o9,S.UX,S.u5,tt.m]})}return o})()}}]);