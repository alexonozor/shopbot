"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[884],{9884:(q,_,a)=>{a.r(_),a.d(_,{BlockModule:()=>vt});var d=a(6814),g=a(1896),n=a(6223),m=a(7700),c=a(4716),t=a(5879),s=a(5372),f=a(3680),b=a(2296),k=a(9157),U=a(2032),Z=a(8525),v=a(3814);function J(o,r){if(1&o&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(e.name)}}function L(o,r){if(1&o&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(e.name)}}function Y(o,r){if(1&o&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(e.name)}}function E(o,r){if(1&o&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(e.name)}}function w(o,r){if(1&o&&(t.TgZ(0,"span",24),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.AsE(" (+",((null==e.blockForm.value||null==e.blockForm.value.country?null:e.blockForm.value.country.length)||0)-1," ",2===(null==e.blockForm.value||null==e.blockForm.value.country?null:e.blockForm.value.country.length)?"other":"others",") ")}}function z(o,r){if(1&o&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function P(o,r){if(1&o&&(t.TgZ(0,"span",24),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.AsE(" (+",((null==e.blockForm.value||null==e.blockForm.value.cities?null:e.blockForm.value.cities.length)||0)-1," ",2===(null==e.blockForm.value||null==e.blockForm.value.cities?null:e.blockForm.value.cities.length)?"other":"others",") ")}}function S(o,r){if(1&o&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}const B=function(){return{name:"Yes",value:!0}},D=function(){return{name:"No",value:!1}},C=function(o,r){return[o,r]},$=function(){return{name:"Vertical",value:"vertical"}},R=function(){return{name:"Horizontal",value:"horizontal"}},W=function(){return["Nigeria","Mauritius","Kenya","Rwanda"]},K=function(){return["Yenagoa","Lagos","Warri","PH"]};let N=(()=>{class o{constructor(e,i,l,u,p){this._formBuilder=e,this.settingsService=i,this.dialogRef=l,this.data=u,this.route=p,this.isLoading=!1,this.types=[{name:"Categories",value:"category"},{name:"Store grid",value:"store-grid"},{name:"Store List",value:"store-list"},{name:"Sliders",value:"slider"},{name:"Food items",value:"food"},{name:"Cuisines",value:"cuisine"}]}ngOnInit(){this.blockForm=this.createProductForm(),this.zones=this.route.snapshot.data.zones}createProductForm(){return this._formBuilder.group({title:["",n.kI.required],type:["",n.kI.required],content:["",n.kI.required],useAggrregateQuery:["",n.kI.required],query:[""],country:["",n.kI.required],cities:["",n.kI.required],metaQuery:this._formBuilder.group({params:[""],controls:[""],url:[""]}),active:[!1,n.kI.required],orientation:["",n.kI.required]})}save(){this.isLoading=!0,this.settingsService.creatBlock(this.blockForm.getRawValue()).pipe((0,c.x)(()=>this.isLoading=!1)).subscribe(e=>{this.isLoading=!0,this.dialogRef.close(!0)})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(n.qu),t.Y36(s.g),t.Y36(m.so),t.Y36(m.WI),t.Y36(g.gz))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-create-blocks"]],decls:68,vars:30,consts:[["matDialogTitle",""],["mat-dialog-content",""],["name","storeForm","fxLayout","column","fxFlex","",1,"product","w-100-p",3,"formGroup"],["appearance","outline","floatLabel","always",1,"w-100-p"],["matInput","","placeholder","Title","name","title","formControlName","title","required",""],["formControlName","type","placeholder","Category"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Block Content","name","content","formControlName","content","rows","5"],["formControlName","useAggrregateQuery","placeholder","Use aggregate query"],["formControlName","active","placeholder","Enabled"],["formControlName","orientation"],["matInput","","placeholder","Query","name","query","formControlName","query","rows","5"],["formGroupName","metaQuery"],["matInput","","placeholder","Params","name","params","formControlName","params","rows","5"],["matInput","","placeholder","Controls","name","controls","formControlName","controls","rows","5"],["matInput","","placeholder","Url","name","controls","formControlName","url","rows","5"],["appearance","outline"],["multiple","","formControlName","country"],["class","example-additional-selection",4,"ngIf"],["multiple","","formControlName","cities"],["mat-dialog-actions","",1,"pt-24"],["mat-button","","mat-dialog-close",""],["mat-raised-button","",1,"mat-accent","mr-16",3,"disabled","click"],[3,"value"],[1,"example-additional-selection"]],template:function(i,l){1&i&&(t.TgZ(0,"h1",0),t._uU(1,"Create Block"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),t._uU(6,"Title"),t.qZA(),t._UZ(7,"input",4),t.qZA(),t.TgZ(8,"mat-form-field",3)(9,"mat-select",5),t.YNc(10,J,2,2,"mat-option",6),t.qZA()(),t.TgZ(11,"mat-form-field",3)(12,"mat-label"),t._uU(13,"Content"),t.qZA(),t._UZ(14,"textarea",7),t.qZA(),t.TgZ(15,"mat-form-field",3)(16,"mat-label"),t._uU(17,"Use aggregate query"),t.qZA(),t.TgZ(18,"mat-select",8),t.YNc(19,L,2,2,"mat-option",6),t.qZA()(),t.TgZ(20,"mat-form-field",3)(21,"mat-label"),t._uU(22,"Activate"),t.qZA(),t.TgZ(23,"mat-select",9),t.YNc(24,Y,2,2,"mat-option",6),t.qZA()(),t.TgZ(25,"mat-form-field",3)(26,"mat-label"),t._uU(27,"Display Orientation"),t.qZA(),t.TgZ(28,"mat-select",10),t.YNc(29,E,2,2,"mat-option",6),t.qZA()(),t.TgZ(30,"mat-form-field",3)(31,"mat-label"),t._uU(32,"Query"),t.qZA(),t._UZ(33,"textarea",11),t.qZA(),t.ynx(34,12),t.TgZ(35,"mat-form-field",3)(36,"mat-label"),t._uU(37,"Params Query"),t.qZA(),t._UZ(38,"textarea",13),t.qZA(),t.TgZ(39,"mat-form-field",3)(40,"mat-label"),t._uU(41,"Controls"),t.qZA(),t._UZ(42,"textarea",14),t.qZA(),t.TgZ(43,"mat-form-field",3)(44,"mat-label"),t._uU(45,"Url"),t.qZA(),t._UZ(46,"textarea",15),t.qZA(),t.BQk(),t.TgZ(47,"mat-form-field",16)(48,"mat-label"),t._uU(49,"Country"),t.qZA(),t.TgZ(50,"mat-select",17)(51,"mat-select-trigger"),t._uU(52),t.YNc(53,w,2,2,"span",18),t.qZA(),t.YNc(54,z,2,2,"mat-option",6),t.qZA()(),t.TgZ(55,"mat-form-field",16)(56,"mat-label"),t._uU(57,"City"),t.qZA(),t.TgZ(58,"mat-select",19)(59,"mat-select-trigger"),t._uU(60),t.YNc(61,P,2,2,"span",18),t.qZA(),t.YNc(62,S,2,2,"mat-option",6),t.qZA()()()(),t.TgZ(63,"div",20)(64,"button",21),t._uU(65,"Cancel"),t.qZA(),t.TgZ(66,"button",22),t.NdJ("click",function(){return l.save()}),t._uU(67),t.qZA()()),2&i&&(t.xp6(3),t.Q6J("formGroup",l.blockForm),t.xp6(7),t.Q6J("ngForOf",l.types),t.xp6(9),t.Q6J("ngForOf",t.WLB(15,C,t.DdM(13,B),t.DdM(14,D))),t.xp6(5),t.Q6J("ngForOf",t.WLB(20,C,t.DdM(18,B),t.DdM(19,D))),t.xp6(5),t.Q6J("ngForOf",t.WLB(25,C,t.DdM(23,$),t.DdM(24,R))),t.xp6(23),t.hij(" ",(null==l.blockForm.value||null==l.blockForm.value.country?null:l.blockForm.value.country[0])||""," "),t.xp6(1),t.Q6J("ngIf",((null==l.blockForm.value||null==l.blockForm.value.country||null==l.blockForm.value.country.value?null:l.blockForm.value.country.value.length)||0)>1),t.xp6(1),t.Q6J("ngForOf",t.DdM(28,W)),t.xp6(6),t.hij(" ",(null==l.blockForm.value||null==l.blockForm.value.cities?null:l.blockForm.value.cities[0])||""," "),t.xp6(1),t.Q6J("ngIf",((null==l.blockForm.value||null==l.blockForm.value.cities||null==l.blockForm.value.cities.value?null:l.blockForm.value.cities.value.length)||0)>1),t.xp6(1),t.Q6J("ngForOf",t.DdM(29,K)),t.xp6(4),t.Q6J("disabled",!l.blockForm.valid),t.xp6(1),t.Oqu(l.isLoading?"Please wait..":"Save"))},dependencies:[d.sg,d.O5,f.ey,b.lW,k.KE,k.hX,U.Nt,Z.gD,Z.$L,m.ZT,m.uh,m.xY,m.H8,n._Y,n.Fj,n.JJ,n.JL,n.Q7,n.sg,n.u,n.x0,v.xw,v.yH]})}return o})();function G(o,r){if(1&o&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(e.name)}}function H(o,r){if(1&o&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(e.name)}}function j(o,r){if(1&o&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(e.name)}}function X(o,r){if(1&o&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(e.name)}}function V(o,r){if(1&o&&(t.TgZ(0,"span",24),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.AsE(" (+",((null==e.blockForm.value||null==e.blockForm.value.country?null:e.blockForm.value.country.length)||0)-1," ",2===(null==e.blockForm.value||null==e.blockForm.value.country?null:e.blockForm.value.country.length)?"other":"others",") ")}}function tt(o,r){if(1&o&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.country),t.xp6(1),t.Oqu(e.country)}}function et(o,r){if(1&o&&(t.TgZ(0,"span",24),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.AsE(" (+",((null==e.blockForm.value||null==e.blockForm.value.cities?null:e.blockForm.value.cities.length)||0)-1," ",2===(null==e.blockForm.value||null==e.blockForm.value.cities?null:e.blockForm.value.cities.length)?"other":"others",") ")}}function ot(o,r){if(1&o&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}const O=function(){return{name:"Yes",value:!0}},Q=function(){return{name:"No",value:!1}},x=function(o,r){return[o,r]},lt=function(){return{name:"Vertical",value:"vertical"}},nt=function(){return{name:"Horizontal",value:"horizontal"}},it=function(){return["Yenagoa","Lagos","Warri","PH"]};let I=(()=>{class o{constructor(e,i,l,u,p){this._formBuilder=e,this.settingsService=i,this.dialogRef=l,this.route=u,this.data=p,this.isLoading=!1,this.types=[{name:"Categories",value:"category"},{name:"Store grid",value:"store-grid"},{name:"Store List",value:"store-list"},{name:"Sliders",value:"slider"},{name:"Food items",value:"food"},{name:"Cuisines",value:"cuisine"}],console.log(p),this.block=p.block,this.zones=p.zones}ngOnInit(){this.blockForm=this.createProductForm()}createProductForm(){return this._formBuilder.group({title:[this.block.title,n.kI.required],type:[this.block.type,n.kI.required],content:[this.block.content,n.kI.required],useAggrregateQuery:[this.block.useAggrregateQuery,n.kI.required],query:[this.block.query,n.kI.required],country:[this.block.country,n.kI.required],cities:[this.block.cities,n.kI.required],orientation:[this.block.orientation,n.kI.required],metaQuery:this._formBuilder.group({params:[this.block.metaQuery.params],controls:[this.block.metaQuery.controls],url:[this.block.metaQuery.url]}),active:[this.block.active,n.kI.required]})}save(){this.isLoading=!0;let e=this.blockForm.getRawValue();this.settingsService.updateBlock(this.block._id,e).pipe((0,c.x)(()=>this.isLoading=!1)).subscribe(i=>{this.isLoading=!0,this.dialogRef.close(!0)})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(n.qu),t.Y36(s.g),t.Y36(m.so),t.Y36(g.gz),t.Y36(m.WI))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-edit-blocks"]],decls:68,vars:29,consts:[["matDialogTitle",""],["mat-dialog-content",""],["name","storeForm","fxLayout","column","fxFlex","",1,"product","w-100-p",3,"formGroup"],["appearance","outline","floatLabel","always",1,"w-100-p"],["matInput","","placeholder","Title","name","title","formControlName","title","required",""],["formControlName","type","placeholder","Category"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Block Content","name","content","formControlName","content","rows","5"],["formControlName","useAggrregateQuery","placeholder","Use aggregate query"],["formControlName","active","placeholder","Enabled"],["formControlName","orientation"],["matInput","","placeholder","Query","name","query","formControlName","query","rows","5"],["formGroupName","metaQuery"],["matInput","","placeholder","Params","name","params","formControlName","params","rows","5"],["matInput","","placeholder","Controls","name","controls","formControlName","controls","rows","5"],["matInput","","placeholder","Url","name","controls","formControlName","url","rows","5"],["appearance","outline"],["multiple","","formControlName","country"],["class","example-additional-selection",4,"ngIf"],["multiple","","formControlName","cities"],["mat-dialog-actions","",1,"pt-24"],["mat-button","","mat-dialog-close",""],["mat-raised-button","",1,"mat-accent","mr-16",3,"disabled","click"],[3,"value"],[1,"example-additional-selection"]],template:function(i,l){1&i&&(t.TgZ(0,"h1",0),t._uU(1,"Upadate block"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),t._uU(6,"Title"),t.qZA(),t._UZ(7,"input",4),t.qZA(),t.TgZ(8,"mat-form-field",3)(9,"mat-select",5),t.YNc(10,G,2,2,"mat-option",6),t.qZA()(),t.TgZ(11,"mat-form-field",3)(12,"mat-label"),t._uU(13,"Content"),t.qZA(),t._UZ(14,"textarea",7),t.qZA(),t.TgZ(15,"mat-form-field",3)(16,"mat-label"),t._uU(17,"Use aggregate query"),t.qZA(),t.TgZ(18,"mat-select",8),t.YNc(19,H,2,2,"mat-option",6),t.qZA()(),t.TgZ(20,"mat-form-field",3)(21,"mat-label"),t._uU(22,"Activate"),t.qZA(),t.TgZ(23,"mat-select",9),t.YNc(24,j,2,2,"mat-option",6),t.qZA()(),t.TgZ(25,"mat-form-field",3)(26,"mat-label"),t._uU(27,"Display Orientation"),t.qZA(),t.TgZ(28,"mat-select",10),t.YNc(29,X,2,2,"mat-option",6),t.qZA()(),t.TgZ(30,"mat-form-field",3)(31,"mat-label"),t._uU(32,"Query"),t.qZA(),t._UZ(33,"textarea",11),t.qZA(),t.ynx(34,12),t.TgZ(35,"mat-form-field",3)(36,"mat-label"),t._uU(37,"Params Query"),t.qZA(),t._UZ(38,"textarea",13),t.qZA(),t.TgZ(39,"mat-form-field",3)(40,"mat-label"),t._uU(41,"Controls"),t.qZA(),t._UZ(42,"textarea",14),t.qZA(),t.TgZ(43,"mat-form-field",3)(44,"mat-label"),t._uU(45,"Url"),t.qZA(),t._UZ(46,"textarea",15),t.qZA(),t.BQk(),t.TgZ(47,"mat-form-field",16)(48,"mat-label"),t._uU(49,"Country"),t.qZA(),t.TgZ(50,"mat-select",17)(51,"mat-select-trigger"),t._uU(52),t.YNc(53,V,2,2,"span",18),t.qZA(),t.YNc(54,tt,2,2,"mat-option",6),t.qZA()(),t.TgZ(55,"mat-form-field",16)(56,"mat-label"),t._uU(57,"City"),t.qZA(),t.TgZ(58,"mat-select",19)(59,"mat-select-trigger"),t._uU(60),t.YNc(61,et,2,2,"span",18),t.qZA(),t.YNc(62,ot,2,2,"mat-option",6),t.qZA()()()(),t.TgZ(63,"div",20)(64,"button",21),t._uU(65,"Cancel"),t.qZA(),t.TgZ(66,"button",22),t.NdJ("click",function(){return l.save()}),t._uU(67),t.qZA()()),2&i&&(t.xp6(3),t.Q6J("formGroup",l.blockForm),t.xp6(7),t.Q6J("ngForOf",l.types),t.xp6(9),t.Q6J("ngForOf",t.WLB(15,x,t.DdM(13,O),t.DdM(14,Q))),t.xp6(5),t.Q6J("ngForOf",t.WLB(20,x,t.DdM(18,O),t.DdM(19,Q))),t.xp6(5),t.Q6J("ngForOf",t.WLB(25,x,t.DdM(23,lt),t.DdM(24,nt))),t.xp6(23),t.hij(" ",(null==l.blockForm.value||null==l.blockForm.value.country?null:l.blockForm.value.country[0])||""," "),t.xp6(1),t.Q6J("ngIf",((null==l.blockForm.value||null==l.blockForm.value.country?null:l.blockForm.value.country.length)||0)>1),t.xp6(1),t.Q6J("ngForOf",l.zones),t.xp6(6),t.hij(" ",(null==l.blockForm.value||null==l.blockForm.value.cities?null:l.blockForm.value.cities[0])||""," "),t.xp6(1),t.Q6J("ngIf",((null==l.blockForm.value||null==l.blockForm.value.cities?null:l.blockForm.value.cities.length)||0)>1),t.xp6(1),t.Q6J("ngForOf",t.DdM(28,it)),t.xp6(4),t.Q6J("disabled",!l.blockForm.valid),t.xp6(1),t.Oqu(l.isLoading?"Please wait..":"Save"))},dependencies:[d.sg,d.O5,f.ey,b.lW,k.KE,k.hX,U.Nt,Z.gD,Z.$L,m.ZT,m.uh,m.xY,m.H8,n._Y,n.Fj,n.JJ,n.JL,n.Q7,n.sg,n.u,n.x0,v.xw,v.yH]})}return o})();var at=a(6567),T=a(6236),rt=a(617),A=a(7988),M=a(9038),st=a(2599);function ct(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(e);const l=t.oxw().$implicit,u=t.oxw();return t.KtG(u.viewDetails(l))}),t.TgZ(1,"mat-icon"),t._uU(2,"done"),t.qZA(),t._uU(3," Enable "),t.qZA()}}function ut(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"li",5)(1,"div",6)(2,"div",7)(3,"mat-icon"),t._uU(4,"drag_handle"),t.qZA()(),t.TgZ(5,"div",8)(6,"p",9),t._uU(7),t.qZA(),t.TgZ(8,"p",10),t._uU(9),t.qZA()(),t.TgZ(10,"div",11)(11,"mat-slide-toggle",12),t.NdJ("ngModelChange",function(l){const p=t.CHM(e).$implicit;return t.KtG(p.active=l)})("change",function(l){const p=t.CHM(e).$implicit,F=t.oxw();return t.KtG(F.onChange(p,l))}),t.qZA(),t.TgZ(12,"button",13)(13,"mat-icon"),t._uU(14,"more_vert"),t.qZA()(),t.TgZ(15,"mat-menu",14,15),t.NdJ("click",function(l){return l.stopPropagation()}),t.TgZ(17,"button",16),t.NdJ("click",function(l){const u=t.CHM(e),p=u.index,F=u.$implicit;return t.oxw().delete(p,F._id),t.KtG(l.stopPropagation())}),t.TgZ(18,"mat-icon"),t._uU(19,"delete"),t.qZA(),t._uU(20," Delete"),t.qZA(),t.YNc(21,ct,4,0,"button",17),t.TgZ(22,"button",16),t.NdJ("click",function(){const u=t.CHM(e).$implicit,p=t.oxw();return t.KtG(p.viewDetails(u))}),t.TgZ(23,"mat-icon"),t._uU(24,"edit"),t.qZA(),t._uU(25," Edit / View "),t.qZA()()()()()}if(2&o){const e=r.$implicit,i=t.MAs(16);t.xp6(7),t.hij(" ",e.title," "),t.xp6(2),t.AsE(" ",e.content," - ",e.orientation," "),t.xp6(2),t.Q6J("ngModel",e.active),t.xp6(1),t.Q6J("matMenuTriggerFor",i),t.xp6(9),t.Q6J("ngIf",!e.active)}}let mt=(()=>{class o{constructor(e,i,l,u){this.settingsService=e,this._matDialog=i,this.router=l,this.route=u,this.blocks=[]}ngOnInit(){this.blocks=this.route.snapshot.data.blocks,this.zones=this.route.snapshot.data.zones}delete(e,i){this.confirmDialogRef=this._matDialog.open(at.X,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Block?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete this Block?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(l=>{l&&(this.blocks.splice(e,1),this.settingsService.deleteBlock(i).subscribe()),this.confirmDialogRef=null})}addNewBlock(){this._matDialog.open(N,{width:"500px",disableClose:!1,data:{zones:this.zones}}).afterClosed().subscribe(i=>{i&&this.settingsService.getBlocks().subscribe(l=>{this.blocks=l})})}onChange(e,i){this.settingsService.updateBlock(e._id,{active:i.checked}).subscribe(()=>{})}viewDetails(e){this._matDialog.open(I,{data:{zones:this.zones,block:e},width:"500px",disableClose:!1}).afterClosed().subscribe(l=>{l&&this.settingsService.getBlocks().subscribe(u=>{this.blocks=u})})}drop(e){(0,T.bA)(this.blocks,e.previousIndex,e.currentIndex),this.blocks.forEach((i,l)=>{this.settingsService.updateBlock(i._id,{position:l}).subscribe()})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(s.g),t.Y36(m.uw),t.Y36(g.F0),t.Y36(g.gz))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-list-blocks"]],decls:8,vars:1,consts:[["mat-subheader",""],["cdkDropList","",1,"divide-y","divide-gray-200","w-full","example-list",3,"cdkDropListDropped"],["cdkDrag","","class","w-full bg-white p-4",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","end end"],["mat-fab","","color","primary","aria-label","Add Store",1,"fixed",3,"click"],["cdkDrag","",1,"w-full","bg-white","p-4"],[1,"flex","items-center","space-x-4"],[1,"flex-shrink-0","cursor-drag"],[1,"flex-1","min-w-0"],[1,"text-sm","font-medium","text-gray-900","mb-0","truncate",2,"margin-bottom","0px"],[1,"text-sm","text-gray-500","mb-0","truncate",2,"margin-bottom","0px"],[1,"inline-flex","items-center","text-base","font-semibold","text-gray-900"],["matListItemIcon","","color","primary",1,"mx-8",3,"ngModel","ngModelChange","change"],["mat-icon-button","",3,"matMenuTriggerFor"],[3,"click"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"ngIf"]],template:function(i,l){1&i&&(t.TgZ(0,"div",0),t._uU(1,"Mobile Blocks"),t.qZA(),t.TgZ(2,"ul",1),t.NdJ("cdkDropListDropped",function(p){return l.drop(p)}),t.YNc(3,ut,26,6,"li",2),t.qZA(),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return l.addNewBlock()}),t.TgZ(6,"mat-icon"),t._uU(7,"add"),t.qZA()()()),2&i&&(t.xp6(3),t.Q6J("ngForOf",l.blocks))},dependencies:[d.sg,d.O5,b.RK,b.cs,rt.Hw,A.VK,A.OP,A.p6,M.Yt,M.gs,st.Rr,T.Wj,T.Zt,n.JJ,n.On,v.xw,v.Wh],styles:[".example-list[_ngcontent-%COMP%]{width:100%;border:solid 1px #ccc;min-height:60px;display:block;background:white;border-radius:4px;overflow:hidden}.example-box[_ngcontent-%COMP%]{padding:20px 10px;border-bottom:solid 1px #ccc;color:#000000de;display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:move;background:white;font-size:14px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.example-custom-placeholder[_ngcontent-%COMP%]{background:#ccc;border:dotted 3px #999;min-height:60px;transition:transform .25s cubic-bezier(0,0,.2,1)}typography[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}"]})}return o})();var y=a(5951),h=a(3212);const pt=[{path:"",component:mt,resolve:{blocks:y.gE,zones:h.h}},{path:"create",component:N,resolve:{deliveries:h.h}},{path:":id/edit",component:I,resolve:{block:y.gE,deliveries:h.h}}];let dt=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[g.Bz.forChild(pt),g.Bz]})}return o})();var gt=a(6005),ft=a(1447),_t=a(547);let vt=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({providers:[s.g,y.gE,y.iI,h.h,h.g,_t._],imports:[d.ez,dt,gt.q,n.u5,n.UX,ft.o9]})}return o})()},3212:(q,_,a)=>{a.d(_,{g:()=>m,h:()=>n});var d=a(5879),g=a(547);let n=(()=>{class c{constructor(s){this.deliveryService=s}resolve(){return this.deliveryService.getDeliveryZones()}static#t=this.\u0275fac=function(f){return new(f||c)(d.LFG(g._))};static#e=this.\u0275prov=d.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})(),m=(()=>{class c{constructor(s){this.deliveryService=s}resolve(s){const f=s.paramMap.get("id");return this.deliveryService.getDeliveryZone(f)}static#t=this.\u0275fac=function(f){return new(f||c)(d.LFG(g._))};static#e=this.\u0275prov=d.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},547:(q,_,a)=>{a.d(_,{_:()=>m});var d=a(553),g=a(5879),n=a(9862);let m=(()=>{class c{constructor(s){this._httpClient=s,this.hostServer=d.N.hostServer}createDeliveryZone(s){return this._httpClient.post(`${this.hostServer}/delivery-zones`,s)}getDeliveryZones(){return this._httpClient.get(`${this.hostServer}/delivery-zones`)}getDeliveryZone(s){return this._httpClient.get(`${this.hostServer}/delivery-zones/${s}`)}deleteDeliveryZone(s){return this._httpClient.delete(`${this.hostServer}/delivery-zones/${s}`)}updateDeliveryZone(s,f){return this._httpClient.put(`${this.hostServer}/delivery-zones/${s}`,f)}static#t=this.\u0275fac=function(f){return new(f||c)(g.LFG(n.eN))};static#e=this.\u0275prov=g.Yz7({token:c,factory:c.\u0275fac})}return c})()}}]);