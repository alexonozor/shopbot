"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[1302],{1302:(Oe,B,l)=>{l.r(B),l.d(B,{BannersModule:()=>Me});var c=l(177),u=l(8498),e=l(3953);let L=(()=>{class n{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-banners"]],decls:1,vars:0,template:function(a,o){1&a&&e.nrm(0,"router-outlet")},dependencies:[u.n3],encapsulation:2})}return n})();var U=l(1269),Z=l(5312),A=l(1626);let p=(()=>{class n{constructor(t){this._httpClient=t,this.hostServer=Z.c.hostServer}createBanner(t){return this._httpClient.post(`${this.hostServer}/banners`,t)}getBanners(){return this._httpClient.get(`${this.hostServer}/banners/admin`)}getBanner(t){return this._httpClient.get(`${this.hostServer}/banners/${t}`)}updateBanner(t,a){return this._httpClient.put(`${this.hostServer}/banners/${t}`,a)}deleteBanner(t){return this._httpClient.delete(`${this.hostServer}/banners/${t}`)}static#e=this.\u0275fac=function(a){return new(a||n)(e.KVO(A.Qq))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac})}return n})();var C=l(5351),f=l(8834),P=l(9213),k=l(9115),y=l(450),r=l(9417);function z(n,i){1&n&&(e.j41(0,"div",21),e.nrm(1,"div",22),e.EFF(2," Active "),e.k0s())}function K(n,i){1&n&&(e.j41(0,"div",21),e.nrm(1,"div",23),e.EFF(2," Inactive "),e.k0s())}function H(n,i){if(1&n){const t=e.RV6();e.j41(0,"tr",9)(1,"th",10),e.nrm(2,"img",11),e.j41(3,"div",12)(4,"div",13),e.EFF(5),e.k0s(),e.j41(6,"div",14),e.EFF(7),e.k0s()()(),e.j41(8,"td",15),e.DNE(9,z,3,0,"div",16)(10,K,3,0,"div",16),e.k0s(),e.j41(11,"td",15)(12,"mat-slide-toggle",17),e.mxI("ngModelChange",function(o){const s=e.eBV(t).$implicit;return e.DH7(s.active,o)||(s.active=o),e.Njj(o)}),e.bIt("change",function(o){const s=e.eBV(t).$implicit,m=e.XpG();return e.Njj(m.onChange(s,o))}),e.k0s()(),e.j41(13,"td",15)(14,"button",18)(15,"mat-icon"),e.EFF(16,"more_vert"),e.k0s()(),e.j41(17,"mat-menu",19,0),e.bIt("click",function(o){return e.eBV(t),e.Njj(o.stopPropagation())}),e.j41(19,"button",20),e.bIt("click",function(o){const s=e.eBV(t),m=s.$implicit,h=s.index;return e.XpG().delete(h,m._id),e.Njj(o.stopPropagation())}),e.j41(20,"mat-icon"),e.EFF(21,"delete"),e.k0s(),e.EFF(22," Delete"),e.k0s(),e.j41(23,"button",20),e.bIt("click",function(){const o=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.viewDetails(o))}),e.j41(24,"mat-icon"),e.EFF(25,"edit"),e.k0s(),e.EFF(26," Edit / View "),e.k0s()()()()}if(2&n){const t=i.$implicit,a=e.sdS(18);e.R7$(2),e.Y8G("src",t.image,e.B4B),e.R7$(3),e.JRh(t.title),e.R7$(2),e.Lme("",t.category," - ",t.country," "),e.R7$(2),e.Y8G("ngIf",t.active),e.R7$(),e.Y8G("ngIf",!t.active),e.R7$(2),e.R50("ngModel",t.active),e.R7$(2),e.Y8G("matMenuTriggerFor",a)}}let Q=(()=>{class n{constructor(t,a,o,s){this.bannersService=t,this._matDialog=a,this.router=o,this.route=s,this.displayedColumns=["name","description","active","action"],this.banners=[],this.banners=this.route.snapshot.data.banners}ngOnInit(){}delete(t,a){this.confirmDialogRef=this._matDialog.open(U.Y,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Banner?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete this banner?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(o=>{o&&(this.banners.splice(t,1),this.bannersService.deleteBanner(a).subscribe()),this.confirmDialogRef=null})}onChange(t,a){this.bannersService.updateBanner(t._id,{active:a.checked}).subscribe(()=>{})}viewDetails(t){this.router.navigate(["dashboard","banners",t._id,"edit"])}addBanner(){this.router.navigate(["dashboard","banners","new"])}static#e=this.\u0275fac=function(a){return new(a||n)(e.rXU(p),e.rXU(C.bZ),e.rXU(u.Ix),e.rXU(u.nX))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-list-banners"]],decls:18,vars:1,consts:[["menu","matMenu"],[1,"w-full","h-screen","relative"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","text-gray-500"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50"],["scope","col",1,"px-6","py-3"],["class","bg-white border-b ",4,"ngFor","ngForOf"],["mat-fab","","color","primary",2,"position","fixed","bottom","80px","right","15px",3,"click"],[1,"mat-18"],[1,"bg-white","border-b"],["scope","row",1,"flex","items-center","px-6","py-4","text-gray-900","whitespace-nowrap"],["alt","Jese image",1,"w-10","h-10","rounded-full",3,"src"],[1,"pl-3"],[1,"text-base","font-semibold"],[1,"font-normal","text-gray-500"],[1,"px-6","py-4"],["class","flex items-center",4,"ngIf"],["color","primary",1,"mx-8",3,"ngModelChange","change","ngModel"],["mat-icon-button","",3,"matMenuTriggerFor"],[3,"click"],["mat-menu-item","",3,"click"],[1,"flex","items-center"],[1,"h-2.5","w-2.5","rounded-full","bg-green-500","mr-2"],[1,"h-2.5","w-2.5","rounded-full","bg-red-500","mr-2"]],template:function(a,o){1&a&&(e.j41(0,"div",1)(1,"div",2)(2,"table",3)(3,"thead",4)(4,"tr")(5,"th",5),e.EFF(6," Name "),e.k0s(),e.j41(7,"th",5),e.EFF(8," Status "),e.k0s(),e.j41(9,"th",5),e.EFF(10," Change Status "),e.k0s(),e.j41(11,"th",5),e.EFF(12," Action "),e.k0s()()(),e.j41(13,"tbody"),e.DNE(14,H,27,8,"tr",6),e.k0s()()(),e.j41(15,"button",7),e.bIt("click",function(){return o.addBanner()}),e.j41(16,"mat-icon",8),e.EFF(17,"add"),e.k0s()()()),2&a&&(e.R7$(14),e.Y8G("ngForOf",o.banners))},dependencies:[c.Sq,c.bT,f.iY,f.Sr,P.An,k.kk,k.fb,k.Cp,y.sG,r.BC,r.vS]})}return n})();var S=l(2264),I=l(9172),$=l(152),R=l(5558),G=l(6354),x=l(5117),E=l(5749),N=l(2390),_=l(850),D=l(6600),g=l(3719),T=l(9631),v=l(2798),d=l(2920),Y=l(6038),M=l(801);const W=()=>["Product","Category","Blog"],O=()=>({value:!0,name:"Yes"}),V=()=>({value:!1,name:"No"}),X=(n,i)=>[n,i];function q(n,i){if(1&n&&(e.j41(0,"mat-option",20),e.EFF(1),e.k0s()),2&n){const t=i.$implicit;e.Y8G("value",t),e.R7$(),e.JRh(t)}}function ee(n,i){if(1&n&&(e.j41(0,"mat-option",25)(1,"span"),e.EFF(2),e.k0s()()),2&n){const t=i.$implicit;e.Y8G("value",t.name)("id",t._id),e.R7$(2),e.JRh(t.name)}}function te(n,i){if(1&n){const t=e.RV6();e.j41(0,"mat-form-field",21)(1,"mat-label"),e.EFF(2,"Store"),e.k0s(),e.nrm(3,"input",22),e.j41(4,"mat-autocomplete",23,0),e.bIt("optionSelected",function(o){e.eBV(t);const s=e.XpG();return e.Njj(s.onShopSelectionChanged(o))}),e.DNE(6,ee,3,3,"mat-option",24),e.nI1(7,"async"),e.k0s()()}if(2&n){const t=e.sdS(5),a=e.XpG();e.R7$(3),e.Y8G("matAutocomplete",t)("formControl",a.storesCtrl),e.R7$(3),e.Y8G("ngForOf",e.bMT(7,3,a.filteredStores))}}function ne(n,i){if(1&n&&(e.j41(0,"mat-option",20)(1,"span"),e.EFF(2),e.k0s()()),2&n){const t=i.$implicit;e.Y8G("value",t._id),e.R7$(2),e.JRh(t.name)}}function ae(n,i){if(1&n){const t=e.RV6();e.j41(0,"mat-form-field",21)(1,"mat-label"),e.EFF(2,"Select product menu"),e.k0s(),e.j41(3,"mat-select",26),e.bIt("selectionChange",function(o){e.eBV(t);const s=e.XpG();return e.Njj(s.changeMenu(o))}),e.DNE(4,ne,3,2,"mat-option",10),e.nI1(5,"async"),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(4),e.Y8G("ngForOf",e.bMT(5,1,t.menus$))}}function oe(n,i){if(1&n&&(e.j41(0,"mat-option",20)(1,"span"),e.EFF(2),e.k0s()()),2&n){const t=i.$implicit;e.Y8G("value",t._id),e.R7$(2),e.JRh(t.name)}}function ie(n,i){if(1&n&&(e.j41(0,"mat-form-field",21)(1,"mat-label"),e.EFF(2,"Select product"),e.k0s(),e.j41(3,"mat-select",27),e.DNE(4,oe,3,2,"mat-option",10),e.k0s()()),2&n){const t=e.XpG();e.R7$(4),e.Y8G("ngForOf",t.selectedMenu.foods)}}function re(n,i){if(1&n&&(e.j41(0,"mat-option",20),e.EFF(1),e.k0s()),2&n){const t=i.$implicit;e.Y8G("value",t.value),e.R7$(),e.JRh(t.name)}}function se(n,i){if(1&n&&(e.j41(0,"mat-option",20),e.EFF(1),e.k0s()),2&n){const t=i.$implicit;e.Y8G("value",t.country),e.R7$(),e.JRh(t.country)}}function le(n,i){if(1&n&&(e.j41(0,"span",31),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.Lme(" (+",((null==t.bannerForm.value||null==t.bannerForm.value.states?null:t.bannerForm.value.states.length)||0)-1," ",2===(null==t.bannerForm.value||null==t.bannerForm.value.states?null:t.bannerForm.value.states.length)?"other":"others",") ")}}function me(n,i){if(1&n&&(e.j41(0,"mat-option",20),e.EFF(1),e.k0s()),2&n){const t=i.$implicit;e.Y8G("value",t.name),e.R7$(),e.JRh(t.name)}}function ce(n,i){if(1&n&&(e.j41(0,"mat-form-field",28)(1,"mat-label"),e.EFF(2,"States"),e.k0s(),e.j41(3,"mat-select",29)(4,"mat-select-trigger"),e.EFF(5),e.DNE(6,le,2,2,"span",30),e.k0s(),e.DNE(7,me,2,2,"mat-option",10),e.k0s()()),2&n){const t=e.XpG();e.R7$(5),e.SpI(" ",(null==t.bannerForm.value||null==t.bannerForm.value.states?null:t.bannerForm.value.states[0])||""," "),e.R7$(),e.Y8G("ngIf",((null==t.bannerForm.value||null==t.bannerForm.value.states?null:t.bannerForm.value.states.length)||0)>1),e.R7$(),e.Y8G("ngForOf",t.selectedZone.states)}}function ue(n,i){if(1&n&&(e.j41(0,"mat-option",20),e.EFF(1),e.k0s()),2&n){const t=i.$implicit;e.Y8G("value",t.value),e.R7$(),e.JRh(t.name)}}let de=(()=>{class n{constructor(t,a,o,s,m,h,b,j){this.fb=t,this.bannerService=a,this.location=o,this.dialog=s,this.route=m,this.storesService=h,this.storeService=b,this.menusService=j,this.storesCtrl=new r.MJ(""),this.stores=[],this.menus=[],this.banner=this.route.snapshot.data.banner,this.deliveryZones=this.route.snapshot.data.deliveryZones,this.selectedCountry(this.banner.country),this.mediaData={image:null,icon:null},this.bannerForm=this.fb.group({image:[this.banner.image,r.k0.required],title:[this.banner.title,r.k0.required],active:[this.banner.active,r.k0.required],category:[this.banner.category,r.k0.required],link:[this.banner.link],showOnSlider:[this.banner.showOnSlider,r.k0.required],shortDescription:[this.banner.shortDescription,r.k0.required],storeId:[this.banner.storeId],menuId:[this.banner.menuId],productId:[this.banner.productId],country:[this.banner.country,r.k0.required],states:[this.banner.states,r.k0.required]}),this.mediaData={image:null,icon:null},this.mediaData.image=this.banner.image}ngOnInit(){"Product"==this.bannerForm.value.category&&(this.storeId=this.bannerForm.value.storeId,this.storeService.getStore(this.bannerForm.value.storeId).then(t=>{this.filteredStores=this.storesCtrl.valueChanges.pipe((0,I.Z)(t.name),(0,$.B)(500),(0,R.n)(a=>this.storesService.search(a))),this.bannerForm.patchValue({storeId:t.name}),this.getStoreMenu(t._id)}))}selectedCountry(t){t&&(this.selectedZone=this.deliveryZones.find(a=>a.country==t))}onShopSelectionChanged(t){this.bannerForm.patchValue({storeId:t.option.value}),this.getStoreMenu(t.option.id),this.storeId=t.option.id}getStoreMenu(t){this.menus$=this.menusService.getStoreMenus(t).pipe((0,G.T)(a=>(this.menus=a,this.selectedMenu=this.menus.find(o=>o._id==this.banner.menuId),a)))}changeMenu(t){this.selectedMenu=this.menus.find(a=>a._id==t.source.value)}submit(){this.bannerForm.valid&&(this.bannerForm.patchValue({storeId:this.storeId}),this.bannerService.updateBanner(this.banner._id,this.bannerForm.getRawValue()).subscribe(t=>{this.location.back()}))}back(){this.location.back()}addMedia(t){this.dialog.open(S.w).afterClosed().subscribe(o=>{o&&(this.bannerForm.patchValue({[t]:o.url}),this.mediaData[t]={[t]:o}[t])})}removeValue(t){this.bannerForm.patchValue({[t]:null}),this.mediaData[t]=null}static#e=this.\u0275fac=function(a){return new(a||n)(e.rXU(r.ok),e.rXU(p),e.rXU(c.aZ),e.rXU(C.bZ),e.rXU(u.nX),e.rXU(x.a),e.rXU(E.n),e.rXU(N.g))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-edit-banners"]],decls:46,vars:23,consts:[["auto","matAutocomplete"],["ngStyle.gt-sm","width: 50rem;","ngStyle.lt-lg","width: 100%",1,"mat-elevation-z8","container","mx-auto","my-10","p-5"],[3,"ngSubmit","formGroup"],["fxLayout","column","fxLayoutAlign","space-evenly stretch"],[1,"mb-4"],["valueName","Image",3,"removeValue","openMediaBrowser","isNew","mediaData"],[1,"full-width"],["matInput","","cancellation","Name Of Banner","formControlName","title"],["matInput","","cancellation","Short Description","formControlName","shortDescription"],["formControlName","category"],[3,"value",4,"ngFor","ngForOf"],["class","example-full-width",4,"ngIf"],["matInput","","cancellation","Enter Link","formControlName","link"],["formControlName","showOnSlider"],["formControlName","country",3,"selectionChange"],["appearance","fill",4,"ngIf"],["formControlName","active"],["fxLayout","row","fxLayoutAlign","space-around center","fxLayoutGap","10px"],["mat-raised-button","","fxFlex","50%",3,"click"],["mat-raised-button","","fxFlex","50%","color","primary",3,"disabled"],[3,"value"],[1,"example-full-width"],["matInput","","aria-label","Store","formControlName","storeId",3,"matAutocomplete","formControl"],[3,"optionSelected"],[3,"value","id",4,"ngFor","ngForOf"],[3,"value","id"],["formControlName","menuId",3,"selectionChange"],["formControlName","productId"],["appearance","fill"],["multiple","","formControlName","states"],["class","example-additional-selection",4,"ngIf"],[1,"example-additional-selection"]],template:function(a,o){1&a&&(e.j41(0,"div",1)(1,"form",2),e.bIt("ngSubmit",function(){return o.submit()}),e.j41(2,"div",3)(3,"div",4)(4,"app-select-media",5),e.bIt("removeValue",function(m){return o.removeValue(m)})("openMediaBrowser",function(m){return o.addMedia(m)}),e.k0s()(),e.j41(5,"mat-form-field",6)(6,"mat-label"),e.EFF(7,"Name Of Banner"),e.k0s(),e.nrm(8,"input",7),e.k0s(),e.j41(9,"mat-form-field",6)(10,"mat-label"),e.EFF(11,"Short Description"),e.k0s(),e.nrm(12,"textarea",8),e.k0s(),e.j41(13,"mat-form-field",6)(14,"mat-label"),e.EFF(15,"Category"),e.k0s(),e.j41(16,"mat-select",9),e.DNE(17,q,2,2,"mat-option",10),e.k0s()(),e.DNE(18,te,8,5,"mat-form-field",11)(19,ae,6,3,"mat-form-field",11)(20,ie,5,1,"mat-form-field",11),e.j41(21,"mat-form-field",6)(22,"mat-label"),e.EFF(23,"Link"),e.k0s(),e.nrm(24,"input",12),e.k0s(),e.j41(25,"mat-form-field",6)(26,"mat-label"),e.EFF(27,"Show on Slider"),e.k0s(),e.j41(28,"mat-select",13),e.DNE(29,re,2,2,"mat-option",10),e.k0s()(),e.j41(30,"mat-form-field")(31,"mat-label"),e.EFF(32,"Country"),e.k0s(),e.j41(33,"mat-select",14),e.bIt("selectionChange",function(m){return o.selectedCountry(m.value)}),e.DNE(34,se,2,2,"mat-option",10),e.k0s()(),e.DNE(35,ce,8,3,"mat-form-field",15),e.j41(36,"mat-form-field",6)(37,"mat-label"),e.EFF(38,"Publish"),e.k0s(),e.j41(39,"mat-select",16),e.DNE(40,ue,2,2,"mat-option",10),e.k0s()(),e.j41(41,"div",17)(42,"a",18),e.bIt("click",function(){return o.back()}),e.EFF(43,"CANCEL"),e.k0s(),e.j41(44,"button",19),e.EFF(45,"SAVE"),e.k0s()()()()()),2&a&&(e.R7$(),e.Y8G("formGroup",o.bannerForm),e.R7$(3),e.Y8G("isNew",!1)("mediaData",null==o.mediaData?null:o.mediaData.image),e.R7$(13),e.Y8G("ngForOf",e.lJ4(12,W)),e.R7$(),e.Y8G("ngIf","Product"===o.bannerForm.value.category),e.R7$(),e.Y8G("ngIf",o.bannerForm.value.storeId),e.R7$(),e.Y8G("ngIf",o.selectedMenu),e.R7$(9),e.Y8G("ngForOf",e.l_i(15,X,e.lJ4(13,O),e.lJ4(14,V))),e.R7$(5),e.Y8G("ngForOf",o.deliveryZones),e.R7$(),e.Y8G("ngIf",o.bannerForm.value.country),e.R7$(5),e.Y8G("ngForOf",e.l_i(20,X,e.lJ4(18,O),e.lJ4(19,V))),e.R7$(4),e.Y8G("disabled",o.bannerForm.invalid))},dependencies:[c.Sq,c.bT,_.$3,D.wT,_.pN,f.It,f.$z,g.rl,g.nJ,T.fg,v.VO,v.$2,r.qT,r.me,r.BC,r.cb,r.l_,r.j4,r.JD,d.DJ,d.BO,d.sA,d.UI,Y.eI,M.C,c.Jj]})}return n})();const pe=()=>["Product","Category","Blog","Ads"],fe=()=>({value:!0,name:"Yes"}),he=()=>({value:!1,name:"No"}),_e=(n,i)=>[n,i];function ge(n,i){if(1&n&&(e.j41(0,"mat-option",20),e.EFF(1),e.k0s()),2&n){const t=i.$implicit;e.Y8G("value",t),e.R7$(),e.JRh(t)}}function ve(n,i){if(1&n&&(e.j41(0,"mat-option",25)(1,"span"),e.EFF(2),e.k0s()()),2&n){const t=i.$implicit;e.Y8G("value",t.name)("id",t._id),e.R7$(2),e.JRh(t.name)}}function Fe(n,i){if(1&n){const t=e.RV6();e.j41(0,"mat-form-field",21)(1,"mat-label"),e.EFF(2,"Store"),e.k0s(),e.nrm(3,"input",22),e.j41(4,"mat-autocomplete",23,0),e.bIt("optionSelected",function(o){e.eBV(t);const s=e.XpG();return e.Njj(s.onShopSelectionChanged(o))}),e.DNE(6,ve,3,3,"mat-option",24),e.nI1(7,"async"),e.k0s()()}if(2&n){const t=e.sdS(5),a=e.XpG();e.R7$(3),e.Y8G("matAutocomplete",t)("formControl",a.storesCtrl),e.R7$(3),e.Y8G("ngForOf",e.bMT(7,3,a.filteredStores))}}function be(n,i){if(1&n&&(e.j41(0,"mat-option",20)(1,"span"),e.EFF(2),e.k0s()()),2&n){const t=i.$implicit;e.Y8G("value",t._id),e.R7$(2),e.JRh(t.name)}}function Ce(n,i){if(1&n){const t=e.RV6();e.j41(0,"mat-form-field",21)(1,"mat-label"),e.EFF(2,"Select product menu"),e.k0s(),e.j41(3,"mat-select",26),e.bIt("selectionChange",function(o){e.eBV(t);const s=e.XpG();return e.Njj(s.changeMenu(o))}),e.DNE(4,be,3,2,"mat-option",9),e.nI1(5,"async"),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(4),e.Y8G("ngForOf",e.bMT(5,1,t.menus$))}}function ke(n,i){if(1&n&&(e.j41(0,"mat-option",20)(1,"span"),e.EFF(2),e.k0s()()),2&n){const t=i.$implicit;e.Y8G("value",t._id),e.R7$(2),e.JRh(t.name)}}function Ee(n,i){if(1&n&&(e.j41(0,"mat-form-field",21)(1,"mat-label"),e.EFF(2,"Select product"),e.k0s(),e.j41(3,"mat-select",27),e.DNE(4,ke,3,2,"mat-option",9),e.k0s()()),2&n){const t=e.XpG();e.R7$(4),e.Y8G("ngForOf",t.selectedMenu.foods)}}function je(n,i){if(1&n&&(e.j41(0,"mat-option",20),e.EFF(1),e.k0s()),2&n){const t=i.$implicit;e.Y8G("value",t.value),e.R7$(),e.JRh(t.name)}}function Be(n,i){if(1&n&&(e.j41(0,"mat-option",20),e.EFF(1),e.k0s()),2&n){const t=i.$implicit;e.Y8G("value",t.country),e.R7$(),e.JRh(t.country)}}function ye(n,i){if(1&n&&(e.j41(0,"span",30),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.Lme(" (+",((null==t.bannerForm.value||null==t.bannerForm.value.states?null:t.bannerForm.value.states.length)||0)-1," ",2===(null==t.bannerForm.value||null==t.bannerForm.value.states?null:t.bannerForm.value.states.length)?"other":"others",") ")}}function Se(n,i){if(1&n&&(e.j41(0,"mat-option",20),e.EFF(1),e.k0s()),2&n){const t=i.$implicit;e.Y8G("value",t.name),e.R7$(),e.JRh(t.name)}}function Ie(n,i){if(1&n&&(e.j41(0,"mat-form-field",13)(1,"mat-label"),e.EFF(2,"States"),e.k0s(),e.j41(3,"mat-select",28)(4,"mat-select-trigger"),e.EFF(5),e.DNE(6,ye,2,2,"span",29),e.k0s(),e.DNE(7,Se,2,2,"mat-option",9),e.k0s()()),2&n){const t=e.XpG();e.R7$(5),e.SpI(" ",(null==t.bannerForm.value||null==t.bannerForm.value.states?null:t.bannerForm.value.states[0])||""," "),e.R7$(),e.Y8G("ngIf",((null==t.bannerForm.value||null==t.bannerForm.value.states?null:t.bannerForm.value.states.length)||0)>1),e.R7$(),e.Y8G("ngForOf",t.selectedZone.states)}}let $e=(()=>{class n{constructor(t,a,o,s,m,h,b,j){this.fb=t,this.bannerService=a,this.location=o,this.dialog=s,this.storesService=m,this.menusService=h,this.storeService=b,this.route=j,this.storesCtrl=new r.MJ(""),this.stores=[],this.menus=[],this.deliveryZones=this.route.snapshot.data.deliveryZones,this.mediaData={image:null,icon:null},this.bannerForm=this.fb.group({image:["",r.k0.required],title:["",r.k0.required],active:[!1,r.k0.required],category:["",r.k0.required],link:[""],shortDescription:["",r.k0.required],showOnSlider:[!1,r.k0.required],storeId:[""],menuId:[""],productId:[""],country:["",r.k0.required],states:["",r.k0.required]})}selectedCountry(t){this.selectedZone=this.deliveryZones.find(a=>a.country==t.value)}ngOnInit(){this.filteredStores=this.storesCtrl.valueChanges.pipe((0,I.Z)(""),(0,$.B)(500),(0,R.n)(t=>this.storesService.search(t)))}submit(){this.bannerForm.valid&&this.bannerService.createBanner(this.bannerForm.getRawValue()).subscribe(t=>{this.location.back()})}onShopSelectionChanged(t){this.bannerForm.patchValue({storeId:t.option.id}),this.getStoreMenu(t.option.id)}getStoreMenu(t){this.menus$=this.menusService.getStoreMenus(t).pipe((0,G.T)(a=>this.menus=a))}changeMenu(t){this.selectedMenu=this.menus.find(a=>a._id==t.source.value)}back(){this.location.back()}displayFn(t){return t.name}selectedStore(t){console.log(t.option.value)}addMedia(t){this.dialog.open(S.w).afterClosed().subscribe(o=>{o&&(this.bannerForm.patchValue({[t]:o.url}),this.mediaData[t]={[t]:o}[t])})}removeValue(t){this.bannerForm.patchValue({[t]:null}),this.mediaData[t]=null}static#e=this.\u0275fac=function(a){return new(a||n)(e.rXU(r.ok),e.rXU(p),e.rXU(c.aZ),e.rXU(C.bZ),e.rXU(x.a),e.rXU(N.g),e.rXU(E.n),e.rXU(u.nX))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-create-banners"]],decls:42,vars:17,consts:[["auto","matAutocomplete"],["ngStyle.gt-sm","width: 50rem;","ngStyle.lt-lg","width: 100%",1,"mat-elevation-z8","container","mx-auto","my-10","p-5"],[3,"ngSubmit","formGroup"],["fxLayout","column","fxLayoutAlign","space-evenly stretch"],["valueName","Image",3,"removeValue","openMediaBrowser","isNew","mediaData"],["appearance","fill",1,"full-width"],["matInput","","cancellation","Name Of Banner","formControlName","title"],["matInput","","cancellation","Short Description","formControlName","shortDescription"],["formControlName","category"],[3,"value",4,"ngFor","ngForOf"],["class","example-full-width",4,"ngIf"],["formControlName","showOnSlider"],["matInput","","cancellation","Enter Link","formControlName","link"],["appearance","fill"],["formControlName","country",3,"selectionChange"],["appearance","fill",4,"ngIf"],["formControlName","active"],["fxLayout","row","fxLayoutAlign","space-around center","fxLayoutGap","10px"],["mat-raised-button","","fxFlex","50%",3,"click"],["mat-raised-button","","fxFlex","50%","color","primary",3,"disabled"],[3,"value"],[1,"example-full-width"],["matInput","","aria-label","Store","formControlName","storeId",3,"matAutocomplete","formControl"],[3,"optionSelected"],[3,"value","id",4,"ngFor","ngForOf"],[3,"value","id"],["formControlName","menuId",3,"selectionChange"],["formControlName","productId"],["multiple","","formControlName","states"],["class","example-additional-selection",4,"ngIf"],[1,"example-additional-selection"]],template:function(a,o){1&a&&(e.j41(0,"div",1)(1,"form",2),e.bIt("ngSubmit",function(){return o.submit()}),e.j41(2,"div",3)(3,"app-select-media",4),e.bIt("removeValue",function(m){return o.removeValue(m)})("openMediaBrowser",function(m){return o.addMedia(m)}),e.k0s(),e.j41(4,"mat-form-field",5)(5,"mat-label"),e.EFF(6,"Name Of Banner"),e.k0s(),e.nrm(7,"input",6),e.k0s(),e.j41(8,"mat-form-field",5)(9,"mat-label"),e.EFF(10,"Short Description"),e.k0s(),e.nrm(11,"input",7),e.k0s(),e.j41(12,"mat-form-field",5)(13,"mat-label"),e.EFF(14,"Category"),e.k0s(),e.j41(15,"mat-select",8),e.DNE(16,ge,2,2,"mat-option",9),e.k0s()(),e.DNE(17,Fe,8,5,"mat-form-field",10)(18,Ce,6,3,"mat-form-field",10)(19,Ee,5,1,"mat-form-field",10),e.j41(20,"mat-form-field",5)(21,"mat-label"),e.EFF(22,"Show on Slider"),e.k0s(),e.j41(23,"mat-select",11),e.DNE(24,je,2,2,"mat-option",9),e.k0s()(),e.j41(25,"mat-form-field",5)(26,"mat-label"),e.EFF(27,"Link"),e.k0s(),e.nrm(28,"input",12),e.k0s(),e.j41(29,"mat-form-field",13)(30,"mat-label"),e.EFF(31,"Country"),e.k0s(),e.j41(32,"mat-select",14),e.bIt("selectionChange",function(m){return o.selectedCountry(m)}),e.DNE(33,Be,2,2,"mat-option",9),e.k0s()(),e.DNE(34,Ie,8,3,"mat-form-field",15),e.j41(35,"mat-slide-toggle",16),e.EFF(36,"Enable"),e.k0s(),e.j41(37,"div",17)(38,"a",18),e.bIt("click",function(){return o.back()}),e.EFF(39,"CANCEL"),e.k0s(),e.j41(40,"button",19),e.EFF(41,"SAVE"),e.k0s()()()()()),2&a&&(e.R7$(),e.Y8G("formGroup",o.bannerForm),e.R7$(2),e.Y8G("isNew",!1)("mediaData",null==o.mediaData?null:o.mediaData.image),e.R7$(13),e.Y8G("ngForOf",e.lJ4(11,pe)),e.R7$(),e.Y8G("ngIf","Product"===o.bannerForm.value.category),e.R7$(),e.Y8G("ngIf",o.bannerForm.value.storeId),e.R7$(),e.Y8G("ngIf",o.selectedMenu),e.R7$(5),e.Y8G("ngForOf",e.l_i(14,_e,e.lJ4(12,fe),e.lJ4(13,he))),e.R7$(9),e.Y8G("ngForOf",o.deliveryZones),e.R7$(),e.Y8G("ngIf",o.selectedZone),e.R7$(6),e.Y8G("disabled",o.bannerForm.invalid))},dependencies:[c.Sq,c.bT,_.$3,D.wT,_.pN,f.It,f.$z,g.rl,g.nJ,T.fg,v.VO,v.$2,y.sG,r.qT,r.me,r.BC,r.cb,r.l_,r.j4,r.JD,d.DJ,d.BO,d.sA,d.UI,Y.eI,M.C,c.Jj],styles:[".example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}.example-option-img[_ngcontent-%COMP%]{vertical-align:middle;margin-right:8px}[dir=rtl][_ngcontent-%COMP%]   .example-option-img[_ngcontent-%COMP%]{margin-right:0;margin-left:8px}"]})}return n})(),w=(()=>{class n{constructor(t){this.bannersService=t}resolve(){return this.bannersService.getBanners()}static#e=this.\u0275fac=function(a){return new(a||n)(e.KVO(p))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),J=(()=>{class n{constructor(t){this.bannerService=t}resolve(t){const a=t.paramMap.get("id");return this.bannerService.getBanner(a)}static#e=this.\u0275fac=function(a){return new(a||n)(e.KVO(p))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var F=l(4e3);const Re=[{path:"",component:L,children:[{path:"list",component:Q,resolve:{banners:w}},{path:"new",component:$e,resolve:{deliveryZones:F.K}},{path:":id/edit",component:de,resolve:{banner:J,deliveryZones:F.K}}]}];let Ge=(()=>{class n{static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275mod=e.$C({type:n});static#n=this.\u0275inj=e.G2t({imports:[u.iI.forChild(Re),u.iI]})}return n})();var xe=l(6924),Ne=l(3457),De=l(6477),Te=l(3887),Ye=l(4919);let Me=(()=>{class n{static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275mod=e.$C({type:n});static#n=this.\u0275inj=e.G2t({providers:[w,J,p,E.n,F.K,F.X,Ye.s],imports:[Ge,c.MD,Ne.G,De.B,r.X1,r.YN,xe.YF,u.iI,Te.G]})}return n})()}}]);