"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[7265],{7265:(X,k,i)=>{i.r(k),i.d(k,{PRODUCT_CATEGORY_ROUTE:()=>O});var y=i(6354),D=i(1269),m=i(2390),p=i(8498),u=i(177),f=i(1875),a=i(9417),l=i(5351),v=i(3664),b=i(6924),x=i(3457),M=i(980),t=i(3953),c=i(2920),h=i(8834),g=i(3719),E=i(9631);let R=(()=>{class s{constructor(e,n,o,r,d){this._formBuilder=e,this.auth=n,this.menusService=o,this.dialogRef=r,this.data=d,this.isLoading=!1}ngOnInit(){this.menuForm=this.createMenuForm()}createMenuForm(){return this._formBuilder.group({name:["",a.k0.required],store:[this.data.storeId,a.k0.required],activate:[!1,a.k0.required]})}save(){this.isLoading=!0,this.menusService.createMenu(this.menuForm.getRawValue()).pipe((0,M.j)(()=>this.isLoading=!1)).subscribe(e=>{console.log(e),this.isLoading=!0,this.dialogRef.close(!0)})}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(a.ok),t.rXU(v.u),t.rXU(m.g),t.rXU(l.CP),t.rXU(l.Vh))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-add-menus"]],standalone:!0,features:[t.Jv_([v.u,m.g]),t.aNF],decls:13,vars:4,consts:[["matDialogTitle",""],[1,"mat-typography"],["name","menuForm","fxLayout","column","fxFlex","",1,"product","w-100",3,"formGroup"],["appearance","fill","floatLabel","always",1,"w-100-p"],["matInput","","cancellation","Name","name","name","formControlName","name","required",""],["align","end"],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"click","mat-dialog-close","disabled"]],template:function(n,o){1&n&&(t.j41(0,"h1",0),t.EFF(1,"Add Category"),t.k0s(),t.j41(2,"mat-dialog-content",1)(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),t.EFF(6,"Name"),t.k0s(),t.nrm(7,"input",4),t.k0s()()(),t.j41(8,"mat-dialog-actions",5)(9,"button",6),t.EFF(10,"Cancel"),t.k0s(),t.j41(11,"button",7),t.bIt("click",function(){return o.save()}),t.EFF(12),t.k0s()()),2&n&&(t.R7$(3),t.Y8G("formGroup",o.menuForm),t.R7$(8),t.Y8G("mat-dialog-close",!0)("disabled",!o.menuForm.valid),t.R7$(),t.JRh(o.isLoading?"Please wait..":"Save"))},dependencies:[b.YF,c.DJ,c.UI,x.G,h.$z,g.rl,g.nJ,E.fg,l.tx,l.BI,l.E7,l.Yi,u.MD,a.YN,a.qT,a.me,a.BC,a.cb,a.YS,a.X1,a.j4,a.JD]})}return s})();var j=i(450);let I=(()=>{class s{constructor(e,n,o,r){this._formBuilder=e,this.menusService=n,this.dialogRef=o,this.data=r,this.isLoading=!1,this.storeId=this.data.storeId,this.menu=this.data.menu}ngOnInit(){this.menuForm=this.createMenuForm()}createMenuForm(){return this._formBuilder.group({name:[this.menu.name,a.k0.required],store:[this.storeId,a.k0.required],activate:[this.menu.activate,a.k0.required]})}save(){this.isLoading=!0,this.menusService.updateMenu(this.menu._id,this.menuForm.getRawValue()).pipe((0,M.j)(()=>this.isLoading=!1)).subscribe(e=>{this.isLoading=!0,this.dialogRef.close(!0)})}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(a.ok),t.rXU(m.g),t.rXU(l.CP),t.rXU(l.Vh))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-edit-menus"]],standalone:!0,features:[t.Jv_([v.u,m.g]),t.aNF],decls:15,vars:4,consts:[["matDialogTitle",""],[1,"mat-typography"],["name","menuForm","fxLayout","column","fxFlex","",1,"product","w-100",3,"formGroup"],["appearance","fill","floatLabel","always",1,"w-100-p"],["matInput","","cancellation","Name","name","name","formControlName","name","required",""],["formControlName","activate"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"click","mat-dialog-close","disabled"]],template:function(n,o){1&n&&(t.j41(0,"h1",0),t.EFF(1,"Edit Category"),t.k0s(),t.j41(2,"mat-dialog-content",1)(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),t.EFF(6,"Name"),t.k0s(),t.nrm(7,"input",4),t.k0s(),t.j41(8,"mat-slide-toggle",5),t.EFF(9,"Published"),t.k0s()()(),t.j41(10,"mat-dialog-actions",6)(11,"button",7),t.EFF(12,"Cancel"),t.k0s(),t.j41(13,"button",8),t.bIt("click",function(){return o.save()}),t.EFF(14),t.k0s()()),2&n&&(t.R7$(3),t.Y8G("formGroup",o.menuForm),t.R7$(10),t.Y8G("mat-dialog-close",!0)("disabled",!o.menuForm.valid),t.R7$(),t.JRh(o.isLoading?"Please wait..":"Update"))},dependencies:[b.YF,c.DJ,c.UI,x.G,h.$z,g.rl,g.nJ,E.fg,l.tx,l.BI,l.E7,l.Yi,j.sG,u.MD,a.YN,a.qT,a.me,a.BC,a.cb,a.YS,a.X1,a.j4,a.JD]})}return s})();var T=i(9213),S=i(6600),F=i(9115);const L=s=>["../",s,"details"];function G(s,C){1&s&&t.nrm(0,"div",16)}function U(s,C){if(1&s){const e=t.RV6();t.j41(0,"div",6)(1,"div",7)(2,"mat-icon",8),t.EFF(3,"reorder"),t.k0s(),t.j41(4,"div",9)(5,"span",10),t.EFF(6),t.k0s(),t.j41(7,"span",11),t.EFF(8),t.k0s()()(),t.j41(9,"mat-slide-toggle",12),t.bIt("change",function(o){const r=t.eBV(e).$implicit,d=t.XpG(2);return t.Njj(d.updateEnabled(o,r))})("click",function(o){return t.eBV(e),t.Njj(o.stopPropagation())}),t.EFF(10,"Published"),t.k0s(),t.j41(11,"div")(12,"button",13),t.bIt("click",function(o){return t.eBV(e),t.Njj(o.stopPropagation())}),t.j41(13,"mat-icon"),t.EFF(14,"more_vert"),t.k0s()(),t.j41(15,"mat-menu",null,0)(17,"button",14),t.bIt("click",function(){const o=t.eBV(e),r=o.$implicit,d=o.index,N=t.XpG(2);return t.Njj(N.delete(d,r._id))}),t.j41(18,"mat-icon"),t.EFF(19,"delete"),t.k0s(),t.EFF(20," Delete"),t.k0s(),t.j41(21,"button",14),t.bIt("click",function(){const o=t.eBV(e).$implicit,r=t.XpG(2);return t.Njj(r.openEdit(o))}),t.j41(22,"mat-icon"),t.EFF(23,"edit"),t.k0s(),t.EFF(24," Edit"),t.k0s()()(),t.DNE(25,G,1,0,"div",15),t.k0s()}if(2&s){const e=C.$implicit,n=t.sdS(16);t.Y8G("routerLink",t.eq3(5,L,e._id)),t.R7$(6),t.JRh(e.name),t.R7$(2),t.SpI(" ",e.items," Items "),t.R7$(),t.Y8G("checked",e.activate),t.R7$(3),t.Y8G("matMenuTriggerFor",n)}}function _(s,C){if(1&s){const e=t.RV6();t.j41(0,"div",2)(1,"h2"),t.EFF(2,"All Categories"),t.k0s(),t.j41(3,"div")(4,"button",3),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.addMenu())}),t.EFF(5,"Add Category"),t.k0s()()(),t.j41(6,"div",4),t.bIt("cdkDropListDropped",function(o){t.eBV(e);const r=t.XpG();return t.Njj(r.drop(o))}),t.DNE(7,U,26,7,"div",5),t.k0s()}if(2&s){const e=t.XpG();t.R7$(7),t.Y8G("ngForOf",e.menus)}}const O=[{path:"list",component:(()=>{class s{constructor(e,n,o,r,d){this.menusService=e,this._matDialog=n,this.router=o,this.route=r,this._location=d,this.menus=[],this.store=this.route.parent?.parent?.parent?.parent?.parent?.snapshot.data.store}ngOnInit(){this.loadMenus()}loadMenus(){this.menus$=this.menusService.getStoreMenus(this.store._id).pipe((0,y.T)(e=>this.menus=e))}updateEnabled(e,n){this.menusService.updateMenu(n._id,{activate:e.checked}).subscribe(),setTimeout(()=>{n.activate=e.checked},100)}delete(e,n){this.confirmDialogRef=this._matDialog.open(D.Y,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Menu?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete this menu?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(o=>{o&&this.menusService.deleteMenu(e,n).subscribe(()=>{this.loadMenus()}),this.confirmDialogRef=null})}addMenu(){this._matDialog.open(R,{disableClose:!1,data:{storeId:this.store._id}}).afterClosed().subscribe(n=>{n&&this.loadMenus()})}openEdit(e){this._matDialog.open(I,{disableClose:!1,data:{storeId:this.store._id,menu:e}}).afterClosed().subscribe(o=>{o&&this.loadMenus()})}viewMenu(e){this.router.navigate(["../",e,"details"])}goBack(){this._location.back()}drop(e){(0,f.HD)(this.menus,e.previousIndex,e.currentIndex),this.menus.forEach((n,o)=>{this.menusService.updateMenu(n._id,{position:o}).subscribe()})}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(m.g),t.rXU(l.bZ),t.rXU(p.Ix),t.rXU(p.nX),t.rXU(u.aZ))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-store-menus-tab"]],standalone:!0,features:[t.Jv_([m.g]),t.aNF],decls:3,vars:3,consts:[["menu2","matMenu"],[1,"relative","overflow-x-auto","p-3","h-screen","shadow-md","sm:rounded-lg"],["fxLayout","row","fxLayoutAlign","space-between start",1,"p-3"],["mat-raised-button","","color","primary",3,"click"],["cdkDropList","",1,"example-list",3,"cdkDropListDropped"],["class","example-box","fxLayout","row","fxLayoutAlign","space-between center","matRipple","","cdkDrag","",3,"routerLink",4,"ngFor","ngForCdkDropList","ngForOf"],["fxLayout","row","fxLayoutAlign","space-between center","matRipple","","cdkDrag","",1,"example-box",3,"routerLink"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"max-w-[150px]","w-[150px]"],["mat-list-icon","",1,"cursor-move"],["fxLayout","column","fxLayoutAlign","start start"],[1,"leading-none","text-lg","mb-1"],[1,"leading-none"],[3,"change","click","checked"],["mat-icon-button","",3,"click","matMenuTriggerFor"],["mat-menu-item","",3,"click"],["class","example-custom-placeholder",4,"cdkDragPlaceholder"],[1,"example-custom-placeholder"]],template:function(n,o){1&n&&(t.j41(0,"div",1),t.DNE(1,_,8,1),t.nI1(2,"async"),t.k0s()),2&n&&(t.R7$(),t.vxM(t.bMT(2,1,o.menus$)?1:-1))},dependencies:[u.MD,u.Sq,u.Jj,x.G,h.$z,h.iY,T.An,S.r6,F.kk,F.fb,F.Cp,j.sG,f.O7,f.T1,f.EM,b.YF,c.DJ,c.BO,c.sA,a.YN,p.iI,p.Wk],styles:[".example-list[_ngcontent-%COMP%]{width:100%;border:solid 1px #ccc;min-height:60px;display:block;background:#fff;border-radius:4px;overflow:hidden}.example-box[_ngcontent-%COMP%]{padding:20px 10px;border-bottom:solid 1px #ccc;color:#000000de;display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:pointer;background:#fff;font-size:14px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.example-custom-placeholder[_ngcontent-%COMP%]{background:#ccc;border:dotted 3px #999;min-height:60px;transition:transform .25s cubic-bezier(0,0,.2,1)}"]})}return s})()},{path:":categoryId/details",loadChildren:()=>Promise.all([i.e(6998),i.e(3617),i.e(1268)]).then(i.bind(i,1268)).then(s=>s.STORE_CATEGORY_DETAILS_ROUTE)},{path:"**",pathMatch:"full",redirectTo:"list"}]}}]);