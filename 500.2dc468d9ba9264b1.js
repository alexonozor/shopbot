"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[500],{5500:(ge,y,l)=>{l.r(y),l.d(y,{CustomersModule:()=>pe});var p=l(6814),h=l(1896),t=l(5879),f=l(1803);let U=(()=>{class o{constructor(e){this.userService=e}resolve(){return this.userService.getUsers({data:{$match:{country:"Nigeria"}},control:[{$sort:{createdAt:-1}},{$limit:20},{$skip:0}]})}static#t=this.\u0275fac=function(s){return new(s||o)(t.LFG(f.f))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),q=(()=>{class o{constructor(e){this.userService=e}resolve(e){const s=e.paramMap.get("id");return this.userService.getUser(s)}static#t=this.\u0275fac=function(s){return new(s||o)(t.LFG(f.f))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),w=(()=>{class o{constructor(e){this.userService=e}resolve(){return this.userService.countUsers()}static#t=this.\u0275fac=function(s){return new(s||o)(t.LFG(f.f))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),Q=(()=>{class o{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-customers"]],decls:1,vars:0,template:function(s,i){1&s&&t._UZ(0,"router-outlet")},dependencies:[h.lC]})}return o})();var c=l(5313),M=l(2572),D=l(7921),$=l(4664),A=l(3365),S=l(8337),C=l(6567),L=l(437),N=l(9308),r=l(6223),E=l(7175),u=l(7700),k=l(3680),_=l(2296),Z=l(9157),J=l(617),T=l(2032),Y=l(8525),G=l(3566),R=l(5986),x=l(7988),d=l(3814);function B(o,n){if(1&o&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.country),t.xp6(1),t.Oqu(e.country)}}function j(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.deleteSelected())}),t.TgZ(1,"mat-icon",29),t._uU(2,"delete"),t.qZA(),t._uU(3," Delete Selected Customers"),t.qZA()}}const I=function(o){return[o]};function W(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"span",26)(1,"button",27),t._uU(2),t.qZA(),t.TgZ(3,"button",28),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.sendMessagesToSelectedCustomers())}),t.TgZ(4,"mat-icon",29),t._uU(5,"campaign"),t.qZA(),t._uU(6," Message Customers"),t.qZA(),t.YNc(7,j,4,0,"button",30),t.qZA()}if(2&o){const e=t.oxw();t.xp6(2),t.hij("",e.selection.selected.length," Selected"),t.xp6(5),t.Q6J("ngIf",e.auth.isShow(t.VKq(2,I,e.Role.SuperAdmin)))}}function H(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"th",32)(1,"mat-checkbox",33),t.NdJ("change",function(i){t.CHM(e);const a=t.oxw();return t.KtG(i?a.toggleAllRows():null)}),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())("aria-label",e.checkboxLabel())}}function z(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",34)(1,"mat-checkbox",35),t.NdJ("click",function(i){return i.stopPropagation()})("change",function(i){const m=t.CHM(e).$implicit,g=t.oxw();return t.KtG(i?g.selection.toggle(m):null)}),t.qZA()()}if(2&o){const e=n.$implicit,s=t.oxw();t.xp6(1),t.Q6J("checked",s.selection.isSelected(e))("aria-label",s.checkboxLabel(e))}}function V(o,n){1&o&&(t.TgZ(0,"th",32),t._uU(1,"Name"),t.qZA())}function K(o,n){if(1&o&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.name)}}function X(o,n){1&o&&(t.TgZ(0,"th",32),t._uU(1,"Phone Number"),t.qZA())}function P(o,n){if(1&o&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.phoneNumber)}}function tt(o,n){1&o&&(t.TgZ(0,"th",32),t._uU(1,"Email"),t.qZA())}function et(o,n){if(1&o&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.email)}}function ot(o,n){1&o&&(t.TgZ(0,"th",32),t._uU(1,"Device"),t.qZA())}function it(o,n){if(1&o&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu((null==e||null==e.phoneCredentials[0]?null:e.phoneCredentials[0].deviceType)+" "+(null==e||null==e.phoneCredentials[0]?null:e.phoneCredentials[0].make)+" "+(null==e||null==e.phoneCredentials[0]?null:e.phoneCredentials[0].os))}}function st(o,n){1&o&&(t.TgZ(0,"th",32),t._uU(1,"Country"),t.qZA())}function nt(o,n){if(1&o&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.country)}}function at(o,n){1&o&&(t.TgZ(0,"th",32),t._uU(1,"Registered at"),t.qZA())}function rt(o,n){if(1&o&&(t.TgZ(0,"td",34),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.createdAt,"short"))}}function lt(o,n){1&o&&(t.TgZ(0,"th",32),t._uU(1,"Actions"),t.qZA())}function ct(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(),a=i.$implicit,m=i.index,g=t.oxw();return t.KtG(g.deleteUser(a._id,m))}),t.TgZ(1,"mat-icon",39),t._uU(2,"delete"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Delete"),t.qZA()()}}const ut=function(o){return["../",o,"details"]};function mt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",34)(1,"button",36)(2,"mat-icon"),t._uU(3,"more_vert"),t.qZA()(),t.TgZ(4,"mat-menu",null,37)(6,"button",38),t.NdJ("click",function(){const a=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.message(a))}),t.TgZ(7,"mat-icon",39),t._uU(8,"campaign"),t.qZA(),t.TgZ(9,"span"),t._uU(10,"Message Customer"),t.qZA()(),t.YNc(11,ct,5,0,"button",40),t.TgZ(12,"button",41)(13,"mat-icon",39),t._uU(14,"person"),t.qZA(),t.TgZ(15,"span"),t._uU(16,"Profile"),t.qZA()()()()}if(2&o){const e=n.$implicit,s=t.MAs(5),i=t.oxw();t.xp6(1),t.Q6J("matMenuTriggerFor",s),t.xp6(10),t.Q6J("ngIf",i.auth.isShow(t.VKq(3,I,i.Role.SuperAdmin))),t.xp6(1),t.Q6J("routerLink",t.VKq(5,ut,e._id))}}function dt(o,n){1&o&&t._UZ(0,"tr",42)}function pt(o,n){1&o&&t._UZ(0,"tr",43)}let ft=(()=>{class o{constructor(e,s,i,a,m){this.route=e,this.userService=s,this.auth=i,this._matDialog=a,this.fb=m,this.displayedColumns=["select","Name","phoneNumber","email","device","country","createdAt","actions"],this.dataSource=new c.by([]),this.selection=new S.Ov(!0,[]),this.Role=N.u,this.resultsLength=0,this.deliveries=[],this.filterForm=this.fb.group({country:new r.NI("Nigeria"),search:new r.NI(null)}),this.deliveries=this.route.snapshot.data.deliveries,this.resultsLength=this.route.snapshot.data.count}ngAfterViewInit(){(0,M.a)([this.filterForm.valueChanges.pipe((0,D.O)({country:"Nigeria"})),this.paginator.page.pipe((0,D.O)({pageIndex:0,pageSize:20}))]).pipe((0,$.w)(([e,s])=>{const{country:i,search:a}=e,m=s.pageSize*s.pageIndex;return a?(this.paginator.pageIndex=0,this.resultsLength=20,this.userService.getUsers({data:{$match:{country:i,name:{$regex:a,$options:"i"}}},control:[{$sort:{createdAt:-1}}]})):(this.resultsLength=this.route.snapshot.data.count,this.userService.getUsers({data:{$match:{country:i}},control:[{$sort:{createdAt:-1}},{$skip:m},{$limit:20}]}))})).subscribe(e=>{this.dataSource=new c.by(e)})}ngOnInit(){this.userObject=this.route.snapshot.data.customers,this.dataSource=new c.by(this.userObject)}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}deleteSelected(){this.confirmDialogRef=this._matDialog.open(C.X,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete customers?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete these customers?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(e=>{e&&this.selection.selected.forEach((s,i)=>{this.dataSource.data.splice(i,1),this.dataSource=new c.by(this.dataSource.data),this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.userService.deleteUser(s._id).subscribe()})})}checkboxLabel(e){return e?`${this.selection.isSelected(e)?"deselect":"select"} row ${e.position+1}`:(this.isAllSelected()?"deselect":"select")+" all"}deleteUser(e,s){this.confirmDialogRef=this._matDialog.open(C.X,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Customer?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete this customer?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(i=>{i&&(this.dataSource.data.splice(s,1),this.dataSource=new c.by(this.dataSource.data),this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.userService.deleteUser(e).subscribe())})}message(e){this._matDialog.open(L.D,{data:{customers:e,isBulkMsg:!1,allCustomers:!1},width:"500px"})}sendMessagesToSelectedCustomers(){this._matDialog.open(L.D,{data:{customers:this.selection.selected,isBulkMsg:!0,allCustomers:!1},width:"500px"})}static#t=this.\u0275fac=function(s){return new(s||o)(t.Y36(h.gz),t.Y36(f.f),t.Y36(E.e),t.Y36(u.uw),t.Y36(r.qu))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-list-customers"]],viewQuery:function(s,i){if(1&s&&t.Gf(A.NW,5),2&s){let a;t.iGM(a=t.CRH())&&(i.paginator=a.first)}},decls:48,vars:8,consts:[["fxLayout","row","fxLayout.lt-md","column","fxLayoutAlign.lt-md","space-around stretch","fxLayoutAlign","space-between start"],["fxLayout","column","fxLayoutAlign","space-between start"],[1,"m-0"],["fxLayout","row","fxLayout.lt-md","column","fxLayoutGap","20px","fxLayoutAlign.lt-md","space-around stretch","fxLayoutAlign","space-between start",3,"formGroup"],[1,"example-full-width"],["matInput","","formControlName","search","placeholder","Search"],["formControlName","country"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutGap","10px","fxLayoutAlign","start center",1,"card","bg-white","w-full","mat-elevation-z2","px-2","py-2"],["class","text-lg font-thin","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",4,"ngIf"],[1,"mat-elevation-z8"],["mat-table","","matSort","","matTableResponsive","",1,"w-full",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Name"],["matColumnDef","phoneNumber"],["matColumnDef","email"],["matColumnDef","device"],["matColumnDef","country"],["matColumnDef","createdAt"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page of periodic elements",3,"pageSize","length"],[3,"value"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"text-lg","font-thin"],["mat-button",""],["mat-stroked-button","","color","primary",3,"click"],[1,"mat-18"],["mat-stroked-button","","color","warn",3,"click",4,"ngIf"],["mat-stroked-button","","color","warn",3,"click"],["mat-header-cell",""],[3,"checked","indeterminate","aria-label","change"],["mat-cell",""],[3,"checked","aria-label","click","change"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],[1,"material-icons-outlined"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(s,i){1&s&&(t.TgZ(0,"div")(1,"div",0)(2,"div",1)(3,"h1",2),t._uU(4,"Customers"),t.qZA(),t.TgZ(5,"p"),t._uU(6,"List of Customers"),t.qZA()(),t.TgZ(7,"div",3)(8,"mat-form-field",4)(9,"mat-label"),t._uU(10,"Search"),t.qZA(),t._UZ(11,"input",5),t.qZA(),t.TgZ(12,"mat-form-field")(13,"mat-label"),t._uU(14,"Select a country"),t.qZA(),t.TgZ(15,"mat-select",6),t.YNc(16,B,2,2,"mat-option",7),t.qZA()()()(),t.TgZ(17,"div",8),t.YNc(18,W,8,4,"span",9),t.qZA(),t.TgZ(19,"div",10)(20,"table",11),t.ynx(21,12),t.YNc(22,H,2,3,"th",13),t.YNc(23,z,2,2,"td",14),t.BQk(),t.ynx(24,15),t.YNc(25,V,2,0,"th",13),t.YNc(26,K,2,1,"td",14),t.BQk(),t.ynx(27,16),t.YNc(28,X,2,0,"th",13),t.YNc(29,P,2,1,"td",14),t.BQk(),t.ynx(30,17),t.YNc(31,tt,2,0,"th",13),t.YNc(32,et,2,1,"td",14),t.BQk(),t.ynx(33,18),t.YNc(34,ot,2,0,"th",13),t.YNc(35,it,2,1,"td",14),t.BQk(),t.ynx(36,19),t.YNc(37,st,2,0,"th",13),t.YNc(38,nt,2,1,"td",14),t.BQk(),t.ynx(39,20),t.YNc(40,at,2,0,"th",13),t.YNc(41,rt,3,4,"td",14),t.BQk(),t.ynx(42,21),t.YNc(43,lt,2,0,"th",13),t.YNc(44,mt,17,7,"td",14),t.BQk(),t.YNc(45,dt,1,0,"tr",22),t.YNc(46,pt,1,0,"tr",23),t.qZA(),t._UZ(47,"mat-paginator",24),t.qZA()()),2&s&&(t.xp6(7),t.Q6J("formGroup",i.filterForm),t.xp6(9),t.Q6J("ngForOf",i.deliveries),t.xp6(2),t.Q6J("ngIf",i.selection.selected.length),t.xp6(2),t.Q6J("dataSource",i.dataSource),t.xp6(25),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("pageSize",20)("length",i.resultsLength))},dependencies:[p.sg,p.O5,h.rH,k.ey,_.lW,_.RK,Z.KE,Z.hX,J.Hw,T.Nt,A.NW,Y.gD,G.YE,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,R.oG,x.VK,x.OP,x.p6,d.xw,d.SQ,d.Wh,r.Fj,r.JJ,r.JL,r.sg,r.u,p.uU],styles:["tr[_ngcontent-%COMP%]:hover{background:whitesmoke}"]})}return o})();var gt=l(7398);function ht(o,n){if(1&o&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function _t(o,n){if(1&o&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function Zt(o,n){if(1&o&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}const Ct=function(){return["Male","Female"]},xt=function(){return["English","French"]},At=function(){return["Nigeria","Mauritius"]};let Tt=(()=>{class o{constructor(e,s,i,a){this.fb=e,this.userService=s,this.dialogRef=i,this.data=a,this.customerForm=this.fb.group({name:[this.data.name,r.kI.required],phoneNumber:[this.data.phoneNumber,r.kI.required],gender:[this.data.gender,r.kI.required],email:[this.data.email,[r.kI.required,r.kI.email]],language:[this.data.language],country:[this.data.country]})}ngOnInit(){console.log(this.data)}submit(){this.customerForm.valid&&this.userService.updateUser(this.data._id,this.customerForm.getRawValue()).subscribe(e=>{this.dialogRef.close(this.customerForm.getRawValue())})}static#t=this.\u0275fac=function(s){return new(s||o)(t.Y36(r.qu),t.Y36(f.f),t.Y36(u.so),t.Y36(u.WI))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-edit-customers-info"]],decls:37,vars:8,consts:[["matDialogTitle",""],[3,"formGroup"],["fxLayout","column","fxLayoutAlign","space-evenly stretch"],["appearance","outline",1,"full-width"],["matInput","","placeholder","Full Name","formControlName","name"],["matInput","","placeholder","Phone Number","formControlName","phoneNumber"],["matInput","","placeholder","Email","formControlName","email"],["formControlName","gender"],[3,"value",4,"ngFor","ngForOf"],["formControlName","language"],["formControlName","country"],["mat-button","","matDialogClose",""],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"]],template:function(s,i){1&s&&(t.TgZ(0,"h1",0),t._uU(1,"Edit customer"),t.qZA(),t.TgZ(2,"mat-dialog-content")(3,"form",1)(4,"div",2)(5,"mat-form-field",3)(6,"mat-label"),t._uU(7,"Full Name"),t.qZA(),t._UZ(8,"input",4),t.qZA(),t.TgZ(9,"mat-form-field",3)(10,"mat-label"),t._uU(11,"Phone Number"),t.qZA(),t._UZ(12,"input",5),t.qZA(),t.TgZ(13,"mat-form-field",3)(14,"mat-label"),t._uU(15,"Email"),t.qZA(),t._UZ(16,"input",6),t.qZA(),t.TgZ(17,"mat-form-field",3)(18,"mat-label"),t._uU(19,"Gender"),t.qZA(),t.TgZ(20,"mat-select",7),t.YNc(21,ht,2,2,"mat-option",8),t.qZA()(),t.TgZ(22,"mat-form-field",3)(23,"mat-label"),t._uU(24,"Language"),t.qZA(),t.TgZ(25,"mat-select",9),t.YNc(26,_t,2,2,"mat-option",8),t.qZA()(),t.TgZ(27,"mat-form-field",3)(28,"mat-label"),t._uU(29,"Country"),t.qZA(),t.TgZ(30,"mat-select",10),t.YNc(31,Zt,2,2,"mat-option",8),t.qZA()()()()(),t.TgZ(32,"mat-dialog-actions")(33,"button",11),t._uU(34,"CANCEL"),t.qZA(),t.TgZ(35,"button",12),t.NdJ("click",function(){return i.submit()}),t._uU(36,"Save"),t.qZA()()),2&s&&(t.xp6(3),t.Q6J("formGroup",i.customerForm),t.xp6(18),t.Q6J("ngForOf",t.DdM(5,Ct)),t.xp6(5),t.Q6J("ngForOf",t.DdM(6,xt)),t.xp6(5),t.Q6J("ngForOf",t.DdM(7,At)),t.xp6(4),t.Q6J("disabled",i.customerForm.invalid))},dependencies:[p.sg,k.ey,_.lW,Z.KE,Z.hX,T.Nt,Y.gD,u.ZT,u.uh,u.xY,u.H8,d.xw,d.Wh,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u]})}return o})(),bt=(()=>{class o{constructor(e,s,i,a){this.fb=e,this.userService=s,this.dialogRef=i,this.data=a,this.customerForm=this.fb.group({notes:[this.data.notes]})}ngOnInit(){}submit(){this.customerForm.valid&&this.userService.updateUser(this.data._id,this.customerForm.getRawValue()).subscribe(e=>{this.dialogRef.close(this.customerForm.getRawValue())})}static#t=this.\u0275fac=function(s){return new(s||o)(t.Y36(r.qu),t.Y36(f.f),t.Y36(u.so),t.Y36(u.WI))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-edit-customers-notes"]],decls:14,vars:2,consts:[["matDialogTitle",""],[3,"formGroup"],["fxLayout","column","fxLayoutAlign","space-evenly stretch"],["appearance","outline",1,"full-width"],["matInput","","placeholder","Add a note","formControlName","notes"],["mat-button","","matDialogClose",""],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(s,i){1&s&&(t.TgZ(0,"h1",0),t._uU(1,"Edit Notes"),t.qZA(),t.TgZ(2,"mat-dialog-content")(3,"form",1)(4,"div",2)(5,"mat-form-field",3)(6,"mat-label"),t._uU(7,"Add a note"),t.qZA(),t._UZ(8,"textarea",4),t.qZA()()()(),t.TgZ(9,"mat-dialog-actions")(10,"button",5),t._uU(11,"CANCEL"),t.qZA(),t.TgZ(12,"button",6),t.NdJ("click",function(){return i.submit()}),t._uU(13,"Save"),t.qZA()()),2&s&&(t.xp6(3),t.Q6J("formGroup",i.customerForm),t.xp6(9),t.Q6J("disabled",i.customerForm.invalid))},dependencies:[_.lW,Z.KE,Z.hX,T.Nt,u.ZT,u.uh,u.xY,u.H8,d.xw,d.Wh,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u]})}return o})();var O=l(2599);let vt=(()=>{class o{constructor(e,s,i,a){this.fb=e,this.userService=s,this.dialogRef=i,this.data=a,this.customerForm=this.fb.group({allowNotifications:[this.data.allowNotifications,r.kI.required],allowSalesNotifications:[this.data.allowSalesNotifications,r.kI.required]})}ngOnInit(){}submit(){this.customerForm.valid&&this.userService.updateUser(this.data._id,this.customerForm.getRawValue()).subscribe(e=>{this.dialogRef.close(this.customerForm.getRawValue())})}static#t=this.\u0275fac=function(s){return new(s||o)(t.Y36(r.qu),t.Y36(f.f),t.Y36(u.so),t.Y36(u.WI))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-edit-customers-marketing-status"]],decls:14,vars:2,consts:[["matDialogTitle",""],[3,"formGroup"],["fxLayout","column","fxLayoutAlign","space-evenly stretch","fxLayoutGap","20px"],["formControlName","allowNotifications"],["formControlName","allowSalesNotifications"],["mat-button","","matDialogClose",""],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(s,i){1&s&&(t.TgZ(0,"h1",0),t._uU(1,"Edit Marketing Status"),t.qZA(),t.TgZ(2,"mat-dialog-content")(3,"form",1)(4,"div",2)(5,"mat-slide-toggle",3),t._uU(6,"Mobile Notification Subscribed"),t.qZA(),t.TgZ(7,"mat-slide-toggle",4),t._uU(8,"Sales Notification Subscribed"),t.qZA()()()(),t.TgZ(9,"mat-dialog-actions")(10,"button",5),t._uU(11,"CANCEL"),t.qZA(),t.TgZ(12,"button",6),t.NdJ("click",function(){return i.submit()}),t._uU(13,"Save"),t.qZA()()),2&s&&(t.xp6(3),t.Q6J("formGroup",i.customerForm),t.xp6(9),t.Q6J("disabled",i.customerForm.invalid))},dependencies:[_.lW,u.ZT,u.uh,u.xY,u.H8,O.Rr,d.xw,d.SQ,d.Wh,r._Y,r.JJ,r.JL,r.sg,r.u]})}return o})(),yt=(()=>{class o{constructor(e,s,i,a){this.fb=e,this.userService=s,this.dialogRef=i,this.data=a,this.customerForm=this.fb.group({walletBallance:[0|this.data.walletBallance,r.kI.required]})}ngOnInit(){console.log(this.data)}submit(){this.customerForm.valid&&this.userService.updateUser(this.data._id,this.customerForm.getRawValue()).subscribe(e=>{this.dialogRef.close(this.customerForm.getRawValue())})}static#t=this.\u0275fac=function(s){return new(s||o)(t.Y36(r.qu),t.Y36(f.f),t.Y36(u.so),t.Y36(u.WI))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-edit-wallet"]],decls:14,vars:2,consts:[["matDialogTitle",""],[3,"formGroup"],["fxLayout","column","fxLayoutAlign","space-evenly stretch"],["appearance","fill",1,"full-width"],["matInput","","placeholder","Ballance","formControlName","walletBallance"],["mat-button","","matDialogClose",""],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(s,i){1&s&&(t.TgZ(0,"h1",0),t._uU(1,"Update Balance"),t.qZA(),t.TgZ(2,"mat-dialog-content")(3,"form",1)(4,"div",2)(5,"mat-form-field",3)(6,"mat-label"),t._uU(7,"Ballance"),t.qZA(),t._UZ(8,"input",4),t.qZA()()()(),t.TgZ(9,"mat-dialog-actions")(10,"button",5),t._uU(11,"CANCEL"),t.qZA(),t.TgZ(12,"button",6),t.NdJ("click",function(){return i.submit()}),t._uU(13,"Save"),t.qZA()()),2&s&&(t.xp6(3),t.Q6J("formGroup",i.customerForm),t.xp6(9),t.Q6J("disabled",i.customerForm.invalid))},dependencies:[_.lW,Z.KE,Z.hX,T.Nt,u.ZT,u.uh,u.xY,u.H8,d.xw,d.Wh,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u]})}return o})();var Ut=l(7957),qt=l(9483),F=l(4104),b=l(9038);function wt(o,n){if(1&o&&(t.TgZ(0,"div")(1,"h1",15),t._uU(2),t.ALo(3,"currency"),t.qZA()()),2&o){const e=n.ngIf,s=t.oxw();t.xp6(2),t.Oqu(t.xi3(3,1,e.totalEarnings,s.customer.currency))}}function Dt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"span",46)(1,"button",39),t._uU(2),t.qZA(),t.TgZ(3,"button",61)(4,"mat-icon",4),t._uU(5,"campaign"),t.qZA(),t._uU(6," Message Customers"),t.qZA(),t.TgZ(7,"button",62),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.deleteSelected())}),t.TgZ(8,"mat-icon",4),t._uU(9,"delete"),t.qZA(),t._uU(10," Delete Selected Customers"),t.qZA()()}if(2&o){const e=t.oxw(2);t.xp6(2),t.hij("",e.selection.selected.length," Selected ")}}function St(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"th",63)(1,"mat-checkbox",64),t.NdJ("change",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(i?a.toggleAllRows():null)}),t.qZA()()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())("aria-label",e.checkboxLabel())}}function Lt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",65)(1,"mat-checkbox",66),t.NdJ("click",function(i){return i.stopPropagation()})("change",function(i){const m=t.CHM(e).$implicit,g=t.oxw(2);return t.KtG(i?g.selection.toggle(m):null)}),t.qZA()()}if(2&o){const e=n.$implicit,s=t.oxw(2);t.xp6(1),t.Q6J("checked",s.selection.isSelected(e))("aria-label",s.checkboxLabel(e))}}function Nt(o,n){1&o&&(t.TgZ(0,"th",63),t._uU(1,"Order Num"),t.qZA())}function kt(o,n){if(1&o&&(t.TgZ(0,"td",65),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.reference)}}function Jt(o,n){1&o&&(t.TgZ(0,"th",63),t._uU(1,"Category"),t.qZA())}function Yt(o,n){if(1&o&&(t.TgZ(0,"td",65),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.category)}}function Rt(o,n){1&o&&(t.TgZ(0,"th",63),t._uU(1,"Store"),t.qZA())}function It(o,n){if(1&o&&(t.TgZ(0,"td",65),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.store.name)}}function Ot(o,n){1&o&&(t.TgZ(0,"th",63),t._uU(1,"Amount"),t.qZA())}function Ft(o,n){if(1&o&&(t.TgZ(0,"td",65),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,null==e?null:e.total,null==e||null==e.store?null:e.store.currency))}}function Qt(o,n){1&o&&(t.TgZ(0,"th",63),t._uU(1,"Ordered"),t.qZA())}function Mt(o,n){if(1&o&&(t.TgZ(0,"td",65),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.createdAt,"short"))}}function $t(o,n){1&o&&(t.TgZ(0,"th",63),t._uU(1,"Actions"),t.qZA())}const Et=function(o){return["../",o,"details"]};function Gt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",65)(1,"button",67)(2,"mat-icon"),t._uU(3,"more_vert"),t.qZA()(),t.TgZ(4,"mat-menu",null,68)(6,"button",69),t.NdJ("click",function(){const a=t.CHM(e).$implicit,m=t.oxw(2);return t.KtG(m.message(a))}),t.TgZ(7,"mat-icon",70),t._uU(8,"campaign"),t.qZA(),t.TgZ(9,"span"),t._uU(10,"Message Customer"),t.qZA()(),t.TgZ(11,"button",69),t.NdJ("click",function(){const i=t.CHM(e),a=i.$implicit,m=i.index,g=t.oxw(2);return t.KtG(g.deleteOrder(a._id,m))}),t.TgZ(12,"mat-icon",70),t._uU(13,"delete"),t.qZA(),t.TgZ(14,"span"),t._uU(15,"Delete"),t.qZA()(),t.TgZ(16,"button",71)(17,"mat-icon",70),t._uU(18,"receipt_long"),t.qZA(),t.TgZ(19,"span"),t._uU(20,"Open Order"),t.qZA()()()()}if(2&o){const e=n.$implicit,s=t.MAs(5);t.xp6(1),t.Q6J("matMenuTriggerFor",s),t.xp6(15),t.Q6J("routerLink",t.VKq(2,Et,e._id))}}function Bt(o,n){1&o&&t._UZ(0,"tr",72)}function jt(o,n){1&o&&t._UZ(0,"tr",73)}const Wt=function(){return[5,10,15]};function Ht(o,n){if(1&o&&(t.TgZ(0,"div",44)(1,"div",45)(2,"span",46)(3,"span"),t._uU(4,"Orders"),t.qZA()(),t.YNc(5,Dt,11,1,"span",47),t.qZA(),t.TgZ(6,"table",48),t.ynx(7,49),t.YNc(8,St,2,3,"th",50),t.YNc(9,Lt,2,2,"td",51),t.BQk(),t.ynx(10,52),t.YNc(11,Nt,2,0,"th",50),t.YNc(12,kt,2,1,"td",51),t.BQk(),t.ynx(13,53),t.YNc(14,Jt,2,0,"th",50),t.YNc(15,Yt,2,1,"td",51),t.BQk(),t.ynx(16,54),t.YNc(17,Rt,2,0,"th",50),t.YNc(18,It,2,1,"td",51),t.BQk(),t.ynx(19,55),t.YNc(20,Ot,2,0,"th",50),t.YNc(21,Ft,3,4,"td",51),t.BQk(),t.ynx(22,56),t.YNc(23,Qt,2,0,"th",50),t.YNc(24,Mt,3,4,"td",51),t.BQk(),t.ynx(25,57),t.YNc(26,$t,2,0,"th",50),t.YNc(27,Gt,21,4,"td",51),t.BQk(),t.YNc(28,Bt,1,0,"tr",58),t.YNc(29,jt,1,0,"tr",59),t.qZA(),t._UZ(30,"mat-paginator",60),t.qZA()),2&o){const e=t.oxw();t.xp6(5),t.Q6J("ngIf",e.selection.selected.length),t.xp6(1),t.Q6J("dataSource",e.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(5,Wt))}}function zt(o,n){if(1&o&&(t.TgZ(0,"tr",74)(1,"th",75),t._uU(2),t.qZA(),t.TgZ(3,"td",76),t._uU(4),t.qZA(),t.TgZ(5,"td",76),t._uU(6),t.qZA(),t.TgZ(7,"td",76),t._uU(8),t.ALo(9,"currency"),t.qZA(),t.TgZ(10,"td",76),t._uU(11),t.ALo(12,"date"),t.qZA()()),2&o){const e=n.$implicit;t.xp6(2),t.hij(" ",e.narration," "),t.xp6(2),t.hij(" ",e.status," "),t.xp6(2),t.hij(" ",e.type," "),t.xp6(2),t.hij(" ",t.xi3(9,5,e.totalAmount,e.currency)," "),t.xp6(3),t.hij(" ",t.xi3(12,8,e.createdAt,"medium")," ")}}function Vt(o,n){if(1&o&&(t.TgZ(0,"table",31)(1,"thead",32)(2,"tr")(3,"th",33),t._uU(4," Narration "),t.qZA(),t.TgZ(5,"th",33),t._uU(6," Status "),t.qZA(),t.TgZ(7,"th",33),t._uU(8," Type "),t.qZA(),t.TgZ(9,"th",33),t._uU(10," Amount "),t.qZA(),t.TgZ(11,"th",33),t._uU(12," Date "),t.qZA()()(),t.TgZ(13,"tbody"),t.YNc(14,zt,13,11,"tr",34),t.qZA()()),2&o){const e=n.ngIf;t.xp6(14),t.Q6J("ngForOf",e)}}function Kt(o,n){if(1&o&&(t.TgZ(0,"tr",74)(1,"th",75),t._uU(2),t.qZA(),t.TgZ(3,"td",76),t._uU(4),t.qZA(),t.TgZ(5,"td",76),t._uU(6),t.ALo(7,"currency"),t.qZA(),t.TgZ(8,"td",76),t._uU(9),t.ALo(10,"date"),t.qZA(),t.TgZ(11,"td",76),t._uU(12),t.ALo(13,"date"),t.qZA()()),2&o){const e=n.$implicit;t.xp6(2),t.hij(" ",e.referee.name," "),t.xp6(2),t.hij(" ",e.earned?"Yes":"NO"," "),t.xp6(2),t.hij(" ",t.xi3(7,5,e.amount,e.currency)," "),t.xp6(3),t.hij(" ",t.xi3(10,8,e.createdAt,"medium")," "),t.xp6(3),t.hij(" ",t.xi3(13,11,e.updatedAt,"medium")," ")}}function Xt(o,n){if(1&o&&(t.TgZ(0,"table",31)(1,"thead",32)(2,"tr")(3,"th",33),t._uU(4," Referee "),t.qZA(),t.TgZ(5,"th",33),t._uU(6," Status "),t.qZA(),t.TgZ(7,"th",33),t._uU(8," Amount "),t.qZA(),t.TgZ(9,"th",33),t._uU(10," Signed up "),t.qZA(),t.TgZ(11,"th",33),t._uU(12," Ordered at "),t.qZA()()(),t.TgZ(13,"tbody"),t.YNc(14,Kt,14,14,"tr",34),t.qZA()()),2&o){const e=n.ngIf;t.xp6(14),t.Q6J("ngForOf",e)}}function Pt(o,n){if(1&o&&(t.TgZ(0,"tr",74)(1,"th",75),t._uU(2),t.qZA(),t.TgZ(3,"td",76),t._uU(4),t.qZA(),t.TgZ(5,"td",76),t._uU(6),t.qZA(),t.TgZ(7,"td",76),t._uU(8),t.qZA(),t.TgZ(9,"td",76),t._uU(10),t.ALo(11,"date"),t.qZA()()),2&o){const e=n.$implicit;t.xp6(2),t.hij(" ",e.name," "),t.xp6(2),t.hij(" ",e.label," "),t.xp6(2),t.hij(" ",e.state," "),t.xp6(2),t.hij(" ",e.country," "),t.xp6(2),t.hij(" ",t.xi3(11,5,e.createdAt,"medium")," ")}}function te(o,n){if(1&o&&(t.TgZ(0,"table",31)(1,"thead",32)(2,"tr")(3,"th",33),t._uU(4," Name "),t.qZA(),t.TgZ(5,"th",33),t._uU(6," Label "),t.qZA(),t.TgZ(7,"th",33),t._uU(8," State "),t.qZA(),t.TgZ(9,"th",33),t._uU(10," Country "),t.qZA(),t.TgZ(11,"th",33),t._uU(12," Created "),t.qZA()()(),t.TgZ(13,"tbody"),t.YNc(14,Pt,12,8,"tr",34),t.qZA()()),2&o){const e=n.ngIf;t.xp6(14),t.Q6J("ngForOf",e)}}function ee(o,n){if(1&o&&(t.TgZ(0,"tr",74)(1,"th",75),t._uU(2),t.qZA(),t.TgZ(3,"td",76),t._uU(4),t.qZA(),t.TgZ(5,"td",76),t._uU(6),t.qZA(),t.TgZ(7,"td",76),t._uU(8),t.qZA(),t.TgZ(9,"td",76),t._uU(10),t.qZA()()),2&o){const e=n.$implicit;t.xp6(2),t.hij(" ",e.make," "),t.xp6(2),t.hij(" ",e.model," "),t.xp6(2),t.hij(" ",e.deviceType," "),t.xp6(2),t.hij(" ",e.osVersion," "),t.xp6(2),t.hij(" ",e.sdkVersion," ")}}function oe(o,n){if(1&o&&(t.TgZ(0,"mat-list-item")(1,"mat-icon",42),t._uU(2,"place"),t.qZA(),t.TgZ(3,"div",43),t._uU(4),t.qZA()()),2&o){const e=t.oxw();t.xp6(4),t.Oqu(e.customer.shipping.name)}}function ie(o,n){if(1&o&&(t.TgZ(0,"mat-list-item")(1,"mat-icon",42),t._uU(2,"flag"),t.qZA(),t.TgZ(3,"div",43),t._uU(4),t.qZA()()),2&o){const e=t.oxw();t.xp6(4),t.Oqu(e.customer.country)}}function se(o,n){if(1&o&&(t.TgZ(0,"mat-list-item")(1,"mat-icon",42),t._uU(2,"male"),t.qZA(),t.TgZ(3,"div",43),t._uU(4),t.qZA()()),2&o){const e=t.oxw();t.xp6(4),t.Oqu(e.customer.gender)}}function ne(o,n){if(1&o&&(t.TgZ(0,"mat-list-item")(1,"mat-icon",42),t._uU(2,"language"),t.qZA(),t.TgZ(3,"div",43),t._uU(4),t.qZA()()),2&o){const e=t.oxw();t.xp6(4),t.Oqu(e.customer.language)}}let ae=(()=>{class o{constructor(e,s,i,a,m,g,fe){this.route=e,this.userService=s,this.orderService=i,this.router=a,this.location=m,this._matDialog=g,this.auth=fe,this.displayedColumns=["select","reference","category","store","amount","createdAt","actions"],this.dataSource=new c.by([]),this.selection=new S.Ov(!0,[]),this.Role=N.u}ngOnInit(){this.customer=this.route.snapshot.data.customer,this.getCustomerOrders(this.customer._id),this.getUsersTransaction(),this.getUserReferrals(),this.getUserReferralsStat(),this.getUserAddresses()}getCustomerOrders(e){this.orders$=this.orderService.getUserOrders(e).pipe((0,gt.U)(s=>(this.dataSource=new c.by(s),this.dataSource.paginator=this.paginator,s)))}getUsersTransaction(){this.transactions$=this.userService.getUserTransactions(this.customer._id)}getUserReferrals(){this.userReferrals$=this.userService.getUserReferrals(this.customer._id)}getUserReferralsStat(){this.userReferralStat$=this.userService.getUserReferralStats(this.customer._id)}getUserAddresses(){this.userAddresses$=this.userService.getUserAddresses(this.customer._id)}back(){this.location.back()}ngAfterViewInit(){}checkboxLabel(e){return e?`${this.selection.isSelected(e)?"deselect":"select"} row ${e.position+1}`:(this.isAllSelected()?"deselect":"select")+" all"}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}deleteUser(e,s){this.confirmDialogRef=this._matDialog.open(C.X,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Customer?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete this customer?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(i=>{i&&(this.dataSource.data.splice(s,1),this.dataSource=new c.by(this.dataSource.data),this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.userService.deleteUser(e).subscribe())})}deleteOrder(e,s){this.confirmDialogRef=this._matDialog.open(C.X,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Order?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete this order?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(i=>{i&&(this.dataSource.data.splice(s,1),this.dataSource=new c.by(this.dataSource.data),this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.orderService.deleteOrder(e).subscribe())})}deleteSelected(){this.confirmDialogRef=this._matDialog.open(C.X,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete orders?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete these orders?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(e=>{e&&this.selection.selected.forEach((s,i)=>{this.dataSource.data.splice(i,1),this.dataSource=new c.by(this.dataSource.data),this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.userService.deleteUser(s._id).subscribe()})})}openCustomerBasicInfo(){this._matDialog.open(Tt,{data:this.customer,width:"400px"}).afterClosed().subscribe(s=>{s&&(this.customer={...this.customer,...s})})}editWallet(){this._matDialog.open(yt,{data:this.customer,width:"400px"}).afterClosed().subscribe(s=>{s&&(this.customer={...this.customer,...s})})}openCustomerNote(){this._matDialog.open(bt,{data:this.customer,width:"400px"}).afterClosed().subscribe(s=>{s&&(this.customer={...this.customer,...s})})}openCustomerMarketingStatus(){this._matDialog.open(vt,{data:this.customer,width:"400px"}).afterClosed().subscribe(s=>{s&&(this.customer={...this.customer,...s})})}disableAccount(e){this.customer={...this.customer,deleteAccount:e.checked},this.userService.updateUser(this.customer._id,{deleteAccount:this.customer.deleteAccount}).subscribe()}banAccount(e){console.log(e),this.customer={...this.customer,ban:e.checked},this.userService.updateUser(this.customer._id,{ban:this.customer.ban}).subscribe()}allowCash(e){console.log(e),this.customer={...this.customer,allowCashOnDelivery:e.checked},this.userService.updateUser(this.customer._id,{allowCashOnDelivery:this.customer.allowCashOnDelivery}).subscribe()}allowWallet(e){console.log(e),this.customer={...this.customer,allowWallet:e.checked},this.userService.updateUser(this.customer._id,{allowWallet:this.customer.allowWallet}).subscribe()}deleteAccount(){this.confirmDialogRef=this._matDialog.open(C.X,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete customers?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete these customers?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(e=>{e&&this.userService.deleteUser(this.customer._id).subscribe(()=>{this.location.back()})})}message(e){}static#t=this.\u0275fac=function(s){return new(s||o)(t.Y36(h.gz),t.Y36(f.f),t.Y36(Ut.N),t.Y36(h.F0),t.Y36(p.Ye),t.Y36(u.uw),t.Y36(qt.e))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-customers-details"]],viewQuery:function(s,i){if(1&s&&t.Gf(A.NW,5),2&s){let a;t.iGM(a=t.CRH())&&(i.paginator=a.first)}},decls:161,vars:51,consts:[[1,"md:container","md:mx-auto"],["fxLayout","row","fxLayoutAlign","space-between start",1,"mb-10"],["fxLayout","row","fxLayoutAlign","start start","flexLayoutGap","10px"],["mat-icon-button","",3,"click"],[1,"mat-18"],["fxLayout","column","fxLayoutAlign","start start"],[2,"margin","0px"],["target","_blank",3,"href"],["fxLayout","row","fxLayoutAlign","start start","fxLayoutGap.gt-md","10px"],["mat-raised-button",""],["mat-raised-button","",3,"color","click"],["fxLayout","row","fxLayoutAlign","space-between start","fxLayoutGap","20px"],["fxLayout","column","fxLayoutAlign","space-around start","fxFlex","60%"],["fxLayout","row","fxLayoutAlign","space-between center",1,"mat-elevation-z3","divide-x","divide-gray-300","rounded-md","p-5","w-full"],["fxLayout","column","fxLayoutAlign","space-evenly center ","fxFlex","30%",1,"text-center"],[1,"text-center"],["fxLayout","column","fxLayoutAlign","space-evenly center","fxFlex","30%",1,"text-center"],["fxLayout","row","fxLayoutAlign","space-between center",1,"mat-elevation-z3","divide-x","divide-gray-300","rounded-md","p-5","mt-5","w-full"],["fxLayout","column","fxLayoutAlign","space-evenly center ","fxFlex","50%",1,"text-center"],[1,"text-center","text-xs","cursor-pointer","text-blue-700",3,"click"],["fxLayout","column","fxLayoutAlign","space-evenly center","fxFlex","50%",1,"text-center"],[4,"ngIf"],[1,"w-full","mt-5"],["label","Orders"],["class","w-full mat-elevation-z3 mt-5",4,"ngIf"],["label","Transactions"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],["class","w-full mt-5 text-sm text-left rtl:text-right text-gray-500 ",4,"ngIf"],["label","Referrals"],["label","Addresses"],["label","Devices"],[1,"w-full","mt-5","text-sm","text-left","rtl:text-right","text-gray-500"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50"],["scope","col",1,"px-6","py-3"],["class","bg-white border-b   hover:bg-gray-50",4,"ngFor","ngForOf"],["fxLayout","column","fxLayoutAlign","space-around start","fxFlex","40%"],["fxLayout","column","fxLayoutAlign","space-around start",1,"mat-elevation-z3","rounded-md","p-2","mb-5","w-full"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-full","px-2"],["fxLayout","row","fxLayoutAlign","space-between start",1,"w-full"],["mat-button",""],[3,"checked","change"],[1,"p-5"],["matListItemIcon","",1,"material-icons-outlined"],["matListItemTitle",""],[1,"w-full","mat-elevation-z3","mt-5"],["fxLayout","row","fxLayoutGap","10px","fxLayoutAlign","start center",1,"card","bg-white","w-full","mat-elevation-z2","px-2","py-2"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"text-lg","font-thin"],["class","text-lg font-thin","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",4,"ngIf"],["mat-table","",1,"mat-elevation-z3","w-full",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","reference"],["matColumnDef","category"],["matColumnDef","store"],["matColumnDef","amount"],["matColumnDef","createdAt"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["mat-stroked-button","","color","primary"],["mat-stroked-button","","color","warn",3,"click"],["mat-header-cell",""],[3,"checked","indeterminate","aria-label","change"],["mat-cell",""],[3,"checked","aria-label","click","change"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],[1,"material-icons-outlined"],["mat-menu-item","",3,"routerLink"],["mat-header-row",""],["mat-row",""],[1,"bg-white","border-b","hover:bg-gray-50"],["scope","row",1,"px-6","py-4","font-medium","text-gray-900","whitespace-nowrap"],[1,"px-6","py-4"]],template:function(s,i){1&s&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),t.NdJ("click",function(){return i.back()}),t.TgZ(4,"mat-icon",4),t._uU(5,"arrow_back_ios"),t.qZA()(),t.TgZ(6,"div",5)(7,"h2",6),t._uU(8),t.qZA(),t.TgZ(9,"p"),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"a",7),t._uU(13),t.qZA()()(),t.TgZ(14,"div",8)(15,"button",9),t._uU(16,"Message Customer"),t.qZA(),t.TgZ(17,"button",10),t.NdJ("click",function(){return i.deleteAccount()}),t._uU(18,"Delete Customer"),t.qZA()()(),t.TgZ(19,"div",11)(20,"div",12)(21,"div",13)(22,"div",14)(23,"p",15),t._uU(24,"Amount spent"),t.qZA(),t.TgZ(25,"h1",15),t._uU(26),t.ALo(27,"currency"),t.qZA()(),t.TgZ(28,"div",16)(29,"p",15),t._uU(30,"Orders"),t.qZA(),t.TgZ(31,"h1",15),t._uU(32),t.qZA()(),t.TgZ(33,"div",16)(34,"p",15),t._uU(35,"Average order value"),t.qZA(),t.TgZ(36,"h1",15),t._uU(37),t.ALo(38,"currency"),t.qZA()()(),t.TgZ(39,"div",17)(40,"div",18)(41,"p",15),t._uU(42,"Wallet Ballance"),t.qZA(),t.TgZ(43,"h1",15),t._uU(44),t.ALo(45,"currency"),t.qZA(),t.TgZ(46,"p",19),t.NdJ("click",function(){return i.editWallet()}),t._uU(47,"Edit wallet"),t.qZA()(),t.TgZ(48,"div",20)(49,"p",15),t._uU(50,"Referral Bonus"),t.qZA(),t.YNc(51,wt,4,4,"div",21),t.ALo(52,"async"),t.qZA()(),t.TgZ(53,"mat-tab-group",22)(54,"mat-tab",23),t.YNc(55,Ht,31,6,"div",24),t.ALo(56,"async"),t.qZA(),t.TgZ(57,"mat-tab",25)(58,"div",26),t.YNc(59,Vt,15,1,"table",27),t.ALo(60,"async"),t.qZA()(),t.TgZ(61,"mat-tab",28)(62,"div",26),t.YNc(63,Xt,15,1,"table",27),t.ALo(64,"async"),t.qZA()(),t.TgZ(65,"mat-tab",29)(66,"div",26),t.YNc(67,te,15,1,"table",27),t.ALo(68,"async"),t.qZA()(),t.TgZ(69,"mat-tab",30)(70,"div",26)(71,"table",31)(72,"thead",32)(73,"tr")(74,"th",33),t._uU(75," Make "),t.qZA(),t.TgZ(76,"th",33),t._uU(77," Model "),t.qZA(),t.TgZ(78,"th",33),t._uU(79," Device Type "),t.qZA(),t.TgZ(80,"th",33),t._uU(81," OS Version "),t.qZA(),t.TgZ(82,"th",33),t._uU(83," sdk Version "),t.qZA()()(),t.TgZ(84,"tbody"),t.YNc(85,ee,11,5,"tr",34),t.qZA()()()()()(),t.TgZ(86,"div",35)(87,"div",36)(88,"div",37)(89,"div",38)(90,"button",39),t._uU(91,"Accessibility"),t.qZA(),t.TgZ(92,"button",3),t.NdJ("click",function(){return i.openCustomerMarketingStatus()}),t.TgZ(93,"mat-icon",4),t._uU(94,"edit"),t.qZA()()()(),t.TgZ(95,"mat-list")(96,"mat-list-item")(97,"mat-slide-toggle",40),t.NdJ("change",function(m){return i.banAccount(m)}),t._uU(98,"Ban Customer"),t.qZA()(),t.TgZ(99,"mat-list-item")(100,"mat-slide-toggle",40),t.NdJ("change",function(m){return i.allowCash(m)}),t._uU(101,"Allow cash on delivery"),t.qZA()(),t.TgZ(102,"mat-list-item")(103,"mat-slide-toggle",40),t.NdJ("change",function(m){return i.allowWallet(m)}),t._uU(104,"Allow wallet for this Customer"),t.qZA()(),t.TgZ(105,"mat-list-item")(106,"mat-slide-toggle",40),t.NdJ("change",function(m){return i.disableAccount(m)}),t._uU(107,"Disable Account"),t.qZA()()()(),t.TgZ(108,"div",36)(109,"div",37)(110,"div",38)(111,"button",39),t._uU(112,"Notes"),t.qZA(),t.TgZ(113,"button",3),t.NdJ("click",function(){return i.openCustomerNote()}),t.TgZ(114,"mat-icon",4),t._uU(115,"edit"),t.qZA()()()(),t.TgZ(116,"div")(117,"p",41),t._uU(118),t.qZA()()(),t.TgZ(119,"div",36)(120,"div",37)(121,"div",38)(122,"button",39),t._uU(123,"Customers"),t.qZA(),t.TgZ(124,"button",3),t.NdJ("click",function(){return i.openCustomerBasicInfo()}),t.TgZ(125,"mat-icon",4),t._uU(126,"edit"),t.qZA()()()(),t.TgZ(127,"mat-list")(128,"mat-list-item")(129,"mat-icon",42),t._uU(130,"email"),t.qZA(),t.TgZ(131,"div",43),t._uU(132),t.qZA()(),t.TgZ(133,"mat-list-item")(134,"mat-icon",42),t._uU(135,"call"),t.qZA(),t.TgZ(136,"div",43),t._uU(137),t.qZA()(),t.YNc(138,oe,5,1,"mat-list-item",21),t.YNc(139,ie,5,1,"mat-list-item",21),t.YNc(140,se,5,1,"mat-list-item",21),t.YNc(141,ne,5,1,"mat-list-item",21),t.qZA()(),t.TgZ(142,"div",36)(143,"div",37)(144,"div",38)(145,"button",39),t._uU(146,"Marketing status"),t.qZA(),t.TgZ(147,"button",3),t.NdJ("click",function(){return i.openCustomerMarketingStatus()}),t.TgZ(148,"mat-icon",4),t._uU(149,"edit"),t.qZA()()()(),t.TgZ(150,"mat-list")(151,"mat-list-item")(152,"mat-icon",42),t._uU(153,"notifications_active"),t.qZA(),t.TgZ(154,"div",43),t._uU(155),t.qZA()(),t.TgZ(156,"mat-list-item")(157,"mat-icon",42),t._uU(158,"campaign"),t.qZA(),t.TgZ(159,"div",43),t._uU(160),t.qZA()()()()()()()),2&s&&(t.xp6(8),t.AsE("",i.customer.name," (",i.customer.username,")"),t.xp6(2),t.Oqu(t.xi3(11,29,i.customer.createdAt,"medium")),t.xp6(2),t.Q6J("href",i.customer.referralLink,t.LSH),t.xp6(1),t.Oqu(i.customer.referralLink),t.xp6(4),t.Q6J("color","warn"),t.xp6(9),t.Oqu(t.xi3(27,32,i.customer.totalAmountSpent,i.customer.currency)),t.xp6(6),t.Oqu(i.customer.totalOrders),t.xp6(5),t.Oqu(t.xi3(38,35,i.customer.avgAmountSpent,i.customer.currency)),t.xp6(7),t.Oqu(t.xi3(45,38,i.customer.walletBallance||0,i.customer.currency)),t.xp6(7),t.Q6J("ngIf",t.lcZ(52,41,i.userReferralStat$)),t.xp6(4),t.Q6J("ngIf",t.lcZ(56,43,i.orders$)),t.xp6(4),t.Q6J("ngIf",t.lcZ(60,45,i.transactions$)),t.xp6(4),t.Q6J("ngIf",t.lcZ(64,47,i.userReferrals$)),t.xp6(4),t.Q6J("ngIf",t.lcZ(68,49,i.userAddresses$)),t.xp6(18),t.Q6J("ngForOf",i.customer.phoneCredentials),t.xp6(12),t.Q6J("checked",i.customer.ban),t.xp6(3),t.Q6J("checked",i.customer.allowCashOnDelivery),t.xp6(3),t.Q6J("checked",i.customer.allowWallet),t.xp6(3),t.Q6J("checked",i.customer.deleteAccount),t.xp6(12),t.Oqu(i.customer.notes?i.customer.notes:"No notes about this customer"),t.xp6(14),t.Oqu(i.customer.email),t.xp6(5),t.Oqu(i.customer.phoneNumber),t.xp6(1),t.Q6J("ngIf",i.customer.shipping),t.xp6(1),t.Q6J("ngIf",i.customer.country),t.xp6(1),t.Q6J("ngIf",i.customer.gender),t.xp6(1),t.Q6J("ngIf",i.customer.language),t.xp6(14),t.Oqu(i.customer.allowNotifications?"Mobile Notification Subscribed":"Mobile Notification Unsubscribed"),t.xp6(5),t.Oqu(i.customer.allowSalesNotifications?"Sales Notification Subscribed":"Sales Notification Unsubscribed"))},dependencies:[p.sg,p.O5,h.rH,_.lW,_.RK,J.Hw,A.NW,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,F.uX,F.SP,R.oG,x.VK,x.OP,x.p6,b.i$,b.Tg,b.Yt,b.sL,O.Rr,d.xw,d.SQ,d.Wh,d.yH,p.Ov,p.H9,p.uU]})}return o})();var v=l(3212);const re=[{path:"",component:Q,children:[{path:"list",component:ft,resolve:{customers:U,deliveries:v.h,count:w}},{path:":id/details",component:ae,resolve:{customer:q}}]}];let le=(()=>{class o{static#t=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[h.Bz.forChild(re),h.Bz]})}return o})();var ce=l(6005),ue=l(1447),me=l(712),de=l(547);let pe=(()=>{class o{static#t=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({providers:[q,U,f.f,me.T,v.h,v.g,de._,w],imports:[p.ez,le,ce.q,ue.o9,r.UX]})}return o})()}}]);