"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[2100],{2100:(je,y,s)=>{s.r(y),s.d(y,{EMAIL_ROUTES:()=>Se});var d=s(177),f=s(8498),e=s(4020);let G=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["email-notifications"]],decls:1,vars:0,template:function(n,i){1&n&&e.nrm(0,"router-outlet")},dependencies:[d.MD,f.iI,f.n3],styles:["[_nghost-%COMP%]{display:block}"]})}}return a})();var F=s(6924),p=s(8834),b=s(2765),v=s(6471),h=s(9213),E=s(9115),T=s(6440),r=s(9159);const k=[];let x=!1;const S=()=>{if(x){let a;for(;a=k.shift();)a()}};let X=0,M=(()=>{class a{constructor(){this.options={},this.minHeight="500px",this.loaded=new e.bkB,this.ready=new e.bkB,this.id=this.editorId||"editor-"+ ++X}ngOnInit(){}ngAfterViewInit(){((a,o="https://editor.unlayer.com/embed.js?2")=>{if((a=>{k.push(a)})(a),(a=>{const o=document.querySelectorAll("script");let t=!1;return o.forEach(n=>{n.src.includes(a)&&(t=!0)}),t})(o))S();else{const t=document.createElement("script");t.setAttribute("src",o),t.onload=()=>{x=!0,S()},document.head.appendChild(t)}})(this.loadEditor.bind(this),this.scriptUrl)}loadEditor(){const t=this.options||{};this.projectId&&(t.projectId=this.projectId),this.tools&&(t.tools=this.tools),this.appearance&&(t.appearance=this.appearance),this.locale&&(t.locale=this.locale),this.editor=unlayer.createEditor({...t,id:this.id,displayMode:"email",source:{name:"angular-email-editor",version:"15.2.0"}}),this.loaded.emit({}),this.editor.addEventListener("editor:ready",()=>{this.ready.emit({})})}loadDesign(t){this.editor.loadDesign(t)}saveDesign(t){this.editor.saveDesign(t)}exportHtml(t){this.editor.exportHtml(t)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.VBU({type:a,selectors:[["email-editor"]],inputs:{editorId:"editorId",options:"options",projectId:"projectId",scriptUrl:"scriptUrl",tools:"tools",appearance:"appearance",locale:"locale",id:"id",minHeight:"minHeight"},outputs:{loaded:"loaded",ready:"ready"},standalone:!1,decls:1,vars:3,consts:[[1,"unlayer-editor",3,"id"]],template:function(t,n){1&t&&e.nrm(0,"div",0),2&t&&(e.xc7("min-height",n.minHeight),e.Y8G("id",n.id))},styles:["[_nghost-%COMP%]{flex:1;display:flex}.unlayer-editor[_ngcontent-%COMP%]{flex:1;display:flex}"]}),a})(),J=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({}),a})();var m=s(9417),u=s(5351),_=s(636),I=s(9631),D=s(2798),H=s(3);function z(a,o){1&a&&(e.j41(0,"mat-error"),e.EFF(1," Subject is required "),e.k0s())}function K(a,o){1&a&&(e.j41(0,"mat-error"),e.EFF(1," Email address is required for custom recipient "),e.k0s())}function Q(a,o){1&a&&(e.j41(0,"mat-error"),e.EFF(1," Please enter a valid email address "),e.k0s())}function Z(a,o){if(1&a&&(e.j41(0,"mat-form-field",7)(1,"mat-label"),e.EFF(2,"Email Address"),e.k0s(),e.nrm(3,"input",24),e.DNE(4,K,2,0,"mat-error",9)(5,Q,2,0,"mat-error",9),e.k0s()),2&a){let t,n;const i=e.XpG();e.R7$(4),e.Y8G("ngIf",null==(t=i.sendForm.get("to"))?null:t.hasError("required")),e.R7$(),e.Y8G("ngIf",null==(n=i.sendForm.get("to"))?null:n.hasError("email"))}}function W(a,o){if(1&a&&(e.j41(0,"mat-option",27),e.EFF(1),e.k0s()),2&a){const t=o.$implicit;e.Y8G("value",t.code),e.R7$(),e.SpI(" ",t.name," ")}}function q(a,o){if(1&a&&(e.j41(0,"mat-form-field",7)(1,"mat-label"),e.EFF(2,"Countries"),e.k0s(),e.j41(3,"mat-select",25),e.DNE(4,W,2,2,"mat-option",26),e.k0s(),e.j41(5,"mat-hint"),e.EFF(6,"Leave empty to send to all countries"),e.k0s()()),2&a){const t=e.XpG();e.R7$(4),e.Y8G("ngForOf",t.availableCountries)}}function ee(a,o){1&a&&(e.j41(0,"mat-error"),e.EFF(1," Please enter valid JSON "),e.k0s())}function te(a,o){if(1&a&&(e.j41(0,"div",28)(1,"h3",29),e.EFF(2),e.k0s(),e.j41(3,"p",30),e.EFF(4," This email will be sent using the current template design. "),e.k0s()()),2&a){const t=e.XpG();e.R7$(2),e.SpI("Template: ",t.data.templateName,"")}}function ae(a,o){1&a&&(e.j41(0,"mat-icon",31),e.EFF(1,"hourglass_empty"),e.k0s())}let ne=(()=>{class a{constructor(t,n,i){this.fb=t,this.dialogRef=n,this.data=i,this.isSending=!1,this.availableCountries=[{code:"US",name:"United States"},{code:"UK",name:"United Kingdom"},{code:"CA",name:"Canada"},{code:"AU",name:"Australia"},{code:"DE",name:"Germany"},{code:"FR",name:"France"},{code:"NG",name:"Nigeria"},{code:"ZA",name:"South Africa"},{code:"KE",name:"Kenya"},{code:"GH",name:"Ghana"}],this.sendForm=this.fb.group({subject:["",m.k0.required],type:["User",m.k0.required],to:[""],countries:[[]],data:["{}",[m.k0.required,this.jsonValidator]]})}jsonValidator(t){try{return JSON.parse(t.value),null}catch{return{invalidJson:!0}}}onTypeChange(){const t=this.sendForm.get("type")?.value,n=this.sendForm.get("to");"Custom"===t?n?.setValidators([m.k0.required,m.k0.email]):n?.clearValidators(),n?.updateValueAndValidity()}onSend(){if(this.sendForm.valid){const t=this.sendForm.value;let n={};try{n=JSON.parse(t.data)}catch{return void console.error("Invalid JSON data")}const i={subject:t.subject,html:this.data.html,data:n,type:"Custom"===t.type?"User":t.type,..."Custom"===t.type?{to:t.to}:{},..."Custom"!==t.type&&t.countries?.length>0?{countries:t.countries}:{}};this.isSending=!0,this.dialogRef.close(i)}}onCancel(){this.dialogRef.close()}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(m.ok),e.rXU(u.CP),e.rXU(u.Vh))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-send-email-modal"]],decls:49,vars:9,consts:[[1,"send-email-modal"],["mat-dialog-title","",1,"text-xl","font-semibold","text-gray-900","mb-0"],[3,"ngSubmit","formGroup"],[1,"max-h-[70vh]","overflow-y-auto","py-6"],[1,"mb-6","pb-4","border-b","border-gray-200"],[1,"text-base","font-medium","text-gray-800","mb-4"],[1,"space-y-4"],["appearance","outline",1,"w-full"],["matInput","","formControlName","subject","placeholder","Enter email subject",1,"w-full"],[4,"ngIf"],["formControlName","type",3,"selectionChange"],["value","User"],["value","Merchant"],["value","Riders"],["value","All"],["value","Custom"],["appearance","outline","class","w-full",4,"ngIf"],["matInput","","formControlName","data","rows","6","placeholder",'{"firstName": "John", "lastName": "Doe", "companyName": "Acme Corp"}',1,"font-mono","text-sm"],[1,"text-sm","text-gray-600"],["class","bg-gray-50 p-4 rounded-lg",4,"ngIf"],["align","end",1,"pt-4","pb-0","px-0"],["mat-button","","type","button",1,"mr-2",3,"click"],["mat-raised-button","","color","primary","type","submit",1,"min-w-[120px]",3,"disabled"],["class","mr-1 animate-spin",4,"ngIf"],["matInput","","formControlName","to","placeholder","user@example.com",1,"w-full"],["formControlName","countries","multiple",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"bg-gray-50","p-4","rounded-lg"],[1,"text-base","font-medium","text-gray-800","mb-2"],[1,"text-sm","text-gray-600","mb-0"],[1,"mr-1","animate-spin"]],template:function(n,i){if(1&n&&(e.j41(0,"div",0)(1,"h2",1),e.EFF(2,"Send Email Template"),e.k0s(),e.j41(3,"form",2),e.bIt("ngSubmit",function(){return i.onSend()}),e.j41(4,"mat-dialog-content",3)(5,"div",4)(6,"h3",5),e.EFF(7,"Email Details"),e.k0s(),e.j41(8,"div",6)(9,"mat-form-field",7)(10,"mat-label"),e.EFF(11,"Subject"),e.k0s(),e.nrm(12,"input",8),e.DNE(13,z,2,0,"mat-error",9),e.k0s(),e.j41(14,"mat-form-field",7)(15,"mat-label"),e.EFF(16,"Recipient Type"),e.k0s(),e.j41(17,"mat-select",10),e.bIt("selectionChange",function(){return i.onTypeChange()}),e.j41(18,"mat-option",11),e.EFF(19,"Users"),e.k0s(),e.j41(20,"mat-option",12),e.EFF(21,"Merchants"),e.k0s(),e.j41(22,"mat-option",13),e.EFF(23,"Riders"),e.k0s(),e.j41(24,"mat-option",14),e.EFF(25,"All Types"),e.k0s(),e.j41(26,"mat-option",15),e.EFF(27,"Specific Email"),e.k0s()()(),e.DNE(28,Z,6,2,"mat-form-field",16)(29,q,7,1,"mat-form-field",16),e.k0s()(),e.j41(30,"div",4)(31,"h3",5),e.EFF(32,"Template Data (JSON)"),e.k0s(),e.j41(33,"mat-form-field",7)(34,"mat-label"),e.EFF(35,"Template Variables"),e.k0s(),e.j41(36,"textarea",17),e.EFF(37,"          "),e.k0s(),e.j41(38,"mat-hint",18),e.EFF(39,"JSON object with variables to replace in the template"),e.k0s(),e.DNE(40,ee,2,0,"mat-error",9),e.k0s()(),e.DNE(41,te,5,1,"div",19),e.k0s(),e.j41(42,"mat-dialog-actions",20)(43,"button",21),e.bIt("click",function(){return i.onCancel()}),e.EFF(44," Cancel "),e.k0s(),e.j41(45,"button",22),e.DNE(46,ae,2,0,"mat-icon",23),e.j41(47,"span"),e.EFF(48),e.k0s()()()()()),2&n){let l,c,C,$;e.R7$(3),e.Y8G("formGroup",i.sendForm),e.R7$(10),e.Y8G("ngIf",null==(l=i.sendForm.get("subject"))?null:l.hasError("required")),e.R7$(15),e.Y8G("ngIf","Custom"===(null==(c=i.sendForm.get("type"))?null:c.value)),e.R7$(),e.Y8G("ngIf","Custom"!==(null==(C=i.sendForm.get("type"))?null:C.value)),e.R7$(11),e.Y8G("ngIf",null==($=i.sendForm.get("data"))?null:$.hasError("invalidJson")),e.R7$(),e.Y8G("ngIf",i.data.templateName),e.R7$(4),e.Y8G("disabled",i.sendForm.invalid||i.isSending),e.R7$(),e.Y8G("ngIf",i.isSending),e.R7$(2),e.JRh(i.isSending?"Sending...":"Send Email")}},dependencies:[d.MD,d.Sq,d.bT,m.X1,m.qT,m.me,m.BC,m.cb,m.j4,m.JD,u.hM,u.BI,u.E7,u.Yi,p.Hl,p.$z,_.RG,_.rl,_.nJ,_.MV,_.TL,I.fS,I.fg,D.Ve,D.VO,H.wT,b.g7,v.YN,h.m_,h.An,F.YF],styles:["[_nghost-%COMP%]{display:block}.send-email-modal[_ngcontent-%COMP%]{min-width:500px;max-width:600px}  .mat-mdc-dialog-container{--mdc-dialog-container-color: white}  .mat-mdc-form-field{width:100%}  .mat-mdc-form-field.w-full{display:block;margin-bottom:1rem}  .mat-mdc-text-field-wrapper{width:100%}  .mat-mdc-dialog-content::-webkit-scrollbar{width:6px}  .mat-mdc-dialog-content::-webkit-scrollbar-track{background:#f1f1f1;border-radius:3px}  .mat-mdc-dialog-content::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:3px}  .mat-mdc-dialog-content::-webkit-scrollbar-thumb:hover{background:#a8a8a8}  .mat-mdc-input-element[rows]{font-family:Monaco,Menlo,Ubuntu Mono,Consolas,monospace;font-size:.875rem;line-height:1.4}  .mat-mdc-dialog-actions .mat-mdc-button+.mat-mdc-raised-button{margin-left:8px}  .animate-spin{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})}}return a})();var ie=s(5312),oe=s(1626);let R=(()=>{class a{constructor(t){this.http=t,this.apiUrl=`${ie.c.hostServer}/email-templates`}createEmailTemplate(t){return this.http.post(this.apiUrl,t)}getEmailTemplates(){return this.http.get(this.apiUrl)}getEmailTemplate(t){return this.http.get(`${this.apiUrl}/${t}`)}updateEmailTemplate(t,n){return this.http.put(`${this.apiUrl}/${t}`,n)}deleteEmailTemplate(t){return this.http.delete(`${this.apiUrl}/${t}`)}sendEmail(t){return this.http.post(`${this.apiUrl}/send`,t)}static{this.\u0275fac=function(n){return new(n||a)(e.KVO(oe.Qq))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var g=s(2920);function le(a,o){if(1&a&&(e.j41(0,"span",9),e.EFF(1),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.SpI(" - ",t.currentTemplate.name," ")}}let w=(()=>{class a{constructor(t,n,i,l){this.route=t,this.router=n,this.emailTemplateService=i,this.dialog=l,this.title="angular-email-editor",this.options={version:"latest",appearance:{theme:"modern_dark"}},this.templateId=null,this.currentTemplate=null,this.isEditMode=!1}ngOnInit(){this.templateId=this.route.snapshot.paramMap.get("id"),this.isEditMode=!!this.templateId,this.isEditMode&&this.templateId&&this.loadTemplate(this.templateId)}loadTemplate(t){this.emailTemplateService.getEmailTemplate(t).subscribe({next:n=>{this.currentTemplate=n,this.emailEditor&&this.emailEditor.editor&&this.emailEditor.loadDesign(n.design)},error:n=>{console.error("Error loading template:",n)}})}editorLoaded(t){console.log("editorLoaded"),this.isEditMode&&this.currentTemplate&&this.emailEditor.loadDesign(this.currentTemplate.design)}editorReady(t){console.log("editorReady")}backToList(){this.router.navigate(["./list"],{relativeTo:this.route})}sendEmail(){this.emailEditor.editor.exportHtml(t=>{this.dialog.open(ne,{width:"600px",data:{html:t.html,templateName:this.currentTemplate?.name||"New Template"},disableClose:!0}).afterClosed().subscribe(i=>{i&&this.emailTemplateService.sendEmail(i).subscribe({next:l=>{console.log("Email sent successfully",l),alert("Email sent successfully!")},error:l=>{console.error("Error sending email:",l),alert("Error sending email. Please try again.")}})})})}exportHtml(){this.emailEditor.editor.exportHtml(t=>{console.log("exportHtml",t),this.saveTemplate(t)})}saveTemplate(t){if(this.isEditMode&&this.templateId)this.emailTemplateService.updateEmailTemplate(this.templateId,{design:t.design,html:t.html}).subscribe({next:i=>{console.log("Template updated successfully",i),console.log("Template updated successfully",i)},error:i=>{console.error("Error updating template:",i),alert("Error updating template. Please try again.")}});else{const n=prompt("Enter template name:");n&&this.emailTemplateService.createEmailTemplate({name:n,design:t.design,html:t.html}).subscribe({next:l=>{console.log("Template created successfully",l)},error:l=>{console.error("Error creating template:",l),alert("Error creating template. Please try again.")}})}}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(f.nX),e.rXU(f.Ix),e.rXU(R),e.rXU(u.bZ))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-create-email-template"]],viewQuery:function(n,i){if(1&n&&e.GBs(M,5),2&n){let l;e.mGM(l=e.lsd())&&(i.emailEditor=l.first)}},decls:19,vars:4,consts:[[1,"h-screen","flex","flex-col"],["fxLayout","row","fxLayoutAlign","space-between center",1,"p-4","bg-white","shadow-sm"],[1,"text-xl","font-semibold"],["class","text-gray-500 font-normal",4,"ngIf"],["fxLayout","row","fxLayoutGap","10px"],["mat-stroked-button","",3,"click"],["mat-stroked-button","","color","accent",3,"click"],["mat-raised-button","","color","primary",3,"click"],[1,"flex-1",3,"loaded","ready","options"],[1,"text-gray-500","font-normal"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"h2",2),e.EFF(3),e.DNE(4,le,2,1,"span",3),e.k0s(),e.j41(5,"div",4)(6,"button",5),e.bIt("click",function(){return i.backToList()}),e.j41(7,"mat-icon"),e.EFF(8,"arrow_back"),e.k0s(),e.EFF(9," Back to Templates "),e.k0s(),e.j41(10,"button",6),e.bIt("click",function(){return i.sendEmail()}),e.j41(11,"mat-icon"),e.EFF(12,"send"),e.k0s(),e.EFF(13," Send Email "),e.k0s(),e.j41(14,"button",7),e.bIt("click",function(){return i.exportHtml()}),e.j41(15,"mat-icon"),e.EFF(16,"save"),e.k0s(),e.EFF(17),e.k0s()()(),e.j41(18,"email-editor",8),e.bIt("loaded",function(c){return i.editorLoaded(c)})("ready",function(c){return i.editorReady(c)}),e.k0s()()),2&n&&(e.R7$(3),e.SpI(" ",i.isEditMode?"Edit Email Template":"Create Email Template"," "),e.R7$(),e.Y8G("ngIf",i.isEditMode&&i.currentTemplate),e.R7$(13),e.SpI(" ",i.isEditMode?"Update Template":"Save Template"," "),e.R7$(),e.Y8G("options",i.options))},dependencies:[d.MD,d.bT,J,M,h.m_,h.An,r.tP,b.g7,v.YN,E.Cn,f.iI,T.Ou,F.YF,g.DJ,g.BO,g.sA,p.Hl,p.$z],styles:["[_nghost-%COMP%]{display:block;height:100%}.p-4[_ngcontent-%COMP%]{padding:16px}.bg-white[_ngcontent-%COMP%]{background-color:#fff}.shadow-sm[_ngcontent-%COMP%]{box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.font-semibold[_ngcontent-%COMP%]{font-weight:600}.font-normal[_ngcontent-%COMP%]{font-weight:400}.text-gray-500[_ngcontent-%COMP%]{color:#6b7280}.flex-1[_ngcontent-%COMP%]{flex:1}.h-screen[_ngcontent-%COMP%]{height:100vh}.flex[_ngcontent-%COMP%]{display:flex}.flex-col[_ngcontent-%COMP%]{flex-direction:column}"]})}}return a})();var se=s(5024),L=s(1269);const re=()=>["../","create"],me=()=>[15,30,60],ce=a=>["../",a,"edit"],de=a=>["../",a,"preview"];function pe(a,o){if(1&a){const t=e.RV6();e.j41(0,"span",3)(1,"button",22),e.EFF(2),e.k0s(),e.j41(3,"button",23),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.deleteSelected())}),e.j41(4,"mat-icon",7),e.EFF(5,"delete"),e.k0s(),e.EFF(6," Delete Selected Templates "),e.k0s()()}if(2&a){const t=e.XpG();e.R7$(2),e.SpI("",t.selection.selected.length," Selected")}}function ue(a,o){if(1&a){const t=e.RV6();e.j41(0,"th",24)(1,"mat-checkbox",25),e.bIt("change",function(i){e.eBV(t);const l=e.XpG();return e.Njj(i?l.toggleAllRows():null)}),e.k0s()()}if(2&a){const t=e.XpG();e.R7$(),e.Y8G("checked",t.selection.hasValue()&&t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected())("aria-label",t.checkboxLabel())}}function fe(a,o){if(1&a){const t=e.RV6();e.j41(0,"td",26)(1,"mat-checkbox",27),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())})("change",function(i){const l=e.eBV(t).$implicit,c=e.XpG();return e.Njj(i?c.selection.toggle(l):null)}),e.k0s()()}if(2&a){const t=o.$implicit,n=e.XpG();e.R7$(),e.Y8G("checked",n.selection.isSelected(t))("aria-label",n.checkboxLabel(t))}}function he(a,o){1&a&&(e.j41(0,"th",24),e.EFF(1,"#"),e.k0s())}function ge(a,o){if(1&a&&(e.j41(0,"td",26),e.EFF(1),e.k0s()),2&a){const t=o.index;e.R7$(),e.JRh(t+1)}}function Ee(a,o){1&a&&(e.j41(0,"th",24),e.EFF(1,"Template Name"),e.k0s())}function _e(a,o){if(1&a&&(e.j41(0,"td",26),e.EFF(1),e.k0s()),2&a){const t=o.$implicit;e.R7$(),e.JRh(t.name)}}function be(a,o){1&a&&(e.j41(0,"th",24),e.EFF(1,"Created"),e.k0s())}function Te(a,o){if(1&a&&(e.j41(0,"td",26),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&a){const t=o.$implicit;e.R7$(),e.JRh(e.i5U(2,1,t.createdAt,"medium"))}}function Ce(a,o){1&a&&(e.j41(0,"th",24),e.EFF(1,"Last Updated"),e.k0s())}function Fe(a,o){if(1&a&&(e.j41(0,"td",26),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&a){const t=o.$implicit;e.R7$(),e.JRh(e.i5U(2,1,t.updatedAt,"medium"))}}function ye(a,o){1&a&&(e.j41(0,"th",24),e.EFF(1,"Actions"),e.k0s())}function ve(a,o){if(1&a){const t=e.RV6();e.j41(0,"td",26)(1,"button",28)(2,"mat-icon"),e.EFF(3,"more_vert"),e.k0s()(),e.j41(4,"mat-menu",null,0)(6,"button",29)(7,"mat-icon",30),e.EFF(8,"edit"),e.k0s(),e.j41(9,"span"),e.EFF(10,"Edit Template"),e.k0s()(),e.j41(11,"button",29)(12,"mat-icon",30),e.EFF(13,"visibility"),e.k0s(),e.j41(14,"span"),e.EFF(15,"Preview Template"),e.k0s()(),e.j41(16,"button",31),e.bIt("click",function(){const i=e.eBV(t),l=i.$implicit,c=i.index,C=e.XpG();return e.Njj(C.deleteTemplate(l._id,c))}),e.j41(17,"mat-icon",30),e.EFF(18,"delete"),e.k0s(),e.j41(19,"span"),e.EFF(20,"Delete"),e.k0s()()()()}if(2&a){const t=o.$implicit,n=e.sdS(5);e.R7$(),e.Y8G("matMenuTriggerFor",n),e.R7$(5),e.Y8G("routerLink",e.eq3(3,ce,t._id)),e.R7$(5),e.Y8G("routerLink",e.eq3(5,de,t._id))}}function ke(a,o){1&a&&e.nrm(0,"tr",32)}function xe(a,o){1&a&&e.nrm(0,"tr",33)}const Se=[{path:"",component:G,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:(()=>{class a{constructor(t,n){this.emailTemplateService=t,this._matDialog=n,this.displayedColumns=["select","no","name","createdAt","updatedAt","actions"],this.dataSource=new r.I6([]),this.selection=new se.CB(!0,[])}ngAfterViewInit(){this.dataSource.paginator=this.paginator}ngOnInit(){this.loadEmailTemplates()}loadEmailTemplates(){this.emailTemplateService.getEmailTemplates().subscribe({next:t=>{this.dataSource.data=t},error:t=>{console.error("Error loading email templates:",t)}})}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}deleteSelected(){this.confirmDialogRef=this._matDialog.open(L.Y,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete email templates?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete these email templates?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(t=>{t&&([...this.selection.selected].forEach(i=>{this.emailTemplateService.deleteEmailTemplate(i._id).subscribe({next:()=>{const l=this.dataSource.data.findIndex(c=>c._id===i._id);l>-1&&(this.dataSource.data.splice(l,1),this.dataSource._updateChangeSubscription())},error:l=>{console.error("Error deleting template:",l)}})}),this.selection.clear())})}checkboxLabel(t){return t?(this.selection.isSelected(t)?"deselect":"select")+" template":(this.isAllSelected()?"deselect":"select")+" all"}deleteTemplate(t,n){this.confirmDialogRef=this._matDialog.open(L.Y,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Email Template?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete this email template?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(i=>{i&&this.emailTemplateService.deleteEmailTemplate(t).subscribe({next:()=>{this.dataSource.data.splice(n,1),this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator},error:l=>{console.error("Error deleting template:",l)}})})}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(R),e.rXU(u.bZ))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-list-email-templates"]],viewQuery:function(n,i){if(1&n&&e.GBs(T.iy,5),2&n){let l;e.mGM(l=e.lsd())&&(i.paginator=l.first)}},decls:34,vars:8,consts:[["menu","matMenu"],[1,"h-screen","w-full"],["fxLayout","row","fxLayoutGap","10px","fxLayoutAlign","space-between center",1,"card","bg-white","w-full","mat-elevation-z2","px-2","py-2"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"text-lg","font-thin"],[1,"text-2xl"],["fxLayout","row","fxLayoutGap","10px","fxLayoutAlign","start center"],["mat-raised-button","","color","primary",3,"routerLink"],[1,"mat-18"],["class","text-lg font-thin","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",4,"ngIf"],[1,"mat-elevation-z8"],["mat-table","",1,"w-full",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","no"],["matColumnDef","name"],["matColumnDef","createdAt"],["matColumnDef","updatedAt"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of email templates",3,"pageSizeOptions"],["mat-button",""],["mat-stroked-button","","color","warn",3,"click"],["mat-header-cell",""],[3,"change","checked","indeterminate","aria-label"],["mat-cell",""],[3,"click","change","checked","aria-label"],["mat-icon-button","","aria-label","Template actions menu",3,"matMenuTriggerFor"],["mat-menu-item","",3,"routerLink"],[1,"material-icons-outlined"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,i){1&n&&(e.j41(0,"div",1)(1,"div",2)(2,"span",3)(3,"span",4),e.EFF(4,"Email Templates"),e.k0s()(),e.j41(5,"div",5)(6,"a",6)(7,"mat-icon",7),e.EFF(8,"add"),e.k0s(),e.EFF(9," Create Template "),e.k0s(),e.DNE(10,pe,7,1,"span",8),e.k0s()(),e.j41(11,"div",9)(12,"table",10),e.qex(13,11),e.DNE(14,ue,2,3,"th",12)(15,fe,2,2,"td",13),e.bVm(),e.qex(16,14),e.DNE(17,he,2,0,"th",12)(18,ge,2,1,"td",13),e.bVm(),e.qex(19,15),e.DNE(20,Ee,2,0,"th",12)(21,_e,2,1,"td",13),e.bVm(),e.qex(22,16),e.DNE(23,be,2,0,"th",12)(24,Te,3,4,"td",13),e.bVm(),e.qex(25,17),e.DNE(26,Ce,2,0,"th",12)(27,Fe,3,4,"td",13),e.bVm(),e.qex(28,18),e.DNE(29,ye,2,0,"th",12)(30,ve,21,7,"td",13),e.bVm(),e.DNE(31,ke,1,0,"tr",19)(32,xe,1,0,"tr",20),e.k0s(),e.nrm(33,"mat-paginator",21),e.k0s()()),2&n&&(e.R7$(6),e.Y8G("routerLink",e.lJ4(6,re)),e.R7$(4),e.Y8G("ngIf",i.selection.selected.length),e.R7$(2),e.Y8G("dataSource",i.dataSource),e.R7$(19),e.Y8G("matHeaderRowDef",i.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",i.displayedColumns),e.R7$(),e.Y8G("pageSizeOptions",e.lJ4(7,me)))},dependencies:[d.MD,d.bT,d.vh,F.YF,g.DJ,g.BO,g.sA,r.tP,r.Zl,r.tL,r.ji,r.cC,r.YV,r.iL,r.KS,r.$R,r.YZ,r.NB,b.g7,b.So,h.m_,h.An,f.iI,f.Wk,T.Ou,T.iy,E.Cn,E.kk,E.fb,E.Cp,p.Hl,p.It,p.$z,p.iY],styles:["[_nghost-%COMP%]{display:block}.card[_ngcontent-%COMP%]{margin-bottom:20px}.mat-elevation-z8[_ngcontent-%COMP%]{border-radius:8px;overflow:hidden}.w-full[_ngcontent-%COMP%]{width:100%}.mat-18[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}table[_ngcontent-%COMP%]{width:100%}th.mat-header-cell[_ngcontent-%COMP%]{font-weight:600;color:#000000de}td.mat-cell[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.12)}.mat-row[_ngcontent-%COMP%]:hover{background-color:#0000000a}"]})}}return a})()},{path:"create",component:w},{path:":id/edit",component:w}]}]}}]);