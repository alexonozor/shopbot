"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[124],{124:(b,p,i)=>{i.r(p),i.d(p,{CuisinesTabComponent:()=>F});var C=i(7336),_=i(9417),m=i(850),l=i(6471),v=i(9172),O=i(6354),E=i(5749),D=i(980),u=i(177),M=i(6924),h=i(636),d=i(9213),f=i(8834),t=i(4020),T=i(6737),I=i(5416),P=i(8498),B=i(3);const R=["fruitInput"],g=["auto"];function L(a,c){1&a&&(t.j41(0,"mat-icon",13),t.EFF(1,"cancel"),t.k0s())}function A(a,c){if(1&a){const s=t.RV6();t.j41(0,"mat-chip-row",11),t.bIt("removed",function(){const n=t.eBV(s).$implicit,o=t.XpG();return t.Njj(o.remove(n))}),t.EFF(1),t.DNE(2,L,2,0,"mat-icon",12),t.k0s()}if(2&a){const s=c.$implicit,e=t.XpG();t.Y8G("removable",e.removable),t.R7$(),t.SpI(" ",s.name," "),t.R7$(),t.Y8G("ngIf",e.removable)}}function U(a,c){if(1&a&&(t.j41(0,"mat-option",14),t.EFF(1),t.k0s()),2&a){const s=c.$implicit;t.Y8G("value",s),t.R7$(),t.SpI(" ",s.name," ")}}let F=(()=>{class a{constructor(s,e,n,o){this.cuisinesService=s,this.storeService=e,this.snackBar=n,this.route=o,this.visible=!0,this.selectable=!0,this.removable=!0,this.addOnBlur=!0,this.separatorKeysCodes=[C.Fm,C.KE],this.cuisineCtrl=new _.MJ,this.isLoading=!1,this.cuisines=[],this.store=this.route.parent?.parent?.snapshot.data.store,this.cuisinesService.getCuisines().subscribe(r=>{this.cuisines=r}),this.filteredCuisines=this.cuisineCtrl.valueChanges.pipe((0,v.Z)(null),(0,O.T)(r=>r?this._filter(r):this.cuisines.slice()))}remove(s){const e=this.store.cuisines.indexOf(s);e>=0&&this.store.cuisines.splice(e,1)}selected(s){this.store.cuisines.push(s.option.value),this.fruitInput.nativeElement.value="",this.cuisineCtrl.setValue(null)}_filter(s){if("string"==typeof s){const e=s.toLowerCase();return this.cuisines.filter(n=>0===n.name.toLowerCase().indexOf(e))}{const e=s.name.toLowerCase();return this.cuisines.filter(n=>0===n.name.toLowerCase().indexOf(e))}}save(){this.isLoading=!0;const s=this.store.cuisines.map(e=>e._id);this.storeService.saveStore({cuisines:s},this.store._id).pipe((0,D.j)(()=>this.isLoading=!1)).subscribe(e=>{this.snackBar.open("Cuisines Updated","Ok",{duration:200})})}static{this.\u0275fac=function(e){return new(e||a)(t.rXU(T.F),t.rXU(E.n),t.rXU(I.UG),t.rXU(P.nX))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-cuisines-tab"]],viewQuery:function(e,n){if(1&e&&(t.GBs(R,5),t.GBs(g,5)),2&e){let o;t.mGM(o=t.lsd())&&(n.fruitInput=o.first),t.mGM(o=t.lsd())&&(n.matAutocomplete=o.first)}},inputs:{store:"store"},features:[t.Jv_([E.n])],decls:14,vars:10,consts:[["chipList",""],["fruitInput",""],["auto","matAutocomplete"],[1,"example-chip-list","w-full"],["aria-label","Fruit selection"],[3,"removable","removed",4,"ngFor","ngForOf"],["placeholder","New cuisine...",3,"formControl","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur"],[3,"optionSelected"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click","disabled"],[1,"mat-18"],[3,"removed","removable"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[3,"value"]],template:function(e,n){if(1&e){const o=t.RV6();t.j41(0,"mat-form-field",3)(1,"mat-chip-grid",4,0),t.DNE(3,A,3,3,"mat-chip-row",5),t.nrm(4,"input",6,1),t.k0s(),t.j41(6,"mat-autocomplete",7,2),t.bIt("optionSelected",function(K){return t.eBV(o),t.Njj(n.selected(K))}),t.DNE(8,U,2,2,"mat-option",8),t.nI1(9,"async"),t.k0s()(),t.j41(10,"button",9),t.bIt("click",function(){return t.eBV(o),t.Njj(n.save())}),t.j41(11,"mat-icon",10),t.EFF(12,"add"),t.k0s(),t.EFF(13," SAVE\n"),t.k0s()}if(2&e){const o=t.sdS(2),r=t.sdS(7);t.R7$(3),t.Y8G("ngForOf",n.store.cuisines),t.R7$(),t.Y8G("formControl",n.cuisineCtrl)("matAutocomplete",r)("matChipInputFor",o)("matChipInputSeparatorKeyCodes",n.separatorKeysCodes)("matChipInputAddOnBlur",n.addOnBlur),t.R7$(4),t.Y8G("ngForOf",t.bMT(9,8,n.filteredCuisines)),t.R7$(2),t.Y8G("disabled",n.isLoading)}},dependencies:[h.RG,h.rl,u.MD,u.Sq,u.bT,u.Jj,_.YN,_.me,_.BC,_.X1,_.l_,M.YF,l.YN,l.HW,l.D7,l.Zv,l.jH,m.jL,m.$3,B.wT,m.pN,d.m_,d.An,f.Hl,f.$z],encapsulation:2})}}return a})()}}]);