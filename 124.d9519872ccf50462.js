"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[124],{124:(j,p,s)=>{s.r(p),s.d(p,{CuisinesTabComponent:()=>W});var E=s(7336),_=s(9417),h=s(9172),f=s(6354),C=s(5749),v=s(980),c=s(8910),l=s(177),O=s(6924),D=s(3457),t=s(3953),M=s(6737),T=s(5416),P=s(8498),d=s(850),I=s(6600),B=s(8834),u=s(6471),g=s(3719),R=s(9213);const L=["fruitInput"],A=["auto"];function U(o,m){1&o&&(t.j41(0,"mat-icon",13),t.EFF(1,"cancel"),t.k0s())}function K(o,m){if(1&o){const i=t.RV6();t.j41(0,"mat-chip-row",11),t.bIt("removed",function(){const n=t.eBV(i).$implicit,a=t.XpG();return t.Njj(a.remove(n))}),t.EFF(1),t.DNE(2,U,2,0,"mat-icon",12),t.k0s()}if(2&o){const i=m.$implicit,e=t.XpG();t.Y8G("removable",e.removable),t.R7$(),t.SpI(" ",i.name," "),t.R7$(),t.Y8G("ngIf",e.removable)}}function F(o,m){if(1&o&&(t.j41(0,"mat-option",14),t.EFF(1),t.k0s()),2&o){const i=m.$implicit;t.Y8G("value",i),t.R7$(),t.SpI(" ",i.name," ")}}let W=(()=>{class o{constructor(i,e,n,a){this.cuisinesService=i,this.storeService=e,this.snackBar=n,this.route=a,this.visible=!0,this.selectable=!0,this.removable=!0,this.addOnBlur=!0,this.separatorKeysCodes=[E.Fm,E.KE],this.cuisineCtrl=new _.MJ,this.isLoading=!1,this.cuisines=[],this.store=this.route.parent?.parent?.snapshot.data.store,this.cuisinesService.getCuisines().subscribe(r=>{this.cuisines=r}),this.filteredCuisines=this.cuisineCtrl.valueChanges.pipe((0,h.Z)(null),(0,f.T)(r=>r?this._filter(r):this.cuisines.slice()))}remove(i){const e=this.store.cuisines.indexOf(i);e>=0&&this.store.cuisines.splice(e,1)}selected(i){this.store.cuisines.push(i.option.value),this.fruitInput.nativeElement.value="",this.cuisineCtrl.setValue(null)}_filter(i){if("string"==typeof i){const e=i.toLowerCase();return this.cuisines.filter(n=>0===n.name.toLowerCase().indexOf(e))}{const e=i.name.toLowerCase();return this.cuisines.filter(n=>0===n.name.toLowerCase().indexOf(e))}}save(){this.isLoading=!0;const i=this.store.cuisines.map(e=>e._id);this.storeService.saveStore({cuisines:i},this.store._id).pipe((0,v.j)(()=>this.isLoading=!1)).subscribe(e=>{this.snackBar.open("Cuisines Updated","Ok",{duration:200})})}static#t=this.\u0275fac=function(e){return new(e||o)(t.rXU(M.F),t.rXU(C.n),t.rXU(T.UG),t.rXU(P.nX))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-cuisines-tab"]],viewQuery:function(e,n){if(1&e&&(t.GBs(L,5),t.GBs(A,5)),2&e){let a;t.mGM(a=t.lsd())&&(n.fruitInput=a.first),t.mGM(a=t.lsd())&&(n.matAutocomplete=a.first)}},inputs:{store:"store"},standalone:!0,features:[t.Jv_([C.n]),t.aNF],decls:14,vars:10,consts:[["chipList",""],["fruitInput",""],["auto","matAutocomplete"],[1,"example-chip-list","w-full"],["aria-label","Fruit selection"],[3,"removable","removed",4,"ngFor","ngForOf"],["placeholder","New cuisine...",3,"formControl","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur"],[3,"optionSelected"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click","disabled"],[1,"mat-18"],[3,"removed","removable"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[3,"value"]],template:function(e,n){if(1&e){const a=t.RV6();t.j41(0,"mat-form-field",3)(1,"mat-chip-grid",4,0),t.DNE(3,K,3,3,"mat-chip-row",5),t.nrm(4,"input",6,1),t.k0s(),t.j41(6,"mat-autocomplete",7,2),t.bIt("optionSelected",function(b){return t.eBV(a),t.Njj(n.selected(b))}),t.DNE(8,F,2,2,"mat-option",8),t.nI1(9,"async"),t.k0s()(),t.j41(10,"button",9),t.bIt("click",function(){return t.eBV(a),t.Njj(n.save())}),t.j41(11,"mat-icon",10),t.EFF(12,"add"),t.k0s(),t.EFF(13," SAVE\n"),t.k0s()}if(2&e){const a=t.sdS(2),r=t.sdS(7);t.R7$(3),t.Y8G("ngForOf",n.store.cuisines),t.R7$(),t.Y8G("formControl",n.cuisineCtrl)("matAutocomplete",r)("matChipInputFor",a)("matChipInputSeparatorKeyCodes",n.separatorKeysCodes)("matChipInputAddOnBlur",n.addOnBlur),t.R7$(4),t.Y8G("ngForOf",t.bMT(9,8,n.filteredCuisines)),t.R7$(2),t.Y8G("disabled",n.isLoading)}},dependencies:[D.G,d.$3,I.wT,d.pN,B.$z,u.HW,u.D7,u.Zv,u.jH,g.rl,R.An,l.MD,l.Sq,l.bT,l.Jj,_.YN,_.me,_.BC,_.X1,_.l_,O.YF,c.Hw,c.T_,c.Xg]})}return o})()}}]);