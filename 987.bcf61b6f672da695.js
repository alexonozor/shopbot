"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[987],{4987:(ot,_,a)=>{a.r(_),a.d(_,{MessagesModule:()=>nt});var u=a(6814),r=a(1896),t=a(5879);let Z=(()=>{class e{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-messages"]],decls:1,vars:0,template:function(o,s){1&o&&t._UZ(0,"router-outlet")},dependencies:[r.lC],encapsulation:2})}return e})();var y=a(8337),x=a(3365),c=a(5313),C=a(6567),M=a(437),m=a(712),A=a(7700),p=a(2296),L=a(617),v=a(5986),f=a(7988),d=a(3814);function S(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"span",1)(1,"button",22),t._uU(2),t.qZA(),t.TgZ(3,"button",23)(4,"mat-icon",21),t._uU(5,"campaign"),t.qZA(),t._uU(6," Message Customers"),t.qZA(),t.TgZ(7,"button",24),t.NdJ("click",function(){t.CHM(n);const s=t.oxw();return t.KtG(s.deleteSelected())}),t.TgZ(8,"mat-icon",21),t._uU(9,"delete"),t.qZA(),t._uU(10," Delete Selected Customers"),t.qZA()()}if(2&e){const n=t.oxw();t.xp6(2),t.hij("",n.selection.selected.length," Selected")}}function b(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"th",25)(1,"mat-checkbox",26),t.NdJ("change",function(s){t.CHM(n);const l=t.oxw();return t.KtG(s?l.toggleAllRows():null)}),t.qZA()()}if(2&e){const n=t.oxw();t.xp6(1),t.Q6J("checked",n.selection.hasValue()&&n.isAllSelected())("indeterminate",n.selection.hasValue()&&!n.isAllSelected())("aria-label",n.checkboxLabel())}}function D(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"td",27)(1,"mat-checkbox",28),t.NdJ("click",function(s){return s.stopPropagation()})("change",function(s){const h=t.CHM(n).$implicit,g=t.oxw();return t.KtG(s?g.selection.toggle(h):null)}),t.qZA()()}if(2&e){const n=i.$implicit,o=t.oxw();t.xp6(1),t.Q6J("checked",o.selection.isSelected(n))("aria-label",o.checkboxLabel(n))}}function N(e,i){1&e&&(t.TgZ(0,"th",25),t._uU(1,"Recipients"),t.qZA())}function w(e,i){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(n.recipients.length)}}function U(e,i){1&e&&(t.TgZ(0,"th",25),t._uU(1,"Phone Number"),t.qZA())}function Y(e,i){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(n.type)}}function k(e,i){1&e&&(t.TgZ(0,"th",25),t._uU(1,"Email"),t.qZA())}function R(e,i){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(n.email)}}function Q(e,i){1&e&&(t.TgZ(0,"th",25),t._uU(1,"Notification Type"),t.qZA())}function q(e,i){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(n.type)}}function B(e,i){1&e&&(t.TgZ(0,"th",25),t._uU(1,"Title"),t.qZA())}function F(e,i){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(n.title)}}function J(e,i){1&e&&(t.TgZ(0,"th",25),t._uU(1,"Body"),t.qZA())}function O(e,i){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(n.body)}}function G(e,i){1&e&&(t.TgZ(0,"th",25),t._uU(1,"Registered at"),t.qZA())}function I(e,i){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,n.createdAt,"short"))}}function $(e,i){1&e&&(t.TgZ(0,"th",25),t._uU(1,"Actions"),t.qZA())}function z(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"td",27)(1,"button",29)(2,"mat-icon"),t._uU(3,"more_vert"),t.qZA()(),t.TgZ(4,"mat-menu",null,30)(6,"button",31),t.NdJ("click",function(){const s=t.CHM(n),l=s.$implicit,h=s.index,g=t.oxw();return t.KtG(g.deleteNotification(l._id,h))}),t.TgZ(7,"mat-icon",32),t._uU(8,"delete"),t.qZA(),t.TgZ(9,"span"),t._uU(10,"Delete"),t.qZA()()()()}if(2&e){const n=t.MAs(5);t.xp6(1),t.Q6J("matMenuTriggerFor",n)}}function H(e,i){1&e&&t._UZ(0,"tr",33)}function E(e,i){1&e&&t._UZ(0,"tr",34)}const K=function(){return[15,30,60]};let X=(()=>{class e{constructor(n,o,s){this.route=n,this.notificationService=o,this._matDialog=s,this.displayedColumns=["select","recipients","type","title","body","createdAt","actions"],this.dataSource=new c.by([]),this.selection=new y.Ov(!0,[])}ngAfterViewInit(){this.dataSource.paginator=this.paginator}ngOnInit(){this.dataSource=new c.by(this.route.snapshot.data.notifications)}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}deleteSelected(){this.confirmDialogRef=this._matDialog.open(C.X,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete notifications?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete these notifications?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(n=>{n&&this.selection.selected.forEach((o,s)=>{this.dataSource.data.splice(s,1),this.dataSource=new c.by(this.dataSource.data),this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.notificationService.deleteNotification(o._id).subscribe()})})}checkboxLabel(n){return n?`${this.selection.isSelected(n)?"deselect":"select"} row ${n.position+1}`:(this.isAllSelected()?"deselect":"select")+" all"}deleteNotification(n,o){this.confirmDialogRef=this._matDialog.open(C.X,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Customer?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete this customer?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(s=>{s&&(this.dataSource.data.splice(o,1),this.dataSource=new c.by(this.dataSource.data),this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.notificationService.deleteNotification(n).subscribe())})}openMessaging(){this._matDialog.open(M.D,{data:{customers:this.selection.selected,isBulkMsg:!0,allCustomers:!0},width:"500px"})}message(n){}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(r.gz),t.Y36(m.T),t.Y36(A.uw))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-list-messages"]],viewQuery:function(o,s){if(1&o&&t.Gf(x.NW,5),2&o){let l;t.iGM(l=t.CRH())&&(s.paginator=l.first)}},decls:44,vars:6,consts:[["fxLayout","row","fxLayoutGap","10px","fxLayoutAlign","start center",1,"card","bg-white","w-full","mat-elevation-z2","px-2","py-2"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"text-lg","font-thin"],["class","text-lg font-thin","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",4,"ngIf"],[1,"mat-elevation-z8"],["mat-table","",1,"w-full",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","recipients"],["matColumnDef","phoneNumber"],["matColumnDef","email"],["matColumnDef","type"],["matColumnDef","title"],["matColumnDef","body"],["matColumnDef","createdAt"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["fxLayout","row","fxLayoutAlign","end center",1,"m-5"],["mat-fab","","color","primary",1,"m-10",3,"click"],[1,"mat-18"],["mat-button",""],["mat-stroked-button","","color","primary"],["mat-stroked-button","","color","warn",3,"click"],["mat-header-cell",""],[3,"checked","indeterminate","aria-label","change"],["mat-cell",""],[3,"checked","aria-label","click","change"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],[1,"material-icons-outlined"],["mat-header-row",""],["mat-row",""]],template:function(o,s){1&o&&(t.TgZ(0,"div")(1,"div",0)(2,"span",1)(3,"span"),t._uU(4,"Messages and Notifications"),t.qZA()(),t.YNc(5,S,11,1,"span",2),t.qZA(),t.TgZ(6,"div",3)(7,"table",4),t.ynx(8,5),t.YNc(9,b,2,3,"th",6),t.YNc(10,D,2,2,"td",7),t.BQk(),t.ynx(11,8),t.YNc(12,N,2,0,"th",6),t.YNc(13,w,2,1,"td",7),t.BQk(),t.ynx(14,9),t.YNc(15,U,2,0,"th",6),t.YNc(16,Y,2,1,"td",7),t.BQk(),t.ynx(17,10),t.YNc(18,k,2,0,"th",6),t.YNc(19,R,2,1,"td",7),t.BQk(),t.ynx(20,11),t.YNc(21,Q,2,0,"th",6),t.YNc(22,q,2,1,"td",7),t.BQk(),t.ynx(23,12),t.YNc(24,B,2,0,"th",6),t._UZ(25,"th"),t.YNc(26,F,2,1,"td",7),t.BQk(),t.ynx(27,13),t.YNc(28,J,2,0,"th",6),t._UZ(29,"th"),t.YNc(30,O,2,1,"td",7),t.BQk(),t.ynx(31,14),t.YNc(32,G,2,0,"th",6),t.YNc(33,I,3,4,"td",7),t.BQk(),t.ynx(34,15),t.YNc(35,$,2,0,"th",6),t.YNc(36,z,11,1,"td",7),t.BQk(),t.YNc(37,H,1,0,"tr",16),t.YNc(38,E,1,0,"tr",17),t.qZA(),t._UZ(39,"mat-paginator",18),t.qZA(),t.TgZ(40,"div",19)(41,"button",20),t.NdJ("click",function(){return s.openMessaging()}),t.TgZ(42,"mat-icon",21),t._uU(43,"add"),t.qZA()()()()),2&o&&(t.xp6(5),t.Q6J("ngIf",s.selection.selected.length),t.xp6(2),t.Q6J("dataSource",s.dataSource),t.xp6(30),t.Q6J("matHeaderRowDef",s.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",s.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(5,K)))},dependencies:[u.O5,p.lW,p.RK,p.cs,L.Hw,x.NW,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,v.oG,f.VK,f.OP,f.p6,d.xw,d.SQ,d.Wh,u.uU]})}return e})(),T=(()=>{class e{constructor(n){this.notificationService=n}resolve(){return this.notificationService.getNotifications()}static#t=this.\u0275fac=function(o){return new(o||e)(t.LFG(m.T))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),j=(()=>{class e{constructor(n){this.notificationService=n}resolve(n){const o=n.paramMap.get("id");return this.notificationService.getNotification(o)}static#t=this.\u0275fac=function(o){return new(o||e)(t.LFG(m.T))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const V=[{path:"",component:Z,children:[{path:"list",component:X,resolve:{notifications:T}}]}];let W=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[r.Bz.forChild(V),r.Bz]})}return e})();var P=a(1447),tt=a(6223),et=a(6005);let nt=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({providers:[m.T,T,j],imports:[u.ez,W,et.q,P.o9,tt.UX]})}return e})()}}]);