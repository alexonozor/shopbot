"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[2076],{1384:(p,c,r)=>{r.d(c,{W:()=>S});var o=r(9417),a=r(5351),l=r(7336),t=r(3953),s=r(5490),d=r(8498),e=r(177),i=r(6600),m=r(8834),g=r(6471),E=r(3719),M=r(9213),O=r(9631),C=r(2798),D=r(2920);function P(_,v){if(1&_&&(t.j41(0,"span",16),t.EFF(1),t.k0s()),2&_){const n=t.XpG(2);t.R7$(),t.Lme(" (+",((null==n.messagesForm.value.countries?null:n.messagesForm.value.countries.length)||0)-1," ",2===(null==n.messagesForm.value.countries?null:n.messagesForm.value.countries.length)?"other":"others",") ")}}function R(_,v){if(1&_&&(t.j41(0,"mat-option",17),t.EFF(1),t.k0s()),2&_){const n=v.$implicit;t.Y8G("value",n.country),t.R7$(),t.JRh(n.country)}}function $(_,v){if(1&_&&(t.j41(0,"mat-form-field",7)(1,"mat-label"),t.EFF(2,"countries"),t.k0s(),t.j41(3,"mat-select",13)(4,"mat-select-trigger"),t.EFF(5),t.DNE(6,P,2,2,"span",14),t.k0s(),t.DNE(7,R,2,2,"mat-option",15),t.k0s()()),2&_){const n=t.XpG();t.R7$(5),t.SpI(" ",(null==n.messagesForm.value.countries?null:n.messagesForm.value.countries[0])||""," "),t.R7$(),t.Y8G("ngIf",((null==n.messagesForm.value.countries?null:n.messagesForm.value.countries.length)||0)>1),t.R7$(),t.Y8G("ngForOf",n.deliveries)}}function I(_,v){if(1&_){const n=t.RV6();t.j41(0,"mat-chip-row",22),t.bIt("removed",function(){const u=t.eBV(n).index,f=t.XpG(2);return t.Njj(f.deleteRecipient(u))}),t.EFF(1),t.j41(2,"button",23)(3,"mat-icon"),t.EFF(4,"cancel"),t.k0s()()()}if(2&_){const n=v.$implicit;t.R7$(),t.SpI(" ",n.value.name," ")}}function F(_,v){if(1&_&&(t.j41(0,"mat-form-field",18)(1,"mat-label"),t.EFF(2,"Recipients"),t.k0s(),t.j41(3,"mat-chip-grid",19,0),t.DNE(5,I,5,1,"mat-chip-row",20),t.k0s(),t.nrm(6,"input",21,1),t.k0s()),2&_){const n=t.sdS(4),h=t.XpG();t.R7$(5),t.Y8G("ngForOf",h.recipients.controls),t.R7$(),t.Y8G("matChipInputFor",n)("matChipInputSeparatorKeyCodes",h.separatorKeysCodes)}}let S=(()=>{class _{constructor(n,h,u,f,K){this.fb=n,this.notificationsService=h,this.dialogRef=u,this.data=f,this.route=K,this.messagesForm=this.fb.group({title:["",o.k0.required],body:["",o.k0.required],recipients:this.fb.array([]),type:[""],recipientsType:[""],countries:[""]}),this.addOnBlur=!0,this.separatorKeysCodes=[l.Fm,l.KE],this.recipientsData=[],this.deliveries=f.deliveries}ngOnInit(){this.data.allCustomers||(this.data.isBulkMsg?(this.recipientsData=this.data.customers,this.recipientsData.forEach(n=>{n.phoneCredentials.length>0&&this.addRecipients(n)})):(this.recipientsData.push(this.data.customers),this.recipientsData.map(n=>this.addRecipients(n))))}get recipients(){return this.messagesForm.controls.recipients}addRecipients(n){const h=this.fb.group({name:[n.name],id:[n._id],phoneToken:[n.phoneCredentials]});this.recipients.push(h)}deleteRecipient(n){this.recipients.removeAt(n),this.recipients.length<1&&!this.data.allCustomers&&this.dialogRef.close()}submit(){this.notificationsService.createNotification(this.messagesForm.getRawValue()).subscribe(n=>{this.dialogRef.close(n)})}remove(n,h){const u=this.recipientsData.indexOf(n);u>=0&&this.recipientsData.splice(u,1)}static#t=this.\u0275fac=function(h){return new(h||_)(t.rXU(o.ok),t.rXU(s.I),t.rXU(a.CP),t.rXU(a.Vh),t.rXU(d.nX))};static#e=this.\u0275cmp=t.VBU({type:_,selectors:[["app-create-messages"]],decls:19,vars:5,consts:[["chipGrid",""],["fruitInput",""],["mat-dialog-title",""],["mat-dialog-content",""],["fxLayout","column","fxLayoutAlign","space-around stretch",3,"formGroup"],["appearance","fill",4,"ngIf"],["class","example-chip-list",4,"ngIf"],["appearance","fill"],["matInput","","cancellation","Enter Message Title","formControlName","title"],["matInput","","cancellation","Enter Message Body","rows","20","formControlName","body"],["mat-dialog-actions",""],["mat-button","",3,"mat-dialog-close"],["mat-button","","cdkFocusInitial","",3,"click","disabled"],["multiple","","formControlName","countries"],["class","example-additional-selection",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[1,"example-additional-selection"],[3,"value"],[1,"example-chip-list"],["aria-label","Message Recipients"],[3,"removed",4,"ngFor","ngForOf"],["formArrayName","recipients",3,"matChipInputFor","matChipInputSeparatorKeyCodes"],[3,"removed"],["matChipRemove",""]],template:function(h,u){1&h&&(t.j41(0,"h1",2),t.EFF(1,"Send Notification"),t.k0s(),t.j41(2,"div",3)(3,"form",4),t.DNE(4,$,8,3,"mat-form-field",5)(5,F,8,3,"mat-form-field",6),t.j41(6,"mat-form-field",7)(7,"mat-label"),t.EFF(8,"Title"),t.k0s(),t.nrm(9,"input",8),t.k0s(),t.j41(10,"mat-form-field",7)(11,"mat-label"),t.EFF(12,"body"),t.k0s(),t.nrm(13,"textarea",9),t.k0s()()(),t.j41(14,"div",10)(15,"button",11),t.EFF(16,"Cancel"),t.k0s(),t.j41(17,"button",12),t.bIt("click",function(){return u.submit()}),t.EFF(18,"Send"),t.k0s()()),2&h&&(t.R7$(3),t.Y8G("formGroup",u.messagesForm),t.R7$(),t.Y8G("ngIf",u.deliveries),t.R7$(),t.Y8G("ngIf",!u.data.allCustomers),t.R7$(10),t.Y8G("mat-dialog-close",null),t.R7$(2),t.Y8G("disabled",u.messagesForm.invalid))},dependencies:[e.Sq,e.bT,i.wT,m.$z,g.HW,g.D7,g.Zv,g.jH,E.rl,E.nJ,M.An,O.fg,C.VO,C.$2,a.tx,a.BI,a.E7,a.Yi,D.DJ,D.sA,o.qT,o.me,o.BC,o.cb,o.j4,o.JD,o.v8]})}return _})()},2390:(p,c,r)=>{r.d(c,{g:()=>s});var o=r(4412),a=r(5312),l=r(3953),t=r(1626);let s=(()=>{class d{constructor(i){this._httpClient=i,this.menus=[],this.hostServer=a.c.hostServer,this.onMenusChanged=new o.t({})}getStoreMenus(i){return this._httpClient.get(`${this.hostServer}/menus/${i}/store/categories`)}deleteMenu(i,m){return this.menus.splice(i,1),this.onMenusChanged.next(this.menus),this._httpClient.delete(`${this.hostServer}/menus/${m}`)}createMenu(i){return this._httpClient.post(`${this.hostServer}/menus`,i)}updateMenu(i,m){return this._httpClient.put(`${this.hostServer}/menus/${i}`,m)}static#t=this.\u0275fac=function(m){return new(m||d)(l.KVO(t.Qq))};static#e=this.\u0275prov=l.jDH({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})()},5220:(p,c,r)=>{r.d(c,{N:()=>l,m:()=>t});var o=r(3953),a=r(9358);let l=(()=>{class s{constructor(e){this.permissionService=e}resolve(){return this.permissionService.getPermissions()}static#t=this.\u0275fac=function(i){return new(i||s)(o.KVO(a.K))};static#e=this.\u0275prov=o.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),t=(()=>{class s{constructor(e){this.permissionService=e}resolve(e){const i=e.paramMap.get("id");return this.permissionService.getPermission(i)}static#t=this.\u0275fac=function(i){return new(i||s)(o.KVO(a.K))};static#e=this.\u0275prov=o.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})()},1081:(p,c,r)=>{r.d(c,{D:()=>t,K:()=>l});var o=r(3953),a=r(1002);let l=(()=>{class s{constructor(e){this.riderService=e}resolve(){return this.riderService.getRiders()}static#t=this.\u0275fac=function(i){return new(i||s)(o.KVO(a.D))};static#e=this.\u0275prov=o.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),t=(()=>{class s{constructor(e){this.riderService=e}resolve(e){const i=e.paramMap.get("id");return this.riderService.getRider(i)}static#t=this.\u0275fac=function(i){return new(i||s)(o.KVO(a.D))};static#e=this.\u0275prov=o.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})()},6737:(p,c,r)=>{r.d(c,{F:()=>t});var o=r(5312),a=r(3953),l=r(1626);let t=(()=>{class s{constructor(e){this._httpClient=e,this.hostServer=o.c.hostServer}createCuisine(e){return this._httpClient.post(`${this.hostServer}/cuisines`,e)}getCuisines(){return this._httpClient.get(`${this.hostServer}/cuisines`)}getCuisine(e){return this._httpClient.get(`${this.hostServer}/cuisines/${e}`)}updateCuisine(e,i){return this._httpClient.put(`${this.hostServer}/cuisines/${e}`,i)}deleteCuisine(e){return this._httpClient.delete(`${this.hostServer}/cuisines/${e}`)}static#t=this.\u0275fac=function(i){return new(i||s)(a.KVO(l.Qq))};static#e=this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac})}return s})()},1002:(p,c,r)=>{r.d(c,{D:()=>t});var o=r(5312),a=r(3953),l=r(1626);let t=(()=>{class s{constructor(e){this._httpClient=e,this.hostServer=o.c.hostServer}getRiders(){return this._httpClient.get(`${this.hostServer}/riders`)}getRider(e){return this._httpClient.get(`${this.hostServer}/riders/${e}`)}deleteRider(e){return this._httpClient.delete(`${this.hostServer}/riders/${e}`)}updateRider(e,i){return this._httpClient.put(`${this.hostServer}/riders/${e}`,i)}createRider(e){return this._httpClient.post(`${this.hostServer}/riders`,e)}static#t=this.\u0275fac=function(i){return new(i||s)(a.KVO(l.Qq))};static#e=this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac})}return s})()},9358:(p,c,r)=>{r.d(c,{K:()=>t});var o=r(5312),a=r(3953),l=r(1626);let t=(()=>{class s{constructor(e){this._httpClient=e,this.hostServer=o.c.hostServer}createPermission(e){return this._httpClient.post(`${this.hostServer}/roles`,e)}getPermissions(){return this._httpClient.get(`${this.hostServer}/roles`)}getPermission(e){return this._httpClient.get(`${this.hostServer}/roles/${e}`)}updatePermission(e,i){return this._httpClient.put(`${this.hostServer}/roles/${e}`,i)}deletePermission(e){return this._httpClient.delete(`${this.hostServer}/roles/${e}`)}static#t=this.\u0275fac=function(i){return new(i||s)(a.KVO(l.Qq))};static#e=this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac})}return s})()},2382:(p,c,r)=>{r.d(c,{g:()=>t});var o=r(5312),a=r(3953),l=r(1626);let t=(()=>{class s{constructor(e){this._httpClient=e,this.hostServer=o.c.hostServer}getUsers(e){const m=JSON.stringify(e);return this._httpClient.get(`${this.hostServer}/users?query=${m}`)}getUser(e){return this._httpClient.get(`${this.hostServer}/users/${e}`)}countUsers(){return this._httpClient.get(`${this.hostServer}/users/count/all`)}deleteUser(e){return this._httpClient.delete(`${this.hostServer}/users/${e}`)}updateUser(e,i){return this._httpClient.put(`${this.hostServer}/users/${e}`,i)}getUserTransactions(e){return this._httpClient.get(`${this.hostServer}/wallet-transactions/${e}/transactions`)}getUserReferrals(e){return this._httpClient.get(`${this.hostServer}/referrals/${e}/transactions`)}getUserReferralStats(e){return this._httpClient.get(`${this.hostServer}/referrals/${e}/stats`)}getUserAddresses(e){return this._httpClient.get(`${this.hostServer}/addresses/${e}/user`)}static#t=this.\u0275fac=function(i){return new(i||s)(a.KVO(l.Qq))};static#e=this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac})}return s})()}}]);