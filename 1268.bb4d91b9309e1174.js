"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[1268],{1268:(Q,O,i)=>{i.r(O),i.d(O,{STORE_CATEGORY_DETAILS_ROUTE:()=>z,categoriesResolver:()=>I,productResolver:()=>w});var t=i(177),u=i(6924),f=i(8498),R=i(3457),N=i(1269),e=i(3953),S=i(7506),v=i(5351),A=i(9735),j=i(8834),y=i(9213),k=i(9115),P=i(2920);const T=()=>["../new"],$=d=>({pageType:"new",storeId:d}),F=d=>["../",d,"edit"],D=d=>({storeId:d});function X(d,g){if(1&d){const c=e.RV6();e.j41(0,"tr",13)(1,"td",14)(2,"div",9),e.nrm(3,"input",15),e.j41(4,"label",16),e.EFF(5,"checkbox"),e.k0s()()(),e.j41(6,"th",17),e.nrm(7,"img",18),e.j41(8,"div",19)(9,"div",20),e.EFF(10),e.k0s()()(),e.j41(11,"td",21),e.EFF(12),e.k0s(),e.j41(13,"td",21),e.EFF(14),e.k0s(),e.j41(15,"td",21),e.EFF(16),e.nI1(17,"currency"),e.k0s(),e.j41(18,"td",21)(19,"button",22),e.bIt("click",function(m){return e.eBV(c),e.Njj(m.stopPropagation())}),e.j41(20,"mat-icon"),e.EFF(21,"more_vert"),e.k0s()(),e.j41(22,"mat-menu",null,0)(24,"button",23),e.bIt("click",function(){const m=e.eBV(c),b=m.$implicit,G=m.$index,J=e.XpG(3);return e.Njj(J.delete(G,b._id))}),e.j41(25,"mat-icon"),e.EFF(26,"delete"),e.k0s(),e.EFF(27," Delete Products"),e.k0s(),e.j41(28,"button",23),e.bIt("click",function(){const m=e.eBV(c).$implicit,b=e.XpG(3);return e.Njj(b.removeFromCategory(m))}),e.j41(29,"mat-icon"),e.EFF(30,"close"),e.k0s(),e.EFF(31,"Remove From Category"),e.k0s(),e.j41(32,"button",24)(33,"mat-icon"),e.EFF(34,"edit"),e.k0s(),e.EFF(35," Edit"),e.k0s()()()()}if(2&d){const c=g.$implicit,p=e.sdS(23),m=e.XpG(3);e.R7$(7),e.Y8G("src",c.photos[0],e.B4B)("alt",c.name),e.R7$(3),e.JRh(c.name),e.R7$(2),e.SpI(" ",c.quantity," "),e.R7$(2),e.SpI(" ",c.menu.name," "),e.R7$(2),e.SpI(" ",e.i5U(17,9,c.price,m.store.currency)," "),e.R7$(3),e.Y8G("matMenuTriggerFor",p),e.R7$(13),e.Y8G("routerLink",e.eq3(12,F,c._id))("queryParams",e.eq3(14,D,m.store._id))}}function _(d,g){if(1&d&&(e.j41(0,"div",2)(1,"div",4)(2,"h2"),e.EFF(3),e.k0s(),e.j41(4,"div")(5,"button",5),e.EFF(6,"Add Products"),e.k0s()()(),e.j41(7,"table",6)(8,"thead",7)(9,"tr")(10,"th",8)(11,"div",9),e.nrm(12,"input",10),e.j41(13,"label",11),e.EFF(14,"checkbox"),e.k0s()()(),e.j41(15,"th",12),e.EFF(16," Product name "),e.k0s(),e.j41(17,"th",12),e.EFF(18," Quantity "),e.k0s(),e.j41(19,"th",12),e.EFF(20," Category "),e.k0s(),e.j41(21,"th",12),e.EFF(22," Price "),e.k0s(),e.j41(23,"th",12),e.EFF(24," Action "),e.k0s()()(),e.j41(25,"tbody"),e.Z7z(26,X,36,16,"tr",13,e.Vm6),e.k0s()()()),2&d){const c=e.XpG(),p=e.XpG();e.R7$(3),e.SpI("",c[0].menu.name," Products"),e.R7$(2),e.Y8G("routerLink",e.lJ4(3,T))("queryParams",e.eq3(4,$,p.store._id)),e.R7$(21),e.Dyx(c)}}function L(d,g){if(1&d&&(e.j41(0,"section",3)(1,"div",25),e.nrm(2,"img",26),e.j41(3,"div",27)(4,"h2",28),e.EFF(5,"It\u2019s a bit empty here"),e.k0s(),e.j41(6,"p",29),e.EFF(7,"Make sure to customize your product."),e.k0s(),e.j41(8,"a",30),e.EFF(9,"Add First Product"),e.k0s()()()()),2&d){const c=e.XpG(2);e.R7$(8),e.Y8G("routerLink",e.lJ4(2,T))("queryParams",e.eq3(3,$,c.store._id))}}function E(d,g){1&d&&e.DNE(0,_,28,6,"div",2)(1,L,10,5,"section",3),2&d&&e.vxM(g.length>0?0:1)}let C=(()=>{class d{constructor(c,p,m,b,G){this.productService=c,this._matDialog=p,this.router=m,this.route=b,this.settingService=G,this.menus=[],this.store=this.settingService.findDataInRoute(this.route.snapshot,"store"),this.categoryId=this.route.parent?.snapshot.params.categoryId}ngOnInit(){this.loadProducts()}loadProducts(){this.products$=this.productService.getCategoryProducts(this.categoryId)}delete(c,p){this.confirmDialogRef=this._matDialog.open(N.Y,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Menu?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete this menu?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(m=>{m&&this.productService.deleteProduct(c,p).subscribe(()=>{this.loadProducts()}),this.confirmDialogRef=null})}removeFromCategory(c){this.productService.updateProduct(c._id,{menu:null}).subscribe()}viewMenu(c){this.router.navigate(["dashboard","stores",this.store._id,"details",c,"menu"])}goBack(){}static#t=this.\u0275fac=function(p){return new(p||d)(e.rXU(S.g),e.rXU(v.bZ),e.rXU(f.Ix),e.rXU(f.nX),e.rXU(A.h))};static#e=this.\u0275cmp=e.VBU({type:d,selectors:[["app-store-category-products"]],standalone:!0,features:[e.aNF],decls:3,vars:3,consts:[["menu2","matMenu"],[2,"height","100vh","position","relative"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],[1,"py-4","bg-neutral-50","overflow-hidden"],["fxLayout","row","fxLayoutAlign","space-between start",1,"p-3"],["mat-raised-button","","color","primary",3,"routerLink","queryParams"],[1,"w-full","text-sm","text-left","rtl:text-right","text-gray-500"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50"],["scope","col",1,"p-4"],[1,"flex","items-center"],["id","checkbox-all-search","type","checkbox",1,"w-4","h-4","text-blue-600","bg-gray-100","border-gray-300","rounded","focus:ring-blue-500"],["for","checkbox-all-search",1,"sr-only"],["scope","col",1,"px-6","py-3"],[1,"bg-white","border-b"],[1,"w-4","p-4"],["id","checkbox-table-search-1","type","checkbox",1,"w-4","h-4","text-blue-600","bg-gray-100","border-gray-300","rounded","focus:ring-blue-500"],["for","checkbox-table-search-1",1,"sr-only"],["scope","row",1,"flex","items-center","px-6","py-4","text-gray-900","whitespace-nowrap"],[1,"w-10","h-10","rounded-full",3,"src","alt"],[1,"ps-3"],[1,"text-base","font-semibold"],[1,"px-6","py-4"],["mat-icon-button","",3,"click","matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"routerLink","queryParams"],[1,"container","px-4","mx-auto"],["src","dashy-assets/images/empty.png","alt","",1,"mx-auto"],[1,"max-w-md","mx-auto","text-center"],[1,"font-heading","mb-3","text-2xl","font-semibold"],[1,"mb-7","text-neutral-500"],[1,"inline-flex","px-6","py-2.5","text-sm","bg-primary-700","text-neutral-50","font-medium","rounded-lg","transition","duration-300",3,"routerLink","queryParams"]],template:function(p,m){if(1&p&&(e.j41(0,"div",1),e.DNE(1,E,2,1),e.nI1(2,"async"),e.k0s()),2&p){let b;e.R7$(),e.vxM((b=e.bMT(2,1,m.products$))?1:-1,b)}},dependencies:[t.MD,t.Jj,t.oe,R.G,j.$z,j.iY,y.An,k.kk,k.fb,k.Cp,u.YF,P.DJ,P.sA,f.iI,f.Wk],styles:["[_nghost-%COMP%]{display:block}"]})}return d})(),U=(()=>{class d{constructor(c,p){this.router=c,this.route=p,this.location=(0,e.WQX)(t.aZ)}back(){this.location.back()}static#t=this.\u0275fac=function(p){return new(p||d)(e.rXU(f.Ix),e.rXU(f.nX))};static#e=this.\u0275cmp=e.VBU({type:d,selectors:[["app-store-category-details"]],standalone:!0,features:[e.aNF],decls:8,vars:0,consts:[["aria-label","Breadcrumb",1,"flex","my-5"],[1,"inline-flex","items-center","space-x-1","md:space-x-2","rtl:space-x-reverse"],[1,"inline-flex","items-center"],[1,"inline-flex","items-center","text-sm","font-medium","text-gray-700","hover:text-blue-600",3,"click"]],template:function(p,m){1&p&&(e.j41(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e.bIt("click",function(){return m.back()}),e.j41(4,"mat-icon"),e.EFF(5,"arrow_back"),e.k0s(),e.EFF(6," back "),e.k0s()()()(),e.nrm(7,"router-outlet"))},dependencies:[t.MD,R.G,y.An,u.YF,f.iI,f.n3],styles:["[_nghost-%COMP%]{display:block}"]})}return d})();var M=i(9538),Y=i(5085),B=i(2390);const w=(d,g)=>{const c=d.paramMap.get("productId");return(0,e.WQX)(Y.b).getProductSingle(c)},I=(d,g)=>{const c=V(d);return(0,e.WQX)(B.g).getStoreMenus(c)},V=d=>{let g=d;for(;g;){const c=g.paramMap.get("id");if(c)return c;g=g.parent}return null},z=[{path:"products",component:U,children:[{path:"list",component:C},{path:"new",component:M.a,resolve:{storeCategories:I}},{path:":productId/edit",component:M.a,resolve:{product:w,storeCategories:I}},{path:"",pathMatch:"full",redirectTo:"list"}]},{path:"**",pathMatch:"full",redirectTo:"products"}]},9538:(Q,O,i)=>{i.d(O,{a:()=>nt});var t=i(3953),u=i(9417),f=i(980),R=i(7468),N=i(1397);class e{constructor(r){this._id=(r=r||{})._id,this.name=r.name||"",this.menu=r.menu,this.store=r.store,this.handle=r.handle,this.description=r.description||"",this.categories=r.categories||{},this.tags=r.tags||[],this.photos=r.photos||[],this.priceTaxExcl=r.priceTaxExcl||0,this.priceTaxIncl=r.priceTaxIncl||0,this.taxRate=r.taxRate||0,this.comparedPrice=r.comparedPrice||0,this.price=r.price||0,this.quantity=r.quantity||0,this.sku=r.sku||0,this.width=r.width||0,this.height=r.height||0,this.depth=r.depth||0,this.weight=r.weight||0,this.extraShippingFee=r.extraShippingFee||0,this.active=r.active||!0,this.options=r.options||[]}}var S=i(5085),v=i(177),A=i(1626),j=i(9297),y=i(8498),k=i(6924),P=i(3457),T=i(2390),$=i(9735),F=i(5351),D=i(3617),X=i(7506),_=i(8834),L=i(7575),E=i(3902),C=i(2920);function U(n,r){if(1&n&&(t.j41(0,"mat-list-option",10),t.EFF(1),t.k0s()),2&n){const o=r.$implicit,s=t.XpG(3);t.Y8G("value",o)("selected",s.isSelected(o)),t.R7$(),t.JRh(o.name)}}function M(n,r){if(1&n){const o=t.RV6();t.j41(0,"mat-selection-list",9,0),t.bIt("selectionChange",function(a){t.eBV(o);const l=t.XpG(2);return t.Njj(l.onSelection(a))}),t.Z7z(2,U,2,3,"mat-list-option",10,t.fX1),t.k0s()}if(2&n){const o=t.XpG();t.R7$(2),t.Dyx(o)}}function Y(n,r){if(1&n){const o=t.RV6();t.j41(0,"section",8)(1,"div",11),t.nrm(2,"img",12),t.j41(3,"div",13)(4,"h2",14),t.EFF(5,"It\u2019s a bit empty here"),t.k0s(),t.j41(6,"p",15),t.EFF(7,"Group options are ways to customize your product in variants"),t.k0s(),t.j41(8,"a",16),t.bIt("click",function(){t.eBV(o);const a=t.XpG(2);return t.Njj(a.addGroupOption())}),t.EFF(9,"Add First Group Option"),t.k0s()()()()}}function B(n,r){1&n&&t.DNE(0,M,4,0,"mat-selection-list")(1,Y,10,0,"section",8),2&n&&t.vxM(r.length>0?0:1)}function w(n,r){1&n&&t.nrm(0,"mat-progress-bar",4)}let I=(()=>{class n{constructor(o,s,a,l,x,h,Z){this.productService=o,this._matDialog=s,this.router=a,this.route=l,this._location=x,this.dialogRef=h,this.data=Z,this.menus=[],this.options=[],this.isLoading=!1,this.isSubmitting=!1}ngOnInit(){this.loadProducts()}loadProducts(){this.isLoading=!0,this.groupOptions$=this.productService.getStoreGroupOption(this.data.storeId).pipe((0,f.j)(()=>this.isLoading=!1))}updateEnabled(o,s){this.productService.updateStoreGroupOption({enabled:o.checked},s).subscribe()}saveGroupOptions(){this.dialogRef.close(this.options)}onSelection(o){this.options=o.source._value}isSelected(o){return this.data.selectedOptions.some(s=>s._id===o._id)}addGroupOption(){this._matDialog.open(D.P,{disableClose:!1,data:{storeId:this.data.storeId,pageType:"new"}}).afterClosed().subscribe(s=>{s&&this.loadProducts()})}createGroupOption(){this._matDialog.open(D.P,{disableClose:!1,data:{storeId:this.data.storeId,pageType:"new"}}).afterClosed().subscribe(s=>{s&&this.loadProducts()})}goBack(){this._location.back()}static#t=this.\u0275fac=function(s){return new(s||n)(t.rXU(X.g),t.rXU(F.bZ),t.rXU(y.Ix),t.rXU(y.nX),t.rXU(v.aZ),t.rXU(F.CP),t.rXU(F.Vh))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-store-group-options-select"]],standalone:!0,features:[t.Jv_([S.b]),t.aNF],decls:15,vars:3,consts:[["option",""],["fxLayout","row","fxLayoutAlign","space-between start",1,"p-4","bg-white"],["mat-stroked-button","","color","primary","cdkFocusInitial","",3,"click"],[1,"w-full"],["mode","indeterminate"],["align","center"],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"click"],[1,"py-4","bg-neutral-50","overflow-hidden"],[3,"selectionChange"],[3,"value","selected"],[1,"container","px-4","mx-auto"],["src","dashy-assets/images/empty.png","alt","",1,"mx-auto"],[1,"max-w-md","mx-auto","text-center"],[1,"font-heading","mb-3","text-2xl","font-semibold"],[1,"mb-7","text-neutral-500"],[1,"inline-flex","px-6","py-2.5","cursor-pointer","text-sm","bg-primary-700","text-neutral-50","font-medium","rounded-lg","transition","duration-300",3,"click"]],template:function(s,a){if(1&s&&(t.j41(0,"div",1)(1,"h2"),t.EFF(2,"Add Group Options"),t.k0s(),t.j41(3,"div")(4,"button",2),t.bIt("click",function(){return a.createGroupOption()}),t.EFF(5,"Add"),t.k0s()()(),t.j41(6,"mat-dialog-content",3),t.DNE(7,B,2,1),t.nI1(8,"async"),t.DNE(9,w,1,0,"mat-progress-bar",4),t.k0s(),t.j41(10,"mat-dialog-actions",5)(11,"button",6),t.EFF(12,"Cancel"),t.k0s(),t.j41(13,"button",7),t.bIt("click",function(){return a.saveGroupOptions()}),t.EFF(14,"Save"),t.k0s()()),2&s){let l;t.R7$(7),t.vxM((l=t.bMT(8,1,a.groupOptions$))?7:9,l)}},dependencies:[v.MD,v.Jj,P.G,_.$z,L.HM,F.tx,F.E7,F.Yi,E.p6,E.oh,k.YF,C.DJ,C.sA,u.YN],styles:[".example-list[_ngcontent-%COMP%]{width:100%;border:solid 1px #ccc;min-height:60px;display:block;background:#fff;border-radius:4px;overflow:hidden}.example-box[_ngcontent-%COMP%]{padding:20px 10px;border-bottom:solid 1px #ccc;color:#000000de;display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:move;background:#fff;font-size:14px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.example-custom-placeholder[_ngcontent-%COMP%]{background:#ccc;border:dotted 3px #999;min-height:60px;transition:transform .25s cubic-bezier(0,0,.2,1)}"]})}return n})();var V=i(5416),z=i(6600),d=i(3719),g=i(9213),c=i(9631),p=i(2798),m=i(6850),b=i(1997);const G=()=>({name:"Active",value:!0}),J=()=>({name:"Draft",value:!1}),W=(n,r)=>[n,r];function H(n,r){if(1&n&&(t.j41(0,"mat-option",33),t.EFF(1),t.k0s()),2&n){const o=r.$implicit;t.Y8G("value",o._id),t.R7$(),t.SpI(" ",o.name," ")}}function K(n,r){if(1&n&&(t.j41(0,"mat-option",33),t.EFF(1),t.k0s()),2&n){const o=r.$implicit;t.Y8G("value",o.value),t.R7$(),t.SpI(" ",o.name," ")}}function q(n,r){1&n&&(t.j41(0,"div",34),t.nrm(1,"img",35),t.k0s()),2&n&&(t.R7$(),t.Y8G("src","https://dashboard.heypay.xyz/images/image_placeholder.png",t.B4B))}function tt(n,r){if(1&n){const o=t.RV6();t.j41(0,"div",38)(1,"div",39)(2,"button",40),t.bIt("click",function(){t.eBV(o);const a=t.XpG().index,l=t.XpG();return t.Njj(l.deleteImages(a))}),t.j41(3,"mat-icon",41),t.EFF(4,"delete"),t.k0s()()()()}if(2&n){const o=t.XpG().$implicit;t.xc7("background-image","url("+(""==o?"https://dashboard.heypay.xyz/images/store_image_placeholder.png":o)+")")}}function et(n,r){if(1&n&&(t.j41(0,"div",36),t.DNE(1,tt,5,2,"div",37),t.k0s()),2&n){const o=t.XpG();t.R7$(),t.Y8G("ngIf",o.product.photos.length>0)}}function ot(n,r){if(1&n&&t.nrm(0,"mat-progress-bar",42),2&n){const o=t.XpG();t.Y8G("value",o.uploadProgress)}}function it(n,r){if(1&n){const o=t.RV6();t.j41(0,"tr",32)(1,"td",43),t.EFF(2),t.k0s(),t.j41(3,"td",44),t.EFF(4),t.k0s(),t.j41(5,"td",44),t.EFF(6),t.k0s(),t.j41(7,"td",44),t.EFF(8),t.k0s(),t.j41(9,"td",44),t.EFF(10),t.k0s(),t.j41(11,"td",44)(12,"a",45),t.bIt("click",function(){const a=t.eBV(o),l=a.$implicit,x=a.$index,h=t.XpG();return t.Njj(h.removeOption(x,l._id))}),t.EFF(13,"Remove"),t.k0s()()()}if(2&n){const o=r.$implicit;t.R7$(2),t.SpI(" ",o.name," "),t.R7$(2),t.SpI(" ",o.options.length," "),t.R7$(2),t.SpI(" ",o.atLeast," "),t.R7$(2),t.SpI(" ",o.atMost," "),t.R7$(2),t.SpI(" ",o.enabled," ")}}let nt=(()=>{class n{constructor(o,s,a,l,x,h,Z,rt){if(this.productService=o,this._formBuilder=s,this._location=a,this._matSnackBar=l,this.menusService=x,this.route=h,this._matDialog=Z,this.productsService=rt,this.isLoading=!1,this.categories=[],this.settingService=(0,t.WQX)($.h),this.isSaved=!1,this.pageType=this.route.snapshot.queryParams.pageType,"new"==this.pageType)this.isSaved=!1,this.product=new e,this.product.store=this.settingService.getParametersFromUrl(this.route.snapshot,"id");else{this.isSaved=!0;const at=this.settingService.findDataInRoute(this.route.snapshot,"product");this.product=new e(at),this.product.store=this.product.store||this.settingService.getParametersFromUrl(this.route.snapshot,"id")}}ngOnInit(){this.categories=this.settingService.findDataInRoute(this.route.snapshot,"storeCategories"),this.productForm=this.createProductForm()}createProductForm(){return this._formBuilder.group({_id:[this.product._id],name:[this.product.name,u.k0.required],menu:[this.product.menu,u.k0.required],store:[this.product.store,u.k0.required],description:[this.product.description,u.k0.required],photos:[this.product.photos],quantity:[this.product.quantity],price:[this.product.price,u.k0.required],active:[this.product.active]})}onFileSelected(o){const s=o.target.files;for(var a=0;a<o.target.files.length;a++)if(s){this.fileName=s.name;const l=new FormData;l.append("files",o.target.files[a]);const x=this.productService.uploadPhoto(l,this.product._id).pipe((0,f.j)(()=>this.reset()));this.uploadSub=x.subscribe(h=>{h.type==A.hv.UploadProgress?this.uploadProgress=Math.round(h.loaded/h.total*100):h.hasOwnProperty("body")&&this.product.photos.push(h.body.photos[0])})}}addOptions(){this._matDialog.open(I,{disableClose:!1,data:{storeId:this.product.store,selectedOptions:this.product.options},width:"400px"}).afterClosed().subscribe(s=>{s.length>0&&(this.product.options=s)})}updateOptions(o,s){const a=o.map(({_id:l})=>this.productsService.addProductIdToOptionGroup(l,{productId:s}));(0,R.p)(a).subscribe(l=>{})}saveProduct(){if(this.productForm.invalid)return;this.isLoading=!0;const o=this.productForm.getRawValue();o.options=this.product.options,"new"==this.pageType?this.productService.addProduct(o).pipe((0,N.Z)(s=>(this.product._id=s._id,this.updateOptions(this.product.options,this.product._id),this.menusService.addFoodToMenu(s._id,this.product.menu)))).subscribe(s=>{this.isLoading=!1,this.isSaved=!0,this._matSnackBar.open("Product saved","OK",{verticalPosition:"top",duration:2e3})}):this.productService.saveProduct(o,this.product._id).subscribe(s=>{this.isLoading=!1,this.updateOptions(this.product.options,this.product._id),this._matSnackBar.open("Product saved","OK",{verticalPosition:"top",duration:2e3})})}deleteImages(o){this.product.photos.splice(o,1)}reset(){this.uploadProgress=null,this.uploadSub=null}removeOption(o,s){this.product.options.splice(o,1),this.productsService.removeProductIdToOptionGroup(s,this.product._id).subscribe(a=>{console.log(a)})}static#t=this.\u0275fac=function(s){return new(s||n)(t.rXU(S.b),t.rXU(u.ok),t.rXU(v.aZ),t.rXU(V.UG),t.rXU(j.$),t.rXU(y.nX),t.rXU(F.bZ),t.rXU(X.g))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-store-product-create"]],standalone:!0,features:[t.Jv_([S.b,j.$,T.g]),t.aNF],decls:81,vars:16,consts:[["fileUpload",""],["fxLayout","row","fxLayoutAlign","space-between start"],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"click","disabled"],[1,"w-full"],["name","productForm","fxLayout","column",1,"product",3,"formGroup"],[1,"w-100"],["label","Basic"],["fxLayout","column","fxLayoutAlign","space-around stretch",1,"tab-content"],["appearance","fill","floatLabel","always",1,"w-100"],["formControlName","menu","required",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","cancellation","Product Name","name","name","formControlName","name","required",""],["matInput","","cancellation","Product Description","name","description","formControlName","description","rows","5"],["matInput","","cancellation","Price","name","Price","formControlName","price","type","number"],["matPrefix",""],["matInput","","cancellation","Quantity","name","quantity","formControlName","quantity","type","number"],["formControlName","active","required",""],["label","Photos",3,"disabled"],["fusePerfectScrollbar","",1,"tab-content"],["fxLayout","row wrap","fxLayoutAlign","start start"],["class","product-image","fxLayout","row","fxLayoutAlign","center center",4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","start start","fxLayoutGap","10px",4,"ngFor","ngForOf"],["fxLayout","column","fxLayoutAlign","space-around center"],["class","progress-bar","mode","determinate",3,"value",4,"ngIf"],["type","file","multiple","",1,"file-input",3,"change"],["mat-stroked-button","","color","primary",3,"click"],["label","Group Options",3,"disabled"],[1,"tab-content","p-24"],["mat-subheader",""],[1,"w-full","text-sm","text-left","rtl:text-right","text-gray-500"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50"],["scope","col",1,"px-6","py-3"],[1,"bg-white","border-b"],[3,"value"],["fxLayout","row","fxLayoutAlign","center center",1,"product-image"],[1,"media",3,"src"],["fxLayout","row wrap","fxLayoutAlign","start start","fxLayoutGap","10px"],["style","width: 150px; height: 150px; background-position: center; background-size: contain;","fxLayout","row","fxLayoutAlign","center center",3,"background-image",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center",2,"width","150px","height","150px","background-position","center","background-size","contain"],[1,"control-logo"],["mat-icon-button","","color","warn",1,"bg-white",3,"click"],[1,"mat-18"],["mode","determinate",1,"progress-bar",3,"value"],[1,"px-6","py-4","text-base","font-semibold"],[1,"px-6","py-4"],[1,"font-medium","cursor-pointer","text-red-600","hover:underline",3,"click"]],template:function(s,a){if(1&s){const l=t.RV6();t.j41(0,"div",1)(1,"h2"),t.EFF(2),t.k0s(),t.j41(3,"button",2),t.bIt("click",function(){return t.eBV(l),t.Njj(a.saveProduct())}),t.EFF(4),t.k0s()(),t.j41(5,"div",3)(6,"form",4)(7,"mat-tab-group",5)(8,"mat-tab",6)(9,"div",7)(10,"mat-form-field",8)(11,"mat-label"),t.EFF(12,"Product Status"),t.k0s(),t.j41(13,"mat-select",9),t.DNE(14,H,2,2,"mat-option",10),t.k0s()(),t.j41(15,"mat-form-field",8)(16,"mat-label"),t.EFF(17,"Product Name"),t.k0s(),t.nrm(18,"input",11),t.k0s(),t.j41(19,"mat-form-field",8)(20,"mat-label"),t.EFF(21,"Product Description"),t.k0s(),t.nrm(22,"textarea",12),t.k0s(),t.j41(23,"mat-form-field",8)(24,"mat-label"),t.EFF(25,"Price"),t.k0s(),t.nrm(26,"input",13),t.j41(27,"span",14),t.EFF(28,"$\xa0"),t.k0s()(),t.j41(29,"mat-form-field",8)(30,"mat-label"),t.EFF(31,"Quantity"),t.k0s(),t.nrm(32,"input",15),t.j41(33,"span",14),t.EFF(34,"$\xa0"),t.k0s()(),t.j41(35,"mat-form-field",8)(36,"mat-label"),t.EFF(37,"Product Status"),t.k0s(),t.j41(38,"mat-select",16),t.DNE(39,K,2,2,"mat-option",10),t.k0s()()()(),t.j41(40,"mat-tab",17)(41,"div",18)(42,"div",19),t.DNE(43,q,2,1,"div",20)(44,et,2,1,"div",21),t.k0s(),t.j41(45,"div",22),t.DNE(46,ot,1,1,"mat-progress-bar",23),t.j41(47,"input",24,0),t.bIt("change",function(h){return t.eBV(l),t.Njj(a.onFileSelected(h))}),t.k0s(),t.j41(49,"button",25),t.bIt("click",function(){t.eBV(l);const h=t.sdS(48);return t.Njj(h.click())}),t.j41(50,"mat-icon"),t.EFF(51,"upload_cloud"),t.k0s(),t.EFF(52," Add Photos "),t.k0s()()()(),t.j41(53,"mat-tab",26)(54,"div",27)(55,"div",1)(56,"div",28),t.EFF(57,"Group Options"),t.k0s(),t.j41(58,"button",25),t.bIt("click",function(){return t.eBV(l),t.Njj(a.addOptions())}),t.j41(59,"mat-icon"),t.EFF(60,"add"),t.k0s(),t.EFF(61," Add Group Options "),t.k0s()(),t.nrm(62,"mat-divider"),t.j41(63,"table",29)(64,"thead",30)(65,"tr")(66,"th",31),t.EFF(67," Name "),t.k0s(),t.j41(68,"th",31),t.EFF(69," Options "),t.k0s(),t.j41(70,"th",31),t.EFF(71," At Least "),t.k0s(),t.j41(72,"th",31),t.EFF(73," At Most "),t.k0s(),t.j41(74,"th",31),t.EFF(75," In stock "),t.k0s(),t.j41(76,"th",31),t.EFF(77," Action "),t.k0s()()(),t.j41(78,"tbody"),t.Z7z(79,it,14,5,"tr",32,t.Vm6),t.k0s()()()()()()()}2&s&&(t.R7$(2),t.SpI("","new"==a.pageType?"New":"Edit "+a.product.name," Product"),t.R7$(),t.Y8G("disabled",a.productForm.invalid),t.R7$(),t.JRh(a.isLoading?"Checking..":"Save"),t.R7$(2),t.Y8G("formGroup",a.productForm),t.R7$(8),t.Y8G("ngForOf",a.categories),t.R7$(25),t.Y8G("ngForOf",t.l_i(13,W,t.lJ4(11,G),t.lJ4(12,J))),t.R7$(),t.Y8G("disabled",!a.isSaved),t.R7$(3),t.Y8G("ngIf",0===a.product.photos.length),t.R7$(),t.Y8G("ngForOf",a.product.photos),t.R7$(2),t.Y8G("ngIf",a.uploadProgress),t.R7$(7),t.Y8G("disabled",!a.isSaved),t.R7$(26),t.Dyx(a.product.options))},dependencies:[v.MD,v.Sq,v.bT,P.G,z.wT,_.$z,_.iY,d.rl,d.nJ,d.JW,g.An,c.fg,p.VO,m.mq,m.T8,L.HM,E.EI,b.q,k.YF,C.DJ,C.BO,C.sA,y.iI,u.X1,u.qT,u.me,u.Q0,u.BC,u.cb,u.YS,u.j4,u.JD,u.YN],styles:[".file-input[_ngcontent-%COMP%]{display:none}.product-image[_ngcontent-%COMP%]{overflow:hidden;width:128px;height:128px;margin-right:16px;margin-bottom:16px;border-radius:4px}.product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:auto;max-width:none}.tab-content[_ngcontent-%COMP%]{padding:5px}.mat-dialog-content[_ngcontent-%COMP%]{margin:0!important;padding:0!important}"]})}return n})()}}]);