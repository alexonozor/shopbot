"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[710],{5710:(D,C,n)=>{n.r(C),n.d(C,{CategoriesModule:()=>ue});var m=n(6814),d=n(1896),e=n(5879);let y=(()=>{class o{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-categories"]],decls:1,vars:0,template:function(i,a){1&i&&e._UZ(0,"router-outlet")},dependencies:[d.lC]})}return o})();var u=n(8337),S=n(3365),r=n(5313),p=n(6567),v=n(1440),A=n(7700),f=n(2296),I=n(617),M=n(5986),T=n(7988),h=n(3814);function Y(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"span",1)(1,"button",18),e._uU(2),e.qZA(),e.TgZ(3,"button",19),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.deleteSelected())}),e.TgZ(4,"mat-icon",17),e._uU(5,"delete"),e.qZA(),e._uU(6," Delete Selected Categories "),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(2),e.hij("",t.selection.selected.length," Selected")}}function R(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"th",20)(1,"mat-checkbox",21),e.NdJ("change",function(a){e.CHM(t);const c=e.oxw();return e.KtG(a?c.toggleAllRows():null)}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("checked",t.selection.hasValue()&&t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected())("aria-label",t.checkboxLabel())}}function O(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"td",22)(1,"mat-checkbox",23),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const g=e.CHM(t).$implicit,b=e.oxw();return e.KtG(a?b.selection.toggle(g):null)}),e.qZA()()}if(2&o){const t=l.$implicit,i=e.oxw();e.xp6(1),e.Q6J("checked",i.selection.isSelected(t))("aria-label",i.checkboxLabel(t))}}function k(o,l){1&o&&(e.TgZ(0,"th",20),e._uU(1,"Name"),e.qZA())}function Q(o,l){if(1&o&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.xp6(1),e.Oqu(t.name)}}function E(o,l){1&o&&(e.TgZ(0,"th",20),e._uU(1,"Status"),e.qZA())}function q(o,l){if(1&o&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.xp6(1),e.Oqu(t.status)}}function G(o,l){1&o&&(e.TgZ(0,"th",20),e._uU(1,"Created At"),e.qZA())}function B(o,l){if(1&o&&(e.TgZ(0,"td",22),e._uU(1),e.ALo(2,"date"),e.qZA()),2&o){const t=l.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.createdAt,"short"))}}function V(o,l){1&o&&(e.TgZ(0,"th",20),e._uU(1,"Actions"),e.qZA())}const $=function(o){return["../",o,"details"]};function z(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"td",22)(1,"button",24)(2,"mat-icon"),e._uU(3,"more_vert"),e.qZA()(),e.TgZ(4,"mat-menu",null,25)(6,"button",26),e.NdJ("click",function(){const a=e.CHM(t),c=a.$implicit,g=a.index,b=e.oxw();return e.KtG(b.deleteCategories(c._id,g))}),e.TgZ(7,"mat-icon",27),e._uU(8,"delete"),e.qZA(),e.TgZ(9,"span"),e._uU(10,"Delete"),e.qZA()(),e.TgZ(11,"button",28)(12,"mat-icon",27),e._uU(13,"edit"),e.qZA(),e.TgZ(14,"span"),e._uU(15,"Edit"),e.qZA()()()()}if(2&o){const t=l.$implicit,i=e.MAs(5);e.xp6(1),e.Q6J("matMenuTriggerFor",i),e.xp6(10),e.Q6J("routerLink",e.VKq(2,$,t._id))}}function K(o,l){1&o&&e._UZ(0,"tr",29)}function W(o,l){1&o&&e._UZ(0,"tr",30)}const H=function(){return[15,30,60]},P=function(){return["../","new"]};let X=(()=>{class o{constructor(t,i,a){this.route=t,this.categoriesService=i,this._matDialog=a,this.displayedColumns=["select","name","status","createdAt","actions"],this.dataSource=new r.by([]),this.selection=new u.Ov(!0,[])}ngAfterViewInit(){this.dataSource.paginator=this.paginator}ngOnInit(){this.dataSource=new r.by(this.route.snapshot.data.categories)}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}deleteSelected(){this.confirmDialogRef=this._matDialog.open(p.X,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete categories?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete these categories?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(t=>{t&&this.selection.selected.forEach((i,a)=>{this.dataSource.data.splice(a,1),this.dataSource=new r.by(this.dataSource.data),this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.categoriesService.deleteCategory(i._id).subscribe()})})}checkboxLabel(t){return t?`${this.selection.isSelected(t)?"deselect":"select"} row ${t.position+1}`:(this.isAllSelected()?"deselect":"select")+" all"}deleteCategories(t,i){this.confirmDialogRef=this._matDialog.open(p.X,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Categories?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete this categories?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(a=>{a&&(this.dataSource.data.splice(i,1),this.dataSource=new r.by(this.dataSource.data),this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.paginator,this.categoriesService.deleteCategory(t).subscribe())})}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(d.gz),e.Y36(v.G),e.Y36(A.uw))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-list-categories"]],viewQuery:function(i,a){if(1&i&&e.Gf(S.NW,5),2&i){let c;e.iGM(c=e.CRH())&&(a.paginator=c.first)}},decls:30,vars:8,consts:[["fxLayout","row","fxLayoutGap","10px","fxLayoutAlign","start center",1,"card","bg-white","w-full","mat-elevation-z2","px-2","py-2"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"text-lg","font-thin"],["class","text-lg font-thin","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",4,"ngIf"],[1,"mat-elevation-z8"],["mat-table","",1,"w-full",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","status"],["matColumnDef","createdAt"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["fxLayout","row","fxLayoutAlign","end center",1,"m-5"],["mat-fab","","color","primary",1,"m-10",3,"routerLink"],[1,"mat-18"],["mat-button",""],["mat-stroked-button","","color","warn",3,"click"],["mat-header-cell",""],[3,"checked","indeterminate","aria-label","change"],["mat-cell",""],[3,"checked","aria-label","click","change"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],[1,"material-icons-outlined"],["mat-menu-item","",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(i,a){1&i&&(e.TgZ(0,"div")(1,"div",0)(2,"span",1)(3,"span"),e._uU(4,"Category"),e.qZA()(),e.YNc(5,Y,7,1,"span",2),e.qZA(),e.TgZ(6,"div",3)(7,"table",4),e.ynx(8,5),e.YNc(9,R,2,3,"th",6),e.YNc(10,O,2,2,"td",7),e.BQk(),e.ynx(11,8),e.YNc(12,k,2,0,"th",6),e.YNc(13,Q,2,1,"td",7),e.BQk(),e.ynx(14,9),e.YNc(15,E,2,0,"th",6),e.YNc(16,q,2,1,"td",7),e.BQk(),e.ynx(17,10),e.YNc(18,G,2,0,"th",6),e.YNc(19,B,3,4,"td",7),e.BQk(),e.ynx(20,11),e.YNc(21,V,2,0,"th",6),e.YNc(22,z,16,4,"td",7),e.BQk(),e.YNc(23,K,1,0,"tr",12),e.YNc(24,W,1,0,"tr",13),e.qZA(),e._UZ(25,"mat-paginator",14),e.qZA(),e.TgZ(26,"div",15)(27,"button",16)(28,"mat-icon",17),e._uU(29,"add"),e.qZA()()()()),2&i&&(e.xp6(5),e.Q6J("ngIf",a.selection.selected.length),e.xp6(2),e.Q6J("dataSource",a.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",a.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",a.displayedColumns),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(6,H)),e.xp6(2),e.Q6J("routerLink",e.DdM(7,P)))},dependencies:[m.O5,d.rH,f.lW,f.RK,f.cs,I.Hw,S.NW,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,M.oG,T.VK,T.OP,T.p6,h.xw,h.SQ,h.Wh,m.uU]})}return o})();var s=n(6223),L=n(6116),F=n(3680),_=n(9157),N=n(2032),Z=n(8525),w=n(2599),U=n(3064);function j(o,l){if(1&o&&(e.TgZ(0,"span",14),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.AsE(" (+",((null==t.categoryForm.value.countries?null:t.categoryForm.value.countries.length)||0)-1," ",2===(null==t.categoryForm.value.countries?null:t.categoryForm.value.countries.length)?"other":"others",") ")}}function ee(o,l){if(1&o&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.country),e.xp6(1),e.Oqu(t.country)}}let te=(()=>{class o{constructor(t,i,a,c,g){this.fb=t,this.categoryService=i,this.location=a,this.dialog=c,this.route=g,this.categoryForm=this.fb.group({name:["",s.kI.required],status:["",s.kI.required],image:["",s.kI.required],country:["",s.kI.required],states:["",s.kI.required],countries:["",s.kI.required]}),this.deliveryZones=this.route.snapshot.data.deliveryZones,this.mediaData={image:null,icon:null}}selectedCountry(t){this.selectedZone=this.deliveryZones.find(i=>i.country==t.value)}ngOnInit(){}submit(){this.categoryForm.valid&&this.categoryService.createCategory(this.categoryForm.getRawValue()).subscribe(t=>{this.location.back()})}back(){this.location.back()}addMedia(t){this.dialog.open(L.R).afterClosed().subscribe(a=>{a&&(this.categoryForm.patchValue({[t]:a.url}),this.mediaData[t]={[t]:a}[t])})}removeValue(t){this.categoryForm.patchValue({[t]:null}),this.mediaData[t]=null}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(s.qu),e.Y36(v.G),e.Y36(m.Ye),e.Y36(A.uw),e.Y36(d.gz))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-create-category"]],decls:23,vars:7,consts:[[1,"mat-elevation-z8","container","mx-auto","my-10","p-5",2,"width","50rem"],[3,"formGroup","ngSubmit"],["fxLayout","column","fxLayoutAlign","space-evenly stretch"],["valueName","Image",3,"isNew","mediaData","removeValue","openMediaBrowser"],["appearance","outline",1,"full-width"],["matInput","","cancellation","Name Of Category","formControlName","name"],["formControlName","status"],["appearance","fill"],["multiple","","formControlName","countries"],["class","example-additional-selection",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","space-around center","fxLayoutGap","10px"],["mat-raised-button","","fxFlex","50%",3,"click"],["mat-raised-button","","fxFlex","50%","color","primary",3,"disabled"],[1,"example-additional-selection"],[3,"value"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return a.submit()}),e.TgZ(2,"div",2)(3,"app-select-media",3),e.NdJ("removeValue",function(g){return a.removeValue(g)})("openMediaBrowser",function(g){return a.addMedia(g)}),e.qZA(),e.TgZ(4,"mat-form-field",4)(5,"mat-label"),e._uU(6,"Name Of Category"),e.qZA(),e._UZ(7,"input",5),e.qZA(),e.TgZ(8,"mat-slide-toggle",6),e._uU(9,"Enable"),e.qZA(),e.TgZ(10,"mat-form-field",7)(11,"mat-label"),e._uU(12,"Country"),e.qZA(),e.TgZ(13,"mat-select",8)(14,"mat-select-trigger"),e._uU(15),e.YNc(16,j,2,2,"span",9),e.qZA(),e.YNc(17,ee,2,2,"mat-option",10),e.qZA()(),e.TgZ(18,"div",11)(19,"a",12),e.NdJ("click",function(){return a.back()}),e._uU(20,"CANCEL"),e.qZA(),e.TgZ(21,"button",13),e._uU(22,"SAVE"),e.qZA()()()()()),2&i&&(e.xp6(1),e.Q6J("formGroup",a.categoryForm),e.xp6(2),e.Q6J("isNew",!1)("mediaData",null==a.mediaData?null:a.mediaData.image),e.xp6(12),e.hij(" ",(null==a.categoryForm.value.countries?null:a.categoryForm.value.countries[0])||""," "),e.xp6(1),e.Q6J("ngIf",((null==a.categoryForm.value||null==a.categoryForm.value.countries?null:a.categoryForm.value.countries.length)||0)>1),e.xp6(1),e.Q6J("ngForOf",a.deliveryZones),e.xp6(4),e.Q6J("disabled",a.categoryForm.invalid))},dependencies:[m.sg,m.O5,F.ey,f.zs,f.lW,_.KE,_.hX,N.Nt,Z.gD,Z.$L,w.Rr,h.xw,h.SQ,h.Wh,h.yH,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,U.t]})}return o})();var x=n(8952);function oe(o,l){if(1&o&&(e.TgZ(0,"span",14),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.AsE(" (+",((null==t.categoryForm.value.countries?null:t.categoryForm.value.countries.length)||0)-1," ",2===(null==t.categoryForm.value.countries?null:t.categoryForm.value.countries.length)?"other":"others",") ")}}function ae(o,l){if(1&o&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.country),e.xp6(1),e.Oqu(t.country)}}let ie=(()=>{class o{constructor(t,i,a,c,g){this.fb=t,this.categoryService=i,this.location=a,this.dialog=c,this.route=g,this.category=this.route.snapshot.data.category,this.deliveryZones=this.route.snapshot.data.deliveryZones,this.mediaData={image:null,icon:null},this.categoryForm=this.fb.group({name:[this.category.name,s.kI.required],status:[this.category.status,s.kI.required],image:[this.category.image,s.kI.required],countries:[this.category.countries,s.kI.required]}),this.mediaData={image:null,icon:null},this.mediaData.image=this.category.image}selectedCountry(t){this.selectedZone=this.deliveryZones.find(i=>i.country==t.value)}ngOnInit(){}submit(){this.categoryForm.valid&&this.categoryService.updateCategory(this.category._id,this.categoryForm.getRawValue()).subscribe(t=>{this.location.back()})}back(){this.location.back()}addMedia(t){this.dialog.open(L.R).afterClosed().subscribe(a=>{a&&(this.categoryForm.patchValue({[t]:a.url}),this.mediaData[t]={[t]:a}[t])})}removeValue(t){this.categoryForm.patchValue({[t]:null}),this.mediaData[t]=null}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(s.qu),e.Y36(v.G),e.Y36(m.Ye),e.Y36(A.uw),e.Y36(d.gz))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-categories-details"]],decls:23,vars:7,consts:[[1,"mat-elevation-z8","container","mx-auto","my-10","p-5",2,"width","50rem"],[3,"formGroup","ngSubmit"],["fxLayout","column","fxLayoutAlign","space-evenly stretch"],["valueName","Image",3,"isNew","mediaData","removeValue","openMediaBrowser"],["appearance","fill",1,"full-width"],["matInput","","cancellation","Name Of Cuisine","formControlName","name"],["formControlName","status"],["appearance","fill"],["multiple","","formControlName","countries"],["class","example-additional-selection",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","space-around center","fxLayoutGap","10px"],["mat-raised-button","","fxFlex","50%",3,"click"],["mat-raised-button","","fxFlex","50%","color","primary",3,"disabled"],[1,"example-additional-selection"],[3,"value"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return a.submit()}),e.TgZ(2,"div",2)(3,"app-select-media",3),e.NdJ("removeValue",function(g){return a.removeValue(g)})("openMediaBrowser",function(g){return a.addMedia(g)}),e.qZA(),e.TgZ(4,"mat-form-field",4)(5,"mat-label"),e._uU(6,"Name Of Cuisine"),e.qZA(),e._UZ(7,"input",5),e.qZA(),e.TgZ(8,"mat-slide-toggle",6),e._uU(9,"Enable"),e.qZA(),e.TgZ(10,"mat-form-field",7)(11,"mat-label"),e._uU(12,"Country"),e.qZA(),e.TgZ(13,"mat-select",8)(14,"mat-select-trigger"),e._uU(15),e.YNc(16,oe,2,2,"span",9),e.qZA(),e.YNc(17,ae,2,2,"mat-option",10),e.qZA()(),e.TgZ(18,"div",11)(19,"a",12),e.NdJ("click",function(){return a.back()}),e._uU(20,"CANCEL"),e.qZA(),e.TgZ(21,"button",13),e._uU(22,"SAVE"),e.qZA()()()()()),2&i&&(e.xp6(1),e.Q6J("formGroup",a.categoryForm),e.xp6(2),e.Q6J("isNew",!1)("mediaData",null==a.mediaData?null:a.mediaData.image),e.xp6(12),e.hij(" ",(null==a.categoryForm.value.countries?null:a.categoryForm.value.countries[0])||""," "),e.xp6(1),e.Q6J("ngIf",((null==a.categoryForm.value||null==a.categoryForm.value.countries?null:a.categoryForm.value.countries.length)||0)>1),e.xp6(1),e.Q6J("ngForOf",a.deliveryZones),e.xp6(4),e.Q6J("disabled",a.categoryForm.invalid))},dependencies:[m.sg,m.O5,F.ey,f.zs,f.lW,_.KE,_.hX,N.Nt,Z.gD,Z.$L,w.Rr,h.xw,h.SQ,h.Wh,h.yH,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,U.t]})}return o})();var J=n(3212);const ne=[{path:"",component:y,children:[{path:"list",component:X,resolve:{categories:x.e}},{path:"new",component:te,resolve:{deliveryZones:J.h}},{path:":id/details",component:ie,resolve:{category:x.i,deliveryZones:J.h}}]}];let re=(()=>{class o{static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275mod=e.oAB({type:o});static#o=this.\u0275inj=e.cJS({imports:[d.Bz.forChild(ne),d.Bz]})}return o})();var se=n(1447),le=n(6005),ce=n(6208);let ue=(()=>{class o{static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275mod=e.oAB({type:o});static#o=this.\u0275inj=e.cJS({providers:[x.e,x.i,v.G],imports:[m.ez,re,le.q,se.o9,s.UX,ce.m]})}return o})()},8952:(D,C,n)=>{n.d(C,{e:()=>e,i:()=>y});var m=n(5879),d=n(1440);let e=(()=>{class u{constructor(r){this.categoryService=r}resolve(){return this.categoryService.getCategories()}static#e=this.\u0275fac=function(p){return new(p||u)(m.LFG(d.G))};static#t=this.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})(),y=(()=>{class u{constructor(r){this.categoryService=r}resolve(r){const p=r.paramMap.get("id");return this.categoryService.getCategory(p)}static#e=this.\u0275fac=function(p){return new(p||u)(m.LFG(d.G))};static#t=this.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})()},1440:(D,C,n)=>{n.d(C,{G:()=>y});var m=n(553),d=n(5879),e=n(9862);let y=(()=>{class u{constructor(r){this._httpClient=r,this.hostServer=m.N.hostServer}getCategories(){return this._httpClient.get(`${this.hostServer}/categories`)}getCategory(r){return this._httpClient.get(`${this.hostServer}/categories/${r}`)}deleteCategory(r){return this._httpClient.delete(`${this.hostServer}/categories/${r}`)}updateCategory(r,p){return this._httpClient.put(`${this.hostServer}/categories/${r}`,p)}createCategory(r){return this._httpClient.post(`${this.hostServer}/categories`,r)}static#e=this.\u0275fac=function(p){return new(p||u)(d.LFG(e.eN))};static#t=this.\u0275prov=d.Yz7({token:u,factory:u.\u0275fac})}return u})()}}]);