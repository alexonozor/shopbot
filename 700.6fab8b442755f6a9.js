"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[700],{6116:(Z,h,o)=>{o.d(h,{R:()=>Q});var b=o(4716),g=o(9862),C=o(8645),r=o(7700),e=o(5879),p=o(6814),_=o(1896),T=o(553);let M=(()=>{class i{constructor(t){this.http=t,this.endpoint=T.N.hostServer}getMedias(){return this.http.get(`${this.endpoint}/media`)}getMedia(t){return this.http.get(`${this.endpoint}/media/${t}`)}updateMedia(t,a){return this.http.put(`${this.endpoint}/media/${t}`,a)}saveMedia(t){return this.http.post(`${this.endpoint}/media`,t)}deleteMedia(t){return this.http.delete(`${this.endpoint}/media/${t}`)}uploadCsv(t){return this.http.post(`${this.endpoint}/medias/upload/csv`,t,{reportProgress:!0,observe:"events"})}static#e=this.\u0275fac=function(a){return new(a||i)(e.LFG(g.eN))};static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var v=o(2296),x=o(617),d=o(4104),y=o(6007),m=o(3814);function f(i,s){1&i&&e._UZ(0,"div",6)}function A(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",2),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.select(n.media))}),e.TgZ(1,"button",3),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.delete())}),e.TgZ(2,"mat-icon",4),e._uU(3,"delete"),e.qZA()(),e.YNc(4,f,1,0,"div",5),e.qZA()}if(2&i){const t=e.oxw();e.Udp("background-image","url("+t.media.url+")"),e.xp6(4),e.Q6J("ngIf",t.media.isSelected)}}function F(i,s){1&i&&e._UZ(0,"div",6)}function L(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",7),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.select(n.media))}),e.TgZ(1,"p",8)(2,"mat-icon",9),e._uU(3,"description"),e.qZA()(),e.TgZ(4,"span",10),e._uU(5),e.qZA(),e.TgZ(6,"span",11),e._uU(7),e.qZA(),e.TgZ(8,"button",3),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.delete())}),e.TgZ(9,"mat-icon",4),e._uU(10,"delete"),e.qZA()(),e.YNc(11,F,1,0,"div",5),e.qZA()}if(2&i){const t=e.oxw();e.xp6(5),e.Oqu(t.media.fileName),e.xp6(2),e.Oqu(t.media.format),e.xp6(4),e.Q6J("ngIf",t.media.isSelected)}}const E=function(){return["jpg","png","jpeg"]},N=function(){return["pdf","xls"]};let S=(()=>{class i{constructor(){this.deleteMedia=new e.vpe,this.selectedMedia=new e.vpe}delete(){this.deleteMedia.emit()}select(t){this.selectedMedia.emit(t)}static#e=this.\u0275fac=function(a){return new(a||i)};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-file-media-card"]],inputs:{media:"media"},outputs:{deleteMedia:"deleteMedia",selectedMedia:"selectedMedia"},decls:2,vars:4,consts:[["class","mat-elevation-z8 relative rounded-lg bg-center bg-no-repeat bg-cover h-52 m-5","fxLayout","column","fxLayoutAlign","center center",3,"background-image","click",4,"ngIf"],["class","mat-elevation-z8 relative rounded-lg h-52 bg-gray-200 m-5","fxLayout","column","fxLayoutAlign","center center",3,"click",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"mat-elevation-z8","relative","rounded-lg","bg-center","bg-no-repeat","bg-cover","h-52","m-5",3,"click"],["mat-icon-button","","color","warn",3,"click"],[1,"mat-18"],["class","p-3 bg-blue-500 rounded-full absolute right-2 bottom-2",4,"ngIf"],[1,"p-3","bg-blue-500","rounded-full","absolute","right-2","bottom-2"],["fxLayout","column","fxLayoutAlign","center center",1,"mat-elevation-z8","relative","rounded-lg","h-52","bg-gray-200","m-5",3,"click"],[1,"text-5xl"],[1,"mat-18","material-icons-outlined"],[1,"text-center"],[1,"text-center","uppercase","my-5"]],template:function(a,n){1&a&&(e.YNc(0,A,5,3,"div",0),e.YNc(1,L,12,3,"div",1)),2&a&&(e.Q6J("ngIf",e.DdM(2,E).includes(n.media.format)),e.xp6(1),e.Q6J("ngIf",e.DdM(3,N).includes(n.media.format)))},dependencies:[p.O5,v.RK,x.Hw]})}return i})();function w(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"app-file-media-card",3),e.NdJ("selectedMedia",function(n){e.CHM(t);const c=e.oxw().ngIf,l=e.oxw();return e.KtG(l.selectedMedia(n,c))})("deleteMedia",function(){const c=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.delete(c._id))}),e.qZA()}2&i&&e.Q6J("media",s.$implicit)}function I(i,s){if(1&i&&(e.TgZ(0,"div")(1,"div",1),e.YNc(2,w,1,1,"app-file-media-card",2),e.qZA()()),2&i){const t=s.ngIf;e.xp6(2),e.Q6J("ngForOf",t)}}let J=(()=>{class i{constructor(t){this.mediaService=t,this.browseMediaEvent=new e.vpe,this.chosenMediaEvent=new e.vpe}ngOnInit(){this.events.subscribe(()=>{this.loadMedias()}),this.loadMedias()}loadMedias(){this.media$=this.mediaService.getMedias()}delete(t){this.mediaService.deleteMedia(t).subscribe(()=>{this.loadMedias()})}openMedia(){this.browseMediaEvent.emit()}selectedMedia(t,a){a.forEach(n=>{n.isSelected=!1}),t.isSelected=!0,this.chosenMediaEvent.emit(t)}static#e=this.\u0275fac=function(a){return new(a||i)(e.Y36(M))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["portal-lists-all-media"]],inputs:{events:"events"},outputs:{browseMediaEvent:"browseMediaEvent",chosenMediaEvent:"chosenMediaEvent"},decls:2,vars:3,consts:[[4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","start start","fxLayoutGap","10px",1,"w-full","p-5"],["fxFlex","300px",3,"media","selectedMedia","deleteMedia",4,"ngFor","ngForOf"],["fxFlex","300px",3,"media","selectedMedia","deleteMedia"]],template:function(a,n){1&a&&(e.YNc(0,I,3,1,"div",0),e.ALo(1,"async")),2&a&&e.Q6J("ngIf",e.lcZ(1,1,n.media$))},dependencies:[p.sg,p.O5,m.xw,m.SQ,m.Wh,m.yH,S,p.Ov]})}return i})();function Y(i,s){1&i&&e._UZ(0,"mat-progress-bar",15)}function U(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"portal-lists-all-media",16),e.NdJ("chosenMediaEvent",function(n){e.CHM(t);const c=e.oxw();return e.KtG(c.selectedMedia(n))})("browseMediaEvent",function(){e.CHM(t),e.oxw();const n=e.MAs(2);return e.KtG(n.click())}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("events",t.eventsSubject.asObservable())}}function O(i,s){}function G(i,s){}function H(i,s){}function $(i,s){}function P(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"mat-dialog-actions",17)(1,"button",18),e._uU(2,"CANCEL"),e.qZA(),e.TgZ(3,"button",19),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.selectMedia())}),e._uU(4,"SELECT"),e.qZA()()}}let Q=(()=>{class i{constructor(t,a,n,c,l,u){this.location=t,this.route=a,this.router=n,this.mediaService=c,this.dialogRef=l,this.data=u,this.selectedTab=0,this.eventsSubject=new C.x}ngOnInit(){this.route.queryParams.subscribe(t=>{this.selectedTab=t.tab||0})}tabChanged(t){const a=Object.assign({},this.route.snapshot.queryParams);a.tab=t.index,this.router.navigate(["."],{queryParams:a,relativeTo:this.route})}back(){this.location.back()}emitEventToChild(){this.eventsSubject.next()}onFileLogoSelected(t){this.uploadProgress=0;const a=t.target.files[0];if(a){this.fileName=a.name;const n=new FormData;n.append("file",a);const c=this.mediaService.saveMedia(n).pipe((0,b.x)(()=>this.reset()));this.uploadSub=c.subscribe(l=>{l.type==g.dt.UploadProgress?this.uploadProgress=Math.round(l.loaded/l.total*100):l.hasOwnProperty("body")})}}selectedMedia(t){this.selectedMediaData=t}selectMedia(){this.dialogRef.close(this.selectedMediaData)}reset(){this.emitEventToChild(),this.uploadProgress=null,this.uploadSub=null}static#e=this.\u0275fac=function(a){return new(a||i)(e.Y36(p.Ye),e.Y36(_.gz),e.Y36(_.F0),e.Y36(M),e.Y36(r.so,8),e.Y36(r.WI,8))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-media"]],decls:26,vars:3,consts:[["type","file",1,"file-input",3,"change"],["logoUpload",""],["fxLayout","row","fxLayoutAlign","space-between center",1,"card","bg-white","mat-elevation-z2","px-2","py-2"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"text-lg","font-thin"],[1,"material-icons-outlined"],["mat-raised-button","","color","primary","type","submit",1,"material-icons-outlined",3,"click"],["mode","indeterminate",4,"ngIf"],[3,"selectedIndex","selectedTabChange"],["label","ALL"],["matTabContent",""],["label","IMAGES"],["label","DOCUMENTS"],["label","VIDEOS"],["label","AUDIO"],["align","start",4,"ngIf"],["mode","indeterminate"],[3,"events","chosenMediaEvent","browseMediaEvent"],["align","start"],["mat-button","","matDialogClose",""],["mat-raised-button","","color","primary",3,"click"]],template:function(a,n){if(1&a){const c=e.EpF();e.TgZ(0,"mat-dialog-content")(1,"input",0,1),e.NdJ("change",function(u){return n.onFileLogoSelected(u)}),e.qZA(),e.TgZ(3,"div",2)(4,"span",3)(5,"mat-icon",4),e._uU(6,"perm_media"),e.qZA(),e.TgZ(7,"span"),e._uU(8," Media"),e.qZA()(),e.TgZ(9,"button",5),e.NdJ("click",function(){e.CHM(c);const u=e.MAs(2);return e.KtG(u.click())}),e.TgZ(10,"mat-icon"),e._uU(11,"add_photo_alternate"),e.qZA(),e._uU(12," Add Media "),e.qZA()(),e.YNc(13,Y,1,0,"mat-progress-bar",6),e.TgZ(14,"mat-tab-group",7),e.NdJ("selectedTabChange",function(u){return n.tabChanged(u)}),e.TgZ(15,"mat-tab",8),e.YNc(16,U,1,1,"ng-template",9),e.qZA(),e.TgZ(17,"mat-tab",10),e.YNc(18,O,0,0,"ng-template",9),e.qZA(),e.TgZ(19,"mat-tab",11),e.YNc(20,G,0,0,"ng-template",9),e.qZA(),e.TgZ(21,"mat-tab",12),e.YNc(22,H,0,0,"ng-template",9),e.qZA(),e.TgZ(23,"mat-tab",13),e.YNc(24,$,0,0,"ng-template",9),e.qZA()()(),e.YNc(25,P,5,0,"mat-dialog-actions",14)}2&a&&(e.xp6(13),e.Q6J("ngIf",n.uploadProgress),e.xp6(1),e.Q6J("selectedIndex",n.selectedTab),e.xp6(11),e.Q6J("ngIf",n.dialogRef))},dependencies:[p.O5,v.lW,x.Hw,d.Vc,d.uX,d.SP,y.pW,r.ZT,r.xY,r.H8,m.xw,m.SQ,m.Wh,J],styles:[".file-input[_ngcontent-%COMP%]{display:none}"]})}return i})()},2886:(Z,h,o)=>{o.r(h),o.d(h,{MediaModule:()=>x});var b=o(6814),g=o(1896),C=o(6116),r=o(5879);const e=[{path:"",component:C.R}];let p=(()=>{class d{static#e=this.\u0275fac=function(f){return new(f||d)};static#t=this.\u0275mod=r.oAB({type:d});static#i=this.\u0275inj=r.cJS({imports:[g.Bz.forChild(e),g.Bz]})}return d})();var _=o(6223),T=o(1447),M=o(6005),v=o(6208);let x=(()=>{class d{static#e=this.\u0275fac=function(f){return new(f||d)};static#t=this.\u0275mod=r.oAB({type:d});static#i=this.\u0275inj=r.cJS({imports:[b.ez,p,M.q,T.o9,_.UX,v.m]})}return d})()}}]);