"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[592],{437:(d,u,i)=>{i.d(u,{D:()=>A});var n=i(6223),l=i(7700),h=i(6028),t=i(5879),r=i(712),f=i(6814),e=i(3680),a=i(2296),g=i(9157),E=i(2032),C=i(8525),v=i(3814);function M(_,p){1&_&&t.GkF(0)}function D(_,p){if(1&_&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&_){const s=p.$implicit;t.Q6J("value",s),t.xp6(1),t.hij(" ",s," ")}}const O=function(){return["Registered Customers","Unregistered Customers","Both"]};function P(_,p){1&_&&(t.TgZ(0,"mat-form-field")(1,"mat-label"),t._uU(2,"Select Recipients"),t.qZA(),t.TgZ(3,"mat-select",13),t.YNc(4,D,2,2,"mat-option",8),t.qZA()()),2&_&&(t.xp6(4),t.Q6J("ngForOf",t.DdM(1,O)))}function T(_,p){if(1&_&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&_){const s=p.$implicit;t.Q6J("value",s),t.xp6(1),t.Oqu(s)}}const U=function(){return["Notification","Email","Both"]};let A=(()=>{class _{constructor(s,o,c,m){this.fb=s,this.notificationsService=o,this.dialogRef=c,this.data=m,this.messagesForm=this.fb.group({title:["",n.kI.required],body:["",n.kI.required],recipients:this.fb.array([]),type:["",n.kI.required],recipientsType:[""]}),this.addOnBlur=!0,this.separatorKeysCodes=[h.K5,h.OC],this.recipientsData=[]}ngOnInit(){this.data.allCustomers||(this.data.isBulkMsg?(this.recipientsData=this.data.customers,this.recipientsData.forEach(s=>{s.phoneCredentials.length>0&&this.addRecipients(s)})):(this.recipientsData.push(this.data.customers),this.recipientsData.map(s=>this.addRecipients(s))))}get recipients(){return this.messagesForm.controls.recipients}addRecipients(s){const o=this.fb.group({name:[s.name],id:[s._id],phoneToken:[s.phoneCredentials]});this.recipients.push(o)}deleteRecipient(s){this.recipients.removeAt(s)}submit(){this.notificationsService.createNotification(this.messagesForm.getRawValue()).subscribe(s=>{this.dialogRef.close(s)})}add(s){const o=(s.value||"").trim();o&&this.recipientsData.push({name:o}),s.chipInput.clear()}remove(s){const o=this.recipientsData.indexOf(s);o>=0&&this.recipientsData.splice(o,1)}edit(s,o){const c=o.value.trim();if(!c)return void this.remove(s);const m=this.recipientsData.indexOf(s);m>0&&(this.recipientsData[m].name=c)}static#t=this.\u0275fac=function(o){return new(o||_)(t.Y36(n.qu),t.Y36(r.T),t.Y36(l.so),t.Y36(l.WI))};static#e=this.\u0275cmp=t.Xpm({type:_,selectors:[["app-create-messages"]],decls:25,vars:7,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["fxLayout","column","fxLayoutAlign","space-around stretch",3,"formGroup"],[4,"ngIf","ngIfElse"],["selectRecipient",""],["appearance","fill"],["matInput","","placeholder","Enter Message Title","formControlName","title"],["formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Enter Message Body","rows","20","formControlName","body"],["mat-dialog-actions",""],["mat-button","",3,"mat-dialog-close"],["mat-button","","cdkFocusInitial","",3,"disabled","click"],["formControlName","recipientsType"],[3,"value"]],template:function(o,c){if(1&o&&(t.TgZ(0,"h1",0),t._uU(1,"Send Notification"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2),t.YNc(4,M,1,0,"ng-container",3),t.YNc(5,P,5,2,"ng-template",null,4,t.W1O),t.TgZ(7,"mat-form-field",5)(8,"mat-label"),t._uU(9,"Title"),t.qZA(),t._UZ(10,"input",6),t.qZA(),t.TgZ(11,"mat-form-field",5)(12,"mat-label"),t._uU(13,"Select Message Type"),t.qZA(),t.TgZ(14,"mat-select",7),t.YNc(15,T,2,2,"mat-option",8),t.qZA()(),t.TgZ(16,"mat-form-field",5)(17,"mat-label"),t._uU(18,"body"),t.qZA(),t._UZ(19,"textarea",9),t.qZA()()(),t.TgZ(20,"div",10)(21,"button",11),t._uU(22,"Cancel"),t.qZA(),t.TgZ(23,"button",12),t.NdJ("click",function(){return c.submit()}),t._uU(24,"Send"),t.qZA()()),2&o){const m=t.MAs(6);t.xp6(3),t.Q6J("formGroup",c.messagesForm),t.xp6(1),t.Q6J("ngIf",!c.data.allCustomers)("ngIfElse",m),t.xp6(11),t.Q6J("ngForOf",t.DdM(6,U)),t.xp6(6),t.Q6J("mat-dialog-close",null),t.xp6(2),t.Q6J("disabled",c.messagesForm.invalid)}},dependencies:[f.sg,f.O5,e.ey,a.lW,g.KE,g.hX,E.Nt,C.gD,l.ZT,l.uh,l.xY,l.H8,v.xw,v.Wh,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u]})}return _})()},1423:(d,u,i)=>{i.d(u,{T:()=>h,f:()=>t});var n=i(5879),l=i(9329);let h=(()=>{class r{constructor(e){this.permissionService=e}resolve(){return this.permissionService.getPermissions()}static#t=this.\u0275fac=function(a){return new(a||r)(n.LFG(l.$))};static#e=this.\u0275prov=n.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),t=(()=>{class r{constructor(e){this.permissionService=e}resolve(e){const a=e.paramMap.get("id");return this.permissionService.getPermission(a)}static#t=this.\u0275fac=function(a){return new(a||r)(n.LFG(l.$))};static#e=this.\u0275prov=n.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})()},9329:(d,u,i)=>{i.d(u,{$:()=>t});var n=i(553),l=i(5879),h=i(9862);let t=(()=>{class r{constructor(e){this._httpClient=e,this.hostServer=n.N.hostServer}createPermission(e){return this._httpClient.post(`${this.hostServer}/roles`,e)}getPermissions(){return this._httpClient.get(`${this.hostServer}/roles`)}getPermission(e){return this._httpClient.get(`${this.hostServer}/roles/${e}`)}updatePermission(e,a){return this._httpClient.put(`${this.hostServer}/roles/${e}`,a)}deletePermission(e){return this._httpClient.delete(`${this.hostServer}/roles/${e}`)}static#t=this.\u0275fac=function(a){return new(a||r)(l.LFG(h.eN))};static#e=this.\u0275prov=l.Yz7({token:r,factory:r.\u0275fac})}return r})()},1803:(d,u,i)=>{i.d(u,{f:()=>t});var n=i(553),l=i(5879),h=i(9862);let t=(()=>{class r{constructor(e){this._httpClient=e,this.hostServer=n.N.hostServer}getUsers(e){const g=JSON.stringify(e);return this._httpClient.get(`${this.hostServer}/users?query=${g}`)}getUser(e){return this._httpClient.get(`${this.hostServer}/users/${e}`)}countUsers(){return this._httpClient.get(`${this.hostServer}/users/count/all`)}deleteUser(e){return this._httpClient.delete(`${this.hostServer}/users/${e}`)}updateUser(e,a){return this._httpClient.put(`${this.hostServer}/users/${e}`,a)}getUserTransactions(e){return this._httpClient.get(`${this.hostServer}/wallet-transactions/${e}/transactions`)}getUserReferrals(e){return this._httpClient.get(`${this.hostServer}/referrals/${e}/transactions`)}getUserReferralStats(e){return this._httpClient.get(`${this.hostServer}/referrals/${e}/stats`)}getUserAddresses(e){return this._httpClient.get(`${this.hostServer}/addresses/${e}/user`)}static#t=this.\u0275fac=function(a){return new(a||r)(l.LFG(h.eN))};static#e=this.\u0275prov=l.Yz7({token:r,factory:r.\u0275fac})}return r})()}}]);