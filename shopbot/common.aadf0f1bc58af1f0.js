"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[592],{9129:(O,x,a)=>{a.d(x,{R:()=>$});var m=a(8746),_=a(520),M=a(7579),t=a(2349),e=a(5e3),u=a(9808),o=a(6696),E=a(2340);let A=(()=>{class n{constructor(i){this.http=i,this.endpoint=E.N.hostServer}getMedias(){return this.http.get(`${this.endpoint}/media`)}getMedia(i){return this.http.get(`${this.endpoint}/media/${i}`)}updateMedia(i,r){return this.http.put(`${this.endpoint}/media/${i}`,r)}saveMedia(i){return this.http.post(`${this.endpoint}/media`,i)}deleteMedia(i){return this.http.delete(`${this.endpoint}/media/${i}`)}uploadCsv(i){return this.http.post(`${this.endpoint}/medias/upload/csv`,i,{reportProgress:!0,observe:"events"})}}return n.\u0275fac=function(i){return new(i||n)(e.LFG(_.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var b=a(7423),y=a(5245),Z=a(3251),P=a(5899),C=a(7093);function I(n,c){1&n&&e._UZ(0,"div",6)}function D(n,c){if(1&n){const i=e.EpF();e.TgZ(0,"div",2),e.NdJ("click",function(){e.CHM(i);const l=e.oxw();return e.KtG(l.select(l.media))}),e.TgZ(1,"button",3),e.NdJ("click",function(){e.CHM(i);const l=e.oxw();return e.KtG(l.delete())}),e.TgZ(2,"mat-icon",4),e._uU(3,"delete"),e.qZA()(),e.YNc(4,I,1,0,"div",5),e.qZA()}if(2&n){const i=e.oxw();e.Udp("background-image","url("+i.media.url+")"),e.xp6(4),e.Q6J("ngIf",i.media.isSelected)}}function L(n,c){1&n&&e._UZ(0,"div",6)}function F(n,c){if(1&n){const i=e.EpF();e.TgZ(0,"div",7),e.NdJ("click",function(){e.CHM(i);const l=e.oxw();return e.KtG(l.select(l.media))}),e.TgZ(1,"p",8)(2,"mat-icon",9),e._uU(3,"description"),e.qZA()(),e.TgZ(4,"span",10),e._uU(5),e.qZA(),e.TgZ(6,"span",11),e._uU(7),e.qZA(),e.TgZ(8,"button",3),e.NdJ("click",function(){e.CHM(i);const l=e.oxw();return e.KtG(l.delete())}),e.TgZ(9,"mat-icon",4),e._uU(10,"delete"),e.qZA()(),e.YNc(11,L,1,0,"div",5),e.qZA()}if(2&n){const i=e.oxw();e.xp6(5),e.Oqu(i.media.fileName),e.xp6(2),e.Oqu(i.media.format),e.xp6(4),e.Q6J("ngIf",i.media.isSelected)}}const S=function(){return["jpg","png","jpeg"]},U=function(){return["pdf","xls"]};let N=(()=>{class n{constructor(){this.deleteMedia=new e.vpe,this.selectedMedia=new e.vpe}delete(){this.deleteMedia.emit()}select(i){this.selectedMedia.emit(i)}}return n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-file-media-card"]],inputs:{media:"media"},outputs:{deleteMedia:"deleteMedia",selectedMedia:"selectedMedia"},decls:2,vars:4,consts:[["class","mat-elevation-z8 relative rounded-lg bg-center bg-no-repeat bg-cover h-52 m-5","fxLayout","column","fxLayoutAlign","center center",3,"background-image","click",4,"ngIf"],["class","mat-elevation-z8 relative rounded-lg h-52 bg-gray-200 m-5","fxLayout","column","fxLayoutAlign","center center",3,"click",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"mat-elevation-z8","relative","rounded-lg","bg-center","bg-no-repeat","bg-cover","h-52","m-5",3,"click"],["mat-icon-button","","color","warn",3,"click"],[1,"mat-18"],["class","p-3 bg-blue-500 rounded-full absolute right-2 bottom-2",4,"ngIf"],[1,"p-3","bg-blue-500","rounded-full","absolute","right-2","bottom-2"],["fxLayout","column","fxLayoutAlign","center center",1,"mat-elevation-z8","relative","rounded-lg","h-52","bg-gray-200","m-5",3,"click"],[1,"text-5xl"],[1,"mat-18","material-icons-outlined"],[1,"text-center"],[1,"text-center","uppercase","my-5"]],template:function(i,r){1&i&&(e.YNc(0,D,5,3,"div",0),e.YNc(1,F,12,3,"div",1)),2&i&&(e.Q6J("ngIf",e.DdM(2,S).includes(r.media.format)),e.xp6(1),e.Q6J("ngIf",e.DdM(3,U).includes(r.media.format)))},dependencies:[u.O5,b.lW,y.Hw]}),n})();function R(n,c){if(1&n){const i=e.EpF();e.TgZ(0,"app-file-media-card",3),e.NdJ("selectedMedia",function(l){e.CHM(i);const v=e.oxw().ngIf,g=e.oxw();return e.KtG(g.selectedMedia(l,v))})("deleteMedia",function(){const v=e.CHM(i).$implicit,g=e.oxw(2);return e.KtG(g.delete(v._id))}),e.qZA()}2&n&&e.Q6J("media",c.$implicit)}function p(n,c){if(1&n&&(e.TgZ(0,"div")(1,"div",1),e.YNc(2,R,1,1,"app-file-media-card",2),e.qZA()()),2&n){const i=c.ngIf;e.xp6(2),e.Q6J("ngForOf",i)}}let h=(()=>{class n{constructor(i){this.mediaService=i,this.browseMediaEvent=new e.vpe,this.chosenMediaEvent=new e.vpe}ngOnInit(){this.events.subscribe(()=>{this.loadMedias()}),this.loadMedias()}loadMedias(){this.media$=this.mediaService.getMedias()}delete(i){this.mediaService.deleteMedia(i).subscribe(()=>{this.loadMedias()})}openMedia(){this.browseMediaEvent.emit()}selectedMedia(i,r){r.forEach(l=>{l.isSelected=!1}),i.isSelected=!0,this.chosenMediaEvent.emit(i)}}return n.\u0275fac=function(i){return new(i||n)(e.Y36(A))},n.\u0275cmp=e.Xpm({type:n,selectors:[["portal-lists-all-media"]],inputs:{events:"events"},outputs:{browseMediaEvent:"browseMediaEvent",chosenMediaEvent:"chosenMediaEvent"},decls:2,vars:3,consts:[[4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","start start","fxLayoutGap","10px",1,"w-full","p-5"],["fxFlex","300px",3,"media","selectedMedia","deleteMedia",4,"ngFor","ngForOf"],["fxFlex","300px",3,"media","selectedMedia","deleteMedia"]],template:function(i,r){1&i&&(e.YNc(0,p,3,1,"div",0),e.ALo(1,"async")),2&i&&e.Q6J("ngIf",e.lcZ(1,1,r.media$))},dependencies:[u.sg,u.O5,C.xw,C.SQ,C.Wh,C.yH,N,u.Ov]}),n})();function s(n,c){1&n&&e._UZ(0,"mat-progress-bar",15)}function d(n,c){if(1&n){const i=e.EpF();e.TgZ(0,"portal-lists-all-media",16),e.NdJ("chosenMediaEvent",function(l){e.CHM(i);const v=e.oxw();return e.KtG(v.selectedMedia(l))})("browseMediaEvent",function(){e.CHM(i),e.oxw();const l=e.MAs(2);return e.KtG(l.click())}),e.qZA()}if(2&n){const i=e.oxw();e.Q6J("events",i.eventsSubject.asObservable())}}function f(n,c){}function T(n,c){}function K(n,c){}function Y(n,c){}function J(n,c){if(1&n){const i=e.EpF();e.TgZ(0,"mat-dialog-actions",17)(1,"button",18),e._uU(2,"CANCEL"),e.qZA(),e.TgZ(3,"button",19),e.NdJ("click",function(){e.CHM(i);const l=e.oxw();return e.KtG(l.selectMedia())}),e._uU(4,"SELECT"),e.qZA()()}}let $=(()=>{class n{constructor(i,r,l,v,g,W){this.location=i,this.route=r,this.router=l,this.mediaService=v,this.dialogRef=g,this.data=W,this.selectedTab=0,this.eventsSubject=new M.x}ngOnInit(){this.route.queryParams.subscribe(i=>{this.selectedTab=i.tab||0})}tabChanged(i){const r=Object.assign({},this.route.snapshot.queryParams);r.tab=i.index,this.router.navigate(["."],{queryParams:r,relativeTo:this.route})}back(){this.location.back()}emitEventToChild(){this.eventsSubject.next()}onFileLogoSelected(i){this.uploadProgress=0;const r=i.target.files[0];if(r){this.fileName=r.name;const l=new FormData;l.append("file",r);const v=this.mediaService.saveMedia(l).pipe((0,m.x)(()=>this.reset()));this.uploadSub=v.subscribe(g=>{g.type==_.dt.UploadProgress?this.uploadProgress=Math.round(g.loaded/g.total*100):g.hasOwnProperty("body")})}}selectedMedia(i){this.selectedMediaData=i}selectMedia(){this.dialogRef.close(this.selectedMediaData)}reset(){this.emitEventToChild(),this.uploadProgress=null,this.uploadSub=null}}return n.\u0275fac=function(i){return new(i||n)(e.Y36(u.Ye),e.Y36(o.gz),e.Y36(o.F0),e.Y36(A),e.Y36(t.so,8),e.Y36(t.WI,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-media"]],decls:26,vars:3,consts:[["type","file",1,"file-input",3,"change"],["logoUpload",""],["fxLayout","row","fxLayoutAlign","space-between center",1,"card","bg-white","mat-elevation-z2","px-2","py-2"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"text-lg","font-thin"],[1,"material-icons-outlined"],["mat-raised-button","","color","primary","type","submit",1,"material-icons-outlined",3,"click"],["mode","indeterminate",4,"ngIf"],[3,"selectedIndex","selectedTabChange"],["label","ALL"],["matTabContent",""],["label","IMAGES"],["label","DOCUMENTS"],["label","VIDEOS"],["label","AUDIO"],["align","start",4,"ngIf"],["mode","indeterminate"],[3,"events","chosenMediaEvent","browseMediaEvent"],["align","start"],["mat-button","","matDialogClose",""],["mat-raised-button","","color","primary",3,"click"]],template:function(i,r){if(1&i){const l=e.EpF();e.TgZ(0,"mat-dialog-content")(1,"input",0,1),e.NdJ("change",function(g){return r.onFileLogoSelected(g)}),e.qZA(),e.TgZ(3,"div",2)(4,"span",3)(5,"mat-icon",4),e._uU(6,"perm_media"),e.qZA(),e.TgZ(7,"span"),e._uU(8," Media"),e.qZA()(),e.TgZ(9,"button",5),e.NdJ("click",function(){e.CHM(l);const g=e.MAs(2);return e.KtG(g.click())}),e.TgZ(10,"mat-icon"),e._uU(11,"add_photo_alternate"),e.qZA(),e._uU(12," Add Media "),e.qZA()(),e.YNc(13,s,1,0,"mat-progress-bar",6),e.TgZ(14,"mat-tab-group",7),e.NdJ("selectedTabChange",function(g){return r.tabChanged(g)}),e.TgZ(15,"mat-tab",8),e.YNc(16,d,1,1,"ng-template",9),e.qZA(),e.TgZ(17,"mat-tab",10),e.YNc(18,f,0,0,"ng-template",9),e.qZA(),e.TgZ(19,"mat-tab",11),e.YNc(20,T,0,0,"ng-template",9),e.qZA(),e.TgZ(21,"mat-tab",12),e.YNc(22,K,0,0,"ng-template",9),e.qZA(),e.TgZ(23,"mat-tab",13),e.YNc(24,Y,0,0,"ng-template",9),e.qZA()()(),e.YNc(25,J,5,0,"mat-dialog-actions",14)}2&i&&(e.xp6(13),e.Q6J("ngIf",r.uploadProgress),e.xp6(1),e.Q6J("selectedIndex",r.selectedTab),e.xp6(11),e.Q6J("ngIf",r.dialogRef))},dependencies:[u.O5,b.lW,y.Hw,Z.SP,Z.uX,Z.Vc,P.pW,t.ZT,t.xY,t.H8,C.xw,C.SQ,C.Wh,h],styles:[".file-input[_ngcontent-%COMP%]{display:none}"]}),n})()},4382:(O,x,a)=>{a.d(x,{D:()=>R});var m=a(3075),_=a(2349),M=a(1159),t=a(5e3),e=a(2152),u=a(9808),o=a(508),E=a(7423),A=a(6688),b=a(7322),y=a(5245),Z=a(7531),P=a(4107),C=a(7093);function I(p,h){if(1&p){const s=t.EpF();t.TgZ(0,"mat-chip",18),t.NdJ("removed",function(){const T=t.CHM(s).$implicit,K=t.oxw(2);return t.KtG(K.remove(T))}),t._uU(1),t.TgZ(2,"button",19)(3,"mat-icon"),t._uU(4,"cancel"),t.qZA()()()}if(2&p){const s=h.$implicit;t.xp6(1),t.hij(" ",s.value.name," ")}}function D(p,h){if(1&p){const s=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",13)(2,"mat-label"),t._uU(3,"Recipients"),t.qZA(),t.TgZ(4,"mat-chip-list",14,15),t.YNc(6,I,5,1,"mat-chip",16),t.TgZ(7,"input",17),t.NdJ("matChipInputTokenEnd",function(f){t.CHM(s);const T=t.oxw();return t.KtG(T.add(f))}),t.qZA()()(),t.BQk()}if(2&p){const s=t.MAs(5),d=t.oxw();t.xp6(6),t.Q6J("ngForOf",d.recipients.controls),t.xp6(1),t.Q6J("matChipInputFor",s)("matChipInputSeparatorKeyCodes",d.separatorKeysCodes)("matChipInputAddOnBlur",d.addOnBlur)}}function L(p,h){if(1&p&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&p){const s=h.$implicit;t.Q6J("value",s),t.xp6(1),t.hij(" ",s," ")}}const F=function(){return["Registered Customers","Unregistered Customers","Both"]};function S(p,h){1&p&&(t.TgZ(0,"mat-form-field")(1,"mat-label"),t._uU(2,"Select Recipients"),t.qZA(),t.TgZ(3,"mat-select",20),t.YNc(4,L,2,2,"mat-option",8),t.qZA()()),2&p&&(t.xp6(4),t.Q6J("ngForOf",t.DdM(1,F)))}function U(p,h){if(1&p&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&p){const s=h.$implicit;t.Q6J("value",s),t.xp6(1),t.Oqu(s)}}const N=function(){return["Notification","Email","Both"]};let R=(()=>{class p{constructor(s,d,f,T){this.fb=s,this.notificationsService=d,this.dialogRef=f,this.data=T,this.messagesForm=this.fb.group({title:["",m.kI.required],body:["",m.kI.required],recipients:this.fb.array([]),type:["",m.kI.required],recipientsType:[""]}),this.addOnBlur=!0,this.separatorKeysCodes=[M.K5,M.OC],this.recipientsData=[]}ngOnInit(){this.data.allCustomers||(this.data.isBulkMsg?(this.recipientsData=this.data.customers,this.recipientsData.forEach(s=>{s.phoneCredentials.length>0&&this.addRecipients(s)})):(this.recipientsData.push(this.data.customers),this.recipientsData.map(s=>this.addRecipients(s))))}get recipients(){return this.messagesForm.controls.recipients}addRecipients(s){const d=this.fb.group({name:[s.name],id:[s._id],phoneToken:[s.phoneCredentials]});this.recipients.push(d)}deleteRecipient(s){this.recipients.removeAt(s)}submit(){this.notificationsService.createNotification(this.messagesForm.getRawValue()).subscribe(s=>{this.dialogRef.close(s)})}add(s){const d=(s.value||"").trim();d&&this.recipientsData.push({name:d}),s.chipInput.clear()}remove(s){const d=this.recipientsData.indexOf(s);d>=0&&this.recipientsData.splice(d,1)}edit(s,d){const f=d.value.trim();if(!f)return void this.remove(s);const T=this.recipientsData.indexOf(s);T>0&&(this.recipientsData[T].name=f)}}return p.\u0275fac=function(s){return new(s||p)(t.Y36(m.qu),t.Y36(e.T),t.Y36(_.so),t.Y36(_.WI))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-create-messages"]],decls:25,vars:7,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["fxLayout","column","fxLayoutAlign","space-around stretch",3,"formGroup"],[4,"ngIf","ngIfElse"],["selectRecipient",""],["appearance","fill"],["matInput","","placeholder","Enter Message Title","formControlName","title"],["formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Enter Message Body","rows","20","formControlName","body"],["mat-dialog-actions",""],["mat-button","",3,"mat-dialog-close"],["mat-button","","cdkFocusInitial","",3,"disabled","click"],["appearance","fill",1,"example-chip-list"],["aria-label","Fruit selection","formArrayName","recipients"],["chipList",""],[3,"removed",4,"ngFor","ngForOf"],[3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],[3,"removed"],["matChipRemove",""],["formControlName","recipientsType"],[3,"value"]],template:function(s,d){if(1&s&&(t.TgZ(0,"h1",0),t._uU(1,"Send Notification"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2),t.YNc(4,D,8,4,"ng-container",3),t.YNc(5,S,5,2,"ng-template",null,4,t.W1O),t.TgZ(7,"mat-form-field",5)(8,"mat-label"),t._uU(9,"Title"),t.qZA(),t._UZ(10,"input",6),t.qZA(),t.TgZ(11,"mat-form-field",5)(12,"mat-label"),t._uU(13,"Select Message Type"),t.qZA(),t.TgZ(14,"mat-select",7),t.YNc(15,U,2,2,"mat-option",8),t.qZA()(),t.TgZ(16,"mat-form-field",5)(17,"mat-label"),t._uU(18,"body"),t.qZA(),t._UZ(19,"textarea",9),t.qZA()()(),t.TgZ(20,"div",10)(21,"button",11),t._uU(22,"Cancel"),t.qZA(),t.TgZ(23,"button",12),t.NdJ("click",function(){return d.submit()}),t._uU(24,"Send"),t.qZA()()),2&s){const f=t.MAs(6);t.xp6(3),t.Q6J("formGroup",d.messagesForm),t.xp6(1),t.Q6J("ngIf",!d.data.allCustomers)("ngIfElse",f),t.xp6(11),t.Q6J("ngForOf",t.DdM(6,N)),t.xp6(6),t.Q6J("mat-dialog-close",null),t.xp6(2),t.Q6J("disabled",d.messagesForm.invalid)}},dependencies:[u.sg,u.O5,o.ey,E.lW,A.qn,A.HS,A.oH,A.qH,b.KE,b.hX,y.Hw,Z.Nt,P.gD,_.ZT,_.uh,_.xY,_.H8,C.xw,C.Wh,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,m.CE]}),p})()},3475:(O,x,a)=>{a.d(x,{T:()=>M,f:()=>t});var m=a(5e3),_=a(6614);let M=(()=>{class e{constructor(o){this.permissionService=o}resolve(){return this.permissionService.getPermissions()}}return e.\u0275fac=function(o){return new(o||e)(m.LFG(_.$))},e.\u0275prov=m.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),t=(()=>{class e{constructor(o){this.permissionService=o}resolve(o){const E=o.paramMap.get("id");return this.permissionService.getPermission(E)}}return e.\u0275fac=function(o){return new(o||e)(m.LFG(_.$))},e.\u0275prov=m.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},3880:(O,x,a)=>{a.d(x,{x:()=>t});var m=a(2340),_=a(5e3),M=a(520);let t=(()=>{class e{constructor(o){this._httpClient=o,this.hostServer=m.N.hostServer}createCuisine(o){return this._httpClient.post(`${this.hostServer}/cuisines`,o)}getCuisines(){return this._httpClient.get(`${this.hostServer}/cuisines`)}getCuisine(o){return this._httpClient.get(`${this.hostServer}/cuisines/${o}`)}updateCuisine(o,E){return this._httpClient.put(`${this.hostServer}/cuisines/${o}`,E)}deleteCuisine(o){return this._httpClient.delete(`${this.hostServer}/cuisines/${o}`)}}return e.\u0275fac=function(o){return new(o||e)(_.LFG(M.eN))},e.\u0275prov=_.Yz7({token:e,factory:e.\u0275fac}),e})()},6614:(O,x,a)=>{a.d(x,{$:()=>t});var m=a(2340),_=a(5e3),M=a(520);let t=(()=>{class e{constructor(o){this._httpClient=o,this.hostServer=m.N.hostServer}createPermission(o){return this._httpClient.post(`${this.hostServer}/roles`,o)}getPermissions(){return this._httpClient.get(`${this.hostServer}/roles`)}getPermission(o){return this._httpClient.get(`${this.hostServer}/roles/${o}`)}updatePermission(o,E){return this._httpClient.put(`${this.hostServer}/roles/${o}`,E)}deletePermission(o){return this._httpClient.delete(`${this.hostServer}/roles/${o}`)}}return e.\u0275fac=function(o){return new(o||e)(_.LFG(M.eN))},e.\u0275prov=_.Yz7({token:e,factory:e.\u0275fac}),e})()}}]);