(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[9434],{6625:function(I,A,O){var w;I.exports=(w=O(7586),function(i){function f(r){if(u[r])return u[r].exports;var a=u[r]={i:r,l:!1,exports:{}};return i[r].call(a.exports,a,a.exports,f),a.l=!0,a.exports}var u={};return f.m=i,f.c=u,f.i=function(r){return r},f.d=function(r,a,E){f.o(r,a)||Object.defineProperty(r,a,{configurable:!1,enumerable:!0,get:E})},f.n=function(r){var a=r&&r.__esModule?function(){return r.default}:function(){return r};return f.d(a,"a",a),a},f.o=function(r,a){return Object.prototype.hasOwnProperty.call(r,a)},f.p="",f(f.s=3)}([function(i,f,u){"use strict";var r=u(5)();i.exports=function(a){return a!==r&&null!==a}},function(i,f,u){"use strict";i.exports=u(18)()?Symbol:u(20)},function(i,f){i.exports=w},function(i,f,u){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t){return t.split("/")}Object.defineProperty(f,"__esModule",{value:!0}),f.DateRange=void 0;var m=function(){return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function t(e,n){var o=[],s=!0,c=!1,h=void 0;try{for(var y,d=e[Symbol.iterator]();!(s=(y=d.next()).done)&&(o.push(y.value),!n||o.length!==n);s=!0);}catch(T){c=!0,h=T}finally{try{!s&&d.return&&d.return()}finally{if(c)throw h}}return o}(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b=function(){function t(e,n){for(var o=0;o<n.length;o++){var s=n[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();f.extendMoment=function D(t){return t.range=function(e,n){return"string"==typeof e&&P.hasOwnProperty(e)?new S(t(this).startOf(e),t(this).endOf(e)):new S(e,n)},t.rangeFromInterval=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t();if(t.isMoment(o)||(o=t(o)),!o.isValid())throw new Error("Invalid date.");var s=o.clone().add(n,e),c=[];return c.push(t.min(o,s)),c.push(t.max(o,s)),new S(c)},t.rangeFromISOString=function(e){var n=l(e),o=t.parseZone(n[0]),s=t.parseZone(n[1]);return new S(o,s)},t.parseZoneRange=t.rangeFromISOString,t.fn.range=t.range,t.range.constructor=S,t.isRange=function(e){return e instanceof S},t.fn.within=function(e){return e.contains(this.toDate())},t};var g=r(u(2)),L=r(u(1)),P={year:!0,quarter:!0,month:!0,week:!0,day:!0,hour:!0,minute:!0,second:!0},S=f.DateRange=function(){function t(e,n){!function E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var o=e,s=n;if(1===arguments.length||void 0===n)if("object"===(void 0===e?"undefined":p(e))&&2===e.length){var c=m(e,2);o=c[0],s=c[1]}else if("string"==typeof e){var h=l(e),y=m(h,2);o=y[0],s=y[1]}this.start=(0,g.default)(o||0===o?o:-864e13),this.end=(0,g.default)(s||0===s?s:864e13)}return b(t,[{key:"adjacent",value:function(e){var n=this.start.isSame(e.end),o=this.end.isSame(e.start);return n&&e.start.valueOf()<=this.start.valueOf()||o&&e.end.valueOf()>=this.end.valueOf()}},{key:"add",value:function(e){return this.overlaps(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{adjacent:!1})?new this.constructor(g.default.min(this.start,e.start),g.default.max(this.end,e.end)):null}},{key:"by",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{excludeEnd:!1,step:1},o=this;return a({},L.default.iterator,function(){var s=n.step||1,c=Math.abs(o.start.diff(o.end,e))/s,h=n.excludeEnd||!1,y=0;return n.hasOwnProperty("exclusive")&&(h=n.exclusive),{next:function(){var d=o.start.clone().add(y*s,e),T=h?!(y<c):!(y<=c);return y++,{done:T,value:T?void 0:d}}}})}},{key:"byRange",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{excludeEnd:!1,step:1},o=this,s=n.step||1,c=this.valueOf()/e.valueOf()/s,h=Math.floor(c),y=n.excludeEnd||!1,d=0;return n.hasOwnProperty("exclusive")&&(y=n.exclusive),a({},L.default.iterator,function(){return h===1/0?{done:!0}:{next:function(){var T=(0,g.default)(o.start.valueOf()+e.valueOf()*d*s),v=h===c&&y?!(d<h):!(d<=h);return d++,{done:v,value:v?void 0:T}}}})}},{key:"center",value:function(){var e=this.start.valueOf()+this.diff()/2;return(0,g.default)(e)}},{key:"clone",value:function(){return new this.constructor(this.start.clone(),this.end.clone())}},{key:"contains",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{excludeStart:!1,excludeEnd:!1},o=this.start.valueOf(),s=this.end.valueOf(),c=e.valueOf(),h=e.valueOf(),y=n.excludeStart||!1,d=n.excludeEnd||!1;return n.hasOwnProperty("exclusive")&&(y=d=n.exclusive),e instanceof t&&(c=e.start.valueOf(),h=e.end.valueOf()),(o<c||o<=c&&!y)&&(s>h||s>=h&&!d)}},{key:"diff",value:function(e,n){return this.end.diff(this.start,e,n)}},{key:"duration",value:function(e,n){return this.diff(e,n)}},{key:"intersect",value:function(e){var n=this.start.valueOf(),o=this.end.valueOf(),s=e.start.valueOf(),c=e.end.valueOf(),y=s==c;if(n==o){if(n==s||n==c)return null;if(n>s&&n<c)return this.clone()}else if(y){if(s==n||s==o)return null;if(s>n&&s<o)return new this.constructor(s,s)}return n<=s&&s<o&&o<c?new this.constructor(s,o):s<n&&n<c&&c<=o?new this.constructor(n,c):s<n&&n<=o&&o<c?this.clone():n<=s&&s<=c&&c<=o?new this.constructor(s,c):null}},{key:"isEqual",value:function(e){return this.start.isSame(e.start)&&this.end.isSame(e.end)}},{key:"isSame",value:function(e){return this.isEqual(e)}},{key:"overlaps",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{adjacent:!1},o=null!==this.intersect(e);return n.adjacent&&!o?this.adjacent(e):o}},{key:"reverseBy",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{excludeStart:!1,step:1},o=this;return a({},L.default.iterator,function(){var s=n.step||1,c=Math.abs(o.start.diff(o.end,e))/s,h=n.excludeStart||!1,y=0;return n.hasOwnProperty("exclusive")&&(h=n.exclusive),{next:function(){var d=o.end.clone().subtract(y*s,e),T=h?!(y<c):!(y<=c);return y++,{done:T,value:T?void 0:d}}}})}},{key:"reverseByRange",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{excludeStart:!1,step:1},o=this,s=n.step||1,c=this.valueOf()/e.valueOf()/s,h=Math.floor(c),y=n.excludeStart||!1,d=0;return n.hasOwnProperty("exclusive")&&(y=n.exclusive),a({},L.default.iterator,function(){return h===1/0?{done:!0}:{next:function(){var T=(0,g.default)(o.end.valueOf()-e.valueOf()*d*s),v=h===c&&y?!(d<h):!(d<=h);return d++,{done:v,value:v?void 0:T}}}})}},{key:"snapTo",value:function(e){var n=this.clone();return n.start.isSame((0,g.default)(-864e13))||(n.start=n.start.startOf(e)),n.end.isSame((0,g.default)(864e13))||(n.end=n.end.endOf(e)),n}},{key:"subtract",value:function(e){var n=this.start.valueOf(),o=this.end.valueOf(),s=e.start.valueOf(),c=e.end.valueOf();return null===this.intersect(e)?[this]:s<=n&&n<o&&o<=c?[]:s<=n&&n<c&&c<o?[new this.constructor(c,o)]:n<s&&s<o&&o<=c?[new this.constructor(n,s)]:n<s&&s<c&&c<o?[new this.constructor(n,s),new this.constructor(c,o)]:n<s&&s<o&&c<o?[new this.constructor(n,s),new this.constructor(s,o)]:[]}},{key:"toDate",value:function(){return[this.start.toDate(),this.end.toDate()]}},{key:"toString",value:function(){return this.start.format()+"/"+this.end.format()}},{key:"valueOf",value:function(){return this.end.valueOf()-this.start.valueOf()}}]),t}()},function(i,f,u){"use strict";var r,a=u(6),E=u(13),D=u(9),l=u(15);r=i.exports=function(m,p){var b,M,g,x,L;return arguments.length<2||"string"!=typeof m?(x=p,p=m,m=null):x=arguments[2],null==m?(b=g=!0,M=!1):(b=l.call(m,"c"),M=l.call(m,"e"),g=l.call(m,"w")),L={value:p,configurable:b,enumerable:M,writable:g},x?a(E(x),L):L},r.gs=function(m,p,b){var M,g,x,L;return"string"!=typeof m?(x=b,b=p,p=m,m=null):x=arguments[3],null==p?p=void 0:D(p)?null==b?b=void 0:D(b)||(x=b,b=void 0):(x=p,p=b=void 0),null==m?(M=!0,g=!1):(M=l.call(m,"c"),g=l.call(m,"e")),L={get:p,set:b,configurable:M,enumerable:g},x?a(E(x),L):L}},function(i,f,u){"use strict";i.exports=function(){}},function(i,f,u){"use strict";i.exports=u(7)()?Object.assign:u(8)},function(i,f,u){"use strict";i.exports=function(){var r,a=Object.assign;return"function"==typeof a&&(a(r={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),r.foo+r.bar+r.trzy==="razdwatrzy")}},function(i,f,u){"use strict";var r=u(10),a=u(14),E=Math.max;i.exports=function(D,l){var m,p,b,M=E(arguments.length,2);for(D=Object(a(D)),b=function(g){try{D[g]=l[g]}catch(x){m||(m=x)}},p=1;p<M;++p)r(l=arguments[p]).forEach(b);if(void 0!==m)throw m;return D}},function(i,f,u){"use strict";i.exports=function(r){return"function"==typeof r}},function(i,f,u){"use strict";i.exports=u(11)()?Object.keys:u(12)},function(i,f,u){"use strict";i.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},function(i,f,u){"use strict";var r=u(0),a=Object.keys;i.exports=function(E){return a(r(E)?Object(E):E)}},function(i,f,u){"use strict";var r=u(0),a=Array.prototype.forEach,E=Object.create;i.exports=function(l){var m=E(null);return a.call(arguments,function(p){r(p)&&function(l,m){var p;for(p in l)m[p]=l[p]}(Object(p),m)}),m}},function(i,f,u){"use strict";var r=u(0);i.exports=function(a){if(!r(a))throw new TypeError("Cannot use null or undefined");return a}},function(i,f,u){"use strict";i.exports=u(16)()?String.prototype.contains:u(17)},function(i,f,u){"use strict";var r="razdwatrzy";i.exports=function(){return"function"==typeof r.contains&&!0===r.contains("dwa")&&!1===r.contains("foo")}},function(i,f,u){"use strict";var r=String.prototype.indexOf;i.exports=function(a){return r.call(this,a,arguments[1])>-1}},function(i,f,u){"use strict";var r={object:!0,symbol:!0};i.exports=function(){var a;if("function"!=typeof Symbol)return!1;a=Symbol("test symbol");try{String(a)}catch{return!1}return!!r[typeof Symbol.iterator]&&!!r[typeof Symbol.toPrimitive]&&!!r[typeof Symbol.toStringTag]}},function(i,f,u){"use strict";i.exports=function(r){return!!r&&("symbol"==typeof r||!!r.constructor&&"Symbol"===r.constructor.name&&"Symbol"===r[r.constructor.toStringTag])}},function(i,f,u){"use strict";var r,a,E,D,l=u(4),m=u(21),p=Object.create,b=Object.defineProperties,M=Object.defineProperty,g=Object.prototype,x=p(null);if("function"==typeof Symbol){r=Symbol;try{String(r()),D=!0}catch{}}var P,L=(P=p(null),function(S){for(var t,e,n=0;P[S+(n||"")];)++n;return P[S+=n||""]=!0,M(g,t="@@"+S,l.gs(null,function(o){e||(e=!0,M(this,t,l(o)),e=!1)})),t});E=function(P){if(this instanceof E)throw new TypeError("Symbol is not a constructor");return a(P)},i.exports=a=function P(S){var t;if(this instanceof P)throw new TypeError("Symbol is not a constructor");return D?r(S):(t=p(E.prototype),S=void 0===S?"":String(S),b(t,{__description__:l("",S),__name__:l("",L(S))}))},b(a,{for:l(function(P){return x[P]?x[P]:x[P]=a(String(P))}),keyFor:l(function(P){var S;for(S in m(P),x)if(x[S]===P)return S}),hasInstance:l("",r&&r.hasInstance||a("hasInstance")),isConcatSpreadable:l("",r&&r.isConcatSpreadable||a("isConcatSpreadable")),iterator:l("",r&&r.iterator||a("iterator")),match:l("",r&&r.match||a("match")),replace:l("",r&&r.replace||a("replace")),search:l("",r&&r.search||a("search")),species:l("",r&&r.species||a("species")),split:l("",r&&r.split||a("split")),toPrimitive:l("",r&&r.toPrimitive||a("toPrimitive")),toStringTag:l("",r&&r.toStringTag||a("toStringTag")),unscopables:l("",r&&r.unscopables||a("unscopables"))}),b(E.prototype,{constructor:l(a),toString:l("",function(){return this.__name__})}),b(a.prototype,{toString:l(function(){return"Symbol ("+m(this).__description__+")"}),valueOf:l(function(){return m(this)})}),M(a.prototype,a.toPrimitive,l("",function(){var P=m(this);return"symbol"==typeof P?P:P.toString()})),M(a.prototype,a.toStringTag,l("c","Symbol")),M(E.prototype,a.toStringTag,l("c",a.prototype[a.toStringTag])),M(E.prototype,a.toPrimitive,l("c",a.prototype[a.toPrimitive]))},function(i,f,u){"use strict";var r=u(19);i.exports=function(a){if(!r(a))throw new TypeError(a+" is not a symbol");return a}}]))},9434:(I,A,O)=>{"use strict";O.r(A),O.d(A,{BusinessHoursTabComponent:()=>y});var w=O(9417),i=O(7586),u=O(6625),a=O(5749),E=O(980),D=O(177),l=O(6924),m=O(9213),p=O(8834),b=O(7575),M=O(1997),g=O(935),x=O(636),L=O(2765),P=O(9631),S=O(450),t=O(4020),e=O(5416),n=O(8498),o=O(2920);function s(d,T){1&d&&t.nrm(0,"mat-progress-bar",13)}function c(d,T){if(1&d&&(t.j41(0,"div",14)(1,"div",15)(2,"section",16)(3,"p"),t.EFF(4,"Open's on:"),t.k0s(),t.nrm(5,"mat-slide-toggle",17),t.j41(6,"p")(7,"strong"),t.EFF(8),t.nI1(9,"titlecase"),t.k0s()()()(),t.j41(10,"div",18)(11,"mat-form-field")(12,"mat-label"),t.EFF(13,"Opening Time"),t.k0s(),t.nrm(14,"input",19)(15,"mat-timepicker-toggle",20)(16,"mat-timepicker",null,0),t.k0s(),t.j41(18,"mat-form-field")(19,"mat-label"),t.EFF(20,"Closing Time"),t.k0s(),t.nrm(21,"input",21)(22,"mat-timepicker-toggle",20)(23,"mat-timepicker",null,1),t.k0s()(),t.j41(25,"section",22)(26,"mat-checkbox",23),t.EFF(27,"Closed for the day"),t.k0s()()()),2&d){const v=T.$implicit,C=t.sdS(17),_=t.sdS(24);t.Y8G("formGroupName",v.day),t.R7$(8),t.SpI("",t.bMT(9,6,v.day)," "),t.R7$(6),t.Y8G("matTimepicker",C),t.R7$(),t.Y8G("for",C),t.R7$(6),t.Y8G("matTimepicker",_),t.R7$(),t.Y8G("for",_)}}const{range:h}=(0,u.extendMoment)(i);let y=(()=>{class d{constructor(v,C,_,R){this._formBuilder=v,this.storeService=C,this._snackBar=_,this.route=R,this.isLoading=!1,this.store=this.route.parent?.parent?.snapshot.data.store}ngOnInit(){let v=h(i().day(0),i().day(6)),_=Array.from(v.by("days")).map(k=>({date:k.format("YYYY-MM-DD"),openingTime:k,closingTime:k,day:k.format("dddd").toLowerCase(),closed:!1,referenceDate:k,open:!1}));this.days=_;let j=Object.keys(this.store.businessHours).map(k=>({...this.store.businessHours[k]}));this.businessHoursForm=this.createProductForm(j)}createProductForm(v){return this._formBuilder.group({businessHours:this._formBuilder.group({...this.newOptions(v)})})}newOptions(v){let C={};for(let _=0;_<v.length;_++)C[v[_].name.toLowerCase()]=this._formBuilder.group({name:[v[_].name,w.k0.required],openingTime:[new Date(v[_].openingTime),w.k0.required],closingTime:[new Date(v[_].closingTime),w.k0.required],closed:v[_].closed,open:v[_]?.open});return C}formatDateTimeTo12Hrs(v){const C=i(v).format("YYYY-MM-DD hh:mm A");return i(C,"YYYY-MM-DD hh:mm A")}changeStoreStatus(){this.isLoading=!0,this.store.paused=!this.store.paused,this.storeService.saveStore({paused:this.store.paused},this.store._id).pipe((0,E.j)(()=>this.isLoading=!1)).subscribe(v=>{this._snackBar.open(this.store.paused?"Store has been paused":"Store was resumed","ok",{duration:5e3,horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition})})}save(){this.isLoading=!0,this.storeService.saveStore(this.businessHoursForm.getRawValue(),this.store._id).pipe((0,E.j)(()=>this.isLoading=!1)).subscribe(v=>{this._snackBar.open("Opening Hour update","ok",{duration:5e3,horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition})})}static{this.\u0275fac=function(C){return new(C||d)(t.rXU(w.ok),t.rXU(a.n),t.rXU(e.UG),t.rXU(n.nX))}}static{this.\u0275cmp=t.VBU({type:d,selectors:[["app-business-hours-tab"]],inputs:{store:"store"},features:[t.Jv_([a.n])],decls:22,vars:9,consts:[["openTime",""],["closeTime",""],["fxLayout","row","fxLayout.lt-md","column","fxLayoutAlign","space-between center","fxLayoutAlign.lt-md","start start",1,"header"],["fxLayout","column","fxLayoutAlign","start start",1,"mt-3"],[1,"details"],["fxLayout","row","fxLayoutAlign","space-between center","fxLayoutGap","10px"],["mat-button","",3,"click","color"],[1,"mat-18"],["mat-raised-button","","color","primary",3,"click","disabled"],["mode","indeterminate",4,"ngIf"],[3,"formGroup"],["formGroupName","businessHours"],["fxLayout","row","fxLayoutAlign","space-between center","fxLayout.lt-md","column","fxLayoutAlign.lt-md","start start","class","days",3,"formGroupName",4,"ngFor","ngForOf"],["mode","indeterminate"],["fxLayout","row","fxLayoutAlign","space-between center","fxLayout.lt-md","column","fxLayoutAlign.lt-md","start start",1,"days",3,"formGroupName"],["fxLayout.lg-sm","column","fxLayoutAlign.lg-sm","space-around start","fxFlex","20"],["fxLayout","column","fxLayoutAlign","space-between start","fxLayoutGap","10px","fxLayout.lt-md","row","fxLayoutAlign.lt-md","space-between start",1,"example-section"],["color","primary","formControlName","open",1,"example-margin"],["fxLayout","row","fxLayoutAlign","space-around start","fxLayout.lt-md","column","fxLayoutAlign.lt-md","start stretch","fxFlex","60"],["matInput","","formControlName","openingTime",3,"matTimepicker"],["matIconSuffix","",3,"for"],["matInput","","formControlName","closingTime",3,"matTimepicker"],["fxLayout","column","fxLayoutAlign","space-between center","fxFlex","20",1,"example-section"],["formControlName","closed",1,"example-margin"]],template:function(C,_){1&C&&(t.j41(0,"div",2)(1,"div",3)(2,"h3")(3,"strong"),t.EFF(4),t.k0s()(),t.j41(5,"div",4)(6,"p"),t.EFF(7),t.k0s()()(),t.j41(8,"div",5)(9,"button",6),t.bIt("click",function(){return _.changeStoreStatus()}),t.j41(10,"mat-icon",7),t.EFF(11),t.k0s(),t.EFF(12),t.k0s(),t.j41(13,"button",8),t.bIt("click",function(){return _.save()}),t.j41(14,"mat-icon",7),t.EFF(15,"add"),t.k0s(),t.EFF(16," SAVE STORE "),t.k0s()()(),t.nrm(17,"mat-divider"),t.DNE(18,s,1,0,"mat-progress-bar",9),t.j41(19,"form",10)(20,"div",11),t.DNE(21,c,28,8,"div",12),t.k0s()()),2&C&&(t.R7$(4),t.SpI("Opening hours for ",_.store.name,""),t.R7$(3),t.SpI("Set opening hours and special closures for ",_.store.name,""),t.R7$(2),t.Y8G("color",_.store.paused?"primary":"warn"),t.R7$(2),t.SpI("",_.store.paused?"play_arrow":"pause"," "),t.R7$(),t.SpI(" ",_.store.paused?"RESUME STORE":"PAUSE STORE",""),t.R7$(),t.Y8G("disabled",_.isLoading),t.R7$(5),t.Y8G("ngIf",_.isLoading),t.R7$(),t.Y8G("formGroup",_.businessHoursForm),t.R7$(2),t.Y8G("ngForOf",_.days))},dependencies:[D.MD,D.Sq,D.bT,D.PV,w.YN,w.qT,w.me,w.BC,w.cb,w.X1,w.j4,w.JD,w.$R,l.YF,o.DJ,o.BO,o.sA,o.UI,m.m_,m.An,p.Hl,p.$z,b.PO,b.HM,M.w,M.q,g.y1,g.g6,g.EG,g.s8,x.RG,x.rl,x.nJ,x.yw,L.g7,L.So,P.fS,P.fg,S.mV,S.sG],styles:[".dash[_ngcontent-%COMP%]{border:10px black;width:34px;background:#000;height:2px}.days[_ngcontent-%COMP%]{padding:10px 30px;border-bottom:1px solid #ccc}.days[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 12px}.header[_ngcontent-%COMP%]{margin-top:30px;border-bottom:2px #ccc;width:100%;padding:0 20px}.header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0}"]})}}return d})()}}]);