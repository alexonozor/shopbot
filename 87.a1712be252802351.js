"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[87],{1087:(te,_,r)=>{r.r(_),r.d(_,{PaymentModule:()=>ee});var u=r(6814),d=r(1896),o=r(6223),s=r(7700),C=r(4716),e=r(5879),g=r(5372),b=r(3680),f=r(2296),y=r(9157),T=r(2032),h=r(8525),p=r(3814);function q(n,i){if(1&n&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.name)}}function F(n,i){if(1&n&&(e.TgZ(0,"span",19),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.AsE(" (+",((null==t.paymentForm.value||null==t.paymentForm.value.region?null:t.paymentForm.value.region.length)||0)-1," ",2===(null==t.paymentForm.value||null==t.paymentForm.value.region?null:t.paymentForm.value.region.length)?"other":"others",") ")}}function U(n,i){if(1&n&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}const N=function(){return{name:"Yes",value:!0}},I=function(){return{name:"No",value:!1}},J=function(n,i){return[n,i]},L=function(){return["Nigeria","Mauritius","Kenya","Rwanda"]};let x=(()=>{class n{constructor(t,a,m,l){this._formBuilder=t,this.settingsService=a,this.dialogRef=m,this.data=l,this.isLoading=!1}ngOnInit(){this.paymentForm=this.createProductForm()}createProductForm(){return this._formBuilder.group({id:["",o.kI.required],image:["",o.kI.required],name:["",o.kI.required],secretKey:[],publicKey:[],region:[],active:[!1,o.kI.required],description:["",o.kI.required]})}save(){this.isLoading=!0,this.settingsService.createPayment(this.paymentForm.getRawValue()).pipe((0,C.x)(()=>this.isLoading=!1)).subscribe(t=>{this.isLoading=!0,this.dialogRef.close(!0)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(o.qu),e.Y36(g.g),e.Y36(s.so),e.Y36(s.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-payments"]],decls:44,vars:13,consts:[["matDialogTitle",""],["mat-dialog-content",""],["name","storeForm","fxLayout","column","fxFlex","",1,"product","w-100-p",3,"formGroup"],["appearance","outline","floatLabel","always",1,"w-100-p"],["matInput","","placeholder","Icon image code","name","image","formControlName","image","required",""],["matInput","","type","number","placeholder","Position","name","id","formControlName","id","required",""],["matInput","","placeholder","Product Name","name","name","formControlName","name","required",""],["matInput","","placeholder","Secret Key","name","name","formControlName","secretKey","required",""],["matInput","","placeholder","Public Key","name","name","formControlName","publicKey","required",""],["matInput","","placeholder","Product Description","name","description","formControlName","description","rows","5"],["formControlName","active","placeholder","Enabled"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline"],["multiple","","formControlName","region"],["class","example-additional-selection",4,"ngIf"],["mat-dialog-actions","",1,"pt-24"],["mat-button","","mat-dialog-close",""],["mat-raised-button","",1,"mat-accent","mr-16",3,"disabled","click"],[3,"value"],[1,"example-additional-selection"]],template:function(t,a){1&t&&(e.TgZ(0,"h1",0),e._uU(1,"Create Payment Method"),e.qZA(),e.TgZ(2,"div",1)(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),e._uU(6,"Icon"),e.qZA(),e._UZ(7,"input",4),e.qZA(),e.TgZ(8,"mat-form-field",3)(9,"mat-label"),e._uU(10,"Position"),e.qZA(),e._UZ(11,"input",5),e.qZA(),e.TgZ(12,"mat-form-field",3)(13,"mat-label"),e._uU(14,"Name"),e.qZA(),e._UZ(15,"input",6),e.qZA(),e.TgZ(16,"mat-form-field",3)(17,"mat-label"),e._uU(18,"Secret Key"),e.qZA(),e._UZ(19,"input",7),e.qZA(),e.TgZ(20,"mat-form-field",3)(21,"mat-label"),e._uU(22,"Public Key"),e.qZA(),e._UZ(23,"input",8),e.qZA(),e.TgZ(24,"mat-form-field",3)(25,"mat-label"),e._uU(26,"Description"),e.qZA(),e._UZ(27,"textarea",9),e.qZA(),e.TgZ(28,"mat-form-field",3)(29,"mat-select",10),e.YNc(30,q,2,2,"mat-option",11),e.qZA()(),e.TgZ(31,"mat-form-field",12)(32,"mat-label"),e._uU(33,"Region"),e.qZA(),e.TgZ(34,"mat-select",13)(35,"mat-select-trigger"),e._uU(36),e.YNc(37,F,2,2,"span",14),e.qZA(),e.YNc(38,U,2,2,"mat-option",11),e.qZA()()()(),e.TgZ(39,"div",15)(40,"button",16),e._uU(41,"Cancel"),e.qZA(),e.TgZ(42,"button",17),e.NdJ("click",function(){return a.save()}),e._uU(43),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("formGroup",a.paymentForm),e.xp6(27),e.Q6J("ngForOf",e.WLB(9,J,e.DdM(7,N),e.DdM(8,I))),e.xp6(6),e.hij(" ",(null==a.paymentForm.value||null==a.paymentForm.value.region?null:a.paymentForm.value.region[0])||""," "),e.xp6(1),e.Q6J("ngIf",((null==a.paymentForm.value||null==a.paymentForm.value.region||null==a.paymentForm.value.region.value?null:a.paymentForm.value.region.value.length)||0)>1),e.xp6(1),e.Q6J("ngForOf",e.DdM(12,L)),e.xp6(4),e.Q6J("disabled",!a.paymentForm.valid),e.xp6(1),e.Oqu(a.isLoading?"Please wait..":"Create Payment Method"))},dependencies:[u.sg,u.O5,b.ey,f.lW,y.KE,y.hX,T.Nt,h.gD,h.$L,s.ZT,s.uh,s.xY,s.H8,o._Y,o.Fj,o.wV,o.JJ,o.JL,o.Q7,o.sg,o.u,p.xw,p.yH]}),n})();function w(n,i){if(1&n&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.name)}}function M(n,i){if(1&n&&(e.TgZ(0,"span",19),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.AsE(" (+",((null==t.paymentForm.value||null==t.paymentForm.value.region?null:t.paymentForm.value.region.length)||0)-1," ",2===(null==t.paymentForm.value||null==t.paymentForm.value.region?null:t.paymentForm.value.region.length)?"other":"others",") ")}}function D(n,i){if(1&n&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}const K=function(){return{name:"Yes",value:!0}},Y=function(){return{name:"No",value:!1}},O=function(n,i){return[n,i]},Q=function(){return["Nigeria","Mauritius","Kenya","Rwanda"]};let P=(()=>{class n{constructor(t,a,m,l){this._formBuilder=t,this.settingsService=a,this.dialogRef=m,this.data=l,this.isLoading=!1,this.payment=l}ngOnInit(){this.paymentForm=this.createProductForm()}createProductForm(){return this._formBuilder.group({id:[this.payment.id,o.kI.required],image:[this.payment.image,o.kI.required],name:[this.payment.name,o.kI.required],region:[this.payment.region],secretKey:[this.payment.secretKey],publicKey:[this.payment.publicKey],active:[this.payment.active,o.kI.required],description:[this.payment.description,o.kI.required]})}save(){this.isLoading=!0,this.settingsService.updatePayment(this.payment._id,this.paymentForm.getRawValue()).pipe((0,C.x)(()=>this.isLoading=!1)).subscribe(t=>{this.isLoading=!0,this.dialogRef.close(!0)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(o.qu),e.Y36(g.g),e.Y36(s.so),e.Y36(s.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-edit-payments"]],decls:44,vars:13,consts:[["matDialogTitle",""],["mat-dialog-content",""],["name","storeForm","fxLayout","column","fxFlex","",1,"product","w-100-p",3,"formGroup"],["appearance","outline","floatLabel","always",1,"w-100-p"],["matInput","","placeholder","Icon image code","name","image","formControlName","image","required",""],["matInput","","type","number","placeholder","Position","name","id","formControlName","id","required",""],["matInput","","placeholder","Product Name","name","name","formControlName","name","required",""],["matInput","","placeholder","Secret Key","name","name","formControlName","secretKey","required",""],["matInput","","placeholder","Public Key","name","name","formControlName","publicKey","required",""],["matInput","","placeholder","Product Description","name","description","formControlName","description","rows","5"],["formControlName","active","placeholder","Enabled"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline"],["multiple","","formControlName","region"],["class","example-additional-selection",4,"ngIf"],["mat-dialog-actions","",1,"pt-24"],["mat-button","","mat-dialog-close",""],["mat-raised-button","",1,"mat-accent","mr-16",3,"disabled","click"],[3,"value"],[1,"example-additional-selection"]],template:function(t,a){1&t&&(e.TgZ(0,"h1",0),e._uU(1,"Edit Payment Method"),e.qZA(),e.TgZ(2,"div",1)(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),e._uU(6,"Icon"),e.qZA(),e._UZ(7,"input",4),e.qZA(),e.TgZ(8,"mat-form-field",3)(9,"mat-label"),e._uU(10,"Position"),e.qZA(),e._UZ(11,"input",5),e.qZA(),e.TgZ(12,"mat-form-field",3)(13,"mat-label"),e._uU(14,"Name"),e.qZA(),e._UZ(15,"input",6),e.qZA(),e.TgZ(16,"mat-form-field",3)(17,"mat-label"),e._uU(18,"Secret Key"),e.qZA(),e._UZ(19,"input",7),e.qZA(),e.TgZ(20,"mat-form-field",3)(21,"mat-label"),e._uU(22,"Public Key"),e.qZA(),e._UZ(23,"input",8),e.qZA(),e.TgZ(24,"mat-form-field",3)(25,"mat-label"),e._uU(26,"Description"),e.qZA(),e._UZ(27,"textarea",9),e.qZA(),e.TgZ(28,"mat-form-field",3)(29,"mat-select",10),e.YNc(30,w,2,2,"mat-option",11),e.qZA()(),e.TgZ(31,"mat-form-field",12)(32,"mat-label"),e._uU(33,"Region"),e.qZA(),e.TgZ(34,"mat-select",13)(35,"mat-select-trigger"),e._uU(36),e.YNc(37,M,2,2,"span",14),e.qZA(),e.YNc(38,D,2,2,"mat-option",11),e.qZA()()()(),e.TgZ(39,"div",15)(40,"button",16),e._uU(41,"Cancel"),e.qZA(),e.TgZ(42,"button",17),e.NdJ("click",function(){return a.save()}),e._uU(43),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("formGroup",a.paymentForm),e.xp6(27),e.Q6J("ngForOf",e.WLB(9,O,e.DdM(7,K),e.DdM(8,Y))),e.xp6(6),e.hij(" ",(null==a.paymentForm.value||null==a.paymentForm.value.region?null:a.paymentForm.value.region[0])||""," "),e.xp6(1),e.Q6J("ngIf",((null==a.paymentForm.value||null==a.paymentForm.value.region||null==a.paymentForm.value.region.value?null:a.paymentForm.value.region.value.length)||0)>1),e.xp6(1),e.Q6J("ngForOf",e.DdM(12,Q)),e.xp6(4),e.Q6J("disabled",!a.paymentForm.valid),e.xp6(1),e.Oqu(a.isLoading?"Please wait..":"Update Payment Method"))},dependencies:[u.sg,u.O5,b.ey,f.lW,y.KE,y.hX,T.Nt,h.gD,h.$L,s.ZT,s.uh,s.xY,s.H8,o._Y,o.Fj,o.wV,o.JJ,o.JL,o.Q7,o.sg,o.u,p.xw,p.yH]}),n})();var R=r(6567),E=r(617),Z=r(7988),S=r(9038),k=r(2599);function $(n,i){1&n&&(e.TgZ(0,"div",22),e._UZ(1,"div",23),e._uU(2," Active "),e.qZA())}function B(n,i){1&n&&(e.TgZ(0,"div",22),e._UZ(1,"div",24),e._uU(2," Inactive "),e.qZA())}function G(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(t);const m=e.oxw().$implicit,l=e.oxw();return e.KtG(l.viewDetails(m))}),e.TgZ(1,"mat-icon"),e._uU(2,"done"),e.qZA(),e._uU(3," Enable "),e.qZA()}}function H(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"tr",8)(1,"th",9),e._UZ(2,"img",10),e.TgZ(3,"div",11)(4,"div",12),e._uU(5),e.qZA(),e.TgZ(6,"div",13),e._uU(7),e.qZA()()(),e.TgZ(8,"td",14),e.YNc(9,$,3,0,"div",15),e.YNc(10,B,3,0,"div",15),e.qZA(),e.TgZ(11,"td",14)(12,"mat-slide-toggle",16),e.NdJ("ngModelChange",function(m){const c=e.CHM(t).$implicit;return e.KtG(c.active=m)})("change",function(m){const c=e.CHM(t).$implicit,v=e.oxw();return e.KtG(v.onChange(c,m))}),e.qZA()(),e.TgZ(13,"td",14)(14,"button",17)(15,"mat-icon"),e._uU(16,"more_vert"),e.qZA()(),e.TgZ(17,"mat-menu",18,19),e.NdJ("click",function(m){return m.stopPropagation()}),e.TgZ(19,"button",20),e.NdJ("click",function(m){const l=e.CHM(t),c=l.index,v=l.$implicit;return e.oxw().delete(c,v._id),e.KtG(m.stopPropagation())}),e.TgZ(20,"mat-icon"),e._uU(21,"delete"),e.qZA(),e._uU(22," Delete"),e.qZA(),e.YNc(23,G,4,0,"button",21),e.TgZ(24,"button",20),e.NdJ("click",function(){const l=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.viewDetails(l))}),e.TgZ(25,"mat-icon"),e._uU(26,"edit"),e.qZA(),e._uU(27," Edit / View "),e.qZA()()()()}if(2&n){const t=i.$implicit,a=e.MAs(18);e.xp6(2),e.Q6J("src",t.image,e.LSH),e.xp6(3),e.Oqu(t.name),e.xp6(2),e.Oqu(t.description),e.xp6(2),e.Q6J("ngIf",t.active),e.xp6(1),e.Q6J("ngIf",!t.active),e.xp6(2),e.Q6J("ngModel",t.active),e.xp6(2),e.Q6J("matMenuTriggerFor",a),e.xp6(9),e.Q6J("ngIf",!t.active)}}let V=(()=>{class n{constructor(t,a,m,l){this.settingsService=t,this._matDialog=a,this.router=m,this.route=l,this.payments=[]}ngOnInit(){this.payments=this.route.snapshot.data.payments}delete(t,a){this.confirmDialogRef=this._matDialog.open(R.X,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Payment?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete this Payment?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(m=>{m&&(this.payments.splice(t,1),this.settingsService.deletePayment(a).subscribe()),this.confirmDialogRef=null})}addNewPayment(){this._matDialog.open(x,{width:"500px",disableClose:!1}).afterClosed().subscribe(a=>{a&&this.settingsService.getPayments().subscribe(m=>{this.payments=m})})}onChange(t,a){this.settingsService.updatePayment(t._id,{active:a.checked}).subscribe(()=>{})}viewDetails(t){this._matDialog.open(P,{data:t,width:"500px",disableClose:!1}).afterClosed().subscribe(m=>{m&&this.settingsService.getPayments().subscribe(l=>{this.payments=l})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.g),e.Y36(s.uw),e.Y36(d.F0),e.Y36(d.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-list-payments"]],decls:20,vars:1,consts:[[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],["mat-subheader",""],[1,"w-full","text-sm","text-left","text-gray-500"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50"],["scope","col",1,"px-6","py-3"],["class","bg-white border-b   hover:bg-gray-50 ",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","end end"],["mat-fab","","color","primary","aria-label","Add Store",1,"fixed",3,"click"],[1,"bg-white","border-b","hover:bg-gray-50"],["scope","row",1,"flex","items-center","px-6","py-4","text-gray-900","whitespace-nowrap","dark:text-white"],[1,"w-10","h-10","rounded-full",3,"src"],[1,"pl-3"],[1,"text-base","text-black","font-semibold"],[1,"font-normal","text-gray-500"],[1,"px-6","py-4"],["class","flex items-center",4,"ngIf"],["color","primary",1,"mx-8",3,"ngModel","ngModelChange","change"],["mat-icon-button","",3,"matMenuTriggerFor"],[3,"click"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"ngIf"],[1,"flex","items-center"],[1,"h-2.5","w-2.5","rounded-full","bg-green-500","mr-2"],[1,"h-2.5","w-2.5","rounded-full","bg-red-500","mr-2"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Payment Methods"),e.qZA(),e.TgZ(3,"table",2)(4,"thead",3)(5,"tr")(6,"th",4),e._uU(7," Name "),e.qZA(),e.TgZ(8,"th",4),e._uU(9," Visibility "),e.qZA(),e.TgZ(10,"th",4),e._uU(11," Status "),e.qZA(),e.TgZ(12,"th",4),e._uU(13," Action "),e.qZA()()(),e.TgZ(14,"tbody"),e.YNc(15,H,28,8,"tr",5),e.qZA()()(),e.TgZ(16,"div",6)(17,"button",7),e.NdJ("click",function(){return a.addNewPayment()}),e.TgZ(18,"mat-icon"),e._uU(19,"add"),e.qZA()()()),2&t&&(e.xp6(15),e.Q6J("ngForOf",a.payments))},dependencies:[u.sg,u.O5,f.RK,f.cs,E.Hw,Z.VK,Z.OP,Z.p6,S.gs,k.Rr,o.JJ,o.On,p.xw,p.Wh]}),n})();var A=r(5951);const W=[{path:"",component:V,resolve:{payments:A.sG}},{path:"create",component:x},{path:":id/edit",component:P,resolve:{payment:A.sG}}];let X=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[d.Bz.forChild(W),d.Bz]}),n})();var j=r(6005),z=r(1447);let ee=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[g.g],imports:[u.ez,X,j.q,o.u5,o.UX,z.o9]}),n})()}}]);