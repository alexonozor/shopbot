"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[294],{2264:(y,g,o)=>{o.d(g,{w:()=>O});var C=o(980),f=o(1626),j=o(1413),r=o(5351),e=o(3953),p=o(177),_=o(8498),x=o(5312);let v=(()=>{class i{constructor(t){this.http=t,this.endpoint=x.c.hostServer}getMedias(){return this.http.get(`${this.endpoint}/media`)}getMedia(t){return this.http.get(`${this.endpoint}/media/${t}`)}updateMedia(t,a){return this.http.put(`${this.endpoint}/media/${t}`,a)}saveMedia(t){return this.http.post(`${this.endpoint}/media`,t)}deleteMedia(t){return this.http.delete(`${this.endpoint}/media/${t}`)}uploadCsv(t){return this.http.post(`${this.endpoint}/medias/upload/csv`,t,{reportProgress:!0,observe:"events"})}static#e=this.\u0275fac=function(a){return new(a||i)(e.KVO(f.Qq))};static#t=this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var M=o(8834),b=o(9213),l=o(6850),E=o(7575),m=o(2920);const h=()=>["jpg","png","jpeg"],F=()=>["pdf","xls"];function T(i,s){1&i&&e.nrm(0,"div",6)}function I(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",2),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.select(n.media))}),e.j41(1,"button",3),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.delete())}),e.j41(2,"mat-icon",4),e.EFF(3,"delete"),e.k0s()(),e.DNE(4,T,1,0,"div",5),e.k0s()}if(2&i){const t=e.XpG();e.xc7("background-image","url("+t.media.url+")"),e.R7$(4),e.Y8G("ngIf",t.media.isSelected)}}function k(i,s){1&i&&e.nrm(0,"div",6)}function G(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",7),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.select(n.media))}),e.j41(1,"p",8)(2,"mat-icon",9),e.EFF(3,"description"),e.k0s()(),e.j41(4,"span",10),e.EFF(5),e.k0s(),e.j41(6,"span",11),e.EFF(7),e.k0s(),e.j41(8,"button",3),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.delete())}),e.j41(9,"mat-icon",4),e.EFF(10,"delete"),e.k0s()(),e.DNE(11,k,1,0,"div",5),e.k0s()}if(2&i){const t=e.XpG();e.R7$(5),e.JRh(t.media.fileName),e.R7$(2),e.JRh(t.media.format),e.R7$(4),e.Y8G("ngIf",t.media.isSelected)}}let L=(()=>{class i{constructor(){this.deleteMedia=new e.bkB,this.selectedMedia=new e.bkB}delete(){this.deleteMedia.emit()}select(t){this.selectedMedia.emit(t)}static#e=this.\u0275fac=function(a){return new(a||i)};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-file-media-card"]],inputs:{media:"media"},outputs:{deleteMedia:"deleteMedia",selectedMedia:"selectedMedia"},decls:2,vars:4,consts:[["class","mat-elevation-z8 relative rounded-lg bg-center bg-no-repeat bg-cover h-52 m-5","fxLayout","column","fxLayoutAlign","center center",3,"background-image","click",4,"ngIf"],["class","mat-elevation-z8 relative rounded-lg h-52 bg-gray-200 m-5","fxLayout","column","fxLayoutAlign","center center",3,"click",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"mat-elevation-z8","relative","rounded-lg","bg-center","bg-no-repeat","bg-cover","h-52","m-5",3,"click"],["mat-icon-button","","color","warn",3,"click"],[1,"mat-18"],["class","p-3 bg-blue-500 rounded-full absolute right-2 bottom-2",4,"ngIf"],[1,"p-3","bg-blue-500","rounded-full","absolute","right-2","bottom-2"],["fxLayout","column","fxLayoutAlign","center center",1,"mat-elevation-z8","relative","rounded-lg","h-52","bg-gray-200","m-5",3,"click"],[1,"text-5xl"],[1,"mat-18","material-icons-outlined"],[1,"text-center"],[1,"text-center","uppercase","my-5"]],template:function(a,n){1&a&&e.DNE(0,I,5,3,"div",0)(1,G,12,3,"div",1),2&a&&(e.Y8G("ngIf",e.lJ4(2,h).includes(n.media.format)),e.R7$(),e.Y8G("ngIf",e.lJ4(3,F).includes(n.media.format)))},dependencies:[p.bT,M.iY,b.An]})}return i})();function N(i,s){if(1&i){const t=e.RV6();e.j41(0,"app-file-media-card",3),e.bIt("selectedMedia",function(n){e.eBV(t);const d=e.XpG().ngIf,c=e.XpG();return e.Njj(c.selectedMedia(n,d))})("deleteMedia",function(){const n=e.eBV(t).$implicit,d=e.XpG(2);return e.Njj(d.delete(n._id))}),e.k0s()}2&i&&e.Y8G("media",s.$implicit)}function $(i,s){if(1&i&&(e.j41(0,"div")(1,"div",1),e.DNE(2,N,1,1,"app-file-media-card",2),e.k0s()()),2&i){const t=s.ngIf;e.R7$(2),e.Y8G("ngForOf",t)}}let S=(()=>{class i{constructor(t){this.mediaService=t,this.browseMediaEvent=new e.bkB,this.chosenMediaEvent=new e.bkB}ngOnInit(){this.events.subscribe(()=>{this.loadMedias()}),this.loadMedias()}loadMedias(){this.media$=this.mediaService.getMedias()}delete(t){this.mediaService.deleteMedia(t).subscribe(()=>{this.loadMedias()})}openMedia(){this.browseMediaEvent.emit()}selectedMedia(t,a){a.forEach(n=>{n.isSelected=!1}),t.isSelected=!0,this.chosenMediaEvent.emit(t)}static#e=this.\u0275fac=function(a){return new(a||i)(e.rXU(v))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["portal-lists-all-media"]],inputs:{events:"events"},outputs:{browseMediaEvent:"browseMediaEvent",chosenMediaEvent:"chosenMediaEvent"},decls:2,vars:3,consts:[[4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","start start","fxLayoutGap","10px",1,"w-full","p-5"],["fxFlex","300px",3,"media","selectedMedia","deleteMedia",4,"ngFor","ngForOf"],["fxFlex","300px",3,"selectedMedia","deleteMedia","media"]],template:function(a,n){1&a&&(e.DNE(0,$,3,1,"div",0),e.nI1(1,"async")),2&a&&e.Y8G("ngIf",e.bMT(1,1,n.media$))},dependencies:[p.Sq,p.bT,m.DJ,m.BO,m.sA,m.UI,L,p.Jj]})}return i})();function D(i,s){1&i&&e.nrm(0,"mat-progress-bar",15)}function V(i,s){if(1&i){const t=e.RV6();e.j41(0,"portal-lists-all-media",16),e.bIt("chosenMediaEvent",function(n){e.eBV(t);const d=e.XpG();return e.Njj(d.selectedMedia(n))})("browseMediaEvent",function(){e.eBV(t),e.XpG();const n=e.sdS(2);return e.Njj(n.click())}),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("events",t.eventsSubject.asObservable())}}function A(i,s){}function B(i,s){}function X(i,s){}function R(i,s){}function U(i,s){if(1&i){const t=e.RV6();e.j41(0,"mat-dialog-actions",17)(1,"button",18),e.EFF(2,"CANCEL"),e.k0s(),e.j41(3,"button",19),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.selectMedia())}),e.EFF(4,"SELECT"),e.k0s()()}}let O=(()=>{class i{constructor(t,a,n,d,c,u){this.location=t,this.route=a,this.router=n,this.mediaService=d,this.dialogRef=c,this.data=u,this.selectedTab=0,this.eventsSubject=new j.B}ngOnInit(){this.route.queryParams.subscribe(t=>{this.selectedTab=t.tab||0})}tabChanged(t){const a=Object.assign({},this.route.snapshot.queryParams);a.tab=t.index,this.router.navigate(["."],{queryParams:a,relativeTo:this.route})}back(){this.location.back()}emitEventToChild(){this.eventsSubject.next()}onFileLogoSelected(t){this.uploadProgress=0;const a=t.target.files[0];if(a){this.fileName=a.name;const n=new FormData;n.append("file",a);const d=this.mediaService.saveMedia(n).pipe((0,C.j)(()=>this.reset()));this.uploadSub=d.subscribe(c=>{c.type==f.hv.UploadProgress?this.uploadProgress=Math.round(c.loaded/c.total*100):c.hasOwnProperty("body")})}}selectedMedia(t){this.selectedMediaData=t}selectMedia(){this.dialogRef.close(this.selectedMediaData)}reset(){this.emitEventToChild(),this.uploadProgress=null,this.uploadSub=null}static#e=this.\u0275fac=function(a){return new(a||i)(e.rXU(p.aZ),e.rXU(_.nX),e.rXU(_.Ix),e.rXU(v),e.rXU(r.CP,8),e.rXU(r.Vh,8))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-media"]],decls:26,vars:3,consts:[["logoUpload",""],["type","file",1,"file-input",3,"change"],["fxLayout","row","fxLayoutAlign","space-between center",1,"card","bg-white","mat-elevation-z2","px-2","py-2"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"text-lg","font-thin"],[1,"material-icons-outlined"],["mat-raised-button","","color","primary","type","submit",1,"material-icons-outlined",3,"click"],["mode","indeterminate",4,"ngIf"],[3,"selectedTabChange","selectedIndex"],["label","ALL"],["matTabContent",""],["label","IMAGES"],["label","DOCUMENTS"],["label","VIDEOS"],["label","AUDIO"],["align","start",4,"ngIf"],["mode","indeterminate"],[3,"chosenMediaEvent","browseMediaEvent","events"],["align","start"],["mat-button","","matDialogClose",""],["mat-raised-button","","color","primary",3,"click"]],template:function(a,n){if(1&a){const d=e.RV6();e.j41(0,"mat-dialog-content")(1,"input",1,0),e.bIt("change",function(u){return e.eBV(d),e.Njj(n.onFileLogoSelected(u))}),e.k0s(),e.j41(3,"div",2)(4,"span",3)(5,"mat-icon",4),e.EFF(6,"perm_media"),e.k0s(),e.j41(7,"span"),e.EFF(8," Media"),e.k0s()(),e.j41(9,"button",5),e.bIt("click",function(){e.eBV(d);const u=e.sdS(2);return e.Njj(u.click())}),e.j41(10,"mat-icon"),e.EFF(11,"add_photo_alternate"),e.k0s(),e.EFF(12," Add Media "),e.k0s()(),e.DNE(13,D,1,0,"mat-progress-bar",6),e.j41(14,"mat-tab-group",7),e.bIt("selectedTabChange",function(u){return e.eBV(d),e.Njj(n.tabChanged(u))}),e.j41(15,"mat-tab",8),e.DNE(16,V,1,1,"ng-template",9),e.k0s(),e.j41(17,"mat-tab",10),e.DNE(18,A,0,0,"ng-template",9),e.k0s(),e.j41(19,"mat-tab",11),e.DNE(20,B,0,0,"ng-template",9),e.k0s(),e.j41(21,"mat-tab",12),e.DNE(22,X,0,0,"ng-template",9),e.k0s(),e.j41(23,"mat-tab",13),e.DNE(24,R,0,0,"ng-template",9),e.k0s()()(),e.DNE(25,U,5,0,"mat-dialog-actions",14)}2&a&&(e.R7$(13),e.Y8G("ngIf",n.uploadProgress),e.R7$(),e.Y8G("selectedIndex",n.selectedTab),e.R7$(11),e.Y8G("ngIf",n.dialogRef))},dependencies:[p.bT,M.$z,b.An,l.$L,l.mq,l.T8,E.HM,r.tx,r.E7,r.Yi,m.DJ,m.BO,m.sA,S],styles:[".file-input[_ngcontent-%COMP%]{display:none}"]})}return i})()},294:(y,g,o)=>{o.r(g),o.d(g,{MediaModule:()=>b});var C=o(177),f=o(8498),j=o(2264),r=o(3953);const e=[{path:"",component:j.w}];let p=(()=>{class l{static#e=this.\u0275fac=function(h){return new(h||l)};static#t=this.\u0275mod=r.$C({type:l});static#i=this.\u0275inj=r.G2t({imports:[f.iI.forChild(e),f.iI]})}return l})();var _=o(9417),x=o(6924),v=o(3457),M=o(3887);let b=(()=>{class l{static#e=this.\u0275fac=function(h){return new(h||l)};static#t=this.\u0275mod=r.$C({type:l});static#i=this.\u0275inj=r.G2t({imports:[C.MD,p,v.G,x.YF,_.X1,M.G]})}return l})()}}]);