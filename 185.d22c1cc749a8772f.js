(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[185],{9977:(E,N,u)=>{"use strict";u.d(N,{h:()=>s});var O=u(5619),v=u(553),a=u(5879),h=u(9862);let s=(()=>{class t{constructor(m){this._httpClient=m,this.hostServer=v.N.hostServer,this.onMenuChanged=new O.X({})}resolve(m,l){return this.routeParams=m.params,new Promise((x,b)=>{Promise.all([this.getMenu()]).then(()=>{x(null)},b)})}getMenu(){return new Promise((m,l)=>{this._httpClient.get(`${this.hostServer}/menus/`+this.routeParams.menuId).subscribe(x=>{this.menu=x,this.onMenuChanged.next(this.menu),m(x)},l)})}saveMenu(m){return new Promise((l,x)=>{this._httpClient.post("api/e-commerce-menus/"+m._id,m).subscribe(b=>{l(b)},x)})}updateMenu(m){return this._httpClient.put(`${this.hostServer}/menus/${this.menu._id}`,m)}addFoodToMenu(m,l){return this._httpClient.post(`${this.hostServer}/menus/add/food`,{foodId:m,menuId:l})}removeFoodToMenu(m,l){return this._httpClient.delete(`${this.hostServer}/menus/remove/food`,{body:{foodId:m,menuId:l}})}updateStatus(m){return this._httpClient.put(`${this.hostServer}/menus/${this.menu._id}/status/${this.menu.user._id}`,m)}addMenu(m){return this._httpClient.post(`${this.hostServer}/menus`,m)}static#t=this.\u0275fac=function(l){return new(l||t)(a.LFG(h.eN))};static#e=this.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac})}return t})()},4151:(E,N,u)=>{"use strict";u.d(N,{d:()=>s});var O=u(5619),v=u(553),a=u(5879),h=u(9862);let s=(()=>{class t{constructor(m){this._httpClient=m,this.hostServer=v.N.hostServer,this.onStoreChanged=new O.X({})}resolve(m,l){return this.routeParams=m.params,new Promise((x,b)=>{Promise.all([this.getStore()]).then(()=>{x(null)},b)})}getStore(m){return new Promise((l,x)=>{this._httpClient.get(`${this.hostServer}/stores/${m||this.routeParams.id}`).subscribe(b=>{this.store=b,this.onStoreChanged.next(this.store),l(b)},x)})}uploadLogo(m,l){return this._httpClient.post(`${this.hostServer}/stores/upload/${l}/logo`,m,{reportProgress:!0,observe:"events"})}uploadBanner(m,l){return this._httpClient.post(`${this.hostServer}/stores/upload/${l}/banner`,m,{reportProgress:!0,observe:"events"})}saveStore(m,l){return this._httpClient.put(`${this.hostServer}/stores/${l}`,m)}addStore(m){return this._httpClient.post(`${this.hostServer}/stores`,m)}addItemToPopular(m){return this._httpClient.post(`${this.hostServer}/stores/add-item-to-popular`,m)}removeItemFromPopular(m){return this._httpClient.post(`${this.hostServer}/stores/remove-item-from-popular`,m)}getStoreOrders(m){return this._httpClient.get(`${this.hostServer}/orders/store/${m}/orders`)}deleteStoreOrders(m){return this._httpClient.delete(`${this.hostServer}/orders/${m}`)}updateOrderStatus(m,l,x){return this._httpClient.put(`${this.hostServer}/orders/${m}/status/${l}`,x)}static#t=this.\u0275fac=function(l){return new(l||t)(a.LFG(h.eN))};static#e=this.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac})}return t})()},4970:(E,N,u)=>{"use strict";u.d(N,{a:()=>l});var O=u(6814),v=u(6223),a=u(1447),h=u(940),s=u(6005),t=u(232),_=u(9023),m=u(5879);let l=(()=>{class x{static#t=this.\u0275fac=function(k){return new(k||x)};static#e=this.\u0275mod=m.oAB({type:x});static#o=this.\u0275inj=m.cJS({providers:[h.O,t.y],imports:[s.q,O.ez,v.u5,v.UX,a.o9,_.EC,_.Yy,_.K]})}return x})()},784:(E,N,u)=>{"use strict";u.d(N,{c:()=>gn});var O=u(1896),v=u(6567),a=u(6223),h=u(4716),s=u(7700),t=u(5879),_=u(9483),m=u(6284),l=u(6814),x=u(3680),b=u(2296),S=u(9157),k=u(2032),M=u(8525),T=u(3814);function I(o,r){if(1&o&&(t.TgZ(0,"mat-option",11),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e._id),t.xp6(1),t.Oqu(e.name)}}let L=(()=>{class o{constructor(e,i,n,c,f){this._formBuilder=e,this.auth=i,this.storeService=n,this.dialogRef=c,this.data=f,this.isLoading=!1}ngOnInit(){this.storeForm=this.createProductForm()}createProductForm(){return this._formBuilder.group({name:["",a.kI.required],owner:[this.auth.getUser._id,a.kI.required],merchant:["",a.kI.required],description:["",a.kI.required]})}save(){this.isLoading=!0,this.storeService.createStore(this.storeForm.getRawValue()).pipe((0,h.x)(()=>this.isLoading=!1)).subscribe(e=>{this.isLoading=!0,this.dialogRef.close(!0)})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(a.qu),t.Y36(_.e),t.Y36(m._),t.Y36(s.so),t.Y36(s.WI))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-stores"]],decls:22,vars:4,consts:[["matDialogTitle",""],["mat-dialog-content",""],["name","storeForm","fxLayout","column","fxFlex","",1,"product","w-100-p",3,"formGroup"],["appearance","outline","floatLabel","always",1,"w-100-p"],["matInput","","placeholder","Product Name","name","name","formControlName","name","required",""],["matInput","","placeholder","Product Description","name","description","formControlName","description","rows","5"],["formControlName","merchant"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions","",1,"pt-24"],["mat-button","","mat-dialog-close",""],["mat-raised-button","",1,"mat-accent","mr-16",3,"disabled","click"],[3,"value"]],template:function(i,n){1&i&&(t.TgZ(0,"h1",0),t._uU(1,"Add Store"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),t._uU(6,"Name"),t.qZA(),t._UZ(7,"input",4),t.qZA(),t.TgZ(8,"mat-form-field",3)(9,"mat-label"),t._uU(10,"Description"),t.qZA(),t._UZ(11,"textarea",5),t.qZA(),t.TgZ(12,"mat-form-field",3)(13,"mat-label"),t._uU(14,"Select Merchant"),t.qZA(),t.TgZ(15,"mat-select",6),t.YNc(16,I,2,2,"mat-option",7),t.qZA()()()(),t.TgZ(17,"div",8)(18,"button",9),t._uU(19,"Cancel"),t.qZA(),t.TgZ(20,"button",10),t.NdJ("click",function(){return n.save()}),t._uU(21),t.qZA()()),2&i&&(t.xp6(3),t.Q6J("formGroup",n.storeForm),t.xp6(13),t.Q6J("ngForOf",n.data),t.xp6(4),t.Q6J("disabled",!n.storeForm.valid),t.xp6(1),t.Oqu(n.isLoading?"Please wait..":"Create Store"))},dependencies:[l.sg,x.ey,b.lW,S.KE,S.hX,k.Nt,M.gD,s.ZT,s.uh,s.xY,s.H8,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,T.xw,T.yH]})}return o})();var q=u(9308),y=u(4151),d=u(617),p=u(7988),g=u(2599),Z=u(7509);function A(o,r){if(1&o&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(e.name)}}function U(o,r){if(1&o&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function D(o,r){if(1&o&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e._id),t.xp6(1),t.Oqu(e.name)}}const F=function(){return{standalone:!0}},P=function(){return{name:"Enabled",value:!0}},Y=function(){return{name:"Disable",value:!1}},xt=function(o,r){return[o,r]},bt=function(){return["Nigeria","Mauritius"]};function Tt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"form",10)(1,"div",11)(2,"div",12)(3,"mat-form-field",13)(4,"mat-label"),t._uU(5,"Filter Store name"),t.qZA(),t.TgZ(6,"input",14),t.NdJ("ngModelChange",function(n){t.CHM(e);const c=t.oxw();return t.KtG(c.name=n)}),t.qZA()()(),t.TgZ(7,"div",15)(8,"div",12)(9,"mat-form-field",13)(10,"mat-label"),t._uU(11,"Filter by Active "),t.qZA(),t.TgZ(12,"mat-select",16),t.YNc(13,A,2,2,"mat-option",17),t.qZA()()(),t.TgZ(14,"div",12)(15,"mat-form-field",18)(16,"mat-label"),t._uU(17,"Filter by Country "),t.qZA(),t.TgZ(18,"mat-select",19),t.YNc(19,U,2,2,"mat-option",17),t.qZA()()(),t.TgZ(20,"div",12)(21,"mat-form-field",18)(22,"mat-label"),t._uU(23,"Filter by Category"),t.qZA(),t.TgZ(24,"mat-select",20),t.YNc(25,D,2,2,"mat-option",17),t.qZA()()(),t.TgZ(26,"button",21),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.clearFilerSet())}),t._uU(27," Clear Filters "),t.qZA()()()()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.filterForm),t.xp6(6),t.Q6J("ngModel",e.name)("ngModelOptions",t.DdM(6,F)),t.xp6(7),t.Q6J("ngForOf",t.WLB(9,xt,t.DdM(7,P),t.DdM(8,Y))),t.xp6(6),t.Q6J("ngForOf",t.DdM(12,bt)),t.xp6(6),t.Q6J("ngForOf",e.categories)}}function Zt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",34),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(),c=n.index,f=n.$implicit,C=t.oxw();return t.KtG(C.delete(c,f._id))}),t.TgZ(1,"mat-icon"),t._uU(2,"delete"),t.qZA(),t._uU(3," Delete"),t.qZA()}}const Ct=function(o){return["../",o,"explore"]},At=function(o){return[o]};function St(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"tr",23)(1,"th",24),t._UZ(2,"img",25),t.TgZ(3,"div",26)(4,"div",27),t._uU(5),t.qZA(),t.TgZ(6,"div",28),t._uU(7),t.qZA()()(),t.TgZ(8,"td",29)(9,"div",27),t._uU(10),t.ALo(11,"currency"),t.qZA()(),t.TgZ(12,"td",29)(13,"mat-slide-toggle",30),t.NdJ("ngModelChange",function(n){const f=t.CHM(e).$implicit;return t.KtG(f.featured=n)})("click",function(n){return n.stopPropagation()})("change",function(n){const f=t.CHM(e).$implicit,C=t.oxw();return t.KtG(C.onChangeFeatured(f,n))}),t.qZA()(),t.TgZ(14,"td",29)(15,"mat-slide-toggle",30),t.NdJ("ngModelChange",function(n){const f=t.CHM(e).$implicit;return t.KtG(f.active=n)})("click",function(n){return n.stopPropagation()})("change",function(n){const f=t.CHM(e).$implicit,C=t.oxw();return t.KtG(C.onChange(f,n))}),t.qZA()(),t.TgZ(16,"td",29)(17,"button",31),t.NdJ("click",function(n){return n.stopPropagation()}),t.TgZ(18,"mat-icon"),t._uU(19,"more_vert"),t.qZA()(),t.TgZ(20,"mat-menu",null,32),t.YNc(22,Zt,4,0,"button",33),t.TgZ(23,"button",34),t.NdJ("click",function(){const c=t.CHM(e).$implicit,f=t.oxw();return t.KtG(f.viewDetails(c))}),t.TgZ(24,"mat-icon"),t._uU(25,"edit"),t.qZA(),t._uU(26," Edit "),t.qZA()()()()}if(2&o){const e=r.$implicit,i=t.MAs(21),n=t.oxw();t.Q6J("routerLink",t.VKq(13,Ct,e._id)),t.xp6(2),t.Q6J("src",e.logo,t.LSH),t.xp6(3),t.Oqu(e.name),t.xp6(2),t.AsE("",e.contactInfo.state," ",e.contactInfo.country,""),t.xp6(3),t.Oqu(t.xi3(11,10,e.walletBalance,e.currency)),t.xp6(3),t.Q6J("ngModel",e.featured),t.xp6(2),t.Q6J("ngModel",e.active),t.xp6(2),t.Q6J("matMenuTriggerFor",i),t.xp6(5),t.Q6J("ngIf",n.auth.isShow(t.VKq(15,At,n.Role.SuperAdmin)))}}let Ot=(()=>{class o{constructor(e,i,n,c,f,C,V){this.storesService=e,this.storeService=i,this._matDialog=n,this.router=c,this.route=f,this.fb=C,this.auth=V,this.displayedColumns=["name","description","active","action"],this.stores=[],this.Role=q.u,this.merchants=this.route.snapshot.data.merchants,this.categories=this.route.snapshot.data.categories}ngOnInit(){this.stores=this.storesService.stores,this.filterForm=this.fb.group({active:new a.NI(!0),category:new a.NI(""),"contactInfo.country":new a.NI("")}),this.filterSet()}delete(e,i){this.confirmDialogRef=this._matDialog.open(v.X,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Store?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete this store?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(n=>{n&&this.storesService.deleteStore(e,i).subscribe(),this.confirmDialogRef=null})}addNewStore(){this._matDialog.open(L,{width:"500px",disableClose:!1,data:this.merchants}).afterClosed().subscribe(i=>{i&&this.storesService.getUserStores({data:{$match:{}},control:[{$sort:{createdAt:-1}}]}).then(()=>{this.stores=this.storesService.stores})})}filterSet(){this.filterForm.valueChanges.subscribe(e=>{this.filterObject(e),this.storesService.getUserStores({data:{$match:{...this.filterObject(e)}},control:[{$sort:{createdAt:-1}}]}).then(()=>{this.stores=this.storesService.stores})})}clearFilerSet(){this.filterForm.patchValue({name:"",active:"",category:"","contactInfo.country":""})}filterObject(e){return Object.fromEntries(Object.entries(e).filter(([i,n])=>null!=n&&""!==n))}onChange(e,i){this.storeService.saveStore({approve:i.checked,active:i.checked},e._id).subscribe(()=>{})}onChangeFeatured(e,i){this.storeService.saveStore({featured:i.checked},e._id).subscribe(()=>{})}viewDetails(e){this.router.navigate(["dashboard","stores",e._id,"explore"])}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(m._),t.Y36(y.d),t.Y36(s.uw),t.Y36(O.F0),t.Y36(O.gz),t.Y36(a.qu),t.Y36(_.e))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-list-stores"]],decls:23,vars:5,consts:[[1,"row"],[3,"formGroup",4,"ngIf"],[1,"w-full","h-screen","relative"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","text-gray-500"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50"],["scope","col",1,"px-6","py-3"],["class","bg-white border-b  hover:bg-gray-50 ",3,"routerLink",4,"ngFor","ngForOf"],["mat-fab","","color","primary",2,"position","fixed","bottom","80px","right","15px",3,"click"],[1,"mat-18"],[3,"formGroup"],["fxLayout.lt-lg","column","fxLayout","row","fxLayoutAlign","space-between start"],["ngClass.lt-lg","w-full",1,"col-xl-3"],["appearance","outline","ngClass.lt-lg","w-full"],["matInput","","type","text","required","","placeholder","Search",3,"ngModel","ngModelOptions","ngModelChange"],["fxLayout.lt-lg","column","fxLayoutAlign.lt-lg","space-between stretch","fxLayout","row","fxLayoutGap","10px","fxLayoutAlign.gt-md","space-between start","ngClass.lt-lg","w-full"],["formControlName","active"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"w-full"],["formControlName","contactInfo.country"],["formControlName","category","multiple","true"],["mat-button","","fxFlexAlign","center","ngClass.lt-lg","w-full",3,"click"],[3,"value"],[1,"bg-white","border-b","hover:bg-gray-50",3,"routerLink"],["scope","row",1,"flex","items-center","px-6","py-4","text-gray-900","whitespace-nowrap"],[1,"w-10","h-10","rounded-full",3,"src"],[1,"pl-3"],[1,"text-base","font-semibold"],[1,"font-normal","truncate","text-gray-500"],[1,"px-6","py-4"],["color","primary",1,"mx-8",3,"ngModel","ngModelChange","click","change"],["mat-icon-button","",3,"matMenuTriggerFor","click"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0),t.YNc(1,Tt,28,13,"form",1),t.qZA(),t.TgZ(2,"div",2)(3,"div",3)(4,"table",4)(5,"thead",5)(6,"tr")(7,"th",6),t._uU(8," Vendor Profile "),t.qZA(),t.TgZ(9,"th",6),t._uU(10," Wallet Balance "),t.qZA(),t.TgZ(11,"th",6),t._uU(12," Featured "),t.qZA(),t.TgZ(13,"th",6),t._uU(14," Enabled "),t.qZA(),t.TgZ(15,"th",6),t._uU(16," Action "),t.qZA()()(),t.TgZ(17,"tbody"),t.YNc(18,St,27,17,"tr",7),t.ALo(19,"filterByName"),t.qZA()()(),t.TgZ(20,"button",8),t.NdJ("click",function(){return n.addNewStore()}),t.TgZ(21,"mat-icon",9),t._uU(22,"add"),t.qZA()()()),2&i&&(t.xp6(1),t.Q6J("ngIf",n.filterForm),t.xp6(17),t.Q6J("ngForOf",t.xi3(19,2,n.stores,n.name)))},dependencies:function(){return[l.sg,l.O5,x.ey,b.lW,b.RK,b.cs,S.KE,S.hX,d.Hw,k.Nt,M.gD,p.VK,p.OP,p.p6,g.Rr,O.rH,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,a.On,T.xw,T.SQ,T.Wh,T.XD,Z.oO,l.H9,wt]},styles:[".title[_ngcontent-%COMP%]{font-weight:400;font-size:18px;margin:10px 0!important}.status[_ngcontent-%COMP%]{color:#3f51b5;font-size:14px!important}"]})}return o})(),wt=(()=>{class o{transform(e,i=""){return e.filter(n=>n.name.toLowerCase().indexOf(i.toLowerCase())>=0)}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275pipe=t.Yjl({name:"filterByName",type:o,pure:!0})}return o})();var rt=u(8645),J=u(2939),$=u(4104),X=u(6007),G=u(7398),tt=u(940),B=u(3305),et=u(5986);function Mt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"mat-checkbox",16),t.NdJ("change",function(n){const f=t.CHM(e).$implicit,C=t.oxw();return t.KtG(C.checked(f,n))}),t._uU(1),t.qZA()}if(2&o){const e=r.$implicit;t.Q6J("checked",e.active),t.xp6(1),t.Oqu(e.day)}}function kt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",17)(1,"p",18),t._uU(2),t.qZA(),t.TgZ(3,"mat-form-field")(4,"input",19),t.NdJ("change",function(n){const f=t.CHM(e).$implicit,C=t.oxw();return t.KtG(C.changeTime(n,f,"from"))}),t.qZA()(),t.TgZ(5,"mat-form-field")(6,"input",20),t.NdJ("change",function(n){const f=t.CHM(e).$implicit,C=t.oxw();return t.KtG(C.changeTime(n,f,"to"))}),t.qZA()()()}if(2&o){const e=r.$implicit;t.xp6(2),t.Oqu(e.day),t.xp6(2),t.Q6J("value",e.from),t.xp6(2),t.Q6J("value",e.to)}}let Ut=(()=>{class o{constructor(e,i,n,c,f){this._formBuilder=e,this.auth=i,this.menusService=n,this.dialogRef=c,this.data=f,this.isLoading=!1,this.panelOpenState=!1,this.availableDays=[{day:"Sunday",active:!0,from:"09:00:00",to:"20:00:00"},{day:"Monday",active:!0,from:"09:00:00",to:"20:00:00"},{day:"Tuesday",active:!0,from:"09:00:00",to:"20:00:00"},{day:"Wednesday",active:!0,from:"09:00:00",to:"20:00:00"},{day:"Thursday",active:!0,from:"09:00:00",to:"20:00:00"},{day:"Friday",active:!0,from:"09:00:00",to:"20:00:00"},{day:"Saturday",active:!0,from:"09:00:00",to:"20:00:00"}],this.filteredDays=[]}ngOnInit(){this.filteredDays=this.filteredDate,this.menuForm=this.createMenuForm(),this.activeDays=this.computeSelectedDays(this.filteredDays)}createMenuForm(){return this._formBuilder.group({name:["",a.kI.required],store:[this.data.storeId,a.kI.required],description:["",a.kI.required]})}save(){this.isLoading=!0,this.menusService.createMenu({...this.menuForm.getRawValue(),...this.activeDays}).pipe((0,h.x)(()=>this.isLoading=!1)).subscribe(e=>{console.log(e),this.isLoading=!0,this.dialogRef.close(!0)})}checked(e,i){e.active=i.checked,this.filteredDays=this.filteredDate,this.activeDays=this.computeSelectedDays(this.filteredDays)}get filteredDate(){return this.availableDays.filter(e=>e.active)}computeSelectedDays(e){let i={};for(let n=0;n<this.filteredDays.length;n++){let c=this.filteredDays[n],f={day:c.day.toLowerCase(),active:c.active,time:{from:c.from,to:c.to}};i[c.day.toLowerCase()]=f}return{daysActive:i}}changeTime(e,i,n){i[n]=e.target.value}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(a.qu),t.Y36(_.e),t.Y36(tt.O),t.Y36(s.so),t.Y36(s.WI))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-menus"]],decls:29,vars:5,consts:[["matDialogTitle",""],[1,"mat-typography"],["name","menuForm","fxLayout","column","fxFlex","",1,"product","w-100",3,"formGroup"],["appearance","outline","floatLabel","always",1,"w-100-p"],["matInput","","placeholder","Menu Name","name","name","formControlName","name","required",""],["appearance","outline","floatLabel","always",1,"w-100s"],["matInput","","placeholder","Menu Description","name","description","formControlName","description","rows","5"],[1,"w-100"],["hideToggle","",1,"w-100"],["fxLayout","row wrap","fxLayoutAlign","space-between start"],["class","example-margin",3,"checked","change",4,"ngFor","ngForOf"],[1,"w-100",3,"opened","closed"],["fxLayout.gt-md","row wrap","fxLayout.lt-md","column","fxLayoutAlign.lt-md","stretch center","fxLayoutAlign","space-between start","class","border-b-2 border-b-gray-300 mb-2",4,"ngFor","ngForOf"],["mat-dialog-actions","",1,"pt-24"],["mat-button","","mat-dialog-close",""],["mat-raised-button","",1,"mat-accent","mr-16",3,"disabled","click"],[1,"example-margin",3,"checked","change"],["fxLayout.gt-md","row wrap","fxLayout.lt-md","column","fxLayoutAlign.lt-md","stretch center","fxLayoutAlign","space-between start",1,"border-b-2","border-b-gray-300","mb-2"],[1,"text-right"],["matInput","","type","time","placeholder","start time",3,"value","change"],["matInput","","type","time","placeholder","end date",3,"value","change"]],template:function(i,n){1&i&&(t.TgZ(0,"h1",0),t._uU(1,"Add Menu"),t.qZA(),t.TgZ(2,"mat-dialog-content",1)(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),t._uU(6,"Name"),t.qZA(),t._UZ(7,"input",4),t.qZA(),t.TgZ(8,"mat-form-field",5)(9,"mat-label"),t._uU(10,"Description"),t.qZA(),t._UZ(11,"textarea",6),t.qZA(),t.TgZ(12,"mat-accordion",7)(13,"mat-expansion-panel",8)(14,"mat-expansion-panel-header")(15,"mat-panel-title"),t._uU(16," Days Available "),t.qZA()(),t.TgZ(17,"div",9),t.YNc(18,Mt,2,2,"mat-checkbox",10),t.qZA()(),t.TgZ(19,"mat-expansion-panel",11),t.NdJ("opened",function(){return n.panelOpenState=!0})("closed",function(){return n.panelOpenState=!1}),t.TgZ(20,"mat-expansion-panel-header")(21,"mat-panel-title"),t._uU(22," Different availability times "),t.qZA()(),t.YNc(23,kt,7,3,"div",12),t.qZA()()()(),t.TgZ(24,"div",13)(25,"button",14),t._uU(26,"Cancel"),t.qZA(),t.TgZ(27,"button",15),t.NdJ("click",function(){return n.save()}),t._uU(28),t.qZA()()),2&i&&(t.xp6(3),t.Q6J("formGroup",n.menuForm),t.xp6(15),t.Q6J("ngForOf",n.availableDays),t.xp6(5),t.Q6J("ngForOf",n.filteredDays),t.xp6(4),t.Q6J("disabled",!n.menuForm.valid),t.xp6(1),t.Oqu(n.isLoading?"Please wait..":"Create Menu"))},dependencies:[b.lW,B.pp,B.ib,B.yz,B.yK,S.KE,S.hX,k.Nt,et.oG,s.ZT,s.uh,s.xY,s.H8,l.sg,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,T.xw,T.Wh,T.yH]})}return o})();function Dt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"mat-checkbox",15),t.NdJ("change",function(n){const f=t.CHM(e).$implicit,C=t.oxw();return t.KtG(C.checked(f,n))}),t._uU(1),t.qZA()}if(2&o){const e=r.$implicit;t.Q6J("checked",e.active),t.xp6(1),t.Oqu(e.day)}}function Ft(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",16)(1,"p",17),t._uU(2),t.qZA(),t.TgZ(3,"mat-form-field")(4,"input",18),t.NdJ("change",function(n){const f=t.CHM(e).$implicit,C=t.oxw();return t.KtG(C.changeTime(n,f,"from"))}),t.qZA()(),t.TgZ(5,"mat-form-field")(6,"input",19),t.NdJ("change",function(n){const f=t.CHM(e).$implicit,C=t.oxw();return t.KtG(C.changeTime(n,f,"to"))}),t.qZA()()()}if(2&o){const e=r.$implicit;t.xp6(2),t.Oqu(e.day),t.xp6(2),t.Q6J("value",e.from),t.xp6(2),t.Q6J("value",e.to)}}let qt=(()=>{class o{constructor(e,i,n,c){this._formBuilder=e,this.menusService=i,this.dialogRef=n,this.data=c,this.isLoading=!1,this.panelOpenState=!1,this.availableDays=[{day:"Sunday",active:!1,from:"09:00:00",to:"20:00:00"},{day:"Monday",active:!1,from:"09:00:00",to:"20:00:00"},{day:"Tuesday",active:!1,from:"09:00:00",to:"20:00:00"},{day:"Wednesday",active:!1,from:"09:00:00",to:"20:00:00"},{day:"Thursday",active:!1,from:"09:00:00",to:"20:00:00"},{day:"Friday",active:!1,from:"09:00:00",to:"20:00:00"},{day:"Saturday",active:!1,from:"09:00:00",to:"20:00:00"}],this.filteredDays=[],this.storeId=this.data.storeId,this.menu=this.data.menu}ngOnInit(){this.filteredDays=this.filteredDate,this.menuForm=this.createMenuForm(),this.activeDays=this.computeSelectedDays(this.filteredDays)}createMenuForm(){return this._formBuilder.group({name:[this.menu.name,a.kI.required],store:[this.storeId,a.kI.required],description:[this.menu.description,a.kI.required]})}save(){this.isLoading=!0,this.menusService.updateMenu(this.menu._id,{...this.menuForm.getRawValue(),...this.activeDays}).pipe((0,h.x)(()=>this.isLoading=!1)).subscribe(e=>{this.isLoading=!0,this.dialogRef.close(!0)})}checked(e,i){e.active=i.checked,this.filteredDays=this.availableDays.filter(n=>n.active),this.activeDays=this.computeSelectedDays(this.filteredDays)}get filteredDate(){let e=Object.keys(this.menu.daysActive),i=[];e.forEach(c=>{let f=this.availableDays.find(C=>C.day.toLowerCase()==c&&(C.active=!0,C.from=this.menu.daysActive[c].time.from,C.to=this.menu.daysActive[c].time.to,!0));i.push(f)});let n=[...this.availableDays,...i];return this.availableDays=[...new Set(n.map(c=>c))],this.availableDays.filter(c=>c.active)}computeSelectedDays(e){let i={};for(let n=0;n<this.filteredDays.length;n++){let c=this.filteredDays[n],f={active:c.active,day:c.day.toLowerCase(),time:{from:c.from,to:c.to}};i[c.day.toLowerCase()]=f}return{daysActive:i}}changeTime(e,i,n){i[n]=e.target.value,this.activeDays=this.computeSelectedDays(this.filteredDays)}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(a.qu),t.Y36(tt.O),t.Y36(s.so),t.Y36(s.WI))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-edit-menus"]],decls:29,vars:5,consts:[["matDialogTitle",""],[1,"mat-typography"],["name","menuForm","fxLayout","column","fxFlex","",1,"product","w-100-p",3,"formGroup"],["appearance","outline","floatLabel","always",1,"w-100-p"],["matInput","","placeholder","Menu Name","name","name","formControlName","name","required",""],["matInput","","placeholder","Menu Description","name","description","formControlName","description","rows","5"],[1,"w-100"],["hideToggle","",1,"w-100"],["fxLayout","row wrap","fxLayoutAlign","space-between start"],["class","example-margin",3,"checked","change",4,"ngFor","ngForOf"],[1,"w-100",3,"opened","closed"],["fxLayout.gt-md","row wrap","fxLayout.lt-md","column","fxLayoutAlign.lt-md","stretch center","fxLayoutAlign","space-between start","class","border-b-2 border-b-gray-300 mb-2",4,"ngFor","ngForOf"],["mat-dialog-actions","",1,"pt-24"],["mat-button","","mat-dialog-close",""],["mat-raised-button","",1,"mat-primary","mr-16",3,"disabled","click"],[1,"example-margin",3,"checked","change"],["fxLayout.gt-md","row wrap","fxLayout.lt-md","column","fxLayoutAlign.lt-md","stretch center","fxLayoutAlign","space-between start",1,"border-b-2","border-b-gray-300","mb-2"],[1,"text-right"],["matInput","","type","time","placeholder","start time",3,"value","change"],["matInput","","type","time","placeholder","end date",3,"value","change"]],template:function(i,n){1&i&&(t.TgZ(0,"h1",0),t._uU(1,"Edit Menu"),t.qZA(),t.TgZ(2,"mat-dialog-content",1)(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),t._uU(6,"Name"),t.qZA(),t._UZ(7,"input",4),t.qZA(),t.TgZ(8,"mat-form-field",3)(9,"mat-label"),t._uU(10,"Description"),t.qZA(),t._UZ(11,"textarea",5),t.qZA(),t.TgZ(12,"mat-accordion",6)(13,"mat-expansion-panel",7)(14,"mat-expansion-panel-header")(15,"mat-panel-title"),t._uU(16," Days Available "),t.qZA()(),t.TgZ(17,"div",8),t.YNc(18,Dt,2,2,"mat-checkbox",9),t.qZA()(),t.TgZ(19,"mat-expansion-panel",10),t.NdJ("opened",function(){return n.panelOpenState=!0})("closed",function(){return n.panelOpenState=!1}),t.TgZ(20,"mat-expansion-panel-header")(21,"mat-panel-title"),t._uU(22," Different availability times "),t.qZA()(),t.YNc(23,Ft,7,3,"div",11),t.qZA()()()(),t.TgZ(24,"div",12)(25,"button",13),t._uU(26,"Cancel"),t.qZA(),t.TgZ(27,"button",14),t.NdJ("click",function(){return n.save()}),t._uU(28),t.qZA()()),2&i&&(t.xp6(3),t.Q6J("formGroup",n.menuForm),t.xp6(15),t.Q6J("ngForOf",n.availableDays),t.xp6(5),t.Q6J("ngForOf",n.filteredDays),t.xp6(4),t.Q6J("disabled",!n.menuForm.valid),t.xp6(1),t.Oqu(n.isLoading?"Please wait..":"Save"))},dependencies:[b.lW,B.pp,B.ib,B.yz,B.yK,S.KE,S.hX,k.Nt,et.oG,s.ZT,s.uh,s.xY,s.H8,l.sg,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,T.xw,T.Wh,T.yH]})}return o})();var W=u(6236);function Lt(o,r){1&o&&t._UZ(0,"div",16)}function Nt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",6),t.NdJ("click",function(){const c=t.CHM(e).$implicit,f=t.oxw(2);return t.KtG(f.viewMenu(c._id))}),t.TgZ(1,"div",7)(2,"mat-icon",8),t._uU(3,"reorder"),t.qZA(),t.TgZ(4,"div",9)(5,"span",10),t._uU(6),t.qZA(),t.TgZ(7,"span",11),t._uU(8),t.qZA()()(),t.TgZ(9,"div")(10,"button",12),t.NdJ("click",function(n){return n.stopPropagation()}),t.TgZ(11,"mat-icon"),t._uU(12,"more_vert"),t.qZA()(),t.TgZ(13,"mat-menu",null,13)(15,"button",14),t.NdJ("click",function(){const n=t.CHM(e),c=n.index,f=n.$implicit,C=t.oxw(2);return t.KtG(C.delete(c,f._id))}),t.TgZ(16,"mat-icon"),t._uU(17,"delete"),t.qZA(),t._uU(18," Delete"),t.qZA(),t.TgZ(19,"button",14),t.NdJ("click",function(){const c=t.CHM(e).$implicit,f=t.oxw(2);return t.KtG(f.openEdit(c))}),t.TgZ(20,"mat-icon"),t._uU(21,"edit"),t.qZA(),t._uU(22," Edit"),t.qZA()()(),t.YNc(23,Lt,1,0,"div",15),t.qZA()}if(2&o){const e=r.$implicit,i=t.MAs(14);t.xp6(6),t.Oqu(e.name),t.xp6(2),t.hij(" ",e.description," "),t.xp6(2),t.Q6J("matMenuTriggerFor",i)}}function Pt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",4),t.NdJ("cdkDropListDropped",function(n){t.CHM(e);const c=t.oxw();return t.KtG(c.drop(n))}),t.YNc(2,Nt,24,3,"div",5),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.menus)}}let It=(()=>{class o{constructor(e,i,n,c){this.menusService=e,this._matDialog=i,this.router=n,this._location=c,this.menus=[]}ngOnInit(){this.loadMenus()}loadMenus(){this.menus$=this.menusService.getStoreMenus(this.store._id).pipe((0,G.U)(e=>this.menus=e))}delete(e,i){this.confirmDialogRef=this._matDialog.open(v.X,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Menu?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete this menu?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(n=>{n&&this.menusService.deleteMenu(e,i).subscribe(()=>{this.loadMenus()}),this.confirmDialogRef=null})}addMenu(){this._matDialog.open(Ut,{disableClose:!1,data:{storeId:this.store._id}}).afterClosed().subscribe(i=>{i&&this.loadMenus()})}openEdit(e){this._matDialog.open(qt,{disableClose:!1,data:{storeId:this.store._id,menu:e}}).afterClosed().subscribe(n=>{n&&this.loadMenus()})}viewMenu(e){this.router.navigate(["dashboard","stores",this.store._id,"details",e,"menu"])}goBack(){this._location.back()}drop(e){(0,W.bA)(this.menus,e.previousIndex,e.currentIndex),this.menus.forEach((i,n)=>{this.menusService.updateMenu(i._id,{position:n}).subscribe()})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(tt.O),t.Y36(s.uw),t.Y36(O.F0),t.Y36(l.Ye))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-store-menus-tab"]],inputs:{store:"store"},decls:6,vars:3,consts:[[2,"height","100vh","position","relative"],[4,"ngIf"],["mat-fab","","color","primary",2,"position","fixed","bottom","80px","right","15px",3,"click"],[1,"mat-18"],["cdkDropList","",1,"example-list",3,"cdkDropListDropped"],["class","example-box","fxLayout","row","fxLayoutAlign","space-between center","matRipple","","cdkDrag","",3,"click",4,"ngFor","ngForCdkDropList","ngForOf"],["fxLayout","row","fxLayoutAlign","space-between center","matRipple","","cdkDrag","",1,"example-box",3,"click"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px"],["mat-list-icon","",1,"cursor-move"],["fxLayout","column","fxLayoutAlign","start start"],[1,"leading-none","text-lg","mb-1"],[1,"leading-none"],["mat-icon-button","",3,"matMenuTriggerFor","click"],["menu2","matMenu"],["mat-menu-item","",3,"click"],["class","example-custom-placeholder",4,"cdkDragPlaceholder"],[1,"example-custom-placeholder"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0),t.YNc(1,Pt,3,1,"div",1),t.ALo(2,"async"),t.TgZ(3,"button",2),t.NdJ("click",function(){return n.addMenu()}),t.TgZ(4,"mat-icon",3),t._uU(5,"add"),t.qZA()()()),2&i&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,n.menus$)))},dependencies:[b.RK,b.cs,d.Hw,x.wG,p.VK,p.OP,p.p6,W.Wj,W.Zt,W.Hk,l.sg,l.O5,T.xw,T.SQ,T.Wh,l.Ov],styles:[".example-list[_ngcontent-%COMP%]{width:100%;border:solid 1px #ccc;min-height:60px;display:block;background:white;border-radius:4px;overflow:hidden}.example-box[_ngcontent-%COMP%]{padding:20px 10px;border-bottom:solid 1px #ccc;color:#000000de;display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:move;background:white;font-size:14px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.example-custom-placeholder[_ngcontent-%COMP%]{background:#ccc;border:dotted 3px #999;min-height:60px;transition:transform .25s cubic-bezier(0,0,.2,1)}"]})}return o})();var K=u(6676),Et=u(9798),j=u(6385),Yt=u(9023);function Jt(o,r){1&o&&t._UZ(0,"mat-progress-bar",11)}function Bt(o,r){if(1&o&&(t.TgZ(0,"div",12)(1,"div",13)(2,"section",14)(3,"p"),t._uU(4,"Never open on:"),t.qZA(),t._UZ(5,"mat-slide-toggle",15),t.TgZ(6,"p")(7,"strong"),t._uU(8),t.ALo(9,"titlecase"),t.qZA()()()(),t.TgZ(10,"div",16),t._UZ(11,"ngx-mat-timepicker",17)(12,"ngx-mat-timepicker",18),t.qZA(),t.TgZ(13,"section",19)(14,"mat-checkbox",20),t._uU(15,"Closed for the day"),t.qZA()()()),2&o){const e=r.$implicit;t.Q6J("formGroupName",e.day),t.xp6(8),t.hij("",t.lcZ(9,4,e.day)," "),t.xp6(3),t.Q6J("enableMeridian",!0),t.xp6(1),t.Q6J("enableMeridian",!0)}}const{range:Qt}=(0,Et.extendMoment)(K);let Rt=(()=>{class o{constructor(e,i,n){this._formBuilder=e,this.storeService=i,this._snackBar=n,this.isLoading=!1}ngOnInit(){let e=Qt(K().day(0),K().day(6)),n=Array.from(e.by("days")).map(C=>({date:C.format("YYYY-MM-DD"),openingTime:C,closingTime:C,day:C.format("dddd").toLowerCase(),closed:!1,referenceDate:C,neverOpen:!1}));this.days=n;let f=Object.keys(this.store.businessHours).map(C=>({...this.store.businessHours[C]}));this.businessHoursForm=this.createProductForm(f),console.log(this.businessHoursForm.value)}createProductForm(e){return this._formBuilder.group({businessHours:this._formBuilder.group({...this.newOptions(e)})})}newOptions(e){let i={};for(let n=0;n<e.length;n++)i[e[n].name.toLowerCase()]=this._formBuilder.group({name:[e[n].name,a.kI.required],openingTime:[new Date(e[n].openingTime),a.kI.required],closingTime:[new Date(e[n].closingTime),a.kI.required],closed:e[n].closed,neverOpen:e[n].neverOpen});return i}formatDateTimeTo12Hrs(e){const i=K(e).format("YYYY-MM-DD hh:mm A");return K(i,"YYYY-MM-DD hh:mm A")}changeStoreStatus(){this.isLoading=!0,this.store.paused=!this.store.paused,this.storeService.saveStore({paused:this.store.paused},this.store._id).pipe((0,h.x)(()=>this.isLoading=!1)).subscribe(e=>{this._snackBar.open(this.store.paused?"Store has been paused":"Store was resumed","ok",{duration:5e3,horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition})})}save(){this.isLoading=!0,this.storeService.saveStore(this.businessHoursForm.getRawValue(),this.store._id).pipe((0,h.x)(()=>this.isLoading=!1)).subscribe(e=>{this._snackBar.open("Opening Hour update","ok",{duration:5e3,horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition})})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(a.qu),t.Y36(y.d),t.Y36(J.ux))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-business-hours-tab"]],inputs:{store:"store"},decls:22,vars:9,consts:[["fxLayout","row","fxLayout.lt-md","column","fxLayoutAlign","space-between center","fxLayoutAlign.lt-md","start start",1,"header"],["fxLayout","column","fxLayoutAlign","start start",1,"mt-3"],[1,"details"],["fxLayout","row","fxLayoutAlign","space-between center","fxLayoutGap","10px"],["mat-button","",3,"color","click"],[1,"mat-18"],["mat-raised-button","","color","primary",3,"disabled","click"],["mode","indeterminate",4,"ngIf"],[3,"formGroup"],["formGroupName","businessHours"],["fxLayout","row","fxLayoutAlign","space-between center","fxLayout.lt-md","column","fxLayoutAlign.lt-md","start start","class","days",3,"formGroupName",4,"ngFor","ngForOf"],["mode","indeterminate"],["fxLayout","row","fxLayoutAlign","space-between center","fxLayout.lt-md","column","fxLayoutAlign.lt-md","start start",1,"days",3,"formGroupName"],["fxLayout.lg-sm","column","fxLayoutAlign.lg-sm","space-around start","fxFlex","20"],["fxLayout","column","fxLayoutAlign","space-between start","fxLayoutGap","10px","fxLayout.lt-md","row","fxLayoutAlign.lt-md","space-between start",1,"example-section"],["color","primary","formControlName","neverOpen",1,"example-margin"],["fxLayout","row","fxLayoutAlign","space-around start","fxLayout.lt-md","column","fxLayoutAlign.lt-md","start stretch","fxFlex","60"],["formControlName","openingTime",3,"enableMeridian"],["formControlName","closingTime",3,"enableMeridian"],["fxLayout","column","fxLayoutAlign","space-between center","fxFlex","20",1,"example-section"],["formControlName","closed",1,"example-margin"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3")(3,"strong"),t._uU(4),t.qZA()(),t.TgZ(5,"div",2)(6,"p"),t._uU(7),t.qZA()()(),t.TgZ(8,"div",3)(9,"button",4),t.NdJ("click",function(){return n.changeStoreStatus()}),t.TgZ(10,"mat-icon",5),t._uU(11),t.qZA(),t._uU(12),t.qZA(),t.TgZ(13,"button",6),t.NdJ("click",function(){return n.save()}),t.TgZ(14,"mat-icon",5),t._uU(15,"add"),t.qZA(),t._uU(16," SAVE STORE "),t.qZA()()(),t._UZ(17,"mat-divider"),t.YNc(18,Jt,1,0,"mat-progress-bar",7),t.TgZ(19,"form",8)(20,"div",9),t.YNc(21,Bt,16,6,"div",10),t.qZA()()),2&i&&(t.xp6(4),t.hij("Opening hours for ",n.store.name,""),t.xp6(3),t.hij("Set opening hours and special closures for ",n.store.name,""),t.xp6(2),t.Q6J("color",n.store.paused?"primary":"warn"),t.xp6(2),t.hij("",n.store.paused?"play_arrow":"pause"," "),t.xp6(1),t.hij(" ",n.store.paused?"RESUME STORE":"PAUSE STORE",""),t.xp6(1),t.Q6J("disabled",n.isLoading),t.xp6(5),t.Q6J("ngIf",n.isLoading),t.xp6(1),t.Q6J("formGroup",n.businessHoursForm),t.xp6(2),t.Q6J("ngForOf",n.days))},dependencies:[b.lW,d.Hw,et.oG,X.pW,j.d,g.Rr,l.sg,l.O5,a._Y,a.JJ,a.JL,a.sg,a.u,a.x0,T.xw,T.SQ,T.Wh,T.yH,Yt.ft,l.rS],styles:[".dash[_ngcontent-%COMP%]{border:10px black;width:34px;background:black;height:2px}.days[_ngcontent-%COMP%]{padding:10px 30px;border-bottom:1px solid #ccc}.days[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 12px}.header[_ngcontent-%COMP%]{margin-top:30px;border-bottom:2px #ccc;width:100%;padding:0 20px}.header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0}"]})}return o})();var at=u(7466);function $t(o,r){if(1&o&&(t.TgZ(0,"mat-form-field",28)(1,"mat-label"),t._uU(2,"Enter Minimum order amount"),t.qZA(),t._UZ(3,"input",29),t.TgZ(4,"span",9),t._uU(5),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(5),t.Oqu(e.store.currency?e.store.currency:"Currency")}}function Gt(o,r){if(1&o&&(t.TgZ(0,"div",20),t._UZ(1,"mat-divider"),t.TgZ(2,"div",21)(3,"h3"),t._uU(4,"Minimum order amount"),t.qZA(),t.TgZ(5,"div",22)(6,"mat-slide-toggle",23),t._uU(7,"Require a minimum amount for orders to be eligible for pickup "),t.qZA(),t.YNc(8,$t,6,1,"mat-form-field",24),t.qZA()(),t._UZ(9,"mat-divider"),t.TgZ(10,"div",25)(11,"h2"),t._uU(12,"How will customers pickup their orders? "),t.qZA(),t.TgZ(13,"p"),t._uU(14,"Provide instructions for your customers so they know how to get their pickup orders. Include information such as:Provide instructions for your customers so they know how to get their pickup orders. Include information such as:"),t.qZA(),t.TgZ(15,"ul")(16,"li"),t._uU(17,"Where to go in the store"),t.qZA(),t.TgZ(18,"li"),t._uU(19,"If they need name or order number"),t.qZA(),t.TgZ(20,"li"),t._uU(21,"If someone else can pickup the order"),t.qZA()(),t.TgZ(22,"mat-form-field",26)(23,"mat-label"),t._uU(24,"Enter Pickup Instruction"),t.qZA(),t._UZ(25,"textarea",27),t.qZA()()()),2&o){const e=t.oxw();t.xp6(8),t.Q6J("ngIf",e.pickupAndDeliveryForm.value.orderSettings.allowMinimumOrderAmount)}}function Kt(o,r){if(1&o&&(t.TgZ(0,"mat-radio-button",30),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function Ht(o,r){if(1&o&&(t.TgZ(0,"mat-option",45),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function Wt(o,r){if(1&o&&(t.TgZ(0,"mat-option",45),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.viewValue," ")}}function jt(o,r){1&o&&(t.TgZ(0,"mat-form-field",7)(1,"mat-label"),t._uU(2,"Enter delivery for all orders"),t.qZA(),t._UZ(3,"input",46),t.qZA())}function zt(o,r){1&o&&(t.TgZ(0,"div",22)(1,"mat-form-field",7)(2,"mat-label"),t._uU(3,"Order amount to qualify for free delivery"),t.qZA(),t._UZ(4,"input",47),t.TgZ(5,"span",9),t._uU(6,"N"),t.qZA()(),t.TgZ(7,"mat-form-field",7)(8,"mat-label"),t._uU(9,"Delivery fee for all other orders"),t.qZA(),t._UZ(10,"input",48),t.TgZ(11,"span",9),t._uU(12,"N"),t.qZA()()())}function Vt(o,r){1&o&&(t.TgZ(0,"div",22)(1,"mat-form-field",7)(2,"mat-label"),t._uU(3,"Minimum delivery fee"),t.qZA(),t._UZ(4,"input",49),t.TgZ(5,"span",9),t._uU(6,"N"),t.qZA()(),t.TgZ(7,"mat-form-field",7)(8,"mat-label"),t._uU(9,"Delivery fee per kilometer"),t.qZA(),t._UZ(10,"input",50),t.TgZ(11,"span",9),t._uU(12,"N"),t.qZA()()())}function Xt(o,r){1&o&&(t.TgZ(0,"mat-form-field",7)(1,"mat-label"),t._uU(2,"Enter Minimum order amount"),t.qZA(),t._UZ(3,"input",51),t.TgZ(4,"span",9),t._uU(5,"N"),t.qZA()())}function te(o,r){1&o&&(t.TgZ(0,"div")(1,"p",25),t._uU(2,"Provide instructions for your customers so they know how to get their delivered orders. Include information such as: "),t.qZA(),t.TgZ(3,"ul")(4,"li"),t._uU(5,"If they need name or order number"),t.qZA(),t.TgZ(6,"li"),t._uU(7," If someone else can receive the order"),t.qZA()(),t.TgZ(8,"mat-form-field",26)(9,"mat-label"),t._uU(10,"Enter Delivery Instruction"),t.qZA(),t._UZ(11,"textarea",52),t.qZA()())}const ee=function(){return["Instant Delivery","Schedule Delivery"]};function oe(o,r){if(1&o&&(t.TgZ(0,"div")(1,"div",10)(2,"mat-form-field",7)(3,"mat-label"),t._uU(4,"Delivery Types"),t.qZA(),t.TgZ(5,"mat-select",31),t.YNc(6,Ht,2,2,"mat-option",32),t.qZA()()(),t.TgZ(7,"div",10)(8,"p"),t._uU(9,"Customers outside this area will not be able to place orders for delivery from this location. "),t.qZA(),t.TgZ(10,"mat-form-field",7)(11,"mat-label"),t._uU(12,"Enter delivery radius"),t.qZA(),t._UZ(13,"input",33),t.TgZ(14,"span",9),t._uU(15,"Km"),t.qZA()()(),t._UZ(16,"mat-divider"),t.TgZ(17,"div",25)(18,"h2"),t._uU(19,"Delivery fee"),t.qZA(),t.TgZ(20,"div",34)(21,"mat-form-field",7)(22,"mat-label"),t._uU(23,"Delivery fee"),t.qZA(),t.TgZ(24,"mat-select",35),t.YNc(25,Wt,2,2,"mat-option",32),t.qZA()(),t.YNc(26,jt,4,0,"mat-form-field",36),t.YNc(27,zt,13,0,"div",37),t.YNc(28,Vt,13,0,"div",37),t.qZA()(),t._UZ(29,"mat-divider"),t.TgZ(30,"div",38)(31,"h3"),t._uU(32,"Minimum order amount"),t.qZA(),t.TgZ(33,"mat-slide-toggle",23),t._uU(34,"Require a minimum amount for orders to be eligible for delivery "),t.qZA(),t.YNc(35,Xt,6,0,"mat-form-field",36),t.qZA(),t._UZ(36,"mat-divider"),t.TgZ(37,"div",39)(38,"h3"),t._uU(39,"Estimated delivery time"),t.qZA(),t.TgZ(40,"p"),t._uU(41,"The time it takes an order to get to the customer's door, after the courier picks it up from this location. "),t.qZA(),t.TgZ(42,"div",40)(43,"mat-form-field",7)(44,"mat-label"),t._uU(45,"Enter Minimum delivery time"),t.qZA(),t._UZ(46,"input",41),t.TgZ(47,"span",9),t._uU(48,"minutes"),t.qZA()(),t.TgZ(49,"p"),t._uU(50,"to"),t.qZA(),t.TgZ(51,"mat-form-field",7)(52,"mat-label"),t._uU(53,"Enter Maximum delivery time"),t.qZA(),t._UZ(54,"input",42),t.TgZ(55,"span",9),t._uU(56,"minutes"),t.qZA()()()(),t._UZ(57,"mat-divider"),t.TgZ(58,"div",38)(59,"h3"),t._uU(60,"Delivery instructions"),t.qZA(),t.TgZ(61,"mat-slide-toggle",43),t._uU(62,"Provide delivery instructions for customers"),t.qZA(),t.YNc(63,te,12,0,"div",44),t.qZA()()),2&o){const e=t.oxw();t.xp6(6),t.Q6J("ngForOf",t.DdM(7,ee)),t.xp6(19),t.Q6J("ngForOf",e.foods),t.xp6(1),t.Q6J("ngIf",1==e.pickupAndDeliveryForm.value.deliverySettings.deliveryFeeNumber),t.xp6(1),t.Q6J("ngIf",3==e.pickupAndDeliveryForm.value.deliverySettings.deliveryFeeNumber),t.xp6(1),t.Q6J("ngIf",4==e.pickupAndDeliveryForm.value.deliverySettings.deliveryFeeNumber),t.xp6(7),t.Q6J("ngIf",e.pickupAndDeliveryForm.value.deliverySettings.allowMinimumOrderAmount),t.xp6(28),t.Q6J("ngIf",e.pickupAndDeliveryForm.value.deliverySettings.enableDeliveryInstructions)}}function ne(o,r){1&o&&(t.TgZ(0,"p"),t._uU(1,"FoodBot will handle all settings pertaining to your deliveries."),t.qZA())}let ie=(()=>{class o{constructor(e,i,n){this._formBuilder=e,this.storeService=i,this._snackBar=n,this.isActive=!1,this.couriers=["My own couriers","Shopbot couriers"],this.isLoading=!1,this.foods=[{value:1,viewValue:"Charge the same delivery fee for all orders"},{value:2,viewValue:"Free Delivery"},{value:3,viewValue:"Free Delivery for orders over certain amount."},{value:4,viewValue:"Distance-base fees"}]}ngOnInit(){this.pickupAndDeliveryForm=this.createProductForm()}createProductForm(){return this._formBuilder.group({orderSettings:this._formBuilder.group({orderPrepTime:[this.store.orderSettings.orderPrepTime],enablePickup:[this.store.orderSettings.enablePickup],allowMinimumOrderAmount:[this.store.orderSettings.allowMinimumOrderAmount],minimumOrderAmount:[this.store.orderSettings.minimumOrderAmount],pickUpInstruction:[this.store.orderSettings.pickUpInstruction]}),deliveryService:this._formBuilder.group({deliverOrderToCustomers:[this.store.deliveryService.deliverOrderToCustomers]}),deliverySettings:this._formBuilder.group({deliveryType:[this.store.deliverySettings.deliveryType],deliveryRadius:[this.store.deliverySettings.deliveryRadius],deliveryFeeNumber:[this.store.deliverySettings.deliveryFeeNumber],deliveryFee:[this.store.deliverySettings?.deliveryFee],minimumOrderAmountForFreeDelivery:[this.store.deliverySettings?.minimumOrderAmountForFreeDelivery||0],deliveryFeeForAllOrder:[this.store.deliverySettings?.deliveryFeeForAllOrder],minimumDeliveryFee:[this.store.deliverySettings?.minimumDeliveryFee],deliveryFeeByKilometers:[this.store.deliverySettings?.deliveryFeeByKilometers||50],allowMinimumOrderAmount:[this.store.deliverySettings?.allowMinimumOrderAmount||0],minimumOrderAmount:[this.store.deliverySettings?.minimumOrderAmount||0],estimatedDeliveryTime:this._formBuilder.group({minimum:[this.store.deliverySettings?.estimatedDeliveryTime?.minimum||0],maximum:[this.store.deliverySettings?.estimatedDeliveryTime?.maximum||0]}),enableDeliveryInstructions:[this.store.deliverySettings.enableDeliveryInstructions],deliveryInstructions:[this.store.deliverySettings.deliveryInstructions]})})}save(){this.isLoading=!0,this.store.paused=!this.store.paused,this.storeService.saveStore(this.pickupAndDeliveryForm.getRawValue(),this.store._id).pipe((0,h.x)(()=>this.isLoading=!1)).subscribe(e=>{this._snackBar.open("Saved","ok",{duration:5e3,horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition})})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(a.qu),t.Y36(y.d),t.Y36(J.ux))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-pickup-and-delivery-tab"]],inputs:{store:"store"},decls:44,vars:6,consts:[["fxLayout","row","fxLayoutAlign","end center",1,"header"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"mat-18"],[3,"formGroup"],[2,"padding","10px"],["formGroupName","orderSettings"],[1,"mat-elevation-z6","example-container"],["appearance","outline",2,"width","50%"],["matInput","","formControlName","orderPrepTime","placeholder","Enter Order Pre time"],["matSuffix",""],[2,"margin-bottom","20px"],["formControlName","enablePickup"],["class","example-container",4,"ngIf"],["formGroupName","deliveryService",1,"mat-elevation-z6","example-container"],["id","example-radio-group-label"],["aria-labelledby","example-radio-group-label","formControlName","deliverOrderToCustomers",1,"example-radio-group"],["class","example-radio-button",3,"value",4,"ngFor","ngForOf"],["formGroupName","deliverySettings",1,"mat-elevation-z6","example-container"],[4,"ngIf","ngIfElse"],["ShopBotCouriers",""],[1,"example-container"],["fxLayout","column","fxLayoutAlign","space-between start",2,"margin","20px 0px"],["fxLayout","column","fxLayoutAlign","space-between start",2,"width","100%"],["formControlName","allowMinimumOrderAmount"],["appearance","outline","style","width: 50%; margin-top: 20px;",4,"ngIf"],[2,"margin-top","20px"],["appearance","outline",2,"width","100%"],["matInput","","formControlName","pickUpInstruction","cols","30","rows","5"],["appearance","outline",2,"width","50%","margin-top","20px"],["matInput","","type","number","formControlName","minimumOrderAmount","placeholder","Enter Minimum order amount"],[1,"example-radio-button",3,"value"],["name","food","formControlName","deliveryType","multiple","true"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","deliveryRadius","placeholder","Enter delivery radius"],[1,"example-radio-group"],["name","food","formControlName","deliveryFeeNumber"],["appearance","outline","style","width: 50%;",4,"ngIf"],["style","width: 100%;","fxLayout","column","fxLayoutAlign","space-between start",4,"ngIf"],[1,"example-radio-group",2,"margin","20px 0px"],["formGroupName","estimatedDeliveryTime",1,"example-radio-group",2,"margin","20px 0px"],["fxLayout","row","fxLayoutAlign","space-between center","fxLayoutGap","20px",2,"width","100%"],["matInput","","formControlName","minimum","placeholder","Enter Minimum order amount"],["matInput","","formControlName","maximum","placeholder","Enter Maximum order amount"],["formControlName","enableDeliveryInstructions"],[4,"ngIf"],[3,"value"],["matInput","","type","number","placeholder","Enter delivery fee","formControlName","deliveryFeeForAllOrder"],["matInput","","placeholder","Enter Minimum order amount","formControlName","minimumOrderAmountForFreeDelivery"],["matInput","","placeholder","Enter delivery fee","formControlName","deliveryFeeForAllOrder"],["matInput","","placeholder","Enter Minimum delivery Fee","formControlName","minimumDeliveryFee"],["matInput","","type","number","formControlName","deliveryFeeByKilometers","placeholder","Enter Delivery fee"],["matInput","","formControlName","minimumOrderAmount","placeholder","Enter Minimum order amount"],["matInput","","formControlName","deliveryInstructions","cols","30","rows","5"]],template:function(i,n){if(1&i&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return n.save()}),t.TgZ(2,"mat-icon",2),t._uU(3,"add"),t.qZA(),t._uU(4," SAVE STORE "),t.qZA()(),t.TgZ(5,"form",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"h2"),t._uU(10,"Order Settings"),t.qZA(),t.TgZ(11,"p"),t._uU(12,"Average amount of time it takes to prepare an order."),t.qZA(),t.TgZ(13,"mat-form-field",7)(14,"mat-label"),t._uU(15,"Enter Order Pre time"),t.qZA(),t._UZ(16,"input",8),t.TgZ(17,"span",9),t._uU(18,"minutes"),t.qZA()()(),t.TgZ(19,"div",6)(20,"div",10)(21,"h2"),t._uU(22,"Pickup Settings"),t.qZA(),t.TgZ(23,"h3"),t._uU(24,"Enable pickup"),t.qZA(),t.TgZ(25,"mat-slide-toggle",11),t._uU(26,"Allow your customers to come pick their orders up at your store"),t.qZA()(),t.YNc(27,Gt,26,1,"div",12),t.qZA()(),t.TgZ(28,"div",13)(29,"div",10)(30,"h2"),t._uU(31,"Delivery Service"),t.qZA(),t.TgZ(32,"label",14),t._uU(33,"How will you deliver orders to customers? "),t.qZA(),t.TgZ(34,"mat-radio-group",15),t.YNc(35,Kt,2,2,"mat-radio-button",16),t.qZA(),t.TgZ(36,"p"),t._uU(37,"Shopbot has partnered with courier services to offer on-demand delivery. You will not be charged any additional fees or commissions from out partners."),t.qZA()()(),t.TgZ(38,"div",17)(39,"h2"),t._uU(40,"Delivery Settings"),t.qZA(),t.YNc(41,oe,64,8,"div",18),t.YNc(42,ne,2,0,"ng-template",null,19,t.W1O),t.qZA()()()),2&i){const c=t.MAs(43);t.xp6(1),t.Q6J("disabled",n.isLoading),t.xp6(4),t.Q6J("formGroup",n.pickupAndDeliveryForm),t.xp6(22),t.Q6J("ngIf",n.pickupAndDeliveryForm.value.orderSettings.enablePickup),t.xp6(8),t.Q6J("ngForOf",n.couriers),t.xp6(6),t.Q6J("ngIf","My own couriers"===n.pickupAndDeliveryForm.value.deliveryService.deliverOrderToCustomers)("ngIfElse",c)}},dependencies:[x.ey,b.lW,S.KE,S.hX,S.R9,d.Hw,k.Nt,M.gD,j.d,g.Rr,at.VQ,at.U0,l.sg,l.O5,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.sg,a.u,a.x0,T.xw,T.SQ,T.Wh],styles:[".example-container[_ngcontent-%COMP%]{padding:16px;margin-bottom:16px}.example-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0;align-items:flex-start}.example-radio-button[_ngcontent-%COMP%]{margin:5px}.header[_ngcontent-%COMP%]{margin-top:30px;border-bottom:2px #ccc;width:100%;padding:0 20px}.header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0}"]})}return o})();var ot=u(9862),st=u(5940);function re(o,r){1&o&&t._UZ(0,"mat-progress-spinner",46),2&o&&t.Q6J("strokeWidth",10)}function ae(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",47),t.NdJ("click",function(){t.CHM(e),t.oxw();const n=t.MAs(12);return t.KtG(n.click())}),t.TgZ(1,"mat-icon",3),t._uU(2,"edit"),t.qZA()()}}function se(o,r){1&o&&(t.TgZ(0,"button",48)(1,"mat-icon",3),t._uU(2,"delete"),t.qZA()())}function ce(o,r){1&o&&t._UZ(0,"mat-progress-spinner",46),2&o&&t.Q6J("strokeWidth",10)}function le(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",47),t.NdJ("click",function(){t.CHM(e),t.oxw();const n=t.MAs(19);return t.KtG(n.click())}),t.TgZ(1,"mat-icon",3),t._uU(2,"edit"),t.qZA()()}}function ue(o,r){1&o&&(t.TgZ(0,"button",48)(1,"mat-icon",3),t._uU(2,"delete"),t.qZA()())}function me(o,r){if(1&o&&(t.TgZ(0,"mat-option",49),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e._id),t.xp6(1),t.Oqu(e.name)}}function de(o,r){if(1&o&&(t.TgZ(0,"mat-option",49),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.currency),t.xp6(1),t.Oqu(e.currency)}}function pe(o,r){if(1&o&&(t.TgZ(0,"mat-option",49),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.currencyCode),t.xp6(1),t.Oqu(e.currencyCode)}}function fe(o,r){if(1&o&&(t.TgZ(0,"mat-option",49),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function he(o,r){if(1&o&&(t.TgZ(0,"mat-option",49),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.country),t.xp6(1),t.hij(" ",e.country," ")}}function _e(o,r){if(1&o&&(t.TgZ(0,"mat-option",49),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.name),t.xp6(1),t.hij(" ",e.name," ")}}function ge(o,r){if(1&o&&(t.TgZ(0,"mat-option",49),t._uU(1),t.ALo(2,"uppercase"),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(t.lcZ(2,2,e))}}const ve=function(){return[1,2,3,4,5]},ye=function(){return["amount","discount"]};let xe=(()=>{class o{constructor(e,i,n,c){this._formBuilder=e,this.storeService=i,this._snackBar=n,this.route=c,this.lat=51.678418,this.lng=7.809007,this.zoom=8,this.isLoading=!1,this.countriesWithStates=[],this.states=[],this.categories=this.route.snapshot.data.categories,this.countriesWithStates=this.route.snapshot.data.deliveryZones,console.log(this.countriesWithStates)}ngOnInit(){this.lat=this.store.location.coordinates[0],this.lng=this.store.location.coordinates[1],this.generalSettingForm=this.createGeneralSettingForm(),this.generalSettingForm=this.createGeneralSettingForm(),this.generalSettingForm?.get("contactInfo.country")?.valueChanges.subscribe(e=>{const i=this.countriesWithStates.find(n=>n.country===e);i&&(this.states=i.states)}),this.generalSettingForm?.get("contactInfo")?.patchValue({country:this.store.contactInfo.country})}createGeneralSettingForm(){return this._formBuilder.group({logo:[this.store.logo],bannerImage:[this.store.bannerImage],name:[this.store.name,a.kI.required],description:[this.store.description,a.kI.required],category:[this.store.category[0]?._id,a.kI.required],currency:[this.store.currency,a.kI.required],currencyCode:[this.store.currencyCode,a.kI.required],expensive:[this.store.expensive,a.kI.required],finance:this._formBuilder.group({financeType:[this.store?.finance?.financeType,a.kI.required],adminCommission:[this.store?.finance?.adminCommission,a.kI.required]}),notifications:this._formBuilder.group({email:[this.store.notifications.email],phone:[this.store.notifications.phone],sms:[this.store.notifications.sms]}),contactInfo:this._formBuilder.group({email:[this.store.contactInfo.email,[a.kI.required]],phone:[this.store.contactInfo.phone,[a.kI.required]],city:[this.store.contactInfo.city],country:[this.store.contactInfo.country],state:[this.store.contactInfo.state],postalCode:[this.store.contactInfo.postalCode],placeName:[this.store.contactInfo.placeName],placeNumber:[this.store.contactInfo.placeNumber]}),location:this._formBuilder.group({type:"Point",coordinates:[this.store.location.coordinates]})})}setCurrentLocation(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(e=>{this.lat=e.coords.latitude,this.lng=e.coords.longitude,this.zoom=8,this.generalSettingForm.patchValue({location:{coordinates:[this.lat,this.lng]}})})}onAutocompleteSelected(e){console.log("onAutocompleteSelected: ",e)}onLocationSelected(e){this.generalSettingForm.patchValue({location:{coordinates:[this.lat,this.lng]}})}onFileLogoSelected(e){const i=e.target.files[0];if(i){this.fileName=i.name;const n=new FormData;n.append("file",i);const c=this.storeService.uploadLogo(n,this.store._id).pipe((0,h.x)(()=>this.reset()));this.uploadSub=c.subscribe(f=>{f.type==ot.dt.UploadProgress?this.uploadProgress=Math.round(f.loaded/f.total*100):f.hasOwnProperty("body")&&(this.store.logo=f.body.photo)})}}onFileBannerSelected(e){const i=e.target.files[0];if(i){this.fileName=i.name;const n=new FormData;n.append("file",i);const c=this.storeService.uploadBanner(n,this.store._id).pipe((0,h.x)(()=>this.resetBanner()));this.uploadSubBanner=c.subscribe(f=>{f.type==ot.dt.UploadProgress?this.uploadProgressBanner=Math.round(f.loaded/f.total*100):f.hasOwnProperty("body")&&(this.store.bannerImage=f.body.photo)})}}save(){this.isLoading=!0,this.store.paused=!this.store.paused,this.storeService.saveStore(this.generalSettingForm.getRawValue(),this.store._id).pipe((0,h.x)(()=>this.isLoading=!1)).subscribe(e=>{this._snackBar.open("Saved","ok",{duration:5e3,horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition}),this.storeService.getStore()})}resetBanner(){this.uploadProgressBanner=null,this.uploadSubBanner=null}reset(){this.uploadProgress=null,this.uploadSub=null}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(a.qu),t.Y36(y.d),t.Y36(J.ux),t.Y36(O.gz))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-general-settings-tab"]],inputs:{store:"store"},decls:111,vars:21,consts:[[2,"padding","10px"],["fxLayout","row","fxLayoutAlign","end center",1,"header"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"mat-18"],[3,"formGroup"],[1,"mat-elevation-z6","example-container"],["fxLayout","row","fxLayout.lt-md","column","fxLayoutAlign","space-around center",2,"overflow","hidden"],["fxLayout","row","fxLayoutAlign","center center",1,"logo"],[1,"control-logo"],["type","file",1,"file-input",3,"change"],["logoUpload",""],["mode","indeterminate","color","primary",3,"strokeWidth",4,"ngIf"],["mat-icon-button","",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center",1,"banner"],[1,"control-banner"],["bannerUpload",""],["fxLayout.gt-md","row","fxLayoutAlign.gt-md","space-between start","fxLayoutGap","10px","fxLayout.lt-md","column","fxLayoutAlign.lt-md","space-around center"],["fxFlex","25%","fxFlexAlign.gt-md","start",1,"mat-elevation-z6","example-container"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","name","placeholder","Enter Store Name"],["matInput","","formControlName","description","placeholder","Enter Store Description"],["formControlName","category"],[3,"value",4,"ngFor","ngForOf"],["formControlName","currency"],["formControlName","currencyCode"],["formControlName","expensive"],["fxFlex","25%","fxFlexAlign.gt-md","start","formGroupName","contactInfo",1,"mat-elevation-z6","example-container"],["matInput","","placeholder","Enter Store Email","formControlName","email"],["matInput","","placeholder","Store Phone Number","formControlName","phone"],["appearance","outline",1,"example-full-width","w-full"],["formControlName","country"],["formControlName","state"],["fxFlex","25%","fxFlexAlign.gt-md","start","formGroupName","finance",1,"mat-elevation-z6","example-container"],["formControlName","financeType"],["matInput","","type","number","placeholder","Discount or ammount","formControlName","adminCommission"],["fxFlex.gt-md","25%","fxFlex.lt-md","100%","fxFlexAlign.gt-md","start","formGroupName","notifications",1,"mat-elevation-z6","example-container","w-full"],["formControlName","sms"],["formControlName","phone"],["formControlName","email"],["fxLayout","column","fxLayoutAlign","space-between stretch"],["fxLayout","column","fxLayoutAlign","space-between start","formGroupName","contactInfo",1,"mat-elevation-z6","example-container"],["mat-raised-button","","color","primary",2,"margin-top","10px",3,"click"],["appearance","outline",2,"width","100%","margin-top","10px"],["matInput","","placeholder","Place name","formControlName","placeName"],["matInput","","placeholder","Enter Suite/Store Number","formControlName","placeNumber"],["mode","indeterminate","color","primary",3,"strokeWidth"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","warn"],[3,"value"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(){return n.save()}),t.TgZ(3,"mat-icon",3),t._uU(4,"add"),t.qZA(),t._uU(5," SAVE STORE "),t.qZA()(),t.TgZ(6,"form",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"input",9,10),t.NdJ("change",function(f){return n.onFileLogoSelected(f)}),t.qZA(),t.YNc(13,re,1,1,"mat-progress-spinner",11),t.YNc(14,ae,3,0,"button",12),t.YNc(15,se,3,0,"button",13),t.qZA()(),t.TgZ(16,"div",14)(17,"div",15)(18,"input",9,16),t.NdJ("change",function(f){return n.onFileBannerSelected(f)}),t.qZA(),t.YNc(20,ce,1,1,"mat-progress-spinner",11),t.YNc(21,le,3,0,"button",12),t.YNc(22,ue,3,0,"button",13),t.qZA()()()(),t.TgZ(23,"div",17)(24,"div",18)(25,"h3"),t._uU(26,"Basic Information"),t.qZA(),t.TgZ(27,"mat-form-field",19)(28,"mat-label"),t._uU(29,"Store Name"),t.qZA(),t._UZ(30,"input",20),t.qZA(),t.TgZ(31,"mat-form-field",19)(32,"mat-label"),t._uU(33,"Store Description"),t.qZA(),t._UZ(34,"textarea",21),t.qZA(),t.TgZ(35,"mat-form-field",19)(36,"mat-label"),t._uU(37,"Store Category"),t.qZA(),t.TgZ(38,"mat-select",22),t.YNc(39,me,2,2,"mat-option",23),t.qZA()(),t.TgZ(40,"mat-form-field",19)(41,"mat-label"),t._uU(42,"Store Currency"),t.qZA(),t.TgZ(43,"mat-select",24),t.YNc(44,de,2,2,"mat-option",23),t.qZA()(),t.TgZ(45,"mat-form-field",19)(46,"mat-label"),t._uU(47,"Store Currency"),t.qZA(),t.TgZ(48,"mat-select",25),t.YNc(49,pe,2,2,"mat-option",23),t.qZA()(),t.TgZ(50,"mat-form-field",19)(51,"mat-label"),t._uU(52,"Expensive"),t.qZA(),t.TgZ(53,"mat-select",26),t.YNc(54,fe,2,2,"mat-option",23),t.qZA()()(),t.TgZ(55,"div",27)(56,"h3"),t._uU(57,"Contact Information"),t.qZA(),t.TgZ(58,"mat-form-field",19)(59,"mat-label"),t._uU(60,"Store Email Address"),t.qZA(),t._UZ(61,"input",28),t.qZA(),t.TgZ(62,"mat-form-field",19)(63,"mat-label"),t._uU(64,"Store Phone Number"),t.qZA(),t._UZ(65,"input",29),t.qZA(),t.TgZ(66,"mat-form-field",30)(67,"mat-label"),t._uU(68,"Country"),t.qZA(),t.TgZ(69,"mat-select",31),t.YNc(70,he,2,2,"mat-option",23),t.qZA()(),t.TgZ(71,"mat-form-field",30)(72,"mat-label"),t._uU(73,"State"),t.qZA(),t.TgZ(74,"mat-select",32),t.YNc(75,_e,2,2,"mat-option",23),t.qZA()()(),t.TgZ(76,"div",33)(77,"h3"),t._uU(78,"Admin charges"),t.qZA(),t.TgZ(79,"mat-form-field",19)(80,"mat-label"),t._uU(81,"Finance Type "),t.qZA(),t.TgZ(82,"mat-select",34),t.YNc(83,ge,3,4,"mat-option",23),t.qZA()(),t.TgZ(84,"mat-form-field",19)(85,"mat-label"),t._uU(86,"Discount or ammount"),t.qZA(),t._UZ(87,"input",35),t.qZA()(),t.TgZ(88,"div",36)(89,"h3"),t._uU(90,"Notifications"),t.qZA(),t.TgZ(91,"mat-slide-toggle",37),t._uU(92,"SMS"),t.qZA(),t.TgZ(93,"mat-slide-toggle",38),t._uU(94,"Phone Calls"),t.qZA(),t.TgZ(95,"mat-slide-toggle",39),t._uU(96,"Emails"),t.qZA()()(),t.TgZ(97,"div",40)(98,"div",41)(99,"button",42),t.NdJ("click",function(){return n.setCurrentLocation()}),t.TgZ(100,"mat-icon",3),t._uU(101,"location_searching"),t.qZA(),t._uU(102," USE MY LOCATION "),t.qZA(),t.TgZ(103,"mat-form-field",43)(104,"mat-label"),t._uU(105,"Place name"),t.qZA(),t._UZ(106,"input",44),t.qZA(),t.TgZ(107,"mat-form-field",43)(108,"mat-label"),t._uU(109,"Suite/Store Number"),t.qZA(),t._UZ(110,"input",45),t.qZA()()()()()),2&i&&(t.xp6(2),t.Q6J("disabled",n.isLoading),t.xp6(4),t.Q6J("formGroup",n.generalSettingForm),t.xp6(3),t.Udp("background-image","url("+(""==n.store.logo?"https://dashboard.heypay.xyz/images/store_image_placeholder.png":n.store.logo)+")"),t.xp6(4),t.Q6J("ngIf",n.uploadProgress),t.xp6(1),t.Q6J("ngIf",!n.uploadProgress),t.xp6(1),t.Q6J("ngIf",!n.uploadProgress),t.xp6(1),t.Udp("background-image","url("+(""==n.store.bannerImage?"https://dashboard.heypay.xyz/images/store_image_placeholder.png":n.store.bannerImage)+")"),t.xp6(4),t.Q6J("ngIf",n.uploadProgressBanner),t.xp6(1),t.Q6J("ngIf",!n.uploadProgressBanner),t.xp6(1),t.Q6J("ngIf",!n.uploadProgressBanner),t.xp6(17),t.Q6J("ngForOf",n.categories),t.xp6(5),t.Q6J("ngForOf",n.countriesWithStates),t.xp6(5),t.Q6J("ngForOf",n.countriesWithStates),t.xp6(5),t.Q6J("ngForOf",t.DdM(19,ve)),t.xp6(16),t.Q6J("ngForOf",n.countriesWithStates),t.xp6(5),t.Q6J("ngForOf",n.states),t.xp6(8),t.Q6J("ngForOf",t.DdM(20,ye)))},dependencies:[x.ey,b.lW,b.RK,S.KE,S.hX,d.Hw,k.Nt,M.gD,g.Rr,st.Ou,l.sg,l.O5,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.sg,a.u,a.x0,T.xw,T.SQ,T.Wh,T.XD,T.yH,l.gd],styles:[".example-container[_ngcontent-%COMP%]{padding:16px;margin-bottom:16px;margin-top:16px}.example-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0;align-items:flex-start}.example-radio-button[_ngcontent-%COMP%]{margin:5px}.header[_ngcontent-%COMP%]{margin-top:30px;border-bottom:2px #ccc;width:100%}.header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0}.logo[_ngcontent-%COMP%]{background-color:#0003;width:200px;height:200px;border-radius:50%;background-size:cover;background-position:center;background-repeat:no-repeat}.banner[_ngcontent-%COMP%]{background-color:#0003;width:700px;height:200px;background-size:cover;background-position:center;background-repeat:no-repeat}.example-full-width[_ngcontent-%COMP%]{width:100%}mat-slide-toggle[_ngcontent-%COMP%]{margin:25px 0;display:block}agm-map[_ngcontent-%COMP%]{height:300px;width:100%}.file-input[_ngcontent-%COMP%]{display:none}"]})}return o})();var ct=u(232);function be(o,r){if(1&o&&(t.TgZ(0,"mat-option",11),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.name," ")}}let Te=(()=>{class o{constructor(e,i,n,c,f,C){this._formBuilder=e,this.auth=i,this.bankService=n,this.dialogRef=c,this.data=f,this.snack=C,this.isLoading=!1,this.banks=[],this.filteredDays=[]}ngOnInit(){this.banks=this.data.banks,this.bankForm=this.createBankForm(),this.data.isNew||this.bankForm.patchValue({code:this.data.bank.code,accountNumber:this.data.bank.accountNumber})}createBankForm(){return this._formBuilder.group({accountNumber:["",a.kI.required],code:["",a.kI.required]})}selectAccount(e){this.selectedBank=e.value,this.bankForm.patchValue({code:e.value.code})}save(){this.isLoading=!0,this.bankService.resolveBank({...this.bankForm.getRawValue()}).pipe((0,h.x)(()=>this.isLoading=!1)).subscribe(e=>{e.status?this.data.isNew?this.bankService.addBank({accountName:e.data.account_name,accountNumber:e.data.account_number,bankId:e.data.bank_id,bankName:this.selectedBank.name,store:this.data.storeId,code:this.selectedBank.code,type:this.selectedBank?.type,currency:this.data.currency}).subscribe(i=>{this.dialogRef.close(i)}):this.bankService.updateBank({accountName:e.data.account_name,accountNumber:e.data.account_number,bankId:e.data.bank_id,bankName:this.selectedBank.name,store:this.data.storeId,code:this.selectedBank.code,type:this.selectedBank?.type,currency:this.data.currency},this.data.bank._id).subscribe(i=>{this.snack.open("Account Details has been updated!","Close",{duration:2e3}),this.dialogRef.close(i)}):this.snack.open("Error: Unable to verify account","Close",{duration:2e3})})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(a.qu),t.Y36(_.e),t.Y36(ct.y),t.Y36(s.so),t.Y36(s.WI),t.Y36(J.ux))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-bank"]],decls:18,vars:5,consts:[["matDialogTitle",""],[1,"mat-typography"],["name","menuForm","fxLayout","column","fxFlex","",1,"product","w-100-p",3,"formGroup"],["appearance","outline"],[3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline","floatLabel","always",1,"w-100-p"],["matInput","","placeholder","Account Number","name","name","formControlName","accountNumber","required",""],["mat-dialog-actions","",1,"pt-24"],["mat-button","","mat-dialog-close",""],["mat-raised-button","",1,"mat-accent","mr-16",3,"disabled","click"],[3,"value"]],template:function(i,n){1&i&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"mat-dialog-content",1)(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),t._uU(6,"Bank Name"),t.qZA(),t.TgZ(7,"mat-select",4),t.NdJ("selectionChange",function(f){return n.selectAccount(f)}),t.YNc(8,be,2,2,"mat-option",5),t.qZA()(),t.TgZ(9,"mat-form-field",6)(10,"mat-label"),t._uU(11,"Account Number"),t.qZA(),t._UZ(12,"input",7),t.qZA()()(),t.TgZ(13,"div",8)(14,"button",9),t._uU(15,"Cancel"),t.qZA(),t.TgZ(16,"button",10),t.NdJ("click",function(){return n.save()}),t._uU(17),t.qZA()()),2&i&&(t.xp6(1),t.Oqu(null!=n.data&&n.data.isNew?"Add Bank Details":null==n.data||null==n.data.bank?null:n.data.bank.accountName),t.xp6(2),t.Q6J("formGroup",n.bankForm),t.xp6(5),t.Q6J("ngForOf",n.banks),t.xp6(8),t.Q6J("disabled",!n.bankForm.valid&&n.isLoading),t.xp6(1),t.Oqu(n.isLoading?"Please wait..":"Save"))},dependencies:[x.ey,b.lW,S.KE,S.hX,k.Nt,M.gD,s.ZT,s.uh,s.xY,s.H8,l.sg,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,T.xw,T.yH]})}return o})();var H=u(9038);function Ze(o,r){if(1&o&&(t.TgZ(0,"mat-list")(1,"div",9),t._uU(2,"Bank Account Information"),t.qZA(),t.TgZ(3,"mat-list-item")(4,"span",10),t._uU(5,"Bank Name"),t.qZA(),t.TgZ(6,"span",11),t._uU(7),t.qZA()(),t.TgZ(8,"mat-list-item")(9,"span",10),t._uU(10,"Account Name"),t.qZA(),t.TgZ(11,"span",11),t._uU(12),t.qZA()(),t.TgZ(13,"mat-list-item")(14,"span",10),t._uU(15,"Account Number"),t.qZA(),t.TgZ(16,"span",11),t._uU(17),t.qZA()()()),2&o){const e=r.$implicit;t.xp6(7),t.Oqu(e.bankName),t.xp6(5),t.Oqu(e.accountName),t.xp6(5),t.Oqu(e.accountNumber)}}function Ce(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",5),t.YNc(1,Ze,18,3,"mat-list",6),t.ALo(2,"async"),t._UZ(3,"mat-divider"),t.TgZ(4,"div",7)(5,"button",8),t.NdJ("click",function(){const c=t.CHM(e).$implicit,f=t.oxw(2);return t.KtG(f.addAccountDetails(!1,c))}),t._uU(6,"UPDATE"),t.qZA()()()}if(2&o){t.oxw();const e=t.MAs(4),i=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,i.$bank))("ngIfElse",e)}}function Ae(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",5)(1,"h3",12),t._uU(2,"Bank Account Information"),t.qZA(),t.TgZ(3,"p",13),t._uU(4,"You haven't add any bank account yet. Please add one."),t.qZA(),t._UZ(5,"mat-divider"),t.TgZ(6,"div",14)(7,"button",8),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.addAccountDetails(!0))}),t._uU(8,"ADD ACCOUNT"),t.qZA()()()}}function Se(o,r){if(1&o&&(t.TgZ(0,"div",2),t.YNc(1,Ce,7,4,"div",3),t.ALo(2,"async"),t.YNc(3,Ae,9,0,"ng-template",null,4,t.W1O),t.qZA()),2&o){const e=t.MAs(4),i=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,i.$bank))("ngIfElse",e)}}function Oe(o,r){1&o&&(t.TgZ(0,"div",15),t._UZ(1,"mat-progress-spinner",16),t.qZA())}let we=(()=>{class o{constructor(e,i,n,c,f){this._formBuilder=e,this.storeService=i,this.bankService=n,this._snackBar=c,this._matDialog=f,this.bankList=[]}ngOnInit(){this.getStoreBank(),this.getBankLists()}getStoreBank(){this.$bank=this.bankService.getStoreBank(this.store)}getBankLists(){this.$banks=this.bankService.getBanksLists().pipe((0,G.U)(e=>this.bankList=e.data))}addAccountDetails(e,i){this._matDialog.open(Te,{disableClose:!1,data:{storeId:this.store._id,banks:this.bankList,isNew:e,bank:i,currency:this.store.currency}}).afterClosed().subscribe(c=>{c&&this.getStoreBank()})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(a.qu),t.Y36(y.d),t.Y36(ct.y),t.Y36(J.ux),t.Y36(s.uw))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-bank-account-tab"]],inputs:{store:"store"},decls:4,vars:4,consts:[["style","padding:10px",4,"ngIf","ngIfElse"],["loading",""],[2,"padding","10px"],["class","mat-elevation-z6 example-container",4,"ngIf","ngIfElse"],["noBank",""],[1,"mat-elevation-z6","example-container"],[4,"ngIf","ngIfElse"],[2,"padding","15px"],["mat-raised-button","","color","primary",3,"click"],["mat-subheader",""],["matListItemTitle",""],["matListItemLine",""],["matSubheader",""],[2,"text-align","center"],["fxLayout","row","fxLayoutAlign","center center",2,"padding","15px"],["fxLayout","row","fxLayoutAlign","center center",2,"padding","10px"],["mode","indeterminate","color","primary"]],template:function(i,n){if(1&i&&(t.YNc(0,Se,5,4,"div",0),t.ALo(1,"async"),t.YNc(2,Oe,2,0,"ng-template",null,1,t.W1O)),2&i){const c=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,n.$banks))("ngIfElse",c)}},dependencies:[b.lW,H.i$,H.Tg,H.gs,j.d,H.WW,H.sL,st.Ou,l.O5,T.xw,T.Wh,l.Ov]})}return o})();var lt=u(9397),nt=u(3365),R=u(3566),w=u(5313),ut=u(9214),mt=u(8337);function Me(o,r){1&o&&(t.TgZ(0,"th",21),t._uU(1," Order Number "),t.qZA())}function ke(o,r){if(1&o&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",e.reference," ")}}function Ue(o,r){1&o&&t._UZ(0,"td",23)}function De(o,r){1&o&&(t.TgZ(0,"td",23)(1,"h2"),t._uU(2,"Total"),t.qZA()())}function Fe(o,r){1&o&&(t.TgZ(0,"th",21),t._uU(1," Date "),t.qZA())}function qe(o,r){if(1&o&&(t.TgZ(0,"td",22),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.createdAt,"MMM d, y, h:mm:ss a")," ")}}function Le(o,r){1&o&&t._UZ(0,"td",23)}function Ne(o,r){1&o&&(t.TgZ(0,"th",21),t._uU(1," Order Status "),t.qZA())}function Pe(o,r){if(1&o&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",e.status[0].name,"")}}function Ie(o,r){1&o&&t._UZ(0,"td",23)}function Ee(o,r){1&o&&(t.TgZ(0,"th",21),t._uU(1," Amount "),t.qZA())}function Ye(o,r){if(1&o&&(t.TgZ(0,"td",22),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=r.$implicit,i=t.oxw();t.xp6(1),t.hij(" ",t.xi3(2,1,e.total,i.store.currency)," ")}}function Je(o,r){if(1&o&&(t.TgZ(0,"td",23)(1,"h2"),t._uU(2),t.ALo(3,"currency"),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,1,e.getTotalCost))}}function Be(o,r){1&o&&(t.TgZ(0,"th",21),t._uU(1," Payment Status "),t.qZA())}function Qe(o,r){if(1&o&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",null==e?null:e.paymentStatus," ")}}function Re(o,r){1&o&&t._UZ(0,"td",23)}function $e(o,r){1&o&&(t.TgZ(0,"th",21),t._uU(1," Payment Type "),t.qZA())}function Ge(o,r){if(1&o&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",e.payment," ")}}function Ke(o,r){1&o&&t._UZ(0,"td",23)}function He(o,r){1&o&&(t.TgZ(0,"th",21),t._uU(1," Actions "),t.qZA())}function We(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"td",22)(1,"button",24)(2,"mat-icon"),t._uU(3,"more_vert"),t.qZA()(),t.TgZ(4,"mat-menu",null,25)(6,"button",26),t.NdJ("click",function(){const n=t.CHM(e),c=n.index,f=n.$implicit,C=t.oxw();return t.KtG(C.deleteOrder(c,f))}),t.TgZ(7,"mat-icon"),t._uU(8,"delete"),t.qZA(),t.TgZ(9,"span"),t._uU(10,"Delete"),t.qZA()(),t.TgZ(11,"button",27)(12,"mat-icon"),t._uU(13,"visibility"),t.qZA(),t.TgZ(14,"span"),t._uU(15,"View Order"),t.qZA()()()()}if(2&o){const e=t.MAs(5);t.xp6(1),t.Q6J("matMenuTriggerFor",e)}}function je(o,r){1&o&&t._UZ(0,"td",23)}function ze(o,r){1&o&&t._UZ(0,"tr",28)}function Ve(o,r){1&o&&t._UZ(0,"tr",29)}function Xe(o,r){if(1&o&&(t.TgZ(0,"tr",30)(1,"td",31),t._uU(2),t.qZA()()),2&o){t.oxw();const e=t.MAs(5);t.xp6(2),t.hij('No data matching the filter "',e.value,'"')}}function to(o,r){1&o&&t._UZ(0,"tr",32)}const eo=function(){return[5,10,25,100]};let oo=(()=>{class o{constructor(e,i,n){this.socket=e,this.storeService=i,this._matDialog=n,this.displayedColumns=["reference","date","status","amount","paymentStatus","paymentType","actions"],this.selection=new mt.Ov(!0,[]),this.statuses=[{id:0,name:"Pending",color:"bg-blue-300"},{id:1,name:"Approve",color:"bg-blue-400"},{id:3,name:"Canceled",color:"bg-blue-400"},{id:2,name:"Shipped",color:"bg-blue-400"},{id:3,name:"Completed",color:"bg-green-400"}],this.dataSource=new w.by}compareFn(e,i){return e.name===i}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}checkboxLabel(e){return e?`${this.selection.isSelected(e)?"deselect":"select"} row ${e.position+1}`:(this.isAllSelected()?"deselect":"select")+" all"}ngOnInit(){this.getOrders(),this.getOrder()}deleteOrder(e,i){this.confirmDialogRef=this._matDialog.open(v.X,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Item?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete this order?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(n=>{n&&(this.dataSource.data.splice(e,1),this.dataSource._updateChangeSubscription(),this.storeService.deleteStoreOrders(i._id).subscribe())})}getOrders(){this.storeService.getStoreOrders(this.store._id).pipe((0,lt.b)(e=>{this.dataSource=new w.by(e)})).subscribe()}get getTotalCost(){return this.dataSource.data.map(e=>e.total).reduce((e,i)=>e+i,0)}getOrder(){return this.socket.fromEvent("order").pipe((0,G.U)(e=>e)).subscribe(e=>{e&&(this.dataSource.data.unshift(e),this.dataSource._updateChangeSubscription())})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}changeValue(e,i){this.storeService.updateOrderStatus(i._id,i.user._id,e.value).subscribe(n=>{console.log(n)})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(ut.s),t.Y36(y.d),t.Y36(s.uw))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-orders-tab"]],viewQuery:function(i,n){if(1&i&&(t.Gf(nt.NW,5),t.Gf(R.YE,5)),2&i){let c;t.iGM(c=t.CRH())&&(n.paginator=c.first),t.iGM(c=t.CRH())&&(n.sort=c.first)}},inputs:{store:"store"},decls:42,vars:7,consts:[[2,"padding","20px"],["appearance","fill"],["matInput","","placeholder","Search Order",3,"keyup"],["input",""],[1,"mat-elevation-z6","example-container"],["mat-table","","matSort","",1,"w-full",2,"width","100%",3,"dataSource"],["matColumnDef","reference"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-footer-cell","",4,"matFooterCellDef"],["matColumnDef","date"],["matColumnDef","status"],["matColumnDef","amount"],["matColumnDef","paymentStatus"],["matColumnDef","paymentType"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["mat-footer-row","",4,"matFooterRowDef","matFooterRowDefSticky"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-footer-cell",""],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item",""],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","9",1,"mat-cell"],["mat-footer-row",""]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),t._uU(3,"Filter"),t.qZA(),t.TgZ(4,"input",2,3),t.NdJ("keyup",function(f){return n.applyFilter(f)}),t.qZA()(),t.TgZ(6,"div",4)(7,"table",5),t.ynx(8,6),t.YNc(9,Me,2,0,"th",7),t.YNc(10,ke,2,1,"td",8),t.YNc(11,Ue,1,0,"td",9),t.YNc(12,De,3,0,"td",9),t.BQk(),t.ynx(13,10),t.YNc(14,Fe,2,0,"th",7),t.YNc(15,qe,3,4,"td",8),t.YNc(16,Le,1,0,"td",9),t.BQk(),t.ynx(17,11),t.YNc(18,Ne,2,0,"th",7),t.YNc(19,Pe,2,1,"td",8),t.YNc(20,Ie,1,0,"td",9),t.BQk(),t.ynx(21,12),t.YNc(22,Ee,2,0,"th",7),t.YNc(23,Ye,3,4,"td",8),t.YNc(24,Je,4,3,"td",9),t.BQk(),t.ynx(25,13),t.YNc(26,Be,2,0,"th",7),t.YNc(27,Qe,2,1,"td",8),t.YNc(28,Re,1,0,"td",9),t.BQk(),t.ynx(29,14),t.YNc(30,$e,2,0,"th",7),t.YNc(31,Ge,2,1,"td",8),t.YNc(32,Ke,1,0,"td",9),t.BQk(),t.ynx(33,15),t.YNc(34,He,2,0,"th",7),t.YNc(35,We,16,1,"td",8),t.YNc(36,je,1,0,"td",9),t.BQk(),t.YNc(37,ze,1,0,"tr",16),t.YNc(38,Ve,1,0,"tr",17),t.YNc(39,Xe,3,1,"tr",18),t.YNc(40,to,1,0,"tr",19),t.qZA(),t._UZ(41,"mat-paginator",20),t.qZA()()),2&i&&(t.xp6(7),t.Q6J("dataSource",n.dataSource),t.xp6(30),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(2),t.Q6J("matFooterRowDef",n.displayedColumns)("matFooterRowDefSticky",!0),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(6,eo)))},dependencies:[b.RK,S.KE,S.hX,d.Hw,k.Nt,nt.NW,R.YE,R.nU,w.BZ,w.fO,w.as,w.w1,w.Dz,w.nj,w.mD,w.Ke,w.ge,w.ev,w.yh,w.XQ,w.Gk,w.Q2,w.Ee,p.VK,p.OP,p.p6,l.H9,l.uU],styles:["body[_ngcontent-%COMP%]{font-family:Covered By Your Grace,cursive;line-height:1.25}@media screen and (max-width: 960px){.mat-table[_ngcontent-%COMP%]{border:0;vertical-align:middle}.mat-table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{font-size:1em}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{border-bottom:5px solid #ddd;display:block}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;display:block;font-size:1em;text-align:right;font-weight:700;height:30px;margin-bottom:4%}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:before{content:attr(data-label);float:left;text-transform:uppercase;font-weight:400;font-size:.85em}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:last-child{border-bottom:0}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:first-child{margin-top:4%}}"]})}return o})();var dt=u(7069),no=u(7747);const io=["pdfTable"];function ro(o,r){1&o&&(t.TgZ(0,"th",25),t._uU(1," Order Number "),t.qZA())}function ao(o,r){if(1&o&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",e.reference," ")}}function so(o,r){1&o&&(t.TgZ(0,"td",27),t._uU(1," Total"),t.qZA())}function co(o,r){1&o&&(t.TgZ(0,"th",25),t._uU(1," Date "),t.qZA())}function lo(o,r){if(1&o&&(t.TgZ(0,"td",26),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.createdAt,"MMM d, y, h:mm:ss a")," ")}}function uo(o,r){1&o&&t._UZ(0,"td",28)}function mo(o,r){1&o&&(t.TgZ(0,"th",25),t._uU(1," Order Amount "),t.qZA())}function po(o,r){if(1&o&&(t.TgZ(0,"td",26),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=r.$implicit,i=t.oxw();t.xp6(1),t.hij(" ",t.xi3(2,1,e.total,i.store.currency)," ")}}function fo(o,r){if(1&o&&(t.TgZ(0,"td",27),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",t.xi3(2,1,e.getTotalCost,e.store.currency)," ")}}function ho(o,r){1&o&&(t.TgZ(0,"th",25),t._uU(1," Shopbot Commission "),t.qZA())}function _o(o,r){if(1&o&&(t.TgZ(0,"td",26),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=r.$implicit,i=t.oxw();t.xp6(1),t.hij(" ",t.xi3(2,1,(null==e?null:e.total)*i.store.finance.adminCommission/100,i.store.currency)," ")}}function go(o,r){if(1&o&&(t.TgZ(0,"td",27),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",t.xi3(2,1,e.getShopbotTotal,e.store.currency)," ")}}function vo(o,r){1&o&&(t.TgZ(0,"th",25),t._uU(1," Vendor Amount "),t.qZA())}function yo(o,r){if(1&o&&(t.TgZ(0,"td",26),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=r.$implicit,i=t.oxw();t.xp6(1),t.hij(" ",t.xi3(2,1,(null==e?null:e.total)-(null==e?null:e.total)*i.store.finance.adminCommission/100,i.store.currency)," ")}}function xo(o,r){if(1&o&&(t.TgZ(0,"td",27),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",t.xi3(2,1,e.getVendorCost,e.store.currency)," ")}}function bo(o,r){1&o&&t._UZ(0,"tr",29)}function To(o,r){1&o&&t._UZ(0,"tr",30)}function Zo(o,r){1&o&&t._UZ(0,"tr",31)}const Co=u(8777);dt.vfs=no.I.vfs;let Ao=(()=>{class o{constructor(e,i,n){this.socket=e,this.storeService=i,this._matDialog=n,this.displayedColumns=["reference","date","orderAmount","adminCommission","vendorEarning"],this.selection=new mt.Ov(!0,[]),this.dataSource=new w.by}compareFn(e,i){return e.name===i}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}checkboxLabel(e){return e?`${this.selection.isSelected(e)?"deselect":"select"} row ${e.position+1}`:(this.isAllSelected()?"deselect":"select")+" all"}ngOnInit(){this.getOrders(),this.getOrder()}deleteOrder(e,i){this.confirmDialogRef=this._matDialog.open(v.X,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Item?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete this order?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(n=>{n&&(this.dataSource.data.splice(e,1),this.dataSource._updateChangeSubscription(),this.storeService.deleteStoreOrders(i._id).subscribe())})}getOrders(){this.storeService.getStoreOrders(this.store._id).pipe((0,lt.b)(e=>{this.dataSource=new w.by(e)})).subscribe()}get getTotalCost(){return this.dataSource.data.map(e=>e.total).reduce((e,i)=>e+i,0)}get getVendorCost(){let e=0;for(const i of this.dataSource.data){let n=i.total-i.total*this.store.finance.adminCommission/100;console.log(n),e+=n}return e}get getShopbotTotal(){return this.getTotalCost-this.getVendorCost}print(){var i=Co(this.pdfTable.nativeElement.innerHTML);dt.createPdf({content:i,styles:{"with-margin":{marginBottom:5},amount:{marginBottom:5,bold:!0},fill:{marginBottom:5,bold:!0,fillColor:"green"}}}).download()}getOrder(){return this.socket.fromEvent("order").pipe((0,G.U)(e=>e)).subscribe(e=>{e&&(this.dataSource.data.unshift(e),this.dataSource._updateChangeSubscription())})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}changeValue(e,i){this.storeService.updateOrderStatus(i._id,i.user._id,e.value).subscribe(n=>{console.log(n)})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(ut.s),t.Y36(y.d),t.Y36(s.uw))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-finance-details-tab"]],viewQuery:function(i,n){if(1&i&&(t.Gf(io,5),t.Gf(nt.NW,5),t.Gf(R.YE,5)),2&i){let c;t.iGM(c=t.CRH())&&(n.pdfTable=c.first),t.iGM(c=t.CRH())&&(n.paginator=c.first),t.iGM(c=t.CRH())&&(n.sort=c.first)}},inputs:{store:"store"},decls:63,vars:22,consts:[[2,"padding","20px"],[1,"mat-elevation-z6","mb-3","p-3"],["mat-raised-button","","color","primary",3,"click"],["id","pdfTable",1,"mat-elevation-z6","example-container"],["pdfTable",""],["fxLayout","row","fxLayoutAlign","center center"],[1,"grid","max-w-screen-xl","grid-cols-2","gap-8","p-4","mx-auto","sm:grid-cols-2","xl:grid-cols-4","sm:p-8"],[1,"flex","flex-col","items-center","justify-center","with-margin"],[1,"mb-2","text-3xl","font-extrabold","amount"],[1,"font-light","red"],[1,"font-light"],[1,"mb-2","text-3xl","font-extrabold","amount","fill"],["mat-table","","matSort","",1,"w-full",2,"width","100%",3,"dataSource"],["matColumnDef","reference"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-footer-cell","","class","font-bold",4,"matFooterCellDef"],["matColumnDef","date"],["mat-footer-cell","",4,"matFooterCellDef"],["matColumnDef","orderAmount"],["matColumnDef","adminCommission"],["matColumnDef","vendorEarning"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef","matFooterRowDefSticky"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-footer-cell","",1,"font-bold"],["mat-footer-cell",""],["mat-header-row",""],["mat-row",""],["mat-footer-row",""]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(){return n.print()}),t.TgZ(3,"mat-icon"),t._uU(4,"print"),t.qZA(),t._uU(5," Print"),t.qZA()(),t.TgZ(6,"div",3,4)(8,"div",5)(9,"dl",6)(10,"div",7)(11,"dt",8),t._uU(12),t.qZA(),t.TgZ(13,"dd",9),t._uU(14," Total Number of Orders"),t.qZA()(),t.TgZ(15,"div",7)(16,"dt",8),t._uU(17),t.ALo(18,"currency"),t.qZA(),t.TgZ(19,"dd",10),t._uU(20,"Total Amount"),t.qZA()(),t.TgZ(21,"div",7)(22,"dt",8),t._uU(23),t.ALo(24,"currency"),t.qZA(),t.TgZ(25,"dd",10),t._uU(26," Shopbot Commission"),t.qZA()(),t.TgZ(27,"div",7)(28,"dt",11),t._uU(29),t.ALo(30,"currency"),t.qZA(),t.TgZ(31,"dd",10),t._uU(32," Vendor Amount "),t.qZA()(),t.TgZ(33,"div",7)(34,"dt",11),t._uU(35),t.ALo(36,"currency"),t.qZA(),t.TgZ(37,"dd",10),t._uU(38," Wallet Balance "),t.qZA()()()(),t.TgZ(39,"table",12),t.ynx(40,13),t.YNc(41,ro,2,0,"th",14),t.YNc(42,ao,2,1,"td",15),t.YNc(43,so,2,0,"td",16),t.BQk(),t.ynx(44,17),t.YNc(45,co,2,0,"th",14),t.YNc(46,lo,3,4,"td",15),t.YNc(47,uo,1,0,"td",18),t.BQk(),t.ynx(48,19),t.YNc(49,mo,2,0,"th",14),t.YNc(50,po,3,4,"td",15),t.YNc(51,fo,3,4,"td",16),t.BQk(),t.ynx(52,20),t.YNc(53,ho,2,0,"th",14),t.YNc(54,_o,3,4,"td",15),t.YNc(55,go,3,4,"td",16),t.BQk(),t.ynx(56,21),t.YNc(57,vo,2,0,"th",14),t.YNc(58,yo,3,4,"td",15),t.YNc(59,xo,3,4,"td",16),t.BQk(),t.YNc(60,bo,1,0,"tr",22),t.YNc(61,To,1,0,"tr",23),t.YNc(62,Zo,1,0,"tr",24),t.qZA()()()),2&i&&(t.xp6(12),t.hij("",n.dataSource.data.length," "),t.xp6(5),t.hij(" ",t.xi3(18,10,n.getTotalCost,n.store.currency)," "),t.xp6(6),t.hij("",t.xi3(24,13,n.getShopbotTotal,n.store.currency)," "),t.xp6(6),t.hij("",t.xi3(30,16,n.getVendorCost,n.store.currency)," "),t.xp6(6),t.hij("",t.xi3(36,19,n.store.walletBalance,n.store.currency)," "),t.xp6(4),t.Q6J("dataSource",n.dataSource),t.xp6(21),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("matFooterRowDef",n.displayedColumns)("matFooterRowDefSticky",!0))},dependencies:[b.lW,d.Hw,R.YE,R.nU,w.BZ,w.fO,w.as,w.w1,w.Dz,w.nj,w.mD,w.Ke,w.ge,w.ev,w.yh,w.XQ,w.Gk,w.Q2,T.xw,T.Wh,l.H9,l.uU],styles:["body[_ngcontent-%COMP%]{font-family:Covered By Your Grace,cursive;line-height:1.25}@media screen and (max-width: 960px){.mat-table[_ngcontent-%COMP%]{border:0;vertical-align:middle}.mat-table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{font-size:1em}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{border-bottom:5px solid #ddd;display:block}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;display:block;font-size:1em;text-align:right;font-weight:700;height:30px;margin-bottom:4%}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:before{content:attr(data-label);float:left;text-transform:uppercase;font-weight:400;font-size:.85em}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:last-child{border-bottom:0}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:first-child{margin-top:4%}}"]})}return o})();var pt=u(6028),So=u(7921),Oo=u(7841),ft=u(4630),z=u(2557);const wo=["fruitInput"],Mo=["auto"];function ko(o,r){1&o&&(t.TgZ(0,"mat-icon",13),t._uU(1,"cancel"),t.qZA())}function Uo(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"mat-chip-row",11),t.NdJ("removed",function(){const c=t.CHM(e).$implicit,f=t.oxw();return t.KtG(f.remove(c))}),t._uU(1),t.YNc(2,ko,2,0,"mat-icon",12),t.qZA()}if(2&o){const e=r.$implicit,i=t.oxw();t.Q6J("removable",i.removable),t.xp6(1),t.hij(" ",e.name," "),t.xp6(1),t.Q6J("ngIf",i.removable)}}function Do(o,r){if(1&o&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.name," ")}}let Fo=(()=>{class o{constructor(e,i,n){this.cuisinesService=e,this.storeService=i,this.snackBar=n,this.visible=!0,this.selectable=!0,this.removable=!0,this.addOnBlur=!0,this.separatorKeysCodes=[pt.K5,pt.OC],this.cuisineCtrl=new a.NI,this.isLoading=!1,this.cuisines=[],this.cuisinesService.getCuisines().subscribe(c=>{this.cuisines=c}),this.filteredCuisines=this.cuisineCtrl.valueChanges.pipe((0,So.O)(null),(0,G.U)(c=>c?this._filter(c):this.cuisines.slice()))}remove(e){const i=this.store.cuisines.indexOf(e);i>=0&&this.store.cuisines.splice(i,1)}selected(e){this.store.cuisines.push(e.option.value),this.fruitInput.nativeElement.value="",this.cuisineCtrl.setValue(null)}_filter(e){if("string"==typeof e){const i=e.toLowerCase();return this.cuisines.filter(n=>0===n.name.toLowerCase().indexOf(i))}{const i=e.name.toLowerCase();return this.cuisines.filter(n=>0===n.name.toLowerCase().indexOf(i))}}save(){this.isLoading=!0;const e=this.store.cuisines.map(i=>i._id);this.storeService.saveStore({cuisines:e},this.store._id).pipe((0,h.x)(()=>this.isLoading=!1)).subscribe(i=>{this.snackBar.open("Cuisines Updated","Ok",{duration:200})})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(Oo.x),t.Y36(y.d),t.Y36(J.ux))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-cuisines-tab"]],viewQuery:function(i,n){if(1&i&&(t.Gf(wo,5),t.Gf(Mo,5)),2&i){let c;t.iGM(c=t.CRH())&&(n.fruitInput=c.first),t.iGM(c=t.CRH())&&(n.matAutocomplete=c.first)}},inputs:{store:"store"},decls:14,vars:10,consts:[[1,"example-chip-list","w-full"],["aria-label","Fruit selection"],["chipList",""],[3,"removable","removed",4,"ngFor","ngForOf"],["placeholder","New cuisine...",3,"formControl","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur"],["fruitInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"mat-18"],[3,"removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[3,"value"]],template:function(i,n){if(1&i&&(t.TgZ(0,"mat-form-field",0)(1,"mat-chip-grid",1,2),t.YNc(3,Uo,3,3,"mat-chip-row",3),t._UZ(4,"input",4,5),t.qZA(),t.TgZ(6,"mat-autocomplete",6,7),t.NdJ("optionSelected",function(f){return n.selected(f)}),t.YNc(8,Do,2,2,"mat-option",8),t.ALo(9,"async"),t.qZA()(),t.TgZ(10,"button",9),t.NdJ("click",function(){return n.save()}),t.TgZ(11,"mat-icon",10),t._uU(12,"add"),t.qZA(),t._uU(13," SAVE\n"),t.qZA()),2&i){const c=t.MAs(2),f=t.MAs(7);t.xp6(3),t.Q6J("ngForOf",n.store.cuisines),t.xp6(1),t.Q6J("formControl",n.cuisineCtrl)("matAutocomplete",f)("matChipInputFor",c)("matChipInputSeparatorKeyCodes",n.separatorKeysCodes)("matChipInputAddOnBlur",n.addOnBlur),t.xp6(4),t.Q6J("ngForOf",t.lcZ(9,8,n.filteredCuisines)),t.xp6(2),t.Q6J("disabled",n.isLoading)}},dependencies:[l.sg,l.O5,ft.XC,x.ey,ft.ZL,b.lW,z.RA,z.oH,z.qH,z.z3,S.KE,d.Hw,a.Fj,a.JJ,a.oH,l.Ov]})}return o})();function qo(o,r){if(1&o&&(t.TgZ(0,"mat-option",8),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e._id),t.xp6(1),t.Oqu(e.name)}}let Lo=(()=>{class o{constructor(e,i,n,c,f){this._matDialog=e,this.router=i,this._formBuilder=n,this.storeService=c,this._snackBar=f}ngOnInit(){this.generalSettingForm=this.createGeneralSettingForm()}createGeneralSettingForm(){return this._formBuilder.group({merchant:[this.store.merchant,a.kI.required]})}save(){this.isLoading=!0,this.store.paused=!this.store.paused,this.storeService.saveStore(this.generalSettingForm.getRawValue(),this.store._id).pipe((0,h.x)(()=>this.isLoading=!1)).subscribe(e=>{this._snackBar.open("Saved","ok",{duration:5e3}),this.storeService.getStore()})}addMerchant(){this.router.navigate(["dashboard","merchants","new"])}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(s.uw),t.Y36(O.F0),t.Y36(a.qu),t.Y36(y.d),t.Y36(J.ux))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-merchant-tab"]],inputs:{store:"store",merchants:"merchants"},decls:12,vars:2,consts:[[1,"w-full","h-screen","relative","p-5"],[3,"formGroup"],["appearance","outline","floatLabel","always",1,"w-full"],["formControlName","merchant","placeholder","Select Merchant"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center","fxLayout.lt-lg","column","fxLayoutAlign.lt-lg","start stretch","fxLayoutGap","10px"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"],[3,"value"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"form",1)(2,"mat-form-field",2)(3,"mat-label"),t._uU(4,"Select Merchant"),t.qZA(),t.TgZ(5,"mat-select",3),t.YNc(6,qo,2,2,"mat-option",4),t.qZA()()(),t.TgZ(7,"div",5)(8,"button",6),t.NdJ("click",function(){return n.addMerchant()}),t._uU(9,"Create Merchant"),t.qZA(),t.TgZ(10,"button",7),t.NdJ("click",function(){return n.save()}),t._uU(11,"Save"),t.qZA()()()),2&i&&(t.xp6(1),t.Q6J("formGroup",n.generalSettingForm),t.xp6(5),t.Q6J("ngForOf",n.merchants))},dependencies:[l.sg,x.ey,b.lW,S.KE,S.hX,M.gD,a._Y,a.JJ,a.JL,a.sg,a.u,T.xw,T.SQ,T.Wh]})}return o})();function No(o,r){if(1&o&&t._UZ(0,"app-general-settings-tab",18),2&o){const e=t.oxw().ngIf;t.Q6J("store",e)}}function Po(o,r){if(1&o&&t._UZ(0,"app-finance-details-tab",18),2&o){const e=t.oxw().ngIf;t.Q6J("store",e)}}function Io(o,r){if(1&o&&t._UZ(0,"app-store-menus-tab",18),2&o){const e=t.oxw().ngIf;t.Q6J("store",e)}}function Eo(o,r){if(1&o&&t._UZ(0,"app-orders-tab",18),2&o){const e=t.oxw().ngIf;t.Q6J("store",e)}}function Yo(o,r){if(1&o&&t._UZ(0,"app-business-hours-tab",18),2&o){const e=t.oxw().ngIf;t.Q6J("store",e)}}function Jo(o,r){if(1&o&&t._UZ(0,"app-pickup-and-delivery-tab",18),2&o){const e=t.oxw().ngIf;t.Q6J("store",e)}}function Bo(o,r){if(1&o&&t._UZ(0,"app-cuisines-tab",18),2&o){const e=t.oxw().ngIf;t.Q6J("store",e)}}function Qo(o,r){if(1&o&&t._UZ(0,"app-merchant-tab",19),2&o){const e=t.oxw().ngIf,i=t.oxw();t.Q6J("store",e)("merchants",i.merchants)}}function Ro(o,r){if(1&o&&t._UZ(0,"app-bank-account-tab",18),2&o){const e=t.oxw().ngIf;t.Q6J("store",e)}}function $o(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"mat-tab-group",7),t.NdJ("selectedTabChange",function(n){t.CHM(e);const c=t.oxw();return t.KtG(c.tabChanged(n))}),t.TgZ(2,"mat-tab",8),t.YNc(3,No,1,1,"ng-template",9),t.qZA(),t.TgZ(4,"mat-tab",10),t.YNc(5,Po,1,1,"ng-template",9),t.qZA(),t.TgZ(6,"mat-tab",11),t.YNc(7,Io,1,1,"ng-template",9),t.qZA(),t.TgZ(8,"mat-tab",12),t.YNc(9,Eo,1,1,"ng-template",9),t.qZA(),t.TgZ(10,"mat-tab",13),t.YNc(11,Yo,1,1,"ng-template",9),t.qZA(),t.TgZ(12,"mat-tab",14),t.YNc(13,Jo,1,1,"ng-template",9),t.qZA(),t.TgZ(14,"mat-tab",15),t.YNc(15,Bo,1,1,"ng-template",9),t.qZA(),t.TgZ(16,"mat-tab",16),t.YNc(17,Qo,1,2,"ng-template",9),t.qZA(),t.TgZ(18,"mat-tab",17),t.YNc(19,Ro,1,1,"ng-template",9),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("selectedIndex",e.selectedTab)}}function Go(o,r){1&o&&t._UZ(0,"mat-progress-bar",20)}let Ko=(()=>{class o{constructor(e,i,n,c,f){this.storeService=e,this._location=i,this._matSnackBar=n,this.route=c,this.router=f,this.selectedTab=0,this._unsubscribeAll=new rt.x,this.store=this.storeService.store,this.merchants=this.route.snapshot.data.merchants}ngOnInit(){this.store=this.storeService.store,this.route.queryParams.subscribe(e=>{this.selectedTab=e.tab||0})}tabChanged(e){const i=Object.assign({},this.route.snapshot.queryParams);i.tab=e.index,this.router.navigate(["."],{queryParams:i,relativeTo:this.route})}goBack(){this._location.back()}ngOnDestroy(){}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(y.d),t.Y36(l.Ye),t.Y36(J.ux),t.Y36(O.gz),t.Y36(O.F0))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-store"]],decls:15,vars:4,consts:[["fxLayout","row","fxLayoutAlign","space-between center",1,"header"],["fxLayout","row","fxLayoutAlign","space-between center",1,"mt-3"],["mat-icon-button","",3,"click"],[1,"details"],["fxLayout","column","fxLayoutAlign","space-between stretch"],[4,"ngIf","ngIfElse"],["loading",""],[3,"selectedIndex","selectedTabChange"],["label","General"],["matTabContent",""],["label","Finance Details"],["label","Menu"],["label","Orders"],["label","Business Hours"],["label","Pickup and Delivery"],["label","Cuisines"],["label","Merchant"],["label","Bank Account"],[3,"store"],[3,"store","merchants"],["mode","buffer"]],template:function(i,n){if(1&i&&(t.TgZ(0,"div")(1,"div",0)(2,"div",1)(3,"button",2),t.NdJ("click",function(){return n.goBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"keyboard_backspace"),t.qZA()(),t.TgZ(6,"div",3)(7,"h2"),t._uU(8),t.qZA(),t.TgZ(9,"p"),t._uU(10),t.qZA()()()(),t.TgZ(11,"div",4),t.YNc(12,$o,20,1,"div",5),t.YNc(13,Go,1,0,"ng-template",null,6,t.W1O),t.qZA()()),2&i){const c=t.MAs(14);t.xp6(8),t.Oqu(n.store.name),t.xp6(2),t.Oqu(n.store.description),t.xp6(2),t.Q6J("ngIf",n.store)("ngIfElse",c)}},dependencies:[l.O5,b.RK,d.Hw,$.Vc,$.uX,$.SP,X.pW,T.xw,T.Wh,It,Rt,ie,xe,we,oo,Ao,Fo,Lo],styles:[".header[_ngcontent-%COMP%]{margin-bottom:20px}.header[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0;margin:0}.header[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:0}"]})}return o})();var Ho=u(1631);class ht{constructor(r){this._id=(r=r||{})._id,this.name=r.name||"",this.menu=r.menu,this.store=r.store,this.handle=r.handle,this.description=r.description||"",this.categories=r.categories||{},this.tags=r.tags||[],this.photos=r.photos||[],this.priceTaxExcl=r.priceTaxExcl||0,this.priceTaxIncl=r.priceTaxIncl||0,this.taxRate=r.taxRate||0,this.comparedPrice=r.comparedPrice||0,this.price=r.price||0,this.quantity=r.quantity||0,this.sku=r.sku||0,this.width=r.width||0,this.height=r.height||0,this.depth=r.depth||0,this.weight=r.weight||0,this.extraShippingFee=r.extraShippingFee||0,this.active=r.active||!0,this.options=r.options||[]}}var Wo=u(7942),it=u(9977);function jo(o,r){if(1&o&&(t.TgZ(0,"mat-option",30),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function zo(o,r){1&o&&(t.TgZ(0,"div",31),t._UZ(1,"img",32),t.qZA()),2&o&&(t.xp6(1),t.Q6J("src","https://dashboard.heypay.xyz/images/image_placeholder.png",t.LSH))}function Vo(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",35)(1,"div",36)(2,"button",37),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index,c=t.oxw();return t.KtG(c.deleteImages(n))}),t.TgZ(3,"mat-icon",38),t._uU(4,"delete"),t.qZA()()()()}if(2&o){const e=t.oxw().$implicit;t.Udp("background-image","url("+(""==e?"https://dashboard.heypay.xyz/images/store_image_placeholder.png":e)+")")}}function Xo(o,r){if(1&o&&(t.TgZ(0,"div",33),t.YNc(1,Vo,5,2,"div",34),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.product.photos.length>0)}}function tn(o,r){if(1&o&&t._UZ(0,"mat-progress-bar",39),2&o){const e=t.oxw();t.Q6J("value",e.uploadProgress)}}function en(o,r){if(1&o&&(t.TgZ(0,"mat-option",30),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.hij("",e," ")}}function on(o,r){1&o&&(t.TgZ(0,"h3"),t._uU(1,"Variant Options"),t.qZA())}function nn(o,r){if(1&o&&(t.TgZ(0,"mat-option",30),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij("",e.name," ")}}const rn=function(){return{name:"Yes",value:!0}},an=function(){return{name:"No",value:!1}},_t=function(o,r){return[o,r]};function sn(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",53)(2,"mat-form-field",54)(3,"mat-label"),t._uU(4,"Name"),t.qZA(),t._UZ(5,"input",55),t.qZA(),t.TgZ(6,"mat-form-field",56)(7,"mat-label"),t._uU(8,"Price"),t.qZA(),t._UZ(9,"input",57),t.qZA(),t.TgZ(10,"mat-form-field",58)(11,"mat-label"),t._uU(12,"In Stock?"),t.qZA(),t.TgZ(13,"mat-select",59),t.YNc(14,nn,2,2,"mat-option",11),t.qZA()(),t.TgZ(15,"button",60),t.NdJ("click",function(){const c=t.CHM(e).index,f=t.oxw().$implicit,C=t.oxw(2);return t.KtG(C.removeSubOptions(f.controls.options,c))}),t.TgZ(16,"mat-icon"),t._uU(17,"delete"),t.qZA()()()()}if(2&o){const e=r.$implicit;t.xp6(1),t.Q6J("formGroup",e),t.xp6(4),t.Q6J("disabled",!0),t.xp6(4),t.Q6J("disabled",!0),t.xp6(5),t.Q6J("ngForOf",t.WLB(6,_t,t.DdM(4,rn),t.DdM(5,an)))}}const cn=function(){return["Multiple","Single"]};function ln(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",42)(1,"div",43)(2,"mat-form-field",44)(3,"mat-label"),t._uU(4,"Name"),t.qZA(),t._UZ(5,"input",45),t.qZA(),t.TgZ(6,"mat-form-field",46)(7,"mat-label"),t._uU(8,"Selection Type"),t.qZA(),t.TgZ(9,"mat-select",47),t.YNc(10,en,2,2,"mat-option",11),t.qZA()(),t.TgZ(11,"mat-slide-toggle",48),t._uU(12,"enabled"),t.qZA(),t.TgZ(13,"mat-slide-toggle",49),t._uU(14,"Mandatory"),t.qZA(),t.TgZ(15,"button",26),t.NdJ("click",function(){const c=t.CHM(e).$implicit,f=t.oxw(2);return t.KtG(f.addSubOption(c.controls.options))}),t.TgZ(16,"mat-icon"),t._uU(17,"add"),t.qZA(),t._uU(18," Add Options "),t.qZA(),t.TgZ(19,"button",50),t.NdJ("click",function(){const c=t.CHM(e).index,f=t.oxw(2);return t.KtG(f.removeOptions(c))}),t.TgZ(20,"mat-icon"),t._uU(21,"delete"),t.qZA()()(),t.YNc(22,on,2,0,"h3",51),t.YNc(23,sn,18,9,"div",52),t.qZA()}if(2&o){const e=r.$implicit,i=r.index,n=t.oxw(2);let c;t.xp6(1),t.Q6J("formGroupName",i),t.xp6(9),t.Q6J("ngForOf",t.DdM(4,cn)),t.xp6(12),t.Q6J("ngIf",n.options.controls.length>0),t.xp6(1),t.Q6J("ngForOf",null==e||null==(c=e.get("options"))?null:c.controls)}}function un(o,r){if(1&o&&(t.TgZ(0,"div",40),t.YNc(1,ln,24,5,"div",41),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",null==e.options?null:e.options.controls)}}const mn=function(){return{name:"Active",value:!0}},dn=function(){return{name:"Draft",value:!1}};let gt=(()=>{class o{constructor(e,i,n,c,f,C,V){this.productService=e,this._formBuilder=i,this._location=n,this._matSnackBar=c,this.menusService=f,this.dialogRef=C,this.data=V,this.isLoading=!1,this.pageType=V.pageType,"new"==this.pageType?(this.product=new ht,this.product.menu=this.data.menuId,this.product.store=this.data.storeId):(this.product=new ht(this.data.product),this.product.menu=this.data.menuId,this.product.store=this.data.storeId)}ngOnInit(){this.productForm=this.createProductForm(),this.product.options.forEach((e,i)=>{this.addOption(e)})}ngAfterViewInit(){"new"==this.pageType&&this.data.product.options.forEach((e,i)=>{this.addOption(e)})}createProductForm(){return this._formBuilder.group({_id:[this.product._id],name:[this.product.name,a.kI.required],menu:[this.product.menu],store:[this.product.store],description:[this.product.description,a.kI.required],photos:[this.product.photos],quantity:[this.product.quantity],price:[this.product.price,a.kI.required],active:[this.product.active],options:this._formBuilder.array([])})}newOptions(e){return this._formBuilder.group({name:[e?e.name:"",a.kI.required],mandatory:[!!e&&e.mandatory,a.kI.required],selectedType:[e?e.selectedType:"",a.kI.required],enabled:[e?e.enabled:"",a.kI.required],options:this._formBuilder.array(e?e.options.map(i=>this.newSubOptions(i)):[])})}newSubOptions(e){return this._formBuilder.group({name:[e?e.name:"",a.kI.required],price:[e?e.price:0,a.kI.required],inStock:[e?e.inStock:"",a.kI.required]})}get options(){return this.productForm.get("options")}addOption(e){this.options.push(this.newOptions(e))}addSubOption(e){e.push(this.newSubOptions(e))}removeOptions(e){this.options.removeAt(e)}removeSubOptions(e,i){e.removeAt(i)}onFileSelected(e){const i=e.target.files;for(var n=0;n<e.target.files.length;n++)if(i){this.fileName=i.name;const c=new FormData;c.append("files",e.target.files[n]);const f=this.productService.uploadPhoto(c,this.product._id).pipe((0,h.x)(()=>this.reset()));this.uploadSub=f.subscribe(C=>{C.type==ot.dt.UploadProgress?this.uploadProgress=Math.round(C.loaded/C.total*100):C.hasOwnProperty("body")&&this.product.photos.push(C.body.photos[0])})}}saveProduct(){if(this.isLoading=!0,"new"==this.pageType){const e=this.productForm.getRawValue();this.productService.addProduct(e).pipe((0,Ho.z)(i=>this.menusService.addFoodToMenu(i._id,this.data.menuId))).subscribe(i=>{this.isLoading=!1,this.dialogRef.close(i),this._matSnackBar.open("Product saved","OK",{verticalPosition:"top",duration:2e3})})}else{const e=this.productForm.getRawValue();this.productService.saveProduct(e,this.data.product._id).subscribe(i=>{this.isLoading=!1,this.dialogRef.close("data"),this._matSnackBar.open("Product saved","OK",{verticalPosition:"top",duration:2e3})})}}deleteImages(e){this.product.photos.splice(e,1)}reset(){this.uploadProgress=null,this.uploadSub=null}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(Wo.M),t.Y36(a.qu),t.Y36(l.Ye),t.Y36(J.ux),t.Y36(it.h),t.Y36(s.so),t.Y36(s.WI))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-item-to-menu"]],decls:50,vars:15,consts:[["mat-dialog-title",""],[1,"w-full"],["name","productForm","fxLayout","column",1,"product",3,"formGroup"],[1,"w-100"],["label","Basic"],["fxLayout","column","fxLayoutAlign","space-around stretch",1,"tab-content"],["appearance","fill","floatLabel","always",1,"w-100"],["matInput","","placeholder","Product Name","name","name","formControlName","name","required",""],["matInput","","placeholder","Product Description","name","description","formControlName","description","rows","5"],["matInput","","placeholder","Price","name","Price","formControlName","price","type","number"],["formControlName","active","required",""],[3,"value",4,"ngFor","ngForOf"],["label","Photos",3,"disabled"],["fusePerfectScrollbar","",1,"tab-content"],["fxLayout","row wrap","fxLayoutAlign","start start"],["class","product-image","fxLayout","row","fxLayoutAlign","center center",4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","start start","fxLayoutGap","10px",4,"ngFor","ngForOf"],["fxLayout","column","fxLayoutAlign","space-around center"],["class","progress-bar","mode","determinate",3,"value",4,"ngIf"],["type","file","multiple","",1,"file-input",3,"change"],["fileUpload",""],["mat-stroked-button","","color","primary",3,"click"],["label","Variants",3,"disabled"],[1,"tab-content","p-24"],["formArrayName","options",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",2,"padding","20px 0px"],["mat-raised-button","","color","primary",3,"click"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-button","","cdkFocusInitial","",3,"disabled","click"],[3,"value"],["fxLayout","row","fxLayoutAlign","center center",1,"product-image"],[1,"media",3,"src"],["fxLayout","row wrap","fxLayoutAlign","start start","fxLayoutGap","10px"],["style","width: 150px; height: 150px; background-position: center; background-size: contain;","fxLayout","row","fxLayoutAlign","center center",3,"background-image",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center",2,"width","150px","height","150px","background-position","center","background-size","contain"],[1,"control-logo"],["mat-icon-button","","color","warn",1,"bg-white",3,"click"],[1,"mat-18"],["mode","determinate",1,"progress-bar",3,"value"],["formArrayName","options"],["style","border-bottom: 1px solid #ccc; margin-bottom: 20px;",4,"ngFor","ngForOf"],[2,"border-bottom","1px solid #ccc","margin-bottom","20px"],["fxLayout.gt-md","row","fxLayout.lt-md","column","fxLayoutGap","10","fxLayoutAlign","space-between center",2,"padding","10px","background","#d6f2ff",3,"formGroupName"],["appearance","fill","fxFlex.lt-md","100%","floatLabel","always","fxFlex.gt-md","30"],["matInput","","name","name","formControlName","name","rows","5"],["appearance","fill","floatLabel","always","fxFlex.lt-md","100%","fxFlex.gt-md","30"],["formControlName","selectedType","required",""],["formControlName","enabled"],["formControlName","mandatory"],["mat-icon-button","",3,"click"],[4,"ngIf"],[4,"ngFor","ngForOf"],["fxLayout.gt-md","row","fxLayout.lt-md","column","fxLayoutGap","10","fxLayoutAlign","start center",3,"formGroup"],["appearance","fill","floatLabel","always","fxFlex","30",2,"margin-right","10px"],["matInput","","name","name","formControlName","name","rows","5",3,"disabled"],["appearance","fill","floatLabel","always","fxFlex","30"],["matInput","","type","number","name","price","formControlName","price","rows","5",3,"disabled"],["appearance","fill","fxFlex","30"],["formControlName","inStock","required",""],["mat-icon-button","","color","warn",3,"click"]],template:function(i,n){if(1&i){const c=t.EpF();t.TgZ(0,"h2",0),t._uU(1,"Add Item"),t.qZA(),t.TgZ(2,"mat-dialog-content",1)(3,"form",2)(4,"mat-tab-group",3)(5,"mat-tab",4)(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),t._uU(9,"Product Name"),t.qZA(),t._UZ(10,"input",7),t.qZA(),t.TgZ(11,"mat-form-field",6)(12,"mat-label"),t._uU(13,"Product Description"),t.qZA(),t._UZ(14,"textarea",8),t.qZA(),t.TgZ(15,"mat-form-field",6)(16,"mat-label"),t._uU(17,"Price"),t.qZA(),t._UZ(18,"input",9),t.qZA(),t.TgZ(19,"mat-form-field",6)(20,"mat-label"),t._uU(21,"Product Status"),t.qZA(),t.TgZ(22,"mat-select",10),t.YNc(23,jo,2,2,"mat-option",11),t.qZA()()()(),t.TgZ(24,"mat-tab",12)(25,"div",13)(26,"div",14),t.YNc(27,zo,2,1,"div",15),t.YNc(28,Xo,2,1,"div",16),t.qZA(),t.TgZ(29,"div",17),t.YNc(30,tn,1,1,"mat-progress-bar",18),t.TgZ(31,"input",19,20),t.NdJ("change",function(C){return n.onFileSelected(C)}),t.qZA(),t.TgZ(33,"button",21),t.NdJ("click",function(){t.CHM(c);const C=t.MAs(32);return t.KtG(C.click())}),t.TgZ(34,"mat-icon"),t._uU(35,"upload_cloud"),t.qZA(),t._uU(36," Add Photos "),t.qZA()()()(),t.TgZ(37,"mat-tab",22)(38,"div",23),t.YNc(39,un,2,1,"div",24),t.TgZ(40,"div",25)(41,"button",26),t.NdJ("click",function(){return n.addOption()}),t.TgZ(42,"mat-icon"),t._uU(43,"add"),t.qZA(),t._uU(44," Add Variant "),t.qZA()()()()()()(),t.TgZ(45,"mat-dialog-actions",27)(46,"button",28),t._uU(47,"Cancel"),t.qZA(),t.TgZ(48,"button",29),t.NdJ("click",function(){return n.saveProduct()}),t._uU(49),t.qZA()()}2&i&&(t.xp6(3),t.Q6J("formGroup",n.productForm),t.xp6(20),t.Q6J("ngForOf",t.WLB(12,_t,t.DdM(10,mn),t.DdM(11,dn))),t.xp6(1),t.Q6J("disabled","new"===n.pageType),t.xp6(3),t.Q6J("ngIf",0===n.product.photos.length),t.xp6(1),t.Q6J("ngForOf",n.product.photos),t.xp6(2),t.Q6J("ngIf",n.uploadProgress),t.xp6(7),t.Q6J("disabled","new"===n.pageType),t.xp6(2),t.Q6J("ngIf",n.options),t.xp6(9),t.Q6J("disabled",n.productForm.invalid),t.xp6(1),t.Oqu(n.isLoading?"Checking..":"Save"))},dependencies:[l.sg,l.O5,x.ey,b.lW,b.RK,S.KE,S.hX,d.Hw,k.Nt,M.gD,$.uX,$.SP,X.pW,s.ZT,s.uh,s.xY,s.H8,g.Rr,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.Q7,a.sg,a.u,a.x0,a.CE,T.xw,T.SQ,T.Wh,T.yH],styles:[".file-input[_ngcontent-%COMP%]{display:none}.product-image[_ngcontent-%COMP%]{overflow:hidden;width:128px;height:128px;margin-right:16px;margin-bottom:16px;border-radius:4px}.product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:auto;max-width:none}.tab-content[_ngcontent-%COMP%]{padding:5px}.mat-dialog-content[_ngcontent-%COMP%]{margin:0!important;padding:0!important}"]})}return o})();var Q=u(5195);function pn(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"mat-card",10)(1,"mat-card-title-group")(2,"mat-card-title"),t._uU(3),t.qZA(),t.TgZ(4,"mat-card-subtitle"),t._uU(5),t.ALo(6,"currency"),t.qZA(),t._UZ(7,"img",11),t.qZA(),t.TgZ(8,"mat-card-content")(9,"p"),t._uU(10),t.qZA()(),t.TgZ(11,"mat-card-actions")(12,"button",12),t.NdJ("click",function(){const c=t.CHM(e).$implicit,f=t.oxw();return t.KtG(f.edit(c))}),t._uU(13,"EDIT"),t.qZA(),t.TgZ(14,"button",13),t.NdJ("click",function(){const n=t.CHM(e),c=n.$implicit,f=n.index,C=t.oxw();return t.KtG(C.removeFood(c,f))}),t._uU(15,"DELETE"),t.qZA(),t.TgZ(16,"button",13),t.NdJ("click",function(){const c=t.CHM(e).$implicit,f=t.oxw();return t.KtG(f.togglePopular(f.store._id,c._id))}),t._uU(17),t.qZA()()()}if(2&o){const e=r.$implicit,i=t.oxw();t.xp6(3),t.Oqu(e.name),t.xp6(2),t.Oqu(t.xi3(6,5,e.price,"N")),t.xp6(2),t.Q6J("src",e.photos.length>0?e.photos[0]:"https://dashboard.heypay.xyz/images/image_placeholder.png",t.LSH),t.xp6(3),t.Oqu(e.description),t.xp6(7),t.Oqu(i.isAdded(e._id)?"REMOVE FROM POPULAR":"ADD TO POPULAR")}}let fn=(()=>{class o{constructor(e,i,n,c){this._matDialog=e,this.storeService=i,this.menuService=n,this._location=c,this.selectedTab=0,this._unsubscribeAll=new rt.x}ngOnInit(){this.store=this.storeService.store,this.menu=this.menuService.menu,this.foods=this.menuService.menu.foods}goBack(){this._location.back()}addTimeToMenu(){this._matDialog.open(gt,{disableClose:!1,data:{storeId:this.store._id,menuId:this.menu._id,food:this.foods,pageType:"new"}}).afterClosed().subscribe(i=>{i&&(this.menuService.onMenuChanged.next(i),this.menuService.getMenu().then(n=>{this.menu=n,this.foods=n.foods}))})}removeFood(e,i){this.confirmDialogRef=this._matDialog.open(v.X,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Item?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete this item from menu?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(n=>{n&&(this.foods.splice(i,1),this.menuService.removeFoodToMenu(e._id,this.menu._id).subscribe(c=>{}))})}isAdded(e){return this.store?.popular?.includes(e)}togglePopular(e,i){this.isAdded(i)?this.storeService.removeItemFromPopular({store:e,item:i}).subscribe(()=>{this.isAdded(i)}):this.storeService.addItemToPopular({store:e,item:i}).subscribe(()=>{this.isAdded(i)})}edit(e){this._matDialog.open(gt,{disableClose:!1,data:{storeId:this.store._id,menuId:this.menu._id,food:this.foods,product:e,pageType:"edit"}}).afterClosed().subscribe(n=>{n&&(this.menuService.onMenuChanged.next(n),this.menuService.getMenu().then(c=>{this.menu=c,this.foods=c.foods}))})}ngOnDestroy(){}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(s.uw),t.Y36(y.d),t.Y36(it.h),t.Y36(l.Ye))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-menu-details"]],decls:21,vars:3,consts:[[2,"height","100vh","position","relative"],["fxLayout","row","fxLayoutAlign","space-between center",1,"header"],["fxLayout","row","fxLayoutAlign","space-between center",1,"mt-3"],["mat-icon-button","",3,"click"],[1,"details"],["mat-raised-button","","fxHide.lt-md","true","color","primary",3,"click"],[1,"mat-18"],["fxLayout.gt-md","row wrap","fxLayout.lt-md","column","fxLayoutAlign.lt-md","start stretch","fxLayoutAlign","start start","fxLayoutGap","10px",2,"margin-top","20px"],["fxFlex.gt-md","24.5%","class","mb-5","fxFlex.lt-md","100%",4,"ngFor","ngForOf"],["mat-fab","","fxHide.lt-md","false","fxHide.gt-md","true","color","primary","align","right",2,"position","fixed","bottom","100px","right","15px",3,"click"],["fxFlex.gt-md","24.5%","fxFlex.lt-md","100%",1,"mb-5"],["mat-card-sm-image","",3,"src"],["mat-button","",3,"click"],["mat-button","","color","warn",3,"click"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),t.NdJ("click",function(){return n.goBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"keyboard_backspace"),t.qZA()(),t.TgZ(6,"div",4)(7,"h2"),t._uU(8),t.qZA(),t.TgZ(9,"p"),t._uU(10),t.qZA()()(),t.TgZ(11,"button",5),t.NdJ("click",function(){return n.addTimeToMenu()}),t.TgZ(12,"mat-icon",6),t._uU(13,"add"),t.qZA(),t._uU(14," Add Item"),t.qZA()(),t._UZ(15,"mat-divider"),t.TgZ(16,"div",7),t.YNc(17,pn,18,8,"mat-card",8),t.qZA(),t.TgZ(18,"button",9),t.NdJ("click",function(){return n.addTimeToMenu()}),t.TgZ(19,"mat-icon",6),t._uU(20,"add"),t.qZA()()()),2&i&&(t.xp6(8),t.Oqu(n.menu.name),t.xp6(2),t.hij("inside ",n.store.name," Menu"),t.xp6(7),t.Q6J("ngForOf",n.foods))},dependencies:[l.sg,Q.a8,Q.hq,Q.dn,Q.vP,Q.$j,Q.n5,Q.C1,b.lW,b.RK,b.cs,d.Hw,j.d,T.xw,T.SQ,T.Wh,T.yH,Z.b8,l.H9],styles:[".header[_ngcontent-%COMP%]{margin-bottom:20px}.header[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0;margin:0}.header[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:0}.example-card[_ngcontent-%COMP%]{width:300px;margin-bottom:10px}"]})}return o})();var vt=u(8952),yt=u(5588),hn=u(3212);const _n=[{path:"list",component:Ot,resolve:{data:m._,merchants:yt.K,categories:vt.e}},{path:":id/explore",component:Ko,resolve:{data:y.d,categories:vt.e,merchants:yt.K,deliveryZones:hn.h}},{path:":id/details/:menuId/menu",component:fn,resolve:{data:y.d,menu:it.h}},{path:"**",redirectTo:"list"}];let gn=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[O.Bz.forChild(_n),O.Bz]})}return o})()},8952:(E,N,u)=>{"use strict";u.d(N,{e:()=>a,i:()=>h});var O=u(5879),v=u(1440);let a=(()=>{class s{constructor(_){this.categoryService=_}resolve(){return this.categoryService.getCategories()}static#t=this.\u0275fac=function(m){return new(m||s)(O.LFG(v.G))};static#e=this.\u0275prov=O.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),h=(()=>{class s{constructor(_){this.categoryService=_}resolve(_){const m=_.paramMap.get("id");return this.categoryService.getCategory(m)}static#t=this.\u0275fac=function(m){return new(m||s)(O.LFG(v.G))};static#e=this.\u0275prov=O.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})()},5588:(E,N,u)=>{"use strict";u.d(N,{K:()=>a,d:()=>h});var O=u(5879),v=u(9293);let a=(()=>{class s{constructor(_){this.merchantService=_}resolve(){return this.merchantService.getMerchants()}static#t=this.\u0275fac=function(m){return new(m||s)(O.LFG(v.S))};static#e=this.\u0275prov=O.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),h=(()=>{class s{constructor(_){this.merchantService=_}resolve(_){const m=_.paramMap.get("id");return this.merchantService.getMerchant(m)}static#t=this.\u0275fac=function(m){return new(m||s)(O.LFG(v.S))};static#e=this.\u0275prov=O.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})()},232:(E,N,u)=>{"use strict";u.d(N,{y:()=>s});var O=u(5619),v=u(553),a=u(5879),h=u(9862);let s=(()=>{class t{constructor(m){this._httpClient=m,this.hostServer=v.N.hostServer,this.onBankChanged=new O.X({})}resolve(m,l){return this.routeParams=m.params,new Promise((x,b)=>{Promise.all([this.getBank()]).then(()=>{x(null)},b)})}getBank(){return new Promise((m,l)=>{this._httpClient.get(`${this.hostServer}/banks/${this.routeParams.id}`).subscribe(x=>{this.bank=x,this.onBankChanged.next(this.bank),m(x)},l)})}getStoreBank(m){return this._httpClient.get(`${this.hostServer}/banks/${m._id}/store`)}resolveBank({accountNumber:m,code:l}){return this._httpClient.get(`${this.hostServer}/banks/resolve?accountNumber=${m}&code=${l}`)}getBanksLists(){return this._httpClient.get(`${this.hostServer}/banks/paystack`)}getBanks(){return this._httpClient.get(`${this.hostServer}/banks`)}addBank(m){return this._httpClient.post(`${this.hostServer}/banks`,m)}updateBank(m,l){return this._httpClient.put(`${this.hostServer}/banks/${l}`,m)}static#t=this.\u0275fac=function(l){return new(l||t)(a.LFG(h.eN))};static#e=this.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac})}return t})()},1440:(E,N,u)=>{"use strict";u.d(N,{G:()=>h});var O=u(553),v=u(5879),a=u(9862);let h=(()=>{class s{constructor(_){this._httpClient=_,this.hostServer=O.N.hostServer}getCategories(){return this._httpClient.get(`${this.hostServer}/categories`)}getCategory(_){return this._httpClient.get(`${this.hostServer}/categories/${_}`)}deleteCategory(_){return this._httpClient.delete(`${this.hostServer}/categories/${_}`)}updateCategory(_,m){return this._httpClient.put(`${this.hostServer}/categories/${_}`,m)}createCategory(_){return this._httpClient.post(`${this.hostServer}/categories`,_)}static#t=this.\u0275fac=function(m){return new(m||s)(v.LFG(a.eN))};static#e=this.\u0275prov=v.Yz7({token:s,factory:s.\u0275fac})}return s})()},7841:(E,N,u)=>{"use strict";u.d(N,{x:()=>h});var O=u(553),v=u(5879),a=u(9862);let h=(()=>{class s{constructor(_){this._httpClient=_,this.hostServer=O.N.hostServer}createCuisine(_){return this._httpClient.post(`${this.hostServer}/cuisines`,_)}getCuisines(){return this._httpClient.get(`${this.hostServer}/cuisines`)}getCuisine(_){return this._httpClient.get(`${this.hostServer}/cuisines/${_}`)}updateCuisine(_,m){return this._httpClient.put(`${this.hostServer}/cuisines/${_}`,m)}deleteCuisine(_){return this._httpClient.delete(`${this.hostServer}/cuisines/${_}`)}static#t=this.\u0275fac=function(m){return new(m||s)(v.LFG(a.eN))};static#e=this.\u0275prov=v.Yz7({token:s,factory:s.\u0275fac})}return s})()},9293:(E,N,u)=>{"use strict";u.d(N,{S:()=>h});var O=u(553),v=u(5879),a=u(9862);let h=(()=>{class s{constructor(_){this._httpClient=_,this.hostServer=O.N.hostServer}getMerchants(){return this._httpClient.get(`${this.hostServer}/merchants`)}getMerchant(_){return this._httpClient.get(`${this.hostServer}/merchants/${_}`)}deleteMerchant(_){return this._httpClient.delete(`${this.hostServer}/merchants/${_}`)}updateMerchant(_,m){return this._httpClient.put(`${this.hostServer}/merchants/${_}`,m)}createMerchant(_){return this._httpClient.post(`${this.hostServer}/merchants`,_)}static#t=this.\u0275fac=function(m){return new(m||s)(v.LFG(a.eN))};static#e=this.\u0275prov=v.Yz7({token:s,factory:s.\u0275fac})}return s})()},7942:(E,N,u)=>{"use strict";u.d(N,{M:()=>s});var O=u(5619),v=u(553),a=u(5879),h=u(9862);let s=(()=>{class t{constructor(m){this._httpClient=m,this.hostServer=v.N.hostServer,this.onProductChanged=new O.X({})}resolve(m,l){return this.routeParams=m.params,new Promise((x,b)=>{Promise.all([this.getProduct()]).then(()=>{x(null)},b)})}getProduct(){return new Promise((m,l)=>{"new"===this.routeParams.id?(this.onProductChanged.next(!1),m(!1)):this._httpClient.get(`${this.hostServer}/foods/${this.routeParams.id}`).subscribe(x=>{this.product=x,this.onProductChanged.next(this.product),m(x)},l)})}uploadPhoto(m,l){return this._httpClient.post(`${this.hostServer}/foods/upload/${l}`,m,{reportProgress:!0,observe:"events"})}saveProduct(m,l){return this._httpClient.put(`${this.hostServer}/foods/${l}`,m)}addProduct(m){return this._httpClient.post(`${this.hostServer}/foods`,m)}static#t=this.\u0275fac=function(l){return new(l||t)(a.LFG(h.eN))};static#e=this.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac})}return t})()},9798:function(E,N,u){var O;E.exports=(O=u(6676),function(v){function a(s){if(h[s])return h[s].exports;var t=h[s]={i:s,l:!1,exports:{}};return v[s].call(t.exports,t,t.exports,a),t.l=!0,t.exports}var h={};return a.m=v,a.c=h,a.i=function(s){return s},a.d=function(s,t,_){a.o(s,t)||Object.defineProperty(s,t,{configurable:!1,enumerable:!0,get:_})},a.n=function(s){var t=s&&s.__esModule?function(){return s.default}:function(){return s};return a.d(t,"a",t),t},a.o=function(s,t){return Object.prototype.hasOwnProperty.call(s,t)},a.p="",a(a.s=3)}([function(v,a,h){"use strict";var s=h(5)();v.exports=function(t){return t!==s&&null!==t}},function(v,a,h){"use strict";v.exports=h(18)()?Symbol:h(20)},function(v,a){v.exports=O},function(v,a,h){"use strict";function s(y){return y&&y.__esModule?y:{default:y}}function t(y,d,p){return d in y?Object.defineProperty(y,d,{value:p,enumerable:!0,configurable:!0,writable:!0}):y[d]=p,y}function l(y){return y.split("/")}Object.defineProperty(a,"__esModule",{value:!0}),a.DateRange=void 0;var x=function(d,p){if(Array.isArray(d))return d;if(Symbol.iterator in Object(d))return function y(d,p){var g=[],Z=!0,A=!1,U=void 0;try{for(var D,F=d[Symbol.iterator]();!(Z=(D=F.next()).done)&&(g.push(D.value),!p||g.length!==p);Z=!0);}catch(P){A=!0,U=P}finally{try{!Z&&F.return&&F.return()}finally{if(A)throw U}}return g}(d,p);throw new TypeError("Invalid attempt to destructure non-iterable instance")},b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(y){return typeof y}:function(y){return y&&"function"==typeof Symbol&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},S=function(){function y(d,p){for(var g=0;g<p.length;g++){var Z=p[g];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(d,Z.key,Z)}}return function(d,p,g){return p&&y(d.prototype,p),g&&y(d,g),d}}();a.extendMoment=function m(y){return y.range=function(d,p){return"string"==typeof d&&L.hasOwnProperty(d)?new q(y(this).startOf(d),y(this).endOf(d)):new q(d,p)},y.rangeFromInterval=function(d){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y();if(y.isMoment(g)||(g=y(g)),!g.isValid())throw new Error("Invalid date.");var Z=g.clone().add(p,d),A=[];return A.push(y.min(g,Z)),A.push(y.max(g,Z)),new q(A)},y.rangeFromISOString=function(d){var p=l(d),g=y.parseZone(p[0]),Z=y.parseZone(p[1]);return new q(g,Z)},y.parseZoneRange=y.rangeFromISOString,y.fn.range=y.range,y.range.constructor=q,y.isRange=function(d){return d instanceof q},y.fn.within=function(d){return d.contains(this.toDate())},y};var M=s(h(2)),I=s(h(1)),L={year:!0,quarter:!0,month:!0,week:!0,day:!0,hour:!0,minute:!0,second:!0},q=a.DateRange=function(){function y(d,p){!function _(y,d){if(!(y instanceof d))throw new TypeError("Cannot call a class as a function")}(this,y);var g=d,Z=p;if(1===arguments.length||void 0===p)if("object"===(void 0===d?"undefined":b(d))&&2===d.length){var A=x(d,2);g=A[0],Z=A[1]}else if("string"==typeof d){var U=l(d),D=x(U,2);g=D[0],Z=D[1]}this.start=(0,M.default)(g||0===g?g:-864e13),this.end=(0,M.default)(Z||0===Z?Z:864e13)}return S(y,[{key:"adjacent",value:function(d){var p=this.start.isSame(d.end),g=this.end.isSame(d.start);return p&&d.start.valueOf()<=this.start.valueOf()||g&&d.end.valueOf()>=this.end.valueOf()}},{key:"add",value:function(d){return this.overlaps(d,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{adjacent:!1})?new this.constructor(M.default.min(this.start,d.start),M.default.max(this.end,d.end)):null}},{key:"by",value:function(d){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{excludeEnd:!1,step:1},g=this;return t({},I.default.iterator,function(){var Z=p.step||1,A=Math.abs(g.start.diff(g.end,d))/Z,U=p.excludeEnd||!1,D=0;return p.hasOwnProperty("exclusive")&&(U=p.exclusive),{next:function(){var F=g.start.clone().add(D*Z,d),P=U?!(D<A):!(D<=A);return D++,{done:P,value:P?void 0:F}}}})}},{key:"byRange",value:function(d){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{excludeEnd:!1,step:1},g=this,Z=p.step||1,A=this.valueOf()/d.valueOf()/Z,U=Math.floor(A),D=p.excludeEnd||!1,F=0;return p.hasOwnProperty("exclusive")&&(D=p.exclusive),t({},I.default.iterator,function(){return U===1/0?{done:!0}:{next:function(){var P=(0,M.default)(g.start.valueOf()+d.valueOf()*F*Z),Y=U===A&&D?!(F<U):!(F<=U);return F++,{done:Y,value:Y?void 0:P}}}})}},{key:"center",value:function(){var d=this.start.valueOf()+this.diff()/2;return(0,M.default)(d)}},{key:"clone",value:function(){return new this.constructor(this.start.clone(),this.end.clone())}},{key:"contains",value:function(d){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{excludeStart:!1,excludeEnd:!1},g=this.start.valueOf(),Z=this.end.valueOf(),A=d.valueOf(),U=d.valueOf(),D=p.excludeStart||!1,F=p.excludeEnd||!1;return p.hasOwnProperty("exclusive")&&(D=F=p.exclusive),d instanceof y&&(A=d.start.valueOf(),U=d.end.valueOf()),(g<A||g<=A&&!D)&&(Z>U||Z>=U&&!F)}},{key:"diff",value:function(d,p){return this.end.diff(this.start,d,p)}},{key:"duration",value:function(d,p){return this.diff(d,p)}},{key:"intersect",value:function(d){var p=this.start.valueOf(),g=this.end.valueOf(),Z=d.start.valueOf(),A=d.end.valueOf(),D=Z==A;if(p==g){if(p==Z||p==A)return null;if(p>Z&&p<A)return this.clone()}else if(D){if(Z==p||Z==g)return null;if(Z>p&&Z<g)return new this.constructor(Z,Z)}return p<=Z&&Z<g&&g<A?new this.constructor(Z,g):Z<p&&p<A&&A<=g?new this.constructor(p,A):Z<p&&p<=g&&g<A?this.clone():p<=Z&&Z<=A&&A<=g?new this.constructor(Z,A):null}},{key:"isEqual",value:function(d){return this.start.isSame(d.start)&&this.end.isSame(d.end)}},{key:"isSame",value:function(d){return this.isEqual(d)}},{key:"overlaps",value:function(d){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{adjacent:!1},g=null!==this.intersect(d);return p.adjacent&&!g?this.adjacent(d):g}},{key:"reverseBy",value:function(d){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{excludeStart:!1,step:1},g=this;return t({},I.default.iterator,function(){var Z=p.step||1,A=Math.abs(g.start.diff(g.end,d))/Z,U=p.excludeStart||!1,D=0;return p.hasOwnProperty("exclusive")&&(U=p.exclusive),{next:function(){var F=g.end.clone().subtract(D*Z,d),P=U?!(D<A):!(D<=A);return D++,{done:P,value:P?void 0:F}}}})}},{key:"reverseByRange",value:function(d){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{excludeStart:!1,step:1},g=this,Z=p.step||1,A=this.valueOf()/d.valueOf()/Z,U=Math.floor(A),D=p.excludeStart||!1,F=0;return p.hasOwnProperty("exclusive")&&(D=p.exclusive),t({},I.default.iterator,function(){return U===1/0?{done:!0}:{next:function(){var P=(0,M.default)(g.end.valueOf()-d.valueOf()*F*Z),Y=U===A&&D?!(F<U):!(F<=U);return F++,{done:Y,value:Y?void 0:P}}}})}},{key:"snapTo",value:function(d){var p=this.clone();return p.start.isSame((0,M.default)(-864e13))||(p.start=p.start.startOf(d)),p.end.isSame((0,M.default)(864e13))||(p.end=p.end.endOf(d)),p}},{key:"subtract",value:function(d){var p=this.start.valueOf(),g=this.end.valueOf(),Z=d.start.valueOf(),A=d.end.valueOf();return null===this.intersect(d)?[this]:Z<=p&&p<g&&g<=A?[]:Z<=p&&p<A&&A<g?[new this.constructor(A,g)]:p<Z&&Z<g&&g<=A?[new this.constructor(p,Z)]:p<Z&&Z<A&&A<g?[new this.constructor(p,Z),new this.constructor(A,g)]:p<Z&&Z<g&&A<g?[new this.constructor(p,Z),new this.constructor(Z,g)]:[]}},{key:"toDate",value:function(){return[this.start.toDate(),this.end.toDate()]}},{key:"toString",value:function(){return this.start.format()+"/"+this.end.format()}},{key:"valueOf",value:function(){return this.end.valueOf()-this.start.valueOf()}}]),y}()},function(v,a,h){"use strict";var s,t=h(6),_=h(13),m=h(9),l=h(15);s=v.exports=function(x,b){var S,k,M,T,I;return arguments.length<2||"string"!=typeof x?(T=b,b=x,x=null):T=arguments[2],null==x?(S=M=!0,k=!1):(S=l.call(x,"c"),k=l.call(x,"e"),M=l.call(x,"w")),I={value:b,configurable:S,enumerable:k,writable:M},T?t(_(T),I):I},s.gs=function(x,b,S){var k,M,T,I;return"string"!=typeof x?(T=S,S=b,b=x,x=null):T=arguments[3],null==b?b=void 0:m(b)?null==S?S=void 0:m(S)||(T=S,S=void 0):(T=b,b=S=void 0),null==x?(k=!0,M=!1):(k=l.call(x,"c"),M=l.call(x,"e")),I={get:b,set:S,configurable:k,enumerable:M},T?t(_(T),I):I}},function(v,a,h){"use strict";v.exports=function(){}},function(v,a,h){"use strict";v.exports=h(7)()?Object.assign:h(8)},function(v,a,h){"use strict";v.exports=function(){var s,t=Object.assign;return"function"==typeof t&&(t(s={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),s.foo+s.bar+s.trzy==="razdwatrzy")}},function(v,a,h){"use strict";var s=h(10),t=h(14),_=Math.max;v.exports=function(m,l){var x,b,S,k=_(arguments.length,2);for(m=Object(t(m)),S=function(M){try{m[M]=l[M]}catch(T){x||(x=T)}},b=1;b<k;++b)s(l=arguments[b]).forEach(S);if(void 0!==x)throw x;return m}},function(v,a,h){"use strict";v.exports=function(s){return"function"==typeof s}},function(v,a,h){"use strict";v.exports=h(11)()?Object.keys:h(12)},function(v,a,h){"use strict";v.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},function(v,a,h){"use strict";var s=h(0),t=Object.keys;v.exports=function(_){return t(s(_)?Object(_):_)}},function(v,a,h){"use strict";var s=h(0),t=Array.prototype.forEach,_=Object.create;v.exports=function(l){var x=_(null);return t.call(arguments,function(b){s(b)&&function(l,x){var b;for(b in l)x[b]=l[b]}(Object(b),x)}),x}},function(v,a,h){"use strict";var s=h(0);v.exports=function(t){if(!s(t))throw new TypeError("Cannot use null or undefined");return t}},function(v,a,h){"use strict";v.exports=h(16)()?String.prototype.contains:h(17)},function(v,a,h){"use strict";var s="razdwatrzy";v.exports=function(){return"function"==typeof s.contains&&!0===s.contains("dwa")&&!1===s.contains("foo")}},function(v,a,h){"use strict";var s=String.prototype.indexOf;v.exports=function(t){return s.call(this,t,arguments[1])>-1}},function(v,a,h){"use strict";var s={object:!0,symbol:!0};v.exports=function(){var t;if("function"!=typeof Symbol)return!1;t=Symbol("test symbol");try{String(t)}catch{return!1}return!!s[typeof Symbol.iterator]&&!!s[typeof Symbol.toPrimitive]&&!!s[typeof Symbol.toStringTag]}},function(v,a,h){"use strict";v.exports=function(s){return!!s&&("symbol"==typeof s||!!s.constructor&&"Symbol"===s.constructor.name&&"Symbol"===s[s.constructor.toStringTag])}},function(v,a,h){"use strict";var s,t,_,m,l=h(4),x=h(21),b=Object.create,S=Object.defineProperties,k=Object.defineProperty,M=Object.prototype,T=b(null);if("function"==typeof Symbol){s=Symbol;try{String(s()),m=!0}catch{}}var L,I=(L=b(null),function(q){for(var y,d,p=0;L[q+(p||"")];)++p;return L[q+=p||""]=!0,k(M,y="@@"+q,l.gs(null,function(g){d||(d=!0,k(this,y,l(g)),d=!1)})),y});_=function(L){if(this instanceof _)throw new TypeError("Symbol is not a constructor");return t(L)},v.exports=t=function L(q){var y;if(this instanceof L)throw new TypeError("Symbol is not a constructor");return m?s(q):(y=b(_.prototype),q=void 0===q?"":String(q),S(y,{__description__:l("",q),__name__:l("",I(q))}))},S(t,{for:l(function(L){return T[L]?T[L]:T[L]=t(String(L))}),keyFor:l(function(L){var q;for(q in x(L),T)if(T[q]===L)return q}),hasInstance:l("",s&&s.hasInstance||t("hasInstance")),isConcatSpreadable:l("",s&&s.isConcatSpreadable||t("isConcatSpreadable")),iterator:l("",s&&s.iterator||t("iterator")),match:l("",s&&s.match||t("match")),replace:l("",s&&s.replace||t("replace")),search:l("",s&&s.search||t("search")),species:l("",s&&s.species||t("species")),split:l("",s&&s.split||t("split")),toPrimitive:l("",s&&s.toPrimitive||t("toPrimitive")),toStringTag:l("",s&&s.toStringTag||t("toStringTag")),unscopables:l("",s&&s.unscopables||t("unscopables"))}),S(_.prototype,{constructor:l(t),toString:l("",function(){return this.__name__})}),S(t.prototype,{toString:l(function(){return"Symbol ("+x(this).__description__+")"}),valueOf:l(function(){return x(this)})}),k(t.prototype,t.toPrimitive,l("",function(){var L=x(this);return"symbol"==typeof L?L:L.toString()})),k(t.prototype,t.toStringTag,l("c","Symbol")),k(_.prototype,t.toStringTag,l("c",t.prototype[t.toStringTag])),k(_.prototype,t.toPrimitive,l("c",t.prototype[t.toPrimitive]))},function(v,a,h){"use strict";var s=h(19);v.exports=function(t){if(!s(t))throw new TypeError(t+" is not a symbol");return t}}]))}}]);