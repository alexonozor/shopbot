"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[3806],{3806:(A,S,n)=>{n.r(S),n.d(S,{STORE_ROUTING:()=>W});var t=n(4020),F=n(5117),c=n(5351),E=n(1269),i=n(9417),I=n(980),m=n(636),v=n(2798),u=n(9631),T=n(6924),h=n(8834),d=n(177),j=n(3664),D=n(3),b=n(2920);function L(s,p){if(1&s&&(t.j41(0,"mat-option",11),t.EFF(1),t.k0s()),2&s){const e=p.$implicit;t.Y8G("value",e._id),t.R7$(),t.JRh(e.name)}}let N=(()=>{class s{constructor(e,r,o,a,l){this._formBuilder=e,this.auth=r,this.storeService=o,this.dialogRef=a,this.data=l,this.isLoading=!1}ngOnInit(){this.storeForm=this.createProductForm()}createProductForm(){return this._formBuilder.group({name:["",i.k0.required],owner:[this.auth.getUser._id,i.k0.required],merchant:["",i.k0.required],description:["",i.k0.required]})}save(){this.isLoading=!0,this.storeService.createStore(this.storeForm.getRawValue()).pipe((0,I.j)(()=>this.isLoading=!1)).subscribe(e=>{this.isLoading=!0,this.dialogRef.close(!0)})}static{this.\u0275fac=function(r){return new(r||s)(t.rXU(i.ok),t.rXU(j.u),t.rXU(F.a),t.rXU(c.CP),t.rXU(c.Vh))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-add-stores"]],decls:22,vars:4,consts:[["matDialogTitle",""],["mat-dialog-content",""],["name","storeForm","fxLayout","column","fxFlex","",1,"product","w-100-p",3,"formGroup"],["appearance","fill","floatLabel","always",1,"w-100-p"],["matInput","","cancellation","Product Name","name","name","formControlName","name","required",""],["matInput","","cancellation","Product Description","name","description","formControlName","description","rows","5"],["formControlName","merchant"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions","",1,"pt-24"],["mat-button","","mat-dialog-close",""],["mat-raised-button","",1,"mat-accent","mr-16",3,"click","disabled"],[3,"value"]],template:function(r,o){1&r&&(t.j41(0,"h1",0),t.EFF(1,"Add Store"),t.k0s(),t.j41(2,"div",1)(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),t.EFF(6,"Name"),t.k0s(),t.nrm(7,"input",4),t.k0s(),t.j41(8,"mat-form-field",3)(9,"mat-label"),t.EFF(10,"Description"),t.k0s(),t.nrm(11,"textarea",5),t.k0s(),t.j41(12,"mat-form-field",3)(13,"mat-label"),t.EFF(14,"Select Merchant"),t.k0s(),t.j41(15,"mat-select",6),t.DNE(16,L,2,2,"mat-option",7),t.k0s()()()(),t.j41(17,"div",8)(18,"button",9),t.EFF(19,"Cancel"),t.k0s(),t.j41(20,"button",10),t.bIt("click",function(){return o.save()}),t.EFF(21),t.k0s()()),2&r&&(t.R7$(3),t.Y8G("formGroup",o.storeForm),t.R7$(13),t.Y8G("ngForOf",o.data),t.R7$(4),t.Y8G("disabled",!o.storeForm.valid),t.R7$(),t.JRh(o.isLoading?"Please wait..":"Create Store"))},dependencies:[i.X1,i.qT,i.me,i.BC,i.cb,i.YS,i.j4,i.JD,i.YN,m.RG,m.rl,m.nJ,v.Ve,v.VO,D.wT,u.fS,u.fg,T.YF,b.DJ,b.UI,h.Hl,h.$z,d.MD,d.Sq,c.hM,c.tx,c.BI,c.E7,c.Yi],encapsulation:2})}}return s})();var f=n(8498),C=n(450),R=n(5749),G=n(5473),M=n(9079),k=n(9213),g=n(9115);const O=()=>({standalone:!0}),B=s=>["../",s,"explore"],V=s=>[s];function X(s,p){if(1&s){const e=t.RV6();t.j41(0,"button",26),t.bIt("click",function(){t.eBV(e);const o=t.XpG(),a=o.$implicit,l=o.index,J=t.XpG();return t.Njj(J.delete(l,a._id))}),t.j41(1,"mat-icon"),t.EFF(2,"delete"),t.k0s(),t.EFF(3," Delete"),t.k0s()}}function $(s,p){if(1&s){const e=t.RV6();t.j41(0,"tr",16)(1,"th",17),t.nrm(2,"img",18),t.j41(3,"div",19)(4,"div",20),t.EFF(5),t.k0s(),t.j41(6,"div",21),t.EFF(7),t.k0s()()(),t.j41(8,"td",22)(9,"div",20),t.EFF(10),t.nI1(11,"currency"),t.k0s()(),t.j41(12,"td",22)(13,"mat-slide-toggle",23),t.mxI("ngModelChange",function(o){const a=t.eBV(e).$implicit;return t.DH7(a.featured,o)||(a.featured=o),t.Njj(o)}),t.bIt("click",function(o){return t.eBV(e),t.Njj(o.stopPropagation())})("change",function(o){const a=t.eBV(e).$implicit,l=t.XpG();return t.Njj(l.onChangeFeatured(a,o))}),t.k0s()(),t.j41(14,"td",22)(15,"mat-slide-toggle",23),t.mxI("ngModelChange",function(o){const a=t.eBV(e).$implicit;return t.DH7(a.active,o)||(a.active=o),t.Njj(o)}),t.bIt("click",function(o){return t.eBV(e),t.Njj(o.stopPropagation())})("change",function(o){const a=t.eBV(e).$implicit,l=t.XpG();return t.Njj(l.onChange(a,o))}),t.k0s()(),t.j41(16,"td",22)(17,"button",24),t.bIt("click",function(o){return t.eBV(e),t.Njj(o.stopPropagation())}),t.j41(18,"mat-icon"),t.EFF(19,"more_vert"),t.k0s()(),t.j41(20,"mat-menu",null,0),t.DNE(22,X,4,0,"button",25),t.j41(23,"button",26),t.bIt("click",function(){const o=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.viewDetails(o))}),t.j41(24,"mat-icon"),t.EFF(25,"edit"),t.k0s(),t.EFF(26," Edit "),t.k0s()()()()}if(2&s){const e=p.$implicit,r=t.sdS(21),o=t.XpG();t.Y8G("routerLink",t.eq3(13,B,e._id)),t.R7$(2),t.Y8G("src",e.logo,t.B4B),t.R7$(3),t.JRh(e.name),t.R7$(2),t.Lme("",e.contactInfo.state," ",e.contactInfo.country,""),t.R7$(3),t.JRh(t.i5U(11,10,e.walletBalance,e.currency)),t.R7$(3),t.R50("ngModel",e.featured),t.R7$(2),t.R50("ngModel",e.active),t.R7$(2),t.Y8G("matMenuTriggerFor",r),t.R7$(5),t.Y8G("ngIf",o.auth.isShow(t.eq3(15,V,o.Role.SuperAdmin)))}}let Y=(()=>{class s{transform(e,r=""){return e.filter(o=>o.name.toLowerCase().indexOf(r.toLowerCase())>=0)}static{this.\u0275fac=function(r){return new(r||s)}}static{this.\u0275pipe=t.EJ8({name:"filterByName",type:s,pure:!0})}}return s})(),U=(()=>{class s{constructor(){this.storesService=(0,t.WQX)(F.a),this.storeService=(0,t.WQX)(R.n),this._matDialog=(0,t.WQX)(c.bZ),this.router=(0,t.WQX)(f.Ix),this.route=(0,t.WQX)(f.nX),this.fb=(0,t.WQX)(i.ok),this.auth=(0,t.WQX)(j.u),this.merchants=this.route.snapshot.data.merchants,this.categories=this.route.snapshot.data.categories,this.filterForm=this.fb.group({active:[!0],category:[""],contactInfo:this.fb.group({country:[""]})}),this.stores=this.storesService.stores||[],this.formValue=(0,M.ot)(this.filterForm.valueChanges),this.Role=G.X}ngOnInit(){this.filterForm.valueChanges.subscribe(e=>{this.applyFilters()})}delete(e,r){this.confirmDialogRef=this._matDialog.open(E.Y,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Store?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete this store?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(o=>{o&&this.storesService.deleteStore(e,r).subscribe(),this.confirmDialogRef=null})}addNewStore(){this._matDialog.open(N,{width:"500px",disableClose:!1,data:this.merchants}).afterClosed().subscribe(r=>{r&&this.storesService.getUserStores({}).then(()=>{this.stores=this.storesService.stores})})}filterSet(){this.filterForm.valueChanges.subscribe(e=>{this.storesService.getUserStores({data:{$match:{...this.filterObject(e)}},control:[{$sort:{createdAt:-1}}]}).then(()=>{this.stores=this.storesService.stores})})}clearFilerSet(){}filterObject(e){return Object.fromEntries(Object.entries(e).filter(([r,o])=>null!=o&&""!==o))}applyFilters(){const r=this.filterObject(this.filterForm.value);console.log(r)}clearFilters(){this.filterForm.reset(),this.name=""}onChange(e,r){this.storeService.saveStore({approve:r.checked,active:r.checked},e._id).subscribe(()=>{})}onChangeFeatured(e,r){this.storeService.saveStore({featured:r.checked},e._id).subscribe(()=>{})}viewDetails(e){this.router.navigate(["dashboard","stores",e._id,"explore"])}static{this.\u0275fac=function(r){return new(r||s)}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-list-stores"]],decls:33,vars:8,consts:[["menu","matMenu"],[1,"p-4"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-xl","font-semibold","text-gray-800"],["mat-raised-button","","color","primary",3,"click"],[1,"mr-2"],[1,"mb-6",3,"formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4"],["appearance","outline",1,"w-full"],["matInput","","placeholder","Search store name",3,"ngModelChange","ngModel","ngModelOptions"],["matPrefix","",1,"text-gray-400"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","text-gray-500"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50"],["scope","col",1,"px-6","py-3"],["class","bg-white border-b  hover:bg-gray-50 ",3,"routerLink",4,"ngFor","ngForOf"],[1,"bg-white","border-b","hover:bg-gray-50",3,"routerLink"],["scope","row",1,"flex","items-center","px-6","py-4","text-gray-900","whitespace-nowrap"],[1,"w-10","h-10","rounded-full",3,"src"],[1,"pl-3"],[1,"text-base","font-semibold"],[1,"font-normal","truncate","text-gray-500"],[1,"px-6","py-4"],["color","primary",1,"mx-8",3,"ngModelChange","click","change","ngModel"],["mat-icon-button","",3,"click","matMenuTriggerFor"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"]],template:function(r,o){1&r&&(t.j41(0,"div",1)(1,"div",2)(2,"h2",3),t.EFF(3,"Stores"),t.k0s(),t.j41(4,"button",4),t.bIt("click",function(){return o.addNewStore()}),t.j41(5,"mat-icon",5),t.EFF(6,"add"),t.k0s(),t.EFF(7," Create New Store "),t.k0s()(),t.j41(8,"form",6)(9,"div",7)(10,"mat-form-field",8)(11,"mat-label"),t.EFF(12,"Store Name"),t.k0s(),t.j41(13,"input",9),t.mxI("ngModelChange",function(l){return t.DH7(o.name,l)||(o.name=l),l}),t.k0s(),t.j41(14,"mat-icon",10),t.EFF(15,"search"),t.k0s()()()(),t.j41(16,"div",11)(17,"table",12)(18,"thead",13)(19,"tr")(20,"th",14),t.EFF(21," Vendor Profile "),t.k0s(),t.j41(22,"th",14),t.EFF(23," Wallet Balance "),t.k0s(),t.j41(24,"th",14),t.EFF(25," Featured "),t.k0s(),t.j41(26,"th",14),t.EFF(27," Enabled "),t.k0s(),t.j41(28,"th",14),t.EFF(29," Action "),t.k0s()()(),t.j41(30,"tbody"),t.DNE(31,$,27,17,"tr",15),t.nI1(32,"filterByName"),t.k0s()()()()),2&r&&(t.R7$(8),t.Y8G("formGroup",o.filterForm),t.R7$(5),t.R50("ngModel",o.name),t.Y8G("ngModelOptions",t.lJ4(7,O)),t.R7$(18),t.Y8G("ngForOf",t.i5U(32,4,o.stores,o.name)))},dependencies:[d.MD,d.Sq,d.bT,d.oe,k.m_,k.An,i.YN,i.qT,i.me,i.BC,i.cb,i.vS,i.X1,i.j4,m.RG,m.rl,m.nJ,m.JW,v.Ve,f.iI,f.Wk,g.Cn,g.kk,g.fb,g.Cp,Y,C.mV,C.sG,u.fS,u.fg,h.Hl,h.$z,h.iY],styles:[".title[_ngcontent-%COMP%]{font-weight:400;font-size:18px;margin:10px 0!important}.status[_ngcontent-%COMP%]{color:#3f51b5;font-size:14px!important}"]})}}return s})();var y=n(3802),x=n(1379),P=n(4e3);const W=[{path:"list",component:U,resolve:{data:F.a,merchants:x.W,categories:y.n}},{path:":id",loadChildren:()=>Promise.all([n.e(6850),n.e(3339)]).then(n.bind(n,3339)).then(s=>s.STORE_ROUTE),resolve:{store:(()=>{class s{constructor(e){this.storeService=e}resolve(e){const r=e.paramMap.get("id");return this.storeService.getStore(r)}static{this.\u0275fac=function(r){return new(r||s)(t.KVO(R.n))}}static{this.\u0275prov=t.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),categories:y.n,merchants:x.W,deliveryZones:P.K}},{path:"**",redirectTo:"list"}]}}]);