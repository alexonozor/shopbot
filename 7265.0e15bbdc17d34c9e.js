"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[7265],{7265:(O,j,a)=>{a.r(j),a.d(j,{PRODUCT_CATEGORY_ROUTE:()=>G});var R=a(6354),y=a(1269),u=a(2390),h=a(8498),p=a(177),x=a(1875),i=a(9417),r=a(5351),F=a(3664),C=a(6924),E=a(980),f=a(636),g=a(9631),c=a(8834),t=a(4020),d=a(2920);let D=(()=>{class s{constructor(e,n,o,l,m){this._formBuilder=e,this.auth=n,this.menusService=o,this.dialogRef=l,this.data=m,this.isLoading=!1}ngOnInit(){this.menuForm=this.createMenuForm()}createMenuForm(){return this._formBuilder.group({name:["",i.k0.required],store:[this.data.storeId,i.k0.required],activate:[!1,i.k0.required]})}save(){this.isLoading=!0,this.menusService.createMenu(this.menuForm.getRawValue()).pipe((0,E.j)(()=>this.isLoading=!1)).subscribe(e=>{console.log(e),this.isLoading=!0,this.dialogRef.close(!0)})}static{this.\u0275fac=function(n){return new(n||s)(t.rXU(i.ok),t.rXU(F.u),t.rXU(u.g),t.rXU(r.CP),t.rXU(r.Vh))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-add-menus"]],features:[t.Jv_([F.u,u.g])],decls:13,vars:4,consts:[["matDialogTitle",""],[1,"mat-typography"],["name","menuForm","fxLayout","column","fxFlex","",1,"product","w-100",3,"formGroup"],["appearance","fill","floatLabel","always",1,"w-100-p"],["matInput","","cancellation","Name","name","name","formControlName","name","required",""],["align","end"],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"click","mat-dialog-close","disabled"]],template:function(n,o){1&n&&(t.j41(0,"h1",0),t.EFF(1,"Add Category"),t.k0s(),t.j41(2,"mat-dialog-content",1)(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),t.EFF(6,"Name"),t.k0s(),t.nrm(7,"input",4),t.k0s()()(),t.j41(8,"mat-dialog-actions",5)(9,"button",6),t.EFF(10,"Cancel"),t.k0s(),t.j41(11,"button",7),t.bIt("click",function(){return o.save()}),t.EFF(12),t.k0s()()),2&n&&(t.R7$(3),t.Y8G("formGroup",o.menuForm),t.R7$(8),t.Y8G("mat-dialog-close",!0)("disabled",!o.menuForm.valid),t.R7$(),t.JRh(o.isLoading?"Please wait..":"Save"))},dependencies:[C.YF,d.DJ,d.UI,p.MD,i.YN,i.qT,i.me,i.BC,i.cb,i.YS,i.X1,i.j4,i.JD,r.hM,r.tx,r.BI,r.E7,r.Yi,f.RG,f.rl,f.nJ,g.fS,g.fg,c.Hl,c.$z],encapsulation:2})}}return s})();var k=a(9213),b=a(450);let I=(()=>{class s{constructor(e,n,o,l){this._formBuilder=e,this.menusService=n,this.dialogRef=o,this.data=l,this.isLoading=!1,this.storeId=this.data.storeId,this.menu=this.data.menu}ngOnInit(){this.menuForm=this.createMenuForm()}createMenuForm(){return this._formBuilder.group({name:[this.menu.name,i.k0.required],store:[this.storeId,i.k0.required],activate:[this.menu.activate,i.k0.required]})}save(){this.isLoading=!0,this.menusService.updateMenu(this.menu._id,this.menuForm.getRawValue()).pipe((0,E.j)(()=>this.isLoading=!1)).subscribe(e=>{this.isLoading=!0,this.dialogRef.close(!0)})}static{this.\u0275fac=function(n){return new(n||s)(t.rXU(i.ok),t.rXU(u.g),t.rXU(r.CP),t.rXU(r.Vh))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-edit-menus"]],features:[t.Jv_([F.u,u.g])],decls:15,vars:4,consts:[["matDialogTitle",""],[1,"mat-typography"],["name","menuForm","fxLayout","column","fxFlex","",1,"product","w-100",3,"formGroup"],["appearance","fill","floatLabel","always",1,"w-100-p"],["matInput","","cancellation","Name","name","name","formControlName","name","required",""],["formControlName","activate"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"click","mat-dialog-close","disabled"]],template:function(n,o){1&n&&(t.j41(0,"h1",0),t.EFF(1,"Edit Category"),t.k0s(),t.j41(2,"mat-dialog-content",1)(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),t.EFF(6,"Name"),t.k0s(),t.nrm(7,"input",4),t.k0s(),t.j41(8,"mat-slide-toggle",5),t.EFF(9,"Published"),t.k0s()()(),t.j41(10,"mat-dialog-actions",6)(11,"button",7),t.EFF(12,"Cancel"),t.k0s(),t.j41(13,"button",8),t.bIt("click",function(){return o.save()}),t.EFF(14),t.k0s()()),2&n&&(t.R7$(3),t.Y8G("formGroup",o.menuForm),t.R7$(10),t.Y8G("mat-dialog-close",!0)("disabled",!o.menuForm.valid),t.R7$(),t.JRh(o.isLoading?"Please wait..":"Update"))},dependencies:[C.YF,d.DJ,d.UI,r.hM,r.tx,r.BI,r.E7,r.Yi,p.MD,i.YN,i.qT,i.me,i.BC,i.cb,i.YS,i.X1,i.j4,i.JD,k.m_,f.RG,f.rl,f.nJ,c.Hl,c.$z,b.mV,b.sG,g.fS,g.fg],encapsulation:2})}}return s})();var v=a(9115);const S=s=>["../",s,"details"];function T(s,M){1&s&&t.nrm(0,"div",16)}function L(s,M){if(1&s){const e=t.RV6();t.j41(0,"div",6)(1,"div",7)(2,"mat-icon",8),t.EFF(3,"reorder"),t.k0s(),t.j41(4,"div",9)(5,"span",10),t.EFF(6),t.k0s(),t.j41(7,"span",11),t.EFF(8),t.k0s()()(),t.j41(9,"mat-slide-toggle",12),t.bIt("change",function(o){const l=t.eBV(e).$implicit,m=t.XpG(2);return t.Njj(m.updateEnabled(o,l))})("click",function(o){return t.eBV(e),t.Njj(o.stopPropagation())}),t.EFF(10,"Published"),t.k0s(),t.j41(11,"div")(12,"button",13),t.bIt("click",function(o){return t.eBV(e),t.Njj(o.stopPropagation())}),t.j41(13,"mat-icon"),t.EFF(14,"more_vert"),t.k0s()(),t.j41(15,"mat-menu",null,0)(17,"button",14),t.bIt("click",function(){const o=t.eBV(e),l=o.$implicit,m=o.index,U=t.XpG(2);return t.Njj(U.delete(m,l._id))}),t.j41(18,"mat-icon"),t.EFF(19,"delete"),t.k0s(),t.EFF(20," Delete"),t.k0s(),t.j41(21,"button",14),t.bIt("click",function(){const o=t.eBV(e).$implicit,l=t.XpG(2);return t.Njj(l.openEdit(o))}),t.j41(22,"mat-icon"),t.EFF(23,"edit"),t.k0s(),t.EFF(24," Edit"),t.k0s()()(),t.DNE(25,T,1,0,"div",15),t.k0s()}if(2&s){const e=M.$implicit,n=t.sdS(16);t.Y8G("routerLink",t.eq3(5,S,e._id)),t.R7$(6),t.JRh(e.name),t.R7$(2),t.SpI(" ",e.items," Items "),t.R7$(),t.Y8G("checked",e.activate),t.R7$(3),t.Y8G("matMenuTriggerFor",n)}}function _(s,M){if(1&s){const e=t.RV6();t.j41(0,"div",2)(1,"h2"),t.EFF(2,"All Categories"),t.k0s(),t.j41(3,"div")(4,"button",3),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.addMenu())}),t.EFF(5,"Add Category"),t.k0s()()(),t.j41(6,"div",4),t.bIt("cdkDropListDropped",function(o){t.eBV(e);const l=t.XpG();return t.Njj(l.drop(o))}),t.DNE(7,L,26,7,"div",5),t.k0s()}if(2&s){const e=t.XpG();t.R7$(7),t.Y8G("ngForOf",e.menus)}}const G=[{path:"list",component:(()=>{class s{constructor(e,n,o,l,m){this.menusService=e,this._matDialog=n,this.router=o,this.route=l,this._location=m,this.menus=[],this.store=this.route.parent?.parent?.parent?.parent?.parent?.snapshot.data.store}ngOnInit(){this.loadMenus()}loadMenus(){this.menus$=this.menusService.getStoreMenus(this.store._id).pipe((0,R.T)(e=>this.menus=e))}updateEnabled(e,n){this.menusService.updateMenu(n._id,{activate:e.checked}).subscribe(),setTimeout(()=>{n.activate=e.checked},100)}delete(e,n){this.confirmDialogRef=this._matDialog.open(y.Y,{disableClose:!1}),this.confirmDialogRef.componentInstance.title="Delete Menu?",this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete this menu?",this.confirmDialogRef.componentInstance.confirmButton="Delete",this.confirmDialogRef.afterClosed().subscribe(o=>{o&&this.menusService.deleteMenu(e,n).subscribe(()=>{this.loadMenus()}),this.confirmDialogRef=null})}addMenu(){this._matDialog.open(D,{disableClose:!1,data:{storeId:this.store._id}}).afterClosed().subscribe(n=>{n&&this.loadMenus()})}openEdit(e){this._matDialog.open(I,{disableClose:!1,data:{storeId:this.store._id,menu:e}}).afterClosed().subscribe(o=>{o&&this.loadMenus()})}viewMenu(e){this.router.navigate(["../",e,"details"])}goBack(){this._location.back()}drop(e){(0,x.HD)(this.menus,e.previousIndex,e.currentIndex),this.menus.forEach((n,o)=>{this.menusService.updateMenu(n._id,{position:o}).subscribe()})}static{this.\u0275fac=function(n){return new(n||s)(t.rXU(u.g),t.rXU(r.bZ),t.rXU(h.Ix),t.rXU(h.nX),t.rXU(p.aZ))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-store-menus-tab"]],features:[t.Jv_([u.g])],decls:3,vars:3,consts:[["menu2","matMenu"],[1,"relative","overflow-x-auto","p-3","h-screen","shadow-md","sm:rounded-lg"],["fxLayout","row","fxLayoutAlign","space-between start",1,"p-3"],["mat-raised-button","","color","primary",3,"click"],["cdkDropList","",1,"example-list",3,"cdkDropListDropped"],["class","example-box","fxLayout","row","fxLayoutAlign","space-between center","matRipple","","cdkDrag","",3,"routerLink",4,"ngFor","ngForCdkDropList","ngForOf"],["fxLayout","row","fxLayoutAlign","space-between center","matRipple","","cdkDrag","",1,"example-box",3,"routerLink"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"max-w-[150px]","w-[150px]"],["mat-list-icon","",1,"cursor-move"],["fxLayout","column","fxLayoutAlign","start start"],[1,"leading-none","text-lg","mb-1"],[1,"leading-none"],[3,"change","click","checked"],["mat-icon-button","",3,"click","matMenuTriggerFor"],["mat-menu-item","",3,"click"],["class","example-custom-placeholder",4,"cdkDragPlaceholder"],[1,"example-custom-placeholder"]],template:function(n,o){1&n&&(t.j41(0,"div",1),t.DNE(1,_,8,1),t.nI1(2,"async"),t.k0s()),2&n&&(t.R7$(),t.vxM(t.bMT(2,1,o.menus$)?1:-1))},dependencies:[p.MD,p.Sq,p.Jj,v.Cn,v.kk,v.fb,v.Cp,k.m_,k.An,b.mV,b.sG,C.YF,d.DJ,d.BO,d.sA,i.YN,h.iI,h.Wk,x.O7,x.T1,c.Hl,c.$z,c.iY],styles:[".example-list[_ngcontent-%COMP%]{width:100%;border:solid 1px #ccc;min-height:60px;display:block;background:#fff;border-radius:4px;overflow:hidden}.example-box[_ngcontent-%COMP%]{padding:20px 10px;border-bottom:solid 1px #ccc;color:#000000de;display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:pointer;background:#fff;font-size:14px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.example-custom-placeholder[_ngcontent-%COMP%]{background:#ccc;border:dotted 3px #999;min-height:60px;transition:transform .25s cubic-bezier(0,0,.2,1)}"]})}}return s})()},{path:":categoryId/details",loadChildren:()=>Promise.all([a.e(6998),a.e(3617),a.e(1268)]).then(a.bind(a,1268)).then(s=>s.STORE_CATEGORY_DETAILS_ROUTE)},{path:"**",pathMatch:"full",redirectTo:"list"}]}}]);