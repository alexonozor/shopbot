"use strict";(self.webpackChunkshopbot=self.webpackChunkshopbot||[]).push([[592],{437:(p,u,r)=>{r.d(u,{D:()=>R});var n=r(6223),o=r(7700),c=r(6028),e=r(5879),s=r(712),a=r(6814),t=r(3680),m=r(2296),g=r(9157),E=r(2032),D=r(8525),f=r(3814);function C(l,h){1&l&&e.GkF(0)}function M(l,h){if(1&l&&(e.TgZ(0,"mat-option",14),e._uU(1),e.qZA()),2&l){const i=h.$implicit;e.Q6J("value",i),e.xp6(1),e.hij(" ",i," ")}}const P=function(){return["Registered Customers","Unregistered Customers","Both"]};function O(l,h){1&l&&(e.TgZ(0,"mat-form-field")(1,"mat-label"),e._uU(2,"Select Recipients"),e.qZA(),e.TgZ(3,"mat-select",13),e.YNc(4,M,2,2,"mat-option",8),e.qZA()()),2&l&&(e.xp6(4),e.Q6J("ngForOf",e.DdM(1,P)))}function y(l,h){if(1&l&&(e.TgZ(0,"mat-option",14),e._uU(1),e.qZA()),2&l){const i=h.$implicit;e.Q6J("value",i),e.xp6(1),e.Oqu(i)}}const T=function(){return["Notification","Email","Both"]};let R=(()=>{class l{constructor(i,_,v,d){this.fb=i,this.notificationsService=_,this.dialogRef=v,this.data=d,this.messagesForm=this.fb.group({title:["",n.kI.required],body:["",n.kI.required],recipients:this.fb.array([]),type:["",n.kI.required],recipientsType:[""]}),this.addOnBlur=!0,this.separatorKeysCodes=[c.K5,c.OC],this.recipientsData=[]}ngOnInit(){this.data.allCustomers||(this.data.isBulkMsg?(this.recipientsData=this.data.customers,this.recipientsData.forEach(i=>{i.phoneCredentials.length>0&&this.addRecipients(i)})):(this.recipientsData.push(this.data.customers),this.recipientsData.map(i=>this.addRecipients(i))))}get recipients(){return this.messagesForm.controls.recipients}addRecipients(i){const _=this.fb.group({name:[i.name],id:[i._id],phoneToken:[i.phoneCredentials]});this.recipients.push(_)}deleteRecipient(i){this.recipients.removeAt(i)}submit(){this.notificationsService.createNotification(this.messagesForm.getRawValue()).subscribe(i=>{this.dialogRef.close(i)})}add(i){const _=(i.value||"").trim();_&&this.recipientsData.push({name:_}),i.chipInput.clear()}remove(i){const _=this.recipientsData.indexOf(i);_>=0&&this.recipientsData.splice(_,1)}edit(i,_){const v=_.value.trim();if(!v)return void this.remove(i);const d=this.recipientsData.indexOf(i);d>0&&(this.recipientsData[d].name=v)}}return l.\u0275fac=function(i){return new(i||l)(e.Y36(n.qu),e.Y36(s.T),e.Y36(o.so),e.Y36(o.WI))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-create-messages"]],decls:25,vars:7,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["fxLayout","column","fxLayoutAlign","space-around stretch",3,"formGroup"],[4,"ngIf","ngIfElse"],["selectRecipient",""],["appearance","fill"],["matInput","","placeholder","Enter Message Title","formControlName","title"],["formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Enter Message Body","rows","20","formControlName","body"],["mat-dialog-actions",""],["mat-button","",3,"mat-dialog-close"],["mat-button","","cdkFocusInitial","",3,"disabled","click"],["formControlName","recipientsType"],[3,"value"]],template:function(i,_){if(1&i&&(e.TgZ(0,"h1",0),e._uU(1,"Send Notification"),e.qZA(),e.TgZ(2,"div",1)(3,"form",2),e.YNc(4,C,1,0,"ng-container",3),e.YNc(5,O,5,2,"ng-template",null,4,e.W1O),e.TgZ(7,"mat-form-field",5)(8,"mat-label"),e._uU(9,"Title"),e.qZA(),e._UZ(10,"input",6),e.qZA(),e.TgZ(11,"mat-form-field",5)(12,"mat-label"),e._uU(13,"Select Message Type"),e.qZA(),e.TgZ(14,"mat-select",7),e.YNc(15,y,2,2,"mat-option",8),e.qZA()(),e.TgZ(16,"mat-form-field",5)(17,"mat-label"),e._uU(18,"body"),e.qZA(),e._UZ(19,"textarea",9),e.qZA()()(),e.TgZ(20,"div",10)(21,"button",11),e._uU(22,"Cancel"),e.qZA(),e.TgZ(23,"button",12),e.NdJ("click",function(){return _.submit()}),e._uU(24,"Send"),e.qZA()()),2&i){const v=e.MAs(6);e.xp6(3),e.Q6J("formGroup",_.messagesForm),e.xp6(1),e.Q6J("ngIf",!_.data.allCustomers)("ngIfElse",v),e.xp6(11),e.Q6J("ngForOf",e.DdM(6,T)),e.xp6(6),e.Q6J("mat-dialog-close",null),e.xp6(2),e.Q6J("disabled",_.messagesForm.invalid)}},dependencies:[a.sg,a.O5,t.ey,m.lW,g.KE,g.hX,E.Nt,D.gD,o.ZT,o.uh,o.xY,o.H8,f.xw,f.Wh,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u]}),l})()},3212:(p,u,r)=>{r.d(u,{g:()=>e,h:()=>c});var n=r(5879),o=r(547);let c=(()=>{class s{constructor(t){this.deliveryService=t}resolve(){return this.deliveryService.getDeliveryZones()}}return s.\u0275fac=function(t){return new(t||s)(n.LFG(o._))},s.\u0275prov=n.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),e=(()=>{class s{constructor(t){this.deliveryService=t}resolve(t){const m=t.paramMap.get("id");return this.deliveryService.getDeliveryZone(m)}}return s.\u0275fac=function(t){return new(t||s)(n.LFG(o._))},s.\u0275prov=n.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},1423:(p,u,r)=>{r.d(u,{T:()=>c,f:()=>e});var n=r(5879),o=r(9329);let c=(()=>{class s{constructor(t){this.permissionService=t}resolve(){return this.permissionService.getPermissions()}}return s.\u0275fac=function(t){return new(t||s)(n.LFG(o.$))},s.\u0275prov=n.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),e=(()=>{class s{constructor(t){this.permissionService=t}resolve(t){const m=t.paramMap.get("id");return this.permissionService.getPermission(m)}}return s.\u0275fac=function(t){return new(t||s)(n.LFG(o.$))},s.\u0275prov=n.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},547:(p,u,r)=>{r.d(u,{_:()=>e});var n=r(553),o=r(5879),c=r(9862);let e=(()=>{class s{constructor(t){this._httpClient=t,this.hostServer=n.N.hostServer}createDeliveryZone(t){return this._httpClient.post(`${this.hostServer}/delivery-zones`,t)}getDeliveryZones(){return this._httpClient.get(`${this.hostServer}/delivery-zones`)}getDeliveryZone(t){return this._httpClient.get(`${this.hostServer}/delivery-zones/${t}`)}deleteDeliveryZone(t){return this._httpClient.delete(`${this.hostServer}/delivery-zones/${t}`)}updateDeliveryZone(t,m){return this._httpClient.put(`${this.hostServer}/delivery-zones/${t}`,m)}}return s.\u0275fac=function(t){return new(t||s)(o.LFG(c.eN))},s.\u0275prov=o.Yz7({token:s,factory:s.\u0275fac}),s})()},9329:(p,u,r)=>{r.d(u,{$:()=>e});var n=r(553),o=r(5879),c=r(9862);let e=(()=>{class s{constructor(t){this._httpClient=t,this.hostServer=n.N.hostServer}createPermission(t){return this._httpClient.post(`${this.hostServer}/roles`,t)}getPermissions(){return this._httpClient.get(`${this.hostServer}/roles`)}getPermission(t){return this._httpClient.get(`${this.hostServer}/roles/${t}`)}updatePermission(t,m){return this._httpClient.put(`${this.hostServer}/roles/${t}`,m)}deletePermission(t){return this._httpClient.delete(`${this.hostServer}/roles/${t}`)}}return s.\u0275fac=function(t){return new(t||s)(o.LFG(c.eN))},s.\u0275prov=o.Yz7({token:s,factory:s.\u0275fac}),s})()},1803:(p,u,r)=>{r.d(u,{f:()=>e});var n=r(553),o=r(5879),c=r(9862);let e=(()=>{class s{constructor(t){this._httpClient=t,this.hostServer=n.N.hostServer}getUsers(){return this._httpClient.get(`${this.hostServer}/users`)}getUser(t){return this._httpClient.get(`${this.hostServer}/users/${t}`)}deleteUser(t){return this._httpClient.delete(`${this.hostServer}/users/${t}`)}updateUser(t,m){return this._httpClient.put(`${this.hostServer}/users/${t}`,m)}}return s.\u0275fac=function(t){return new(t||s)(o.LFG(c.eN))},s.\u0275prov=o.Yz7({token:s,factory:s.\u0275fac}),s})()}}]);